"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[11560,21964,63733,89646,95327],{23105:(e,t,r)=>{r.d(t,{RouteLayerInteraction:()=>w});var i=r(35143),a=r(91967),s=r(54901),o=r(30726),n=r(68134),l=r(46053),c=(r(81806),r(76460),r(47249),r(85842)),p=r(19451),h=r(63733),d=r(57562),y=r(26170),u=r(95808),g=r(75747),v=r(81257);function b(e,t){e.networkFeature=t}function f(e){return e.networkFeature}function m(e){return"point"===e?.type||"polyline"===e?.type||"polygon"===e?.type}let w=class extends a.default{constructor(e){super(e),this._createMode=null,this._graphicsLayer=new h.default({internal:!0,listMode:"hide",title:"Banana"}),this._updatingHandles=new p.U,this.enabled=!0,this._handleSketchViewModelEvents=async e=>{switch(e.type){case"update":switch(e.state){case"active":case"complete":for(const t of e.graphics)f(t).geometry=m(t.geometry)?t.geometry.clone():null}break;case"undo":case"redo":break;case"delete":for(const t of e.graphics){const e=f(t);this._removeNetworkFeature(e)}break;case"create":if(e.graphic&&"complete"===e.state&&this._createMode){const t=e.graphic.geometry?.clone(),r=e.graphic.symbol?.clone();if(!t)break;switch(this._createMode){case"stop":{if("point"!==t.type)break;const{stops:r}=this.layer;if(r.length>0&&r.every((e=>{let{geometry:t}=e;return!t}))){r.at(0).geometry=t;break}if(r.length>1&&r.filter(((e,t)=>0!==t)).every((e=>{let{geometry:t}=e;return!t}))){r.at(1).geometry=t;break}const i=new g.default({geometry:t});r.add(i),b(e.graphic,i);break}case"point-barrier":{if("point"!==t.type)break;const i=new d.default({geometry:t,symbol:r});this.layer.pointBarriers.add(i),b(e.graphic,i);break}case"polyline-barrier":{if("polyline"!==t.type)break;const i=new u.default({geometry:t,symbol:r});this.layer.polylineBarriers.add(i),b(e.graphic,i);break}case"polygon-barrier":{if("polygon"!==t.type)break;const i=new y.default({geometry:t,symbol:r});this.layer.polygonBarriers.add(i),b(e.graphic,i);break}}}}(await this.view.whenLayerView(this.layer)).emit(e.type,"create"===e.type?function(e){const t=f(e.graphic);return{...e,networkFeature:t}}(e):function(e){const t=e.graphics.map((e=>f(e)));return{...e,networkFeatures:t}}(e))}}initialize(){this._sketchViewModel=new v.default({layer:this._graphicsLayer,view:this.view}),this.addHandles([(0,n.watch)((()=>this.enabled),(e=>{e?this._activate():this._deactivate()}),n.initial),(0,n.watch)((()=>{const{stops:e,pointBarriers:t,polylineBarriers:r,polygonBarriers:i}=this.layer;return{stops:e,pointBarriers:t,polylineBarriers:r,polygonBarriers:i}}),(()=>{this.enabled&&this._loadClonedGraphics()})),this._sketchViewModel.on(["create","delete","redo","undo","update"],this._handleSketchViewModelEvents),(0,s.DQ)(this._updatingHandles)])}destroy(){this.view.map.remove(this._graphicsLayer),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,o.pR)(this._graphicsLayer),this._sketchViewModel=(0,o.pR)(this._sketchViewModel)}get selectedNetworkFeatures(){return this._sketchViewModel.updateGraphics.map((e=>f(e)))}get updating(){return this._updatingHandles.updating}create(e){switch(this._createMode=e,e){case"stop":this.layer.defaultSymbols.stops?.unlocated&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.stops.unlocated.clone());break;case"point-barrier":this.layer.defaultSymbols.pointBarriers&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.pointBarriers.clone());break;case"polyline-barrier":this.layer.defaultSymbols.polylineBarriers&&(this._sketchViewModel.polylineSymbol=this.layer.defaultSymbols.polylineBarriers.clone());break;case"polygon-barrier":this.layer.defaultSymbols.polygonBarriers&&(this._sketchViewModel.polygonSymbol=this.layer.defaultSymbols.polygonBarriers.clone())}switch(e){case"stop":case"point-barrier":return this._sketchViewModel.create("point");case"polyline-barrier":return this._sketchViewModel.create("polyline");case"polygon-barrier":return this._sketchViewModel.create("polygon")}}remove(e){const t=this._graphicsLayer.graphics.find((t=>f(t)===e));t&&this._graphicsLayer.remove(t),this._removeNetworkFeature(e)}_activate(){this._loadClonedGraphics(),this.view.map.add(this._graphicsLayer)}_deactivate(){this._sketchViewModel.cancel(),this.view.map?.remove(this._graphicsLayer),this._graphicsLayer.removeAll()}_loadClonedGraphics(){const e=[this.layer.stops,this.layer.pointBarriers,this.layer.polylineBarriers,this.layer.polygonBarriers].flatMap((e=>e.toArray().map((e=>{const t=e.toGraphic();return t.networkFeature=e,t}))));this._graphicsLayer.removeAll().addMany(e)}_removeNetworkFeature(e){switch(e.type){case"stop":this.layer.stops.remove(e);break;case"point-barrier":this.layer.pointBarriers.remove(e);break;case"polyline-barrier":this.layer.polylineBarriers.remove(e);break;case"polygon-barrier":this.layer.polygonBarriers.remove(e)}}};(0,i._)([(0,l.MZ)()],w.prototype,"enabled",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],w.prototype,"layer",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],w.prototype,"selectedNetworkFeatures",null),(0,i._)([(0,l.MZ)()],w.prototype,"updating",null),(0,i._)([(0,l.MZ)({constructOnly:!0})],w.prototype,"view",void 0),w=(0,i._)([(0,c.$)("esri.views.2d.layers.support.RouteLayerInteraction")],w)},63733:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var i=r(35143),a=r(46053),s=(r(81806),r(76460),r(47249),r(85842)),o=r(5364),n=r(25515),l=r(65624),c=r(5682),p=r(64519),h=r(731);let d=class extends((0,l.dM)((0,c.j)(n.default))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new p.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,i._)([(0,a.MZ)({type:h.A})],d.prototype,"elevationInfo",void 0),(0,i._)([(0,a.MZ)((0,o.C)(p.Y,"graphics"))],d.prototype,"graphics",void 0),(0,i._)([(0,a.MZ)({type:["show","hide"]})],d.prototype,"listMode",void 0),(0,i._)([(0,a.MZ)()],d.prototype,"screenSizePerspectiveEnabled",void 0),(0,i._)([(0,a.MZ)({readOnly:!0})],d.prototype,"type",void 0),(0,i._)([(0,a.MZ)({constructOnly:!0})],d.prototype,"internal",void 0),d=(0,i._)([(0,s.$)("esri.layers.GraphicsLayer")],d);const y=d},89646:(e,t,r)=>{r.d(t,{$h:()=>g,Ef:()=>B,IP:()=>b,P1:()=>_,hF:()=>M,jQ:()=>w,rT:()=>k,rZ:()=>i,uR:()=>f});var i,a,s=r(73582),o=r(24648),n=r(31633),l=r(19555),c=r(72745),p=r(20664),h=r(9392),d=r(14487),y=r(7137),u=r(80963);function g(e,t){if(null==e||null==t)return;const r=v(e,t);return null!=r?(0,o.Wq)(r,"radians","geographic"):void 0}(a=i||(i={})).Absolute="absolute",a.Relative="relative",a.RelativeBilateral="relative-bilateral";const v=(()=>{const e=(0,h.vt)(),t=(0,h.vt)();return(r,i)=>((0,p.i)(e,r.x,r.y,r.z??0),(0,p.i)(t,i.x,i.y,i.z??0),b(e,t,r.spatialReference,i.spatialReference))})(),b=(()=>{const e=(0,c.vt)(),t=(0,h.vt)(),r=(0,h.vt)();return(i,a,s,o)=>{if((0,p.p)(i,a))return;const h=(0,y.geodesicCompatibleSpatialReference)(s),g=(0,y.geodesicCompatibleSpatialReference)(o);if(h&&g&&(0,u.aI)(h,g)&&(0,d.F)(i,s,t,h)&&(0,d.F)(a,o,r,g)){const{azimuth:e}=(0,y.inverseGeodeticSolver)(R,t,r,h);return null!=e?(0,n.oU)(e,"degrees","radians"):void 0}e[0]=a[0]-i[0],e[1]=a[1]-i[1];let v=(0,l.g7)(c.JP,e);return e[0]<0&&(v=L-v),v}})();function f(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.Absolute;if(t&&r)switch(a){case i.Absolute:return g(t,r);case i.Relative:return w(m(e,t,r),i.Relative);case i.RelativeBilateral:return w(m(e,t,r),i.RelativeBilateral)}}function m(e,t,r){if(!e||!t||!r)return;const i=v(e,t),a=v(t,r);return null!=i&&null!=a?(0,o.Wq)(a-i,"radians","geographic"):void 0}function w(e,t){if(null!=e)switch(t){case i.Absolute:return _(e);case i.Relative:{const t=M(e);let r=F.normalize(t,0,!0);return-180===r&&(r=180),(0,o.Wq)(r,"degrees","geographic")}case i.RelativeBilateral:{const t=M(e),r=Math.abs(F.normalize(t,0,!0));return(0,o.Wq)(r,"degrees","geographic")}}}function _(e){const t=M(e),r=V.normalize(t,0,!0);return(0,o.Wq)(r,"degrees","geographic")}const k=(()=>{const e=(0,h.vt)();return function(t,r,i,a,s){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"geodesic";(0,p.c)(e,r);const c=M(s);if("geodesic"===l){const s=(0,y.geodesicCompatibleSpatialReference)(i);if(s&&(0,d.F)(e,i,e,s))return(0,y.directGeodeticSolver)(t,e,c,a,s),t[2]=r[2],!!(0,d.F)(t,s,t,i)}const h=(0,o.g2)(c,"geographic","arithmetic"),u=(0,n.oU)(h,"degrees","radians"),g=r[0]+a*Math.cos(u),v=r[1]+a*Math.sin(u),b=r[2];return(0,p.i)(t,g,v,b),!0}})();function M(e){if(null!=e)return(0,o.g2)(S(e),e.rotationType,"geographic")}function B(e){if(null!=e)return(0,o.g2)(S(e),e.rotationType,"arithmetic")}function S(e){return(0,n.oU)(e.value,e.unit,"degrees")}const R=new y.InverseGeodeticSolverResult,L=2*Math.PI,V=s.ie,F=new s.hr(-180,180)},95327:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var i=r(35143),a=r(91967),s=r(46053),o=(r(81806),r(76460),r(47249),r(85842));let n=class extends a.default{constructor(e){super(e),this.enabled=!1}};(0,i._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],n.prototype,"enabled",void 0),n=(0,i._)([(0,o.$)("esri.views.interactive.sketch.SketchLabelOptions")],n);const l=n}}]);
//# sourceMappingURL=11560.0fbeb69f.chunk.js.map