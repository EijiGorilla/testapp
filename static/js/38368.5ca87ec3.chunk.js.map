{"version":3,"file":"static/js/38368.5ca87ec3.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/support/mediaLayerUtils.js","../node_modules/@arcgis/core/views/2d/layers/MediaLayerView2D.js","../node_modules/@arcgis/core/views/3d/layers/support/MediaLayerInteractionOptions.js","../node_modules/@arcgis/core/views/layers/MediaLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst n=Symbol(\"ImageElementInstance\"),e=Symbol(\"VideoElementInstance\");function t(e){return null!=e&&\"object\"==typeof e&&n in e}function o(n){return null!=n&&\"object\"==typeof n&&e in n}function c(n){return t(n)||o(n)}export{n as ImageElementSymbol,e as VideoElementSymbol,t as isImageElement,c as isMediaElement,o as isVideoElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../Graphic.js\";import t from\"../../../core/Collection.js\";import i from\"../../../core/Error.js\";import\"../../../core/has.js\";import s from\"../../../core/Logger.js\";import{getOrCreateMapValue as r}from\"../../../core/MapUtils.js\";import{isAbortError as o}from\"../../../core/promiseUtils.js\";import{watch as n,on as l,syncAndInitial as m}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../geometry/Extent.js\";import{create as h}from\"../../../geometry/support/aaBoundingRect.js\";import{ringsContainsCoords as d}from\"../../../geometry/support/contains.js\";import{extentIntersectsPolygon as g}from\"../../../geometry/support/intersectsBase.js\";import{MediaElementView as u}from\"../../../layers/support/MediaElementView.js\";import\"../../../renderers/SimpleRenderer.js\";import\"../../../symbols/SimpleFillSymbol.js\";import\"../../../core/scheduling.js\";import\"../../../core/accessorSupport/tracking/Flags.js\";import\"../../../core/colorUtils.js\";import\"../../../config.js\";import\"../../../symbols/cim/defaultCIMValues.js\";import\"../../../symbols/cim/enums.js\";import\"../../../core/floatRGBA.js\";import\"../../../geometry/Geometry.js\";import\"../../../geometry/Multipoint.js\";import\"../../../geometry/Point.js\";import\"../../../geometry/Polygon.js\";import\"../../../geometry/Polyline.js\";import\"../engine/webgl/definitions.js\";import\"../engine/webgl/animations/instructions.js\";import\"../../../symbols/Font.js\";import\"../../../core/mathUtils.js\";import\"../../../core/ObjectPool.js\";import\"../../../geometry/support/Axis.js\";import\"../../../geometry/support/spatialReferenceUtils.js\";import\"../../../geometry/support/TileClipper.js\";import\"../../../symbols/cim/effects/EffectAddControlPoints.js\";import\"../../../symbols/cim/effects/EffectArrow.js\";import\"../../../symbols/cim/effects/EffectBuffer.js\";import\"../../../symbols/cim/effects/EffectControlMeasureLine.js\";import\"../../../symbols/cim/effects/EffectCut.js\";import\"../../../symbols/cim/effects/EffectDashes.js\";import\"../../../symbols/cim/effects/EffectDonut.js\";import\"../../../symbols/cim/effects/EffectJog.js\";import\"../../../symbols/cim/effects/EffectMove.js\";import\"../../../symbols/cim/effects/EffectOffset.js\";import\"../../../symbols/cim/effects/EffectReverse.js\";import\"../../../symbols/cim/effects/EffectRotate.js\";import\"../../../symbols/cim/effects/EffectScale.js\";import\"../../../symbols/cim/effects/EffectWave.js\";import\"../../../symbols/cim/placements/PlacementAlongLineSameSize.js\";import\"../../../symbols/cim/placements/PlacementAtExtremities.js\";import\"../../../symbols/cim/placements/PlacementAtRatioPositions.js\";import\"../../../symbols/cim/placements/PlacementInsidePolygon.js\";import\"../../../symbols/cim/placements/PlacementOnLine.js\";import\"../../../symbols/cim/placements/PlacementOnVertices.js\";import\"../../../symbols/cim/placements/PlacementPolygonCenter.js\";import\"../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import\"../engine/webgl/alignmentUtils.js\";import\"../../../symbols/support/defaults.js\";import\"../../../symbols/cim/OverrideHelper.js\";import\"../../../layers/effects/EffectView.js\";import\"../../../core/Evented.js\";import\"../engine/transitions/FadeTransition.js\";import\"../engine/webgl/enums.js\";import\"../../../core/libs/gl-matrix-2/factories/vec4f32.js\";import\"../../webgl/enums.js\";import\"../engine/webgl/shaders/BackgroundPrograms.js\";import\"../../webgl/checkWebGLError.js\";import\"../engine/webgl/DefaultVertexAttributeLayouts.js\";import\"../engine/webgl/AFeatureTile.js\";import\"../engine/webgl/DisplayEntity.js\";import\"../engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js\";import\"../engine/webgl/number.js\";import\"../engine/webgl/PooledUint32Array.js\";import\"../engine/webgl/shaders/TileInfoPrograms.js\";import\"../../webgl/Texture.js\";import\"../engine/vectorTiles/style/StyleDefinition.js\";import\"../engine/vectorTiles/enums.js\";import\"../engine/webgl/shaders/BitBlitPrograms.js\";import\"../../../request.js\";import\"../../../core/urlUtils.js\";import\"../../../core/pbf.js\";import\"../engine/webgl/shaders/StencilPrograms.js\";import\"../engine/webgl/shaderGraph/techniques/TechniqueType.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/BlendShader.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/OpacityShader.js\";import\"../engine/webgl/shaders/HighlightPrograms.js\";import\"../../webgl/FramebufferObject.js\";import\"../engine/webgl/meshing/SimpleMesh.js\";import\"../../webgl/GLObjectType.js\";import\"../engine/webgl/Profiler.js\";import\"../engine/webgl/shaderGraph/techniques/TechniqueRegistry.js\";import\"../../../Color.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/constants.js\";import\"../engine/webgl/shaderGraph/techniques/dotDensity/DotDensityMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/ComplexFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/ComplexOutlineFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/FillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/GradientFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/OutlineFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/PatternFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/fill/PatternOutlineFillMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/heatmap/HeatmapMeshWriter.js\";import\"../../../geometry/support/aaBoundingBox.js\";import\"../engine/webgl/shaderGraph/techniques/text/TextMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/line/GradientStrokeMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/line/LineMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/line/TexturedLineMeshWriter.js\";import\"../engine/webgl/shaderGraph/techniques/markers/MarkerMeshWriter.js\";import\"../../../arcade/ArcadeDate.js\";import\"../../../geometry/SpatialReference.js\";import\"../engine/webgl/shaderGraph/techniques/pieChart/PieChartMeshWriter.js\";import\"../../webgl/renderState.js\";import\"../../3d/webgl-engine/core/shaderModules/glsl.js\";import\"../../webgl/testSVGPremultipliedAlpha.js\";import\"../LabelManager.js\";import\"./graphics/GraphicsView2D.js\";import\"../../../chunks/earcut.js\";import\"../../../core/libs/gl-matrix-2/factories/vec3f32.js\";import\"../../../geometry/support/normalizeUtilsCommon.js\";import\"../../../geometry/support/Ellipsoid.js\";import\"../../../kernel.js\";import\"./support/util.js\";import\"../navigation/MapViewNavigation.js\";import\"../../../core/asyncUtils.js\";import\"../../../core/support/UpdatingHandles.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/MagnifierShader.js\";import\"../../../core/unitUtils.js\";import\"../../../geometry/ellipsoidUtils.js\";import\"../../../chunks/pe.js\";import\"../../../geometry/projection/projectors.js\";import\"../engine/webgl/shaderGraph/techniques/shaders/GridShader.js\";import\"../../../geometry/support/geodesicConstants.js\";import\"../tiling/TileInfoView.js\";import\"../tiling/TileKey.js\";import f from\"../tiling/TileQueue.js\";import y from\"../tiling/TileStrategy.js\";import j from\"../engine/webgl/Overlay.js\";import b from\"../engine/webgl/OverlayContainer.js\";import{LayerView2DMixin as w}from\"./LayerView2D.js\";import _ from\"../../layers/LayerView.js\";import v from\"../../layers/MediaLayerView.js\";import{TaskPriority as E}from\"../../support/Scheduler.js\";let G=class extends(w(v(_))){constructor(){super(...arguments),this._overlayContainer=null,this._fetchQueue=null,this._tileStrategy=null,this._elementReferences=new Map,this._debugGraphicsView=null,this._interaction=null,this.layer=null,this.elements=new t}initialize(){this.addHandles([n((()=>[this.interactive,this.suspended]),(async()=>{if(this.interactive&&!this._interaction){const{MediaLayerInteraction:e}=await import(\"./support/MediaLayerInteraction.js\");this._interaction=new e({view:this.view,layer:this.layer}),this.selectedElement!==this._interaction.selectedElement&&(this._interaction.selectedElement=this.selectedElement),this.interactionOptions!==this._interaction.options&&(this._interaction.options=this.interactionOptions)}this._interaction&&(this._interaction.enabled=!this.suspended&&this.interactive)}),m),n((()=>this.interactionOptions),(e=>{this._interaction&&(this._interaction.options=e)}),m),n((()=>this.selectedElement),(e=>{this._interaction&&(this._interaction.selectedElement=e)}),m)])}attach(){this.addAttachHandles([l((()=>this.layer.effectiveSource),\"refresh\",(()=>{this._tileStrategy.refresh((e=>this._updateTile(e))),this.requestUpdate()})),l((()=>this.layer.effectiveSource),\"change\",(({element:e})=>this._elementUpdateHandler(e)))]),this._overlayContainer=new b,this.container.addChild(this._overlayContainer),this._fetchQueue=new f({tileInfoView:this.view.featuresTilingScheme,concurrency:10,process:(e,t)=>this._queryElements(e,t),scheduler:this.scheduler,priority:E.MAPVIEW_FETCH_QUEUE}),this._tileStrategy=new y({cachePolicy:\"purge\",resampling:!0,acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme}),this.requestUpdate()}detach(){this.elements.removeAll(),this._tileStrategy.destroy(),this._fetchQueue.destroy(),this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this._elementReferences.clear(),this._debugGraphicsView?.destroy()}supportsSpatialReference(e){return!0}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}update(e){this._tileStrategy.update(e),this._debugGraphicsView?.update(e)}async hitTest(e,t){const i=[],s=e.normalize(),r=[s.x,s.y];for(const{elementView:{normalizedCoords:o,element:n}}of this._elementReferences.values())null!=o&&d(o.rings,r)&&i.push({type:\"media\",element:n,layer:this.layer,mapPoint:e,sourcePoint:n.toSource(e)});return i.reverse()}canResume(){return null!=this.layer.source&&super.canResume()}async doRefresh(){this._fetchQueue.reset(),this._tileStrategy.refresh((e=>this._updateTile(e)))}_acquireTile(e){const t=new C(e.clone());return this._updateTile(t),t}_updateTile(e){this._updatingHandles.addPromise(this._fetchQueue.push(e.key).then((t=>{const[i,s]=e.setElements(t);this._referenceElements(e,i),this._dereferenceElements(e,s),this.requestUpdate()}),(e=>{o(e)||s.getLogger(this).error(e)})))}_releaseTile(e){this._fetchQueue.abort(e.key.id),e.elements&&this._dereferenceElements(e,e.elements),this.requestUpdate()}async _queryElements(e,t){const i=this.layer.effectiveSource;if(null==i)return[];this.view.featuresTilingScheme.getTileBounds(S,e,!0);const s=new p({xmin:S[0],ymin:S[1],xmax:S[2],ymax:S[3],spatialReference:this.view.spatialReference});return i.queryElements(s,t)}_referenceElements(e,t){if(null!=this.layer.source)for(const i of t)this._referenceElement(e,i)}_referenceElement(e,t){r(this._elementReferences,t.uid,(()=>{const e=new u({element:t,spatialReference:this.view.spatialReference}),r=new j(e);return this._overlayContainer.addChild(r),this.elements.add(t),this._updatingHandles.addPromise(t.load().catch((e=>{s.getLogger(\"esri.views.2d.layers.MediaLayerView2D\").error(new i(\"element-load-error\",\"Element cannot be displayed\",{element:t,error:e}))}))),{debugGraphic:null,elementView:e,overlay:r,tiles:new Set}})).tiles.add(e)}_dereferenceElements(e,t){for(const i of t)this._dereferenceElement(e,i)}_dereferenceElement(e,t){const i=this._elementReferences.get(t.uid);i.tiles.delete(e),i.tiles.size||(this._overlayContainer.removeChild(i.overlay),i.overlay.destroy(),i.elementView.destroy(),this._elementReferences.delete(t.uid),this.elements.remove(t),this._debugGraphicsView?.graphics.remove(i.debugGraphic))}_elementUpdateHandler(e){let t=this._elementReferences.get(e.uid);if(t){const i=t.elementView.normalizedCoords;if(null==i)return this._overlayContainer.removeChild(t.overlay),t.overlay.destroy(),t.elementView.destroy(),this._elementReferences.delete(e.uid),this.elements.remove(e),void this._debugGraphicsView?.graphics.remove(t.debugGraphic);const s=[],r=[];for(const e of this._tileStrategy.tiles){const o=T(this.view.featuresTilingScheme,e,i);t.tiles.has(e)?o||r.push(e):o&&s.push(e)}for(const t of s)this._referenceElement(t,e);for(const t of r)this._dereferenceElement(t,e);return t=this._elementReferences.get(e.uid),void(t?.debugGraphic&&(t.debugGraphic.geometry=t.elementView.normalizedCoords,this._debugGraphicsView.graphicUpdateHandler({graphic:t.debugGraphic,property:\"geometry\"})))}const i=new u({element:e,spatialReference:this.view.spatialReference}).normalizedCoords;if(null!=i)for(const s of this._tileStrategy.tiles){T(this.view.featuresTilingScheme,s,i)&&this._referenceElement(s,e)}}};e([a()],G.prototype,\"layer\",void 0),e([a({readOnly:!0})],G.prototype,\"elements\",void 0),G=e([c(\"esri.views.2d.layers.MediaLayerView2D\")],G);const S=h(),q={xmin:0,ymin:0,xmax:0,ymax:0};function T(e,t,i){return e.getTileBounds(S,t.key,!0),q.xmin=S[0],q.ymin=S[1],q.xmax=S[2],q.ymax=S[3],g(q,i)}class C{constructor(e){this.key=e,this.elements=null,this.isReady=!1,this.visible=!0}setElements(e){const t=[],i=new Set(this.elements);this.elements=e;for(const s of e)i.has(s)?i.delete(s):t.push(s);return this.isReady=!0,[t,Array.from(i)]}destroy(){}}const M=G;export{M as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";let t=class extends r{constructor(o){super(o),this.editSourcePoints=!1}};o([s()],t.prototype,\"editSourcePoints\",void 0),t=o([e(\"esri.views.3d.layers.support.MediaLayerInteractionOptions.ReshapeOptions\")],t);let p=class extends r{constructor(o){super(o),this.tool=\"transform\",this.reshapeOptions=new t}};o([s()],p.prototype,\"tool\",void 0),o([s({type:t})],p.prototype,\"reshapeOptions\",void 0),p=o([e(\"esri.views.3d.layers.support.MediaLayerInteractionOptions\")],p);export{p as MediaLayerInteractionOptions};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import{MediaLayerInteractionOptions as o}from\"../3d/layers/support/MediaLayerInteractionOptions.js\";const s=s=>{let i=class extends s{constructor(...e){super(...e),this.layer=null,this.interactive=!1,this.interactionOptions=new o,this.selectedElement=null}highlight(e,t){throw new Error(\"missing implementation\")}};return e([t()],i.prototype,\"layer\",void 0),e([t()],i.prototype,\"interactive\",void 0),e([t({type:o})],i.prototype,\"interactionOptions\",void 0),e([t()],i.prototype,\"selectedElement\",void 0),i=e([r(\"esri.views.layers.MediaLayerView\")],i),i};export{s as default};\n"],"names":["n","Symbol","e","t","o","c","G","w","v","_","constructor","super","arguments","this","_overlayContainer","_fetchQueue","_tileStrategy","_elementReferences","Map","_debugGraphicsView","_interaction","layer","elements","initialize","addHandles","interactive","suspended","async","MediaLayerInteraction","view","selectedElement","interactionOptions","options","enabled","m","attach","addAttachHandles","l","effectiveSource","refresh","_updateTile","requestUpdate","_ref","element","_elementUpdateHandler","b","container","addChild","f","tileInfoView","featuresTilingScheme","concurrency","process","_queryElements","scheduler","priority","E","MAPVIEW_FETCH_QUEUE","y","cachePolicy","resampling","acquireTile","_acquireTile","releaseTile","_releaseTile","detach","removeAll","destroy","removeAllChildren","clear","supportsSpatialReference","viewChange","moveEnd","update","hitTest","i","s","normalize","r","x","elementView","normalizedCoords","values","d","rings","push","type","mapPoint","sourcePoint","toSource","reverse","canResume","source","doRefresh","reset","C","clone","_updatingHandles","addPromise","key","then","setElements","_referenceElements","_dereferenceElements","getLogger","error","abort","id","getTileBounds","S","p","xmin","ymin","xmax","ymax","spatialReference","queryElements","_referenceElement","uid","u","j","add","load","catch","debugGraphic","overlay","tiles","Set","_dereferenceElement","get","delete","size","removeChild","remove","graphics","T","has","geometry","graphicUpdateHandler","graphic","property","a","prototype","readOnly","h","q","g","isReady","visible","Array","from","M","editSourcePoints","tool","reshapeOptions","highlight","Error"],"sourceRoot":""}