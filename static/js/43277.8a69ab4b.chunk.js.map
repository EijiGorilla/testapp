{"version":3,"file":"static/js/43277.8a69ab4b.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/versionManagement/VersioningState.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/Collection.js\";import r from\"../core/Error.js\";import s from\"../core/JSONSupport.js\";import i from\"../core/Loadable.js\";import n from\"../core/Logger.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";let c=class extends(s.JSONSupportMixin(i)){constructor(e){super(e),this.versionManagementService=null,this.featureServiceUrl=null,this.url=null,this.currentVersion=null,this.currentVersionInfo=null,this.versionInfos=[],this.versionableItems=new t,this.usePersistentReadSessions=!1,this.state=\"lock-none\"}initialize(){this.url=this.versionManagementService.url,this.featureServiceUrl=this.url.replace(/\\/VersionManagementServer/i,\"/FeatureServer\"),this.addHandles([this.versionableItems.on(\"before-add\",(e=>{if(e.item.featureServiceUrl.toLowerCase()!==this.featureServiceUrl.toLowerCase())return e.preventDefault(),void n.getLogger(this).error(\"#add()\",\"Cannot add versionAdapter, feature service urls do not match.\")})),this.versionableItems.on(\"before-remove\",(e=>{if(0===this.versionableItems.items.length&&this.currentVersion&&\"name\"in this.currentVersion&&\"none\"!==this.versionManagementService.getLockType(this.currentVersion))return e.preventDefault(),void n.getLogger(this).error(\"#remove()\",\"Cannot remove last versionAdapter.\")}))])}load(e){return this.addResolvingPromise(this._setUpState(e)),Promise.resolve(this)}get defaultVersionIdentifier(){return this.versionManagementService.defaultVersionIdentifier}get isDefault(){return!this.currentVersion||!!this.currentVersion&&\"name\"in this.currentVersion&&this.currentVersion.name===this.defaultVersionIdentifier.name}async getVersionInfos(e=!1){return e&&(this.versionInfos=await this.versionManagementService.getVersionInfos()),this.versionInfos}async alterVersion(e,t){if(this.currentVersion&&\"guid\"in this.currentVersion&&e.guid===this.currentVersion.guid)return!1;const r=await this.versionManagementService.alterVersion(e,t);return r&&await this.getVersionInfos(!0),r}async deleteVersion(e){if(this.currentVersion&&\"guid\"in this.currentVersion&&e.guid===this.currentVersion.guid)return!1;const t=await this.versionManagementService.deleteVersion(e);return t&&await this.getVersionInfos(!0),t}async getVersionInfoExtended(){return this.currentVersion&&\"name\"in this.currentVersion?this.versionManagementService.getVersionInfoExtended(this.currentVersion):this.versionManagementService.getVersionInfoExtended(this.defaultVersionIdentifier)}async startEditing(){if(this._isDefaultOrHistoricVersion())return{success:!1};if(!this.usePersistentReadSessions){const e=await this.versionManagementService.startReadingWithResult(this.currentVersion);if(!e.success)return e;this.state=\"lock-read\"}const e=await this.versionManagementService.startEditingWithResult(this.currentVersion);return e.success&&(this.state=\"lock-write\"),e}async stopEditing(e){if(this._isDefaultOrHistoricVersion())return{success:!1};const t=await this.versionManagementService.stopEditingWithResult(this.currentVersion,e);if(!t.success)return t;if(this.state=\"lock-read\",!this.usePersistentReadSessions){const e=await this.versionManagementService.stopReadingWithResult(this.currentVersion);return e.success&&(this.state=\"lock-none\"),e}return t}async changeVersion(e){let t=null;if(this.usePersistentReadSessions){if(this._isDefaultOrHistoricVersion(e))e&&\"name\"in e?(t=await this.versionManagementService.getVersionInfoExtended(e),this.state=\"public\"===t?.access?\"lock-none\":\"lock-read\"):this.state=\"lock-read\";else if(!await this.versionManagementService.startReading(e))throw new r(\"Failed to acquire read lock for version: \"+e);this._isDefaultOrHistoricVersion(this.currentVersion)||await this.versionManagementService.stopReading(this.currentVersion)}const s=await this.versionManagementService.changeVersionWithResult(this.versionableItems,this.currentVersion,e);let i=!1;return s.forEach(((e,t)=>{i=i||e.success})),i&&(this.currentVersion=e,this.currentVersionInfo=t||await this.getVersionInfoExtended(),this._isDefaultOrHistoricVersion()?this.currentVersion&&\"name\"in this.currentVersion?this.state=\"public\"===this.currentVersionInfo?.access?\"lock-none\":\"lock-read\":this.state=\"lock-read\":this.state=\"read\"!==this.versionManagementService.getLockType(this.currentVersion)?\"lock-none\":\"lock-read\"),s}async undo(){return this._isDefaultOrHistoricVersion()?{success:!1}:(this.versionManagementService.undo(this.currentVersion),{success:!0})}async redo(){return this._isDefaultOrHistoricVersion()?{success:!1}:(this.versionManagementService.redo(this.currentVersion),{success:!0})}async _setUpState(e){await this.versionManagementService.load(e),this.state=\"lock-none\",this.currentVersionInfo=await this.getVersionInfoExtended(),this.versionableItems.forEach((e=>{this.currentVersion?\"name\"in this.currentVersion?(e.gdbVersion=this.currentVersion.name,e.historicMoment=null):(e.historicMoment=this.currentVersion,e.gdbVersion=null):(e.gdbVersion=null,e.historicMoment=null)})),this.usePersistentReadSessions&&(this._isDefaultOrHistoricVersion()?this.currentVersion&&\"name\"in this.currentVersion?this.state=\"public\"===this.currentVersionInfo?.access?\"lock-none\":\"lock-read\":this.state=\"lock-read\":await this.versionManagementService.startReading(this.currentVersion)&&(this.state=\"lock-read\"))}_isDefaultOrHistoricVersion(e=this.currentVersion){return!(e&&\"name\"in e)||e.name===this.versionManagementService.defaultVersionIdentifier.name}};e([o()],c.prototype,\"versionManagementService\",void 0),e([o()],c.prototype,\"featureServiceUrl\",void 0),e([o()],c.prototype,\"url\",void 0),e([o()],c.prototype,\"currentVersion\",void 0),e([o()],c.prototype,\"currentVersionInfo\",void 0),e([o()],c.prototype,\"versionInfos\",void 0),e([o()],c.prototype,\"versionableItems\",void 0),e([o()],c.prototype,\"usePersistentReadSessions\",void 0),e([o()],c.prototype,\"state\",void 0),e([o({readOnly:!0})],c.prototype,\"defaultVersionIdentifier\",null),e([o({readOnly:!0})],c.prototype,\"isDefault\",null),c=e([a(\"esri.versionManagement.VersioningState\")],c);const u=c;export{u as default};\n"],"names":["c","s","JSONSupportMixin","i","constructor","e","super","this","versionManagementService","featureServiceUrl","url","currentVersion","currentVersionInfo","versionInfos","versionableItems","t","usePersistentReadSessions","state","initialize","replace","addHandles","on","item","toLowerCase","preventDefault","n","getLogger","error","items","length","getLockType","load","addResolvingPromise","_setUpState","Promise","resolve","defaultVersionIdentifier","isDefault","name","getVersionInfos","arguments","undefined","alterVersion","guid","r","deleteVersion","getVersionInfoExtended","startEditing","_isDefaultOrHistoricVersion","success","startReadingWithResult","startEditingWithResult","stopEditing","stopEditingWithResult","stopReadingWithResult","changeVersion","access","startReading","stopReading","changeVersionWithResult","forEach","undo","redo","gdbVersion","historicMoment","o","prototype","readOnly","a","u"],"sourceRoot":""}