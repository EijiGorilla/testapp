{"version":3,"file":"static/js/3380.fd51601a.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/widgets/ScaleBar/css.js","../node_modules/@arcgis/core/widgets/ScaleBar.js","../node_modules/@arcgis/core/widgets/ScaleBar/ScaleBarViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst e=\"esri-scale-bar\",n={base:e,labelContainer:`${e}__label-container`,rulerLabelContainer:`${e}__label-container--ruler`,lineLabelContainer:`${e}__label-container--line`,topLabelContainer:`${e}__label-container--top`,bottomLabelContainer:`${e}__label-container--bottom`,label:`${e}__label`,line:`${e}__line`,topLine:`${e}__line--top`,bottomLine:`${e}__line--bottom`,ruler:`${e}__ruler`,rulerBlock:`${e}__ruler-block`,barContainer:`${e}__bar-container`,rulerBarContainer:`${e}__bar-container--ruler`,lineBarContainer:`${e}__bar-container--line`};export{n as css};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{deprecateWidget as t}from\"../core/deprecate.js\";import r from\"../core/Logger.js\";import{watch as s}from\"../core/reactiveUtils.js\";import{createScreenPoint as i}from\"../core/screenUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as l}from\"../core/accessorSupport/decorators/subclass.js\";import{formatNumber as a}from\"../intl/number.js\";import{defaultUnitPropertyMetadata as n}from\"../properties/defaultUnit.js\";import d from\"./Widget.js\";import{css as c}from\"./ScaleBar/css.js\";import p from\"./ScaleBar/ScaleBarViewModel.js\";import{globalCss as u}from\"./support/globalCss.js\";import\"./support/widgetUtils.js\";import{messageBundle as m}from\"./support/decorators/messageBundle.js\";import{tsx as h}from\"./support/jsxFactory.js\";function v(e,t){return a(e,{style:\"unit\",unit:t,unitDisplay:\"short\"})}let f=class extends d{constructor(e,s){super(e,s),this.messages=null,this.style=\"line\",this.viewModel=new p,t(r.getLogger(this),\"Scale Bar\",\"arcgis-scale-bar\",{version:\"4.32\"})}initialize(){this.addHandles(s((()=>{const{view:e}=this;return[e?.stationary,e?.center,e?.scale,e?.zoom]}),(([e])=>{e&&this.scheduleRender()})))}get icon(){return\"actual-size\"}set icon(e){this._overrideIfSome(\"icon\",e)}get label(){return this.messages?.widgetLabel??\"\"}set label(e){this._overrideIfSome(\"label\",e)}get unit(){return this._defaultUnit}set unit(e){this._overrideIfSome(\"unit\",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=\"disabled\"===this.viewModel.state,t={[u.disabled]:e};let r,s;if(!e){const{unit:e,style:t}=this,i=\"metric\"===e||\"dual\"===e,o=100,l=\"dual\"===e?\"line\":t;if(\"imperial\"===e||\"dual\"===e){const e=this.viewModel.getScaleBarProperties(o,\"imperial\");e&&(s=\"ruler\"===l?this._renderRuler(e):this._renderLine(e,\"bottom\"))}if(i){const e=this.viewModel.getScaleBarProperties(o,\"metric\");e&&(r=\"ruler\"===l?this._renderRuler(e):this._renderLine(e,\"top\"))}}return h(\"div\",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(c.base,u.widget,t)},r,s)}_renderRuler(e){const{length:t,unit:r,value:s}=e,i=Math.round(t),o=v(s,r);return h(\"div\",{class:this.classes(c.barContainer,c.rulerBarContainer),key:c.rulerBarContainer},h(\"div\",{class:c.ruler,styles:{width:`${i}px`}},h(\"div\",{class:c.rulerBlock}),h(\"div\",{class:c.rulerBlock}),h(\"div\",{class:c.rulerBlock}),h(\"div\",{class:c.rulerBlock})),h(\"div\",{class:this.classes(c.labelContainer,c.rulerLabelContainer)},h(\"div\",{class:c.label},\"0\"),h(\"div\",{class:c.label},o)))}_renderLine(e,t){const{length:r,unit:s,value:i}=e,o=Math.round(r),l=v(i,s),a={[c.topLabelContainer]:\"top\"===t,[c.bottomLabelContainer]:\"bottom\"===t},n=h(\"div\",{class:this.classes(c.labelContainer,c.lineLabelContainer,a),key:c.labelContainer},h(\"div\",{class:c.label},l)),d={[c.topLine]:\"top\"===t,[c.bottomLine]:\"bottom\"===t},p=h(\"div\",{class:this.classes(c.line,d),key:c.line,styles:{width:`${o}px`}});return h(\"div\",{class:this.classes(c.barContainer,c.lineBarContainer),key:c.lineBarContainer},[p,n])}_handleRootCreateOrUpdate(e){if(!this.viewModel)return;const{scaleComputedFrom:t}=this.viewModel,r=e.getBoundingClientRect(),s=r.left+window.pageXOffset,o=r.top+window.pageYOffset,l=i(s,o);(l.x!==t.x||l.y!==t.y)&&(this.viewModel.scaleComputedFrom=l)}};e([o(n)],f.prototype,\"_defaultUnit\",void 0),e([o()],f.prototype,\"icon\",null),e([o()],f.prototype,\"label\",null),e([o(),m(\"esri/widgets/ScaleBar/t9n/ScaleBar\")],f.prototype,\"messages\",void 0),e([o({type:[\"ruler\",\"line\"]})],f.prototype,\"style\",void 0),e([o({type:[\"metric\",\"imperial\",\"dual\"]})],f.prototype,\"unit\",null),e([o()],f.prototype,\"view\",null),e([o()],f.prototype,\"viewModel\",void 0),f=e([l(\"esri.widgets.ScaleBar\")],f);const b=f;export{b as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import{createScreenPoint as r}from\"../../core/screenUtils.js\";import{getMetersPerUnit as i,convertUnit as s}from\"../../core/unitUtils.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import a from\"../../geometry/Point.js\";import c from\"../../geometry/Polyline.js\";import m from\"../../geometry/SpatialReference.js\";import{isSupported as l,geodesicLengths as p}from\"../../geometry/support/geodesicUtils.js\";import{straightLineDensify as u}from\"../../geometry/support/normalizeUtils.js\";import{isValid as d,getInfo as f}from\"../../geometry/support/spatialReferenceUtils.js\";import{webMercatorToGeographic as h}from\"../../geometry/support/webMercatorUtils.js\";import{isLinkChartView as w}from\"../../linkChart/utils.js\";function g(e){return e>.5?{min:.5,max:1}:e>.2?{min:.2,max:.5}:{min:.1,max:.2}}function y(e,t){switch(t){case\"metric\":return e>1e3?{distance:s(e,\"meters\",\"kilometers\"),unit:\"kilometer\"}:e>1?{distance:e,unit:\"meter\"}:e>.01?{distance:s(e,\"meters\",\"centimeters\"),unit:\"centimeter\"}:{distance:s(e,\"meters\",\"millimeters\"),unit:\"millimeter\"};case\"imperial\":return e>1609.344?{distance:s(e,\"meters\",\"miles\"),unit:\"mile\"}:e>.3048?{distance:s(e,\"meters\",\"feet\"),unit:\"foot\"}:{distance:s(e,\"meters\",\"inches\"),unit:\"inch\"}}}function j(e){const{isWebMercator:t,wkt:r,wkt2:i}=e;return t||((i||r)?.includes(\"WGS_1984_Web_Mercator\")??!1)}function S({state:{paddedViewState:e},spatialReference:t,width:r}){return t.isWrappable&&e.worldScreenWidth<r}function v(e,t){const{x:r,y:i}=e?h(t,!0):t;return[r,i]}let M=class extends t{constructor(e){super(e),this.scaleComputedFrom=r(),this.view=null}get state(){return this.view?.ready&&\"2d\"===this.view.type?w(this.view)&&!this.view.inGeographicLayout?\"disabled\":\"ready\":\"disabled\"}getScaleBarProperties(e,t){if(\"disabled\"===this.state||isNaN(e)||!t||!this.view)return null;const r=this._getDistanceInMeters();return null==r?null:this._getScaleBarProps(e,r,t)}_getDistanceInMeters(){const{state:e,spatialReference:t}=this.view;if(!d(t))return null;const{isGeographic:r}=t,s=j(t);if(!r&&!s){return e.extent.width*(i(t)??1)}const[o,n]=this._getScaleMeasuringPoints(),a=s||r&&!l(t)?m.WGS84:t,f=new c({paths:[[v(s,o),v(s,n)]],spatialReference:a}),h=u(f,10);let w;try{[w]=p([h],\"meters\")}catch{return null}return w}_getScaleMeasuringPoints(){const e=this.view,{width:t,height:i,position:s,spatialReference:o}=e;if(S(e)){const e=f(o),{valid:t}=e;return[new a(t[0],0,o),new a(t[1],0,o)]}let n=this.scaleComputedFrom.y-s[1];n>i?n=i:n<0&&(n=0);const c=r(0,n),m=r(t,n);return[e.toMap(c),e.toMap(m)]}_getScaleBarProps(e,t,r){const i=this.view,s=e*t/(S(i)?i.state.paddedViewState.worldScreenWidth:i.width);if(s<.001)return null;const o=y(s,r),{distance:n,unit:a}=o;let c=n,m=0;for(;c>=1;)c/=10,m++;const{min:l,max:p}=g(c),u=p/c>=c/l?l:p;return{length:e*(u/c),value:10**m*u,unit:a}}};e([o()],M.prototype,\"scaleComputedFrom\",void 0),e([o({readOnly:!0})],M.prototype,\"state\",null),e([o()],M.prototype,\"view\",void 0),M=e([n(\"esri.widgets.ScaleBar.ScaleBarViewModel\")],M);const _=M;export{_ as default};\n"],"names":["e","n","base","labelContainer","rulerLabelContainer","lineLabelContainer","topLabelContainer","bottomLabelContainer","label","line","topLine","bottomLine","ruler","rulerBlock","barContainer","rulerBarContainer","lineBarContainer","v","t","a","style","unit","unitDisplay","f","d","constructor","s","super","this","messages","viewModel","p","r","getLogger","version","initialize","addHandles","view","stationary","center","scale","zoom","_ref","scheduleRender","icon","_overrideIfSome","widgetLabel","_defaultUnit","render","state","u","disabled","i","o","l","getScaleBarProperties","_renderRuler","_renderLine","h","afterCreate","_handleRootCreateOrUpdate","afterUpdate","bind","class","classes","c","widget","length","value","Math","round","key","styles","width","scaleComputedFrom","getBoundingClientRect","left","window","pageXOffset","top","pageYOffset","x","y","prototype","m","type","b","S","paddedViewState","spatialReference","isWrappable","worldScreenWidth","M","ready","w","inGeographicLayout","isNaN","_getDistanceInMeters","_getScaleBarProps","isGeographic","isWebMercator","wkt","wkt2","includes","j","extent","_getScaleMeasuringPoints","WGS84","paths","height","position","valid","toMap","distance","min","max","g","readOnly","_"],"sourceRoot":""}