{"version":3,"file":"static/js/41526.3eccabc0.chunk.js","mappings":"kMAI4X,MAAMA,EAAiB,iBAAkBC,EAAEA,IAAI,IAAIC,EAAE,cAAcD,EAAEE,UAAAA,GAAaC,KAAKC,YAAWC,EAAAA,EAAAA,QAAG,IAAIF,KAAKG,WAAWC,SAASC,IAAIL,KAAKM,cAAcV,GAAiBS,GAAGL,KAAKC,WAAW,CAACI,EAAEE,GAAG,UAAUF,GAAGL,KAAKQ,aAAaH,KAAKA,EAAEE,GAAG,UAAUF,GAAGL,KAAKS,aAAaJ,KAAKA,EAAEE,GAAG,QAAQF,GAAGL,KAAKU,WAAWL,KAAKA,EAAEE,GAAG,QAAQF,GAAGL,KAAKW,WAAWN,KAAKA,EAAEE,GAAG,UAAUF,GAAGL,KAAKY,aAAaP,KAAKA,EAAEE,GAAG,WAAW,IAAIP,KAAKa,kBAAkBR,EAAEE,GAAG,aAAaF,GAAGL,KAAKc,gBAAgBT,MAAKH,EAAAA,EAAAA,QAAG,IAAIG,EAAEU,kBAAkBV,IAAI,YAAYA,GAAGW,MAAM,YAAYX,GAAGW,OAAOX,EAAEY,kCAAiC,EAAG,GAAGC,EAAAA,iBAAItB,EAAgB,GAAGsB,EAAAA,gBAAG,CAACV,YAAAA,CAAaH,GAAG,CAACI,YAAAA,CAAaJ,GAAG,CAACK,UAAAA,CAAWL,GAAG,CAACM,UAAAA,CAAWN,GAAG,CAACO,YAAAA,CAAaP,GAAG,CAACQ,aAAAA,GAAgB,CAACC,eAAAA,CAAgBT,GAAG,GAAG,OAAOA,EAAAA,EAAAA,GAAE,EAACc,EAAAA,EAAAA,OAAKrB,EAAEsB,UAAU,YAAO,IAAQf,EAAAA,EAAAA,GAAE,EAACc,EAAAA,EAAAA,OAAKrB,EAAEsB,UAAU,iBAAY,GAAQtB,GAAEO,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,GAAE,iEAAiEvB,GAAGA,CAAC,C,mLCA9hB,IAAIwB,EAAE,GAAGC,EAAE,GAAGC,EAAE,EAAEC,EAAE,eAAcC,EAAAA,EAAAA,GAAE9B,EAAAA,IAAI+B,WAAAA,CAAYtB,GAAGuB,MAAMvB,GAAGL,KAAKgB,KAAK,cAAchB,KAAK6B,iBAAiB,GAAG7B,KAAK8B,iBAAiB,EAAE9B,KAAK+B,qBAAqB,EAAE/B,KAAKgC,gBAAgB,GAAGhC,KAAKiC,iBAAiB,KAAKjC,KAAKkC,qBAAqB,EAAElC,KAAKmC,iBAAiB,IAAI,CAACpC,UAAAA,GAAaC,KAAKoC,qBAAoBlB,EAAAA,EAAAA,QAAI,CAAC,kBAAMV,CAAaH,GAAG,MAAMH,EAAEG,EAAEgC,cAAc,OAAOhC,EAAEiC,MAAM,IAAI,WAAWtC,KAAKuC,qBAAqBlC,EAAEH,GAAG,MAAM,IAAI,UAAUF,KAAKwC,oBAAoBnC,EAAEH,GAAG,CAACU,YAAAA,CAAaP,GAAGL,KAAKyC,4BAA4BzC,KAAK0C,uBAAuB,CAAC7B,aAAAA,GAAgBb,KAAKyC,4BAA4BzC,KAAK0C,uBAAuB,CAACC,2BAAAA,CAA4BtC,GAAG,MAAMuC,KAAK1C,EAAE2C,aAAajD,GAAGI,KAAKG,UAAU,GAAG,SAASD,IAAIN,GAAGkD,UAAU,OAAO,GAAG,YAAY5C,EAAEF,KAAK6B,iBAAiBkB,KAAK1C,EAAE2C,iBAAiB,CAAC,MAAM9C,EAAE,CAAC+C,EAAE5C,EAAE2C,YAAY,GAAGE,EAAE7C,EAAE2C,YAAY,GAAGG,EAAE9C,EAAE2C,YAAY,IAAI7B,GAAErB,EAAAA,EAAAA,IAAEI,EAAEN,EAAEkD,UAAU,GAAGlD,EAAEkD,UAAU,IAAI9C,KAAK6B,iBAAiBkB,KAAK,CAAC5B,EAAE8B,EAAE9B,EAAE+B,GAAG,CAAC,MAAM/B,EAAEI,EAAE6B,QAAQ,CAAC/C,EAAEH,IAAIG,EAAEH,GAAG,GAAGF,KAAK8B,iBAAiB9B,KAAKG,UAAUkD,0BAA0BlC,CAAC,CAAC,gCAAMmC,CAA2BjD,GAAG,MAAMuC,KAAK1C,EAAE2C,aAAajD,GAAGI,KAAKG,UAAU,GAAG,SAASD,IAAIN,GAAGkD,UAAU,OAAO,MAAM3B,EAAEd,EAAE2C,YAAY,GAAG1B,EAAE,IAAItB,KAAKgC,iBAAiB,YAAY9B,EAAEoB,EAAEyB,KAAK5B,OAAO,CAAC,MAAMd,EAAE,CAAC4C,EAAE9B,EAAE,GAAG+B,EAAE/B,EAAE,GAAGgC,EAAEhC,EAAE,IAAIjB,GAAEJ,EAAAA,EAAAA,IAAEO,EAAET,GAAGkD,UAAU,GAAGlD,GAAGkD,UAAU,IAAIxB,EAAEyB,KAAK,CAAC7C,EAAE+C,EAAE/C,EAAEgD,GAAG,CAAC,GAAG5B,EAAEiC,OAAO,IAAIvD,KAAKG,UAAUqD,qBAAqBxD,KAAKG,UAAU0C,cAAcC,UAAU,OAAO,MAAMW,EAAEnC,EAAE,GAAGA,EAAEA,EAAEoC,QAAQ,CAACrD,EAAEH,IAAI,IAAIA,GAAGA,IAAIoB,EAAEiC,OAAO,GAAGI,KAAKC,UAAUvD,KAAKsD,KAAKC,UAAUH,KAAK,MAAM5D,QAAQG,KAAK6D,iBAAiBvC,GAAGzB,GAAGiE,MAAMjE,GAAGkE,YAAYvC,EAAE3B,EAAEiE,KAAK,CAAC,0BAAMvB,CAAqBlC,EAAEH,GAAG,MAAMN,GAAGI,KAAKG,UAAU6D,0BAA0B,GAAG,WAAW3D,EAAE4D,MAAM,OAAOjE,KAAKyC,4BAA4BzC,KAAKG,UAAUkD,0BAA0B,EAAErD,KAAKG,UAAU+D,sBAAsB,QAAQlE,KAAKG,UAAUgE,6BAA4B,GAAI,GAAG,aAAa9D,EAAE4D,OAAO5D,EAAE+D,QAAQ,OAAOpE,KAAKG,UAAU0C,cAAcwB,WAAWhE,EAAE+D,SAASpE,KAAKG,UAAUmE,mBAAmBjE,EAAE+D,aAAapE,KAAKyC,4BAA4B,OAAOvC,GAAGc,MAAM,IAAI,gBAAgBhB,KAAK2C,4BAA4BzC,GAAG,MAAM,IAAI,aAAa,GAAGF,KAAK6B,iBAAiB0B,QAAQ3D,EAAE,CAAC,MAAMS,QAAQL,KAAKuE,uBAAuBlE,GAAGL,KAAKG,UAAU+D,sBAAsBnB,KAAK1C,EAAE,CAACL,KAAKwE,8BAA8B,MAAMrD,QAAQnB,KAAKyE,uBAAuBzE,KAAK8B,iBAAiBX,GAAGnB,KAAK8B,gBAAgB,CAAC,yBAAMU,CAAoBnC,EAAEH,GAAG,MAAMN,GAAGI,KAAKG,UAAU6D,0BAA0B,GAAG,WAAW3D,EAAE4D,MAAM,OAAOjE,KAAK0C,wBAAwB1C,KAAKG,UAAUuE,sBAAsB,EAAE1E,KAAKG,UAAUwE,wBAAwB,OAAO3E,KAAKG,UAAUgE,6BAA4B,GAAI,GAAG,aAAa9D,EAAE4D,OAAO5D,EAAE+D,QAAQ,CAAC,GAAGpE,KAAKG,UAAU0C,cAAcwB,WAAWhE,EAAE+D,SAASxE,EAAE,CAAC,MAAMS,QAAQL,KAAK4E,yBAAyB5E,KAAKgC,iBAAiBhC,KAAKG,UAAUwE,wBAAwBtE,GAAGA,EAAEL,KAAKG,UAAUwE,wBAAwBtE,EAAEL,KAAKG,UAAUwE,uBAAuB,CAAC,OAAO3E,KAAKG,UAAUmE,mBAAmBjE,EAAE+D,aAAapE,KAAK0C,uBAAuB,CAAC,OAAOxC,GAAGc,MAAM,IAAI,mBAAmBhB,KAAK6E,wBAAwB3E,GAAG,MAAM,IAAI,sBAAsBF,KAAKsD,2BAA2BpD,GAAGF,KAAKG,UAAUuE,sBAAsBlD,EAAE,EAAEA,EAAExB,KAAK+B,oBAAoB,CAAC,6BAAM8C,CAAwBxE,GAAG,MAAMuC,KAAK1C,EAAE2C,aAAajD,GAAGI,KAAKG,UAAUgB,EAAEd,EAAEyE,MAAMrB,EAAEtC,EAAEA,EAAEoC,OAAO,GAAG,IAAIwB,MAAMC,QAAQvB,IAAI,SAASvD,IAAIN,GAAGkD,UAAU,OAAO,GAAG,YAAY5C,EAAEF,KAAKgC,gBAAgBe,KAAKU,OAAO,CAAC,MAAMpD,EAAE,CAAC4C,EAAEQ,EAAE,GAAGP,EAAEO,EAAE,GAAGN,EAAEM,EAAE,IAAIvD,GAAEJ,EAAAA,EAAAA,IAAEO,EAAET,GAAGkD,UAAU,GAAGlD,GAAGkD,UAAU,IAAI9C,KAAKgC,gBAAgBe,KAAK,CAAC7C,EAAE+C,EAAE/C,EAAEgD,GAAG,CAAC,GAAGlD,KAAKgC,gBAAgBuB,OAAO,IAAIvD,KAAKG,UAAUqD,qBAAqBxD,KAAKG,UAAU0C,cAAcC,UAAU,OAAO,MAAMjD,EAAEG,KAAKgC,gBAAgB,GAAGhC,KAAKgC,gBAAgBhC,KAAKgC,gBAAgB0B,QAAQ,CAACrD,EAAEH,IAAI,IAAIA,GAAGA,IAAIF,KAAKgC,gBAAgBuB,OAAO,GAAGI,KAAKC,UAAUvD,KAAKsD,KAAKC,UAAU/D,KAAK,MAAMqB,QAAQlB,KAAK6D,iBAAiB7D,KAAKgC,iBAAiB,IAAId,GAAG4C,OAAO5C,GAAG6C,UAAU,OAAO,MAAMD,KAAKpC,GAAGR,EAAElB,KAAK+B,qBAAqBL,CAAC,CAAC8C,2BAAAA,GAA8BxE,KAAK6B,iBAAiB7B,KAAK6B,iBAAiBoD,OAAO,GAAG,MAAM5E,EAAEkB,EAAE6B,QAAQ,CAAC/C,EAAEH,IAAIG,EAAEH,GAAG,GAAGF,KAAK8B,iBAAiB9B,KAAKG,UAAUkD,0BAA0BhD,EAAEL,KAAK8B,iBAAiB,GAAGP,EAAEwB,KAAK/C,KAAK8B,iBAAiB,CAACW,yBAAAA,GAA4BzC,KAAK6B,iBAAiB,GAAG7B,KAAK8B,iBAAiB,EAAEP,EAAE,EAAE,CAACmB,qBAAAA,GAAwB1C,KAAKgC,gBAAgB,GAAGhC,KAAK+B,qBAAqB,EAAEP,EAAE,CAAC,CAAC,sBAAMqC,CAAiBxD,GAAG,MAAMuC,KAAKhD,GAAGI,KAAKG,UAAU,OAAOH,KAAKiC,kBAAkBiD,QAAQlF,KAAKiC,kBAAiB/B,EAAAA,EAAAA,KAAGiF,UAAUnF,KAAKmC,iBAAiB,KAAK,MAAMsB,QAAQzD,KAAKG,UAAUiF,yBAAyB/E,EAAET,EAAEM,IAAGiB,EAAAA,EAAAA,gBAAEjB,GAAGF,KAAKmC,iBAAiBsB,CAAC,UAAUzD,KAAKiC,iBAAiBoD,QAAQrF,KAAKmC,gBAAgB,CAAC,0BAAMsC,GAAuB,MAAM7B,KAAKvC,GAAGL,KAAKG,UAAU,OAAOH,KAAKiC,kBAAkBiD,QAAQlF,KAAKiC,kBAAiB/B,EAAAA,EAAAA,KAAGiF,UAAUnF,KAAKkC,qBAAqB,EAAE,MAAMtC,QAAQI,KAAKG,UAAUmF,6BAA6BtF,KAAK6B,iBAAiBxB,EAAEH,IAAGiB,EAAAA,EAAAA,gBAAEjB,GAAGF,KAAKkC,qBAAqBtC,CAAC,UAAUI,KAAKiC,iBAAiBoD,QAAQrF,KAAKkC,oBAAoB,CAAC,0BAAMqC,GAAuB,MAAM3B,KAAKvC,GAAGL,KAAKG,UAAU,MAAM,SAASE,EAAE,MAAML,KAAKiC,kBAAkBiD,QAAQlF,KAAKiC,kBAAiB/B,EAAAA,EAAAA,KAAGiF,UAAUnF,KAAKkC,qBAAqB,EAAE,MAAMtC,EAAE,YAAYS,QAAQL,KAAKG,UAAUoF,kBAAkBvF,KAAK6B,iBAAiB,WAAW3B,SAASF,KAAKG,UAAUqF,2BAA2BxF,KAAK6B,iBAAiB,WAAW3B,IAAGiB,EAAAA,EAAAA,gBAAEjB,GAAGF,KAAKkC,qBAAqBtC,CAAC,UAAUI,KAAKiC,iBAAiBoD,QAAQrF,KAAKkC,qBAAqB,CAAC,8BAAM0C,CAAyBvE,GAAG,MAAMuC,KAAKhD,GAAGI,KAAKG,UAAU,MAAM,SAASP,EAAE,MAAMI,KAAKiC,kBAAkBiD,QAAQlF,KAAKiC,kBAAiB/B,EAAAA,EAAAA,KAAGiF,UAAUnF,KAAKkC,qBAAqB,EAAE,MAAMuB,EAAE,YAAY7D,QAAQI,KAAKG,UAAUoF,kBAAkBlF,EAAE,OAAOH,SAASF,KAAKG,UAAUqF,2BAA2BnF,EAAE,OAAOH,IAAGiB,EAAAA,EAAAA,gBAAEjB,GAAGF,KAAKkC,qBAAqBuB,CAAC,UAAUzD,KAAKiC,iBAAiBoD,QAAQrF,KAAKkC,qBAAqB,IAAG7B,EAAAA,EAAAA,GAAE,EAACoD,EAAAA,EAAAA,OAAKhC,EAAEL,UAAU,YAAO,IAAQf,EAAAA,EAAAA,GAAE,EAACoD,EAAAA,EAAAA,OAAKhC,EAAEL,UAAU,wBAAmB,IAAQf,EAAAA,EAAAA,GAAE,EAACoD,EAAAA,EAAAA,OAAKhC,EAAEL,UAAU,wBAAmB,IAAQf,EAAAA,EAAAA,GAAE,EAACoD,EAAAA,EAAAA,OAAKhC,EAAEL,UAAU,4BAAuB,IAAQf,EAAAA,EAAAA,GAAE,EAACoD,EAAAA,EAAAA,OAAKhC,EAAEL,UAAU,uBAAkB,GAAQK,GAAEpB,EAAAA,EAAAA,GAAE,EAACR,EAAAA,EAAAA,GAAE,0EAA0E4B,GAAG,MAAMJ,EAAEI,C","sources":["../node_modules/@arcgis/core/widgets/OrientedImageryViewer/mixins/SketchHandlerMixin.js","../node_modules/@arcgis/core/widgets/OrientedImageryViewer/adapters/sketch/MeasurementAdapter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{watch as t,syncAndInitial as o}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";const a={sketchHandles:\"sketch-handles\"},r=r=>{let n=class extends r{initialize(){this.addHandles(t((()=>this.viewModel?.sketch),(e=>{this.removeHandles(a.sketchHandles),e&&this.addHandles([e.on(\"create\",(e=>this.handleCreate(e))),e.on(\"update\",(e=>this.handleUpdate(e))),e.on(\"undo\",(e=>this.handleUndo(e))),e.on(\"redo\",(e=>this.handleRedo(e))),e.on(\"delete\",(e=>this.handleDelete(e))),e.on(\"destroy\",(()=>this.handleDestroy())),e.on(\"duplicate\",(e=>this.handleDuplicate(e))),t((()=>e.activeComponent),(e=>{\"draw-2d\"!==e?.type&&\"draw-3d\"!==e?.type||(e.elevationLockOnVertexAddDisabled=!0)}),o)],a.sketchHandles)}),o))}handleCreate(e){}handleUpdate(e){}handleUndo(e){}handleRedo(e){}handleDelete(e){}handleDestroy(){}handleDuplicate(e){}};return e([s()],n.prototype,\"type\",void 0),e([s()],n.prototype,\"viewModel\",void 0),n=e([d(\"esri.widgets.OrientedImageryViewer.mixins.SketchHandlerMixin\")],n),n};export{r as SketchHandlerMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{createTask as t}from\"../../../../core/asyncUtils.js\";import a from\"../../../../core/Promise.js\";import{throwIfAborted as s}from\"../../../../core/promiseUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{load as o}from\"../../../../geometry/projection.js\";import{convertSphereVertexToPixelLocation as n}from\"../../../../layers/orientedImagery/transformations/utils.js\";import{SketchHandlerMixin as c}from\"../../mixins/SketchHandlerMixin.js\";let l=[],u=[],h=0,m=class extends(c(a)){constructor(e){super(e),this.type=\"measurement\",this.measurementArray=[],this.pixelMeasurement=0,this.pixelAreaMeasurement=0,this.polygonVertices=[],this._calculationTask=null,this._distanceCalculation=0,this._areaCalculation=null}initialize(){this.addResolvingPromise(o())}async handleCreate(e){const t=e.toolEventInfo;switch(e.tool){case\"polyline\":this.handlePolylineEvents(e,t);break;case\"polygon\":this.handlePolygonEvents(e,t)}}handleDelete(e){this.resetDistanceMeasurements(),this.resetAreaMeasurements()}handleDestroy(){this.resetDistanceMeasurements(),this.resetAreaMeasurements()}cursorUpdatePolylineHandler(e){const{mode:t,activeViewer:a}=this.viewModel;if(\"none\"===t||!a?.imageSize)return;if(\"default\"===t)this.measurementArray.push(e.coordinates);else{const t={x:e.coordinates[0],y:e.coordinates[1],z:e.coordinates[2]},s=n(t,a.imageSize[0],a.imageSize[1]);this.measurementArray.push([s.x,s.y])}const s=u.reduce(((e,t)=>e+t),0)+this.pixelMeasurement;this.viewModel.distanceMeasurementResult=s}async cursorUpdatePolygonHandler(e){const{mode:t,activeViewer:a}=this.viewModel;if(\"none\"===t||!a?.imageSize)return;const s=e.coordinates;if(l=[...this.polygonVertices],\"default\"===t)l.push(s);else{const e={x:s[0],y:s[1],z:s[2]},t=n(e,a?.imageSize[0],a?.imageSize[1]);l.push([t.x,t.y])}if(l.length<3||!this.viewModel.currentBestFeature||!this.viewModel.activeViewer?.imageSize)return;const i=l[0];l=l.filter(((e,t)=>0===t||t===l.length-1||JSON.stringify(e)!==JSON.stringify(i)));const r=await this._getAreaFromTask(l);r?.area&&r?.perimeter&&(h=r.area)}async handlePolylineEvents(e,t){const a=!this.viewModel.accuracyParametersMissing;if(\"cancel\"===e.state)return this.resetDistanceMeasurements(),this.viewModel.distanceMeasurementResult=0,this.viewModel.distanceAccuracyArray=[],void(this.viewModel.displayNewMeasurementButton=!0);if(\"complete\"===e.state&&e.graphic)return this.viewModel.activeViewer?.addGraphic(e.graphic),this.viewModel.measurementGraphic=e.graphic,void this.resetDistanceMeasurements();switch(t?.type){case\"cursor-update\":this.cursorUpdatePolylineHandler(t);break;case\"vertex-add\":if(this.measurementArray.length&&a){const e=await this._getAccuracyFromTask();e&&this.viewModel.distanceAccuracyArray.push(e)}this.vertexUpdatePolylineHandler()}const s=await this._getDistanceFromTask();this.pixelMeasurement=s??this.pixelMeasurement}async handlePolygonEvents(e,t){const a=!this.viewModel.accuracyParametersMissing;if(\"cancel\"===e.state)return this.resetAreaMeasurements(),this.viewModel.areaMeasurementResult=0,this.viewModel.areaMeasurementAccuracy=0,void(this.viewModel.displayNewMeasurementButton=!0);if(\"complete\"===e.state&&e.graphic){if(this.viewModel.activeViewer?.addGraphic(e.graphic),a){const e=await this._getAreaAccuracyFromTask(this.polygonVertices);this.viewModel.areaMeasurementAccuracy=e&&e>this.viewModel.areaMeasurementAccuracy?e:this.viewModel.areaMeasurementAccuracy}return this.viewModel.measurementGraphic=e.graphic,void this.resetAreaMeasurements()}switch(t?.type){case\"vertex-add\":await this.vertexAddPolygonHandler(t);break;case\"cursor-update\":await this.cursorUpdatePolygonHandler(t)}this.viewModel.areaMeasurementResult=h>0?h:this.pixelAreaMeasurement}async vertexAddPolygonHandler(e){const{mode:t,activeViewer:a}=this.viewModel,s=e.added,i=s[s.length-1];if(!Array.isArray(i)||\"none\"===t||!a?.imageSize)return;if(\"default\"===t)this.polygonVertices.push(i);else{const e={x:i[0],y:i[1],z:i[2]},t=n(e,a?.imageSize[0],a?.imageSize[1]);this.polygonVertices.push([t.x,t.y])}if(this.polygonVertices.length<3||!this.viewModel.currentBestFeature||!this.viewModel.activeViewer?.imageSize)return;const r=this.polygonVertices[0];this.polygonVertices=this.polygonVertices.filter(((e,t)=>0===t||t===this.polygonVertices.length-1||JSON.stringify(e)!==JSON.stringify(r)));const o=await this._getAreaFromTask(this.polygonVertices);if(!o?.area||!o?.perimeter)return;const{area:c}=o;this.pixelAreaMeasurement=c}vertexUpdatePolylineHandler(){this.measurementArray=this.measurementArray.slice(-1);const e=u.reduce(((e,t)=>e+t),0)+this.pixelMeasurement;this.viewModel.distanceMeasurementResult=e,this.pixelMeasurement>0&&u.push(this.pixelMeasurement)}resetDistanceMeasurements(){this.measurementArray=[],this.pixelMeasurement=0,u=[]}resetAreaMeasurements(){this.polygonVertices=[],this.pixelAreaMeasurement=0,h=0}async _getAreaFromTask(e){const{mode:a}=this.viewModel;return this._calculationTask?.abort(),this._calculationTask=t((async t=>{this._areaCalculation=null;const i=await this.viewModel.calculateAreaMeasurement(e,a,t);s(t),this._areaCalculation=i})),await this._calculationTask.promise,this._areaCalculation}async _getDistanceFromTask(){const{mode:e}=this.viewModel;return this._calculationTask?.abort(),this._calculationTask=t((async t=>{this._distanceCalculation=0;const a=await this.viewModel.calculateDistanceMeasurement(this.measurementArray,e,t);s(t),this._distanceCalculation=a})),await this._calculationTask.promise,this._distanceCalculation}async _getAccuracyFromTask(){const{mode:e}=this.viewModel;return\"none\"===e?null:(this._calculationTask?.abort(),this._calculationTask=t((async t=>{this._distanceCalculation=0;const a=\"default\"===e?await this.viewModel.calculateAccuracy(this.measurementArray,\"distance\",t):await this.viewModel.calculateAccuracyPanoramic(this.measurementArray,\"distance\",t);s(t),this._distanceCalculation=a})),await this._calculationTask.promise,this._distanceCalculation)}async _getAreaAccuracyFromTask(e){const{mode:a}=this.viewModel;return\"none\"===a?null:(this._calculationTask?.abort(),this._calculationTask=t((async t=>{this._distanceCalculation=0;const i=\"default\"===a?await this.viewModel.calculateAccuracy(e,\"area\",t):await this.viewModel.calculateAccuracyPanoramic(e,\"area\",t);s(t),this._distanceCalculation=i})),await this._calculationTask.promise,this._distanceCalculation)}};e([i()],m.prototype,\"type\",void 0),e([i()],m.prototype,\"measurementArray\",void 0),e([i()],m.prototype,\"pixelMeasurement\",void 0),e([i()],m.prototype,\"pixelAreaMeasurement\",void 0),e([i()],m.prototype,\"polygonVertices\",void 0),m=e([r(\"esri.widgets.OrientedImageryViewer.adapters.sketch.MeasurementAdapter\")],m);const d=m;export{d as default};\n"],"names":["a","r","n","initialize","this","addHandles","t","viewModel","sketch","e","removeHandles","on","handleCreate","handleUpdate","handleUndo","handleRedo","handleDelete","handleDestroy","handleDuplicate","activeComponent","type","elevationLockOnVertexAddDisabled","o","s","prototype","d","l","u","h","m","c","constructor","super","measurementArray","pixelMeasurement","pixelAreaMeasurement","polygonVertices","_calculationTask","_distanceCalculation","_areaCalculation","addResolvingPromise","toolEventInfo","tool","handlePolylineEvents","handlePolygonEvents","resetDistanceMeasurements","resetAreaMeasurements","cursorUpdatePolylineHandler","mode","activeViewer","imageSize","push","coordinates","x","y","z","reduce","distanceMeasurementResult","cursorUpdatePolygonHandler","length","currentBestFeature","i","filter","JSON","stringify","_getAreaFromTask","area","perimeter","accuracyParametersMissing","state","distanceAccuracyArray","displayNewMeasurementButton","graphic","addGraphic","measurementGraphic","_getAccuracyFromTask","vertexUpdatePolylineHandler","_getDistanceFromTask","areaMeasurementResult","areaMeasurementAccuracy","_getAreaAccuracyFromTask","vertexAddPolygonHandler","added","Array","isArray","slice","abort","async","calculateAreaMeasurement","promise","calculateDistanceMeasurement","calculateAccuracy","calculateAccuracyPanoramic"],"sourceRoot":""}