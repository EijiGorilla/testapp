{"version":3,"file":"static/js/26964.ced66cc9.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/widgets/OrientedImageryViewer/adapters/sketch/DataCaptureAdapter.js","../node_modules/@arcgis/core/widgets/OrientedImageryViewer/mixins/SketchHandlerMixin.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import r from\"../../../../core/Collection.js\";import o from\"../../../../core/ReactiveMap.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{mapSpaceToImageSpace as i}from\"../../dataCaptureUtils.js\";import{SketchHandlerMixin as c}from\"../../mixins/SketchHandlerMixin.js\";let p=class extends(c(t)){constructor(e){super(e),this.savedGraphics=new r,this.type=\"data-capture\",this.pendingGraphics=new o}get collectionId(){return this.viewModel.collectionId}handleCreate(e){const{state:t,graphic:r,tool:o}=e,a=r?.geometry;if(\"complete\"!==t||!r||!a)return;const{collectionId:s,viewModel:{dataCaptureLayer:i,currentBestFeature:c,imageGeometryField:p,oiObjectIdField:n,activeViewer:l,mode:h},pendingGraphics:u}=this,m=l?.imageSize;c&&p&&s&&n&&i&&m&&\"none\"!==h&&(d(r,a,p,n,c,u,s,m,h,i),this.viewModel.emit(\"after-data-capture-complete\",{pendingGraphics:u.get(s)?.toArray()??null}),this.viewModel.sketch?.create(o))}handleDelete(e){const{dataCaptureLayer:t}=this.viewModel;if(!t)return;const{graphics:r}=e;this.pendingGraphics.get(t.id)?.removeMany(r),this.savedGraphics.removeMany(r),this.viewModel.deleteDataCaptureFeatures(n(r,t.objectIdField))}handleDestroy(){const{dataCaptureLayer:e}=this.viewModel;e&&(this.viewModel.stopDataCapture(),this.savedGraphics.removeAll(),this.pendingGraphics=null)}handleUpdate(e){const{toolEventInfo:t,state:r,graphics:o}=e;if(t)this.viewModel.sketch?.undo();else switch(r){case\"complete\":this.viewModel.emit(\"deselect-data-capture-features\",{graphics:o});break;case\"start\":this.viewModel.emit(\"select-data-capture-features\",{graphics:o})}}};function d(e,t,o,a,s,c,p,d,n,l){e.sourceLayer=l,e.attributes=e.attributes??{},e.attributes[o]=btoa(JSON.stringify({geometry:i(t.clone(),n,d).toJSON()})),e.attributes[a]=s.attributes.objectId,c.has(p)||c.set(p,new r);c.get(p).add(e)}function n(e,t){return e.map((({attributes:e})=>t?e[t]:null)).filter(Boolean)}e([a()],p.prototype,\"collectionId\",null),e([a()],p.prototype,\"savedGraphics\",void 0),e([a()],p.prototype,\"type\",void 0),e([a()],p.prototype,\"pendingGraphics\",void 0),p=e([s(\"esri.widgets.OrientedImageryViewer.adapters.sketch.DataCaptureAdapter\")],p);const l=p;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{watch as t,syncAndInitial as o}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";const a={sketchHandles:\"sketch-handles\"},r=r=>{let n=class extends r{initialize(){this.addHandles(t((()=>this.viewModel?.sketch),(e=>{this.removeHandles(a.sketchHandles),e&&this.addHandles([e.on(\"create\",(e=>this.handleCreate(e))),e.on(\"update\",(e=>this.handleUpdate(e))),e.on(\"undo\",(e=>this.handleUndo(e))),e.on(\"redo\",(e=>this.handleRedo(e))),e.on(\"delete\",(e=>this.handleDelete(e))),e.on(\"destroy\",(()=>this.handleDestroy())),e.on(\"duplicate\",(e=>this.handleDuplicate(e))),t((()=>e.activeComponent),(e=>{\"draw-2d\"!==e?.type&&\"draw-3d\"!==e?.type||(e.elevationLockOnVertexAddDisabled=!0)}),o)],a.sketchHandles)}),o))}handleCreate(e){}handleUpdate(e){}handleUndo(e){}handleRedo(e){}handleDelete(e){}handleDestroy(){}handleDuplicate(e){}};return e([s()],n.prototype,\"type\",void 0),e([s()],n.prototype,\"viewModel\",void 0),n=e([d(\"esri.widgets.OrientedImageryViewer.mixins.SketchHandlerMixin\")],n),n};export{r as SketchHandlerMixin};\n"],"names":["p","c","t","constructor","e","super","this","savedGraphics","r","type","pendingGraphics","o","collectionId","viewModel","handleCreate","state","graphic","tool","a","geometry","s","dataCaptureLayer","i","currentBestFeature","imageGeometryField","oiObjectIdField","n","activeViewer","l","mode","h","u","m","imageSize","d","sourceLayer","attributes","btoa","JSON","stringify","clone","toJSON","objectId","has","set","get","add","emit","toArray","sketch","create","handleDelete","graphics","id","removeMany","deleteDataCaptureFeatures","map","_ref","filter","Boolean","objectIdField","handleDestroy","stopDataCapture","removeAll","handleUpdate","toolEventInfo","undo","prototype","initialize","addHandles","removeHandles","on","handleUndo","handleRedo","handleDuplicate","activeComponent","elevationLockOnVertexAddDisabled"],"sourceRoot":""}