"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[15062,80993],{15062:(e,t,i)=>{i.d(t,{T:()=>o});const o={close:"esri-icon-close",collapse:"esri-icon-collapse",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",handleVertical:"esri-icon-handle-vertical",icon:"esri-icon",left:"esri-icon-left",locateCircled:"esri-icon-locate-circled",noticeTriangle:"esri-icon-notice-triangle",pause:"esri-icon-pause",play:"esri-icon-play",plus:"esri-icon-plus",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",search:"esri-icon-search",swap:"esri-icon-swap",table:"esri-icon-table",trash:"esri-icon-trash",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomToObject:"esri-icon-zoom-to-object"}},51287:(e,t,i)=>{i.d(t,{A:()=>w});var o=i(35143),a=i(39356),r=i(91967),n=i(50076),s=i(54099),l=i(50346),c=i(68134),d=i(46053),p=(i(81806),i(76460),i(47249),i(85842)),u=i(89465),h=i(99403),g=i(79535);const m={type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",url:"data:image/png;base64,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"},y=new u.default({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:16,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:0,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,0,0,66]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,offsetX:0,offsetY:-1},m],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"TintColor",valueExpressionInfo:{type:"CIMExpressionInfo",title:"TintColor override",expression:"IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 1])",returnType:"Default"}}]}});let f=class extends((0,g.A)(s.A.EventedMixin(r.default))){constructor(){super(...arguments),this._geolocationUsable=!0,this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new a.default({symbol:y}),this.scale=null,this.rotationEnabled=!0,this.view=null}initialize(){(0,h.$j)()||(this._geolocationUsable=!1),this.addHandles([(0,c.watch)((()=>this.view?.type),(()=>this._handleViewTypeChange()),c.initial)])}destroy(){this._clearGraphic(),this.view=null}_clearGraphic(){const{view:e,graphic:t}=this;e&&t&&e.graphics.remove(t)}_addGraphic(){const{view:e,graphic:t}=this;e?.graphics&&t&&!e.graphics.includes(t)&&e.graphics.push(t)}_handleViewTypeChange(){m.enable="2d"===this.view?.type}_getScaleWithinConstraints(e,t){if(!t)return e;if("2d"===t.type){const{effectiveMaxScale:i,effectiveMinScale:o}=t.constraints;return Math.min(o,Math.max(i,e))}return e}_getScale(e){const{scale:t}=this,i="number"==typeof t?t:2500;return this._getScaleWithinConstraints(i,e)}_getHeading(e,t){const i=t?.spatialReference,o=i?.isWebMercator||i?.isGeographic,a=e.coords?.heading;return!o||"number"!=typeof a||isNaN(a)||a<0||a>360?null:a}_addHeading(e){const{heading:t,target:i,view:o}=e;o&&null!==t&&("3d"!==o.type?"2d"===o.type&&(i.rotation=360-t):i.heading=t)}async _animatePoint(e,t,i,o){const{view:a}=this;if(!this.goToLocationEnabled||!a)return;const r={target:e,scale:t};this.rotationEnabled&&this._addHeading({heading:i,target:r,view:a});const n={signal:o.signal};(0,l.throwIfAborted)(n),await this.callGoTo({target:r,options:n})}async updatePosition(e,t){try{const i=this.view,o=await(0,h.Ly)({position:e,view:i},{signal:t.signal}),{graphic:a}=this,{timestamp:r,coords:n}=e,{accuracy:s,altitude:l,altitudeAccuracy:c,latitude:d,longitude:p,speed:u}=n,g=this._getHeading(e,i),m={timestamp:r,accuracy:s,altitude:l,altitudeAccuracy:c,heading:g,latitude:d,longitude:p,speed:u};a&&(a.geometry=o,a.attributes=m);const y=this._getScale(i);await this._animatePoint(o,y,g,t)}catch(i){if(!(0,l.isAbortError)(i))throw new n.default("geolocation-positioning:invalid-point","Cannot position invalid point",{error:i})}return e}};(0,o._)([(0,d.MZ)()],f.prototype,"_geolocationUsable",void 0),(0,o._)([(0,d.MZ)()],f.prototype,"geolocationOptions",void 0),(0,o._)([(0,d.MZ)()],f.prototype,"goToLocationEnabled",void 0),(0,o._)([(0,d.MZ)({type:a.default,nonNullable:!0})],f.prototype,"graphic",void 0),(0,o._)([(0,d.MZ)()],f.prototype,"scale",void 0),(0,o._)([(0,d.MZ)()],f.prototype,"rotationEnabled",void 0),(0,o._)([(0,d.MZ)()],f.prototype,"view",void 0),f=(0,o._)([(0,p.$)("esri.widgets.support.GeolocationPositioning")],f);const w=f},80993:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var o=i(35143),a=(i(11265),i(73204)),r=i(50076),n=i(50346),s=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),c=i(85012),d=i(51287),p=i(99403),u=i(38042),h=i(63860);let g=class extends d.A{constructor(e){super(e),this._locateController=null,this.error=void 0,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this.addHandles([(0,u.oQ)((()=>{const{graphic:e,view:t}=this;if(!e)return;const i=t?.graphics?.includes(e);i&&this._updatePopupTemplate(e)}))])}destroy(){this.cancelLocate()}get state(){return this._geolocationUsable?this.view?.ready?this._locateController?"locating":null!=this.error?"error":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),"disabled"===this.state)throw new r.default("locate:disabled-state","Cannot locate when disabled.");if("feature-unsupported"===this.state)throw new r.default("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const e=new AbortController;this._locateController=e,this.error=void 0;try{const t=await(0,p.J1)(this.geolocationOptions);if(await this.updatePosition(t,e),this._locateController!==e)return null;const{graphic:i}=this;return i&&await this._updatePopupTemplate(i),this._addGraphic(),this.emit("locate",{position:t}),this._locateController=null,t}catch(t){if((0,n.isAbortError)(t))return null;throw e===this._locateController&&(this._locateController=null),this.error=t,this.emit("locate-error",{error:t}),t}}cancelLocate(){this._clearGraphic(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(e){if(!this.popupEnabled)return;const t=await async function(){const e=await(0,h.ud)("esri/widgets/Locate/t9n/Locate");return new a.default({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[c.oq.clone()],content:[{type:"fields"}]})}(),i=e!==this.graphic;this.destroyed||i||(e.popupTemplate=t)}};(0,o._)([(0,s.MZ)()],g.prototype,"_locateController",void 0),(0,o._)([(0,s.MZ)()],g.prototype,"error",void 0),(0,o._)([(0,s.MZ)()],g.prototype,"popupEnabled",void 0),(0,o._)([(0,s.MZ)({readOnly:!0})],g.prototype,"state",null),(0,o._)([(0,s.MZ)()],g.prototype,"locate",null),(0,o._)([(0,s.MZ)()],g.prototype,"cancelLocate",null),g=(0,o._)([(0,l.$)("esri.widgets.Locate.LocateViewModel")],g);const m=g},85012:(e,t,i)=>{i.d(t,{E$:()=>l,HZ:()=>p,RP:()=>c,oq:()=>d,po:()=>u});var o=i(19276),a=i(50037),r=i(16700),n=i(76192),s=i(15062);const l=o.default.ofType({key:"type",defaultKeyValue:"button",base:a.default,typeMap:{button:r.default,toggle:n.default}}),c=new r.default({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:s.T.zoomInMagnifyingGlass}),d=new r.default({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:s.T.trash}),p=new r.default({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:s.T.zoomInMagnifyingGlass}),u=new n.default({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:s.T.table,value:!1})},99403:(e,t,i)=>{i.d(t,{$j:()=>g,J1:()=>m,Ly:()=>f});var o=i(86560),a=i(50076),r=i(81806),n=i(76460),s=i(19247),l=i(45417),c=i(24883),d=i(71334),p=i(70414);const u=()=>n.A.getLogger("esri.widgets.support.geolocationUtils"),h={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function g(){return function(){const e=!!(0,r.A)("esri-geolocation");return e||u().warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){const e=window.isSecureContext;return e||u().warnOnce("insecure-context","Geolocation requires a secure origin."),e}()}function m(e){return e??=h,new Promise(((t,i)=>{setTimeout((()=>i(new a.default("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(t,i,e??void 0)}))}let y;function f(e,t){if(y)return y(e,t);const{position:i,view:r}=e,n=function(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed,toJSON:()=>({})};return e?{coords:i,timestamp:e.timestamp,toJSON:()=>({})}:e}(i),u=n?.coords;if(!u)throw new a.default("geometry-service:no-coords","Geolocation has no coordinates");return function(e,t,i){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve((0,l.geographicToWebMercator)(e)):function(e){if(o.default.geometryServiceUrl)return Promise.resolve(o.default.geometryServiceUrl);const t=c.default.getDefault();return t.load(e).catch((()=>{})).then((()=>t.helperServices?.geometry?.url))}(i).then((t=>{if(!t)throw new a.default("geometry-service:missing-url","Geometry service URL is missing");const o=new p.default({geometries:[e],outSpatialReference:r});return(0,d.C)(t,o,i).then((e=>e[0]))}))}(function(e){let{longitude:t,latitude:i,altitude:o}=e;return new s.default({longitude:t,latitude:i,z:o||void 0,spatialReference:{wkid:4326}})}(u),r,t)}}}]);
//# sourceMappingURL=80993.44821a6f.chunk.js.map