"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[69003],{48975:(e,t,i)=>{i.d(t,{t:()=>c});var n=i(35143),o=i(91967),s=i(19276),r=i(68134),a=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),h=i(54054),d=i(68999);let c=class extends o.default{constructor(e){super(e),this._hoveredPoints=new s.default}initialize(){this.addHandles((0,r.watch)((()=>this._hoveredPoints.toArray().map((e=>{let{anchor:t,element:i}=e;return{screenLocation:t.screenLocation,element:i}}))),(e=>{for(const{screenLocation:t,element:i}of e)t&&(i.style.transform=`translate(${t.x}px, ${t.y}px)`)}),r.syncAndInitial))}destroy(){this._hoveredPoints.drain((e=>this._destroyHoveredPoint(e)))}update(e){const t=this.view,i=this._hoveredPoints,n=e.length;for(;this._hoveredPoints.length>n;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<n;){const e=this._makeHoveredPoint();i.push(e),t.surface?.appendChild(e.element)}for(let o=0;o<n;++o){const t=i.at(n-1-o),s=e[o];this._updateHoveredPoint(t,s)}}_makeHoveredPoint(){const{size:e,borderStyle:t,borderColor:i,borderWidth:n,boxShadow:o}=(0,h.zj)().hoveredPointsStyle,s=this.view,r=new d.A({view:s,screenLocationEnabled:!0}),a=document.createElement("div"),l=a.style;return l.position="absolute",l.top="0",l.left="0",l.contain="strict",l.boxSizing="border-box",l.width=`${e}px`,l.height=`${e}px`,l.marginTop=`-${e/2}px`,l.marginLeft=`-${e/2}px`,l.border=`${t} ${n}px ${i}`,l.borderRadius=`${e}px`,l.boxShadow=o,{anchor:r,element:a}}_updateHoveredPoint(e,t){let{anchor:i,element:n}=e;i.screenLocationEnabled=!0,i.location=t.hoveredPoint;const o=n.style;o.display="block",o.background=t.color.toCss()}_destroyHoveredPoint(e){let{anchor:t,element:i}=e;t.destroy(),this.view.surface?.removeChild(i)}};(0,n._)([(0,a.MZ)()],c.prototype,"view",void 0),(0,n._)([(0,a.MZ)()],c.prototype,"_hoveredPoints",void 0),c=(0,n._)([(0,l.$)("esri.widgets.ElevationProfile.support.HoveredPoints")],c)},68999:(e,t,i)=>{i.d(t,{A:()=>d});var n=i(35143),o=i(54099),s=i(68134),r=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),l=i(9624);let h=class extends o.A.EventedAccessor{constructor(e){super(e),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([(0,s.when)((()=>{const e=this.screenLocationEnabled?this.view:null;return e?[e.size,"3d"===e.type?e.camera:e.viewpoint]:null}),(()=>this.notifyChange("screenLocation"))),(0,s.watch)((()=>this.screenLocation),((e,t)=>{null!=e&&null!=t&&this.emit("view-change")}))])}destroy(){this.view=null}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this,n=t?.spatialReference,o=n?(0,l.projectOrLoad)(e,n).geometry:null;return i&&o&&t?.ready?t.toScreen(o):null}};(0,n._)([(0,r.MZ)()],h.prototype,"location",void 0),(0,n._)([(0,r.MZ)()],h.prototype,"screenLocation",null),(0,n._)([(0,r.MZ)()],h.prototype,"screenLocationEnabled",void 0),(0,n._)([(0,r.MZ)()],h.prototype,"view",void 0),h=(0,n._)([(0,a.$)("esri.widgets.support.AnchorElementViewModel")],h);const d=h},69003:(e,t,i)=>{i.r(t),i.d(t,{ElevationProfileView2D:()=>L});var n=i(88321),o=i(30726),s=i(68134),r=i(54054),a=i(48975),l=i(98773),h=i(50346),d=i(90992);class c{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null}destroy(){this.remove()}remove(){this._highlightTask=(0,o.DC)(this._highlightTask),this._highlightHandle=(0,o.xt)(this._highlightHandle)}update(e){if(this.remove(),null==e||(null==(t=e).geometry||"polyline"!==t.geometry.type))return;var t;const i=e.layer;this._highlightTask=(0,l.UT)((async t=>{const n=await this._params.view.whenLayerView(i);(0,h.throwIfAborted)(t);const o=(0,d.Of)(n)?n:null;o&&(this._highlightHandle=o.highlight(e))}))}}var p=i(35143),u=i(39356),v=i(91967),_=i(59784),y=i(79468),w=i(46053),f=(i(81806),i(76460),i(47249),i(85842)),g=i(63733),m=i(89465),b=i(75042);let P=class extends v.default{constructor(e){super(e),this._chartData=null,this._graphic=new u.default,this._layer=new g.default({listMode:"hide",internal:!0,title:"Profile line"}),this._update=e=>{const{chartData:t}=e;if(null==t)return this.remove();if(!t.refined)return;const i=t.lines.find((e=>e.viewVisualizationEnabled));if(!i)return;this._graphic.geometry=(0,b.T)(i,e.spatialReference),this._graphic.symbol=new m.default({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,10],lineDashEnding:"HalfPattern",controlPointEnding:"HalfPattern"}],capStyle:"Butt",width:1.5,color:i.color.toArray()},{type:"CIMSolidStroke",capStyle:"Butt",width:2,color:(0,_.bJ)(i.color).toArray()}]}}});const n=this.view?.map?.layers;n&&!n.includes(this._layer)&&n.add(this._layer)}}initialize(){this._layer.add(this._graphic);const e=(0,r.zj)().profileLinesUpdateThrottleMillis;let t=this._update;if(e>0){const i=(0,y.n)(this._update,e);this.addHandles(i),t=i}this.addHandles((0,s.watch)((()=>({spatialReference:this.view.spatialReference,chartData:this._chartData})),t,s.syncAndInitial))}destroy(){this.remove()}remove(){this.view?.map?.remove(this._layer)}update(e){this._chartData=e}};(0,p._)([(0,w.MZ)()],P.prototype,"view",void 0),(0,p._)([(0,w.MZ)()],P.prototype,"_chartData",void 0),P=(0,p._)([(0,f.$)("esri.widgets.ElevationProfile.support.ProfileLine2D")],P);class L{constructor(e,t){this._handles=new n.default,this._inputRepresentation=new c({view:e}),this._hoveredPoints=new a.t({view:e}),this._profileLine=new P({view:e}),this._handles.add([(0,s.watch)((()=>t.viewModel.hoveredPoints),(e=>this._hoveredPoints.update(e)),s.syncAndInitial),(0,s.watch)((()=>{const{state:e,highlightEnabled:i,viewModel:n}=t;return{input:n.input,state:e,highlightEnabled:i}}),(e=>this._updateInputRepresentation(e)),s.syncAndInitial),(0,s.watch)((()=>t.viewModel.chartData),(e=>this._profileLine.update(e)),s.syncAndInitial),(0,s.watch)((()=>t.viewModel.input?.geometry),(()=>{this._profileLine.remove()}),s.syncAndInitial)])}destroy(){this._handles=(0,o.pR)(this._handles),this._inputRepresentation=(0,o.pR)(this._inputRepresentation),this._hoveredPoints=(0,o.pR)(this._hoveredPoints),this._profileLine=(0,o.pR)(this._profileLine)}_updateInputRepresentation(e){let{input:t,state:i,highlightEnabled:n}=e;i===r.o8.Selected&&n?this._inputRepresentation.update(t):this._inputRepresentation.remove()}}},75042:(e,t,i)=>{i.d(t,{T:()=>o});var n=i(23701);function o(e,t){const i=e.samples??[],o=i.length-1,s=[];let r=[];for(let n=0;n<=o;n++){const{x:e,y:t,z:a}=i[n];null!=a&&r.push([e,t,a]),n!==o&&null!=a||!r.length||(s.push(r),r=[])}return new n.default({paths:s,hasZ:!0,spatialReference:t})}}}]);
//# sourceMappingURL=69003.a54c6b13.chunk.js.map