"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[81835],{4216:(e,n,i)=>{i.r(n),i.d(n,{classBreaks:()=>s,heatmapStatistics:()=>u,histogram:()=>r,summaryStatistics:()=>l,uniqueValues:()=>o});var t=i(28383),a=i(72003);async function l(e){const{attribute:n,features:i}=e,{normalizationType:l,normalizationField:o,minValue:s,maxValue:r,fieldType:u,outStatisticTypes:f}=n,d=await(0,t.Jc)({field:n.field,valueExpression:n.valueExpression,normalizationType:l,normalizationField:o,normalizationTotal:n.normalizationTotal,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},i),m=(0,a.Vb)({normalizationType:l,normalizationField:o,minValue:s,maxValue:r}),c={value:.5,fieldType:u},p="esriFieldTypeString"===u?(0,a.z9)({values:d,supportsNullCount:m,percentileParams:c,outStatisticTypes:f}):(0,a.G_)({values:d,minValue:s,maxValue:r,useSampleStdDev:!l,supportsNullCount:m,percentileParams:c,outStatisticTypes:f});return(0,a.oZ)(p,f,"esriFieldTypeDate"===u)}async function o(e){const{attribute:n,features:i}=e,l=await(0,t.Jc)({field:n.field,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,valueExpression:n.valueExpression,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},i,!1),o=(0,a.b3)(l);return(0,a.lv)(o,n.domains,n.returnAllCodedValues,n.fieldDelimiter)}async function s(e){const{attribute:n,features:i}=e,{field:l,normalizationType:o,normalizationField:s,normalizationTotal:r,classificationMethod:u}=n,f=await(0,t.Jc)({field:l,valueExpression:n.valueExpression,normalizationType:o,normalizationField:s,normalizationTotal:r,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},i),d=(0,a.Rw)(f,{field:l,normalizationType:o,normalizationField:s,normalizationTotal:r,classificationMethod:u,standardDeviationInterval:n.standardDeviationInterval,numClasses:n.numClasses,minValue:n.minValue,maxValue:n.maxValue});return(0,a.jM)(d,u)}async function r(e){const{attribute:n,features:i}=e,{field:l,normalizationType:o,normalizationField:s,normalizationTotal:r,classificationMethod:u}=n,f=await(0,t.Jc)({field:l,valueExpression:n.valueExpression,normalizationType:o,normalizationField:s,normalizationTotal:r,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},i);return(0,a.$y)(f,{field:l,normalizationType:o,normalizationField:s,normalizationTotal:r,classificationMethod:u,standardDeviationInterval:n.standardDeviationInterval,numBins:n.numBins,minValue:n.minValue,maxValue:n.maxValue})}async function u(e){const{attribute:n,features:i}=e,{field:a,radius:l,transform:o,spatialReference:s}=n,r=n.size??[0,0],u=(0,t.$r)(i??[],o,s,r);return(0,t.gV)(u,l??void 0,a,r[0],r[1])}},28383:(e,n,i)=>{i.d(n,{$r:()=>y,D9:()=>E,Jc:()=>x,Lc:()=>z,MH:()=>V,Wk:()=>b,a:()=>$,gV:()=>I,hw:()=>g,lX:()=>T,rb:()=>w,sf:()=>F});var t=i(50076),a=i(76931),l=i(18288),o=i(19247),s=i(13312),r=i(76279),u=i(80963),f=i(53430),d=i(4414),m=i(42633),c=i(72003),p=i(98976);let h=null;const v=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;function y(e,n,i,t){const a=(0,u.d9)(i)?(0,u.Vp)(i):null,l=a?Math.round((a.valid[1]-a.valid[0])/n.scale[0]):null;return e.map((e=>{const i=new o.default(e.geometry);return(0,r.Gy)(n,i,i),e.geometry=a?function(e,n,i){return e.x<0?e.x+=n:e.x>i&&(e.x-=n),e}(i,l??0,t[0]):i,e}))}function I(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,i=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;const o=new Float64Array(t*l);n=Math.round((0,a.Lz)(n));let s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;const u=(0,d.YW)(i);for(const{geometry:a,attributes:f}of e){const{x:e,y:i}=a,m=Math.max(0,e-n),c=Math.max(0,i-n),p=Math.min(l,i+n),h=Math.min(t,e+n),v=+u(f);for(let a=c;a<p;a++)for(let l=m;l<h;l++){const u=a*t+l,f=(0,d.hv)(l-e,a-i,n)*v,m=o[u]+=f;s=Math.min(s,m),r=Math.max(r,m)}}return{min:s,max:r}}function w(e){const n=v.exec(e);if(!n)return null;const{hh:i,mm:t,ss:a,ms:o}=n.groups;return Number(i)*l.vf.hours+Number(t)*l.vf.minutes+Number(a)*l.vf.seconds+Number(o||0)}async function x(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!n)return[];const{field:t,field2:a,field3:l,fieldDelimiter:o,fieldInfos:r,timeZone:u}=e,d=t&&r?.find((e=>e.name.toLowerCase()===t.toLowerCase())),v=!!d&&(0,f.isTimeOnlyField)(d),y=!!d&&(0,m.fs)(d),I=e.valueExpression,x=e.normalizationType,z=e.normalizationField,T=e.normalizationTotal,$=[],g=e.viewInfoParams;let F=null,b=null;if(I){if(!h){const{arcadeUtils:e}=await(0,p.lw)();h=e}h.hasGeometryOperations(I)&&await h.enableGeometryOperations(),F=h.createFunction(I),b=g?h.getViewInfo({viewingMode:g.viewingMode,scale:g.scale,spatialReference:new s.default(g.spatialReference)}):null}const V=e.fieldInfos,E=n[0]&&"declaredClass"in n[0]&&"esri.Graphic"===n[0].declaredClass||!V?null:{fields:V};return n.forEach((e=>{const n=e.attributes;let s;if(I){const n=E?{...e,layer:E}:e,i=h.createExecContext(n,b,u);s=h.executeFunction(F,i)}else n&&(s=n[t],a?(s=`${(0,c.gJ)(s)}${o}${(0,c.gJ)(n[a])}`,l&&(s=`${s}${o}${(0,c.gJ)(n[l])}`)):"string"==typeof s&&i&&(y?s=s?new Date(s).getTime():null:v&&(s=s?w(s):null)));if(x&&"number"==typeof s&&isFinite(s)){const e=n&&parseFloat(n[z]);s=(0,c.zS)(s,x,e,T)}$.push(s)})),$}function z(e){const n=e.field,i=e.normalizationType,t=e.normalizationField;let a;return"field"===i?a="(NOT "+t+" = 0)":"log"!==i&&"natural-log"!==i&&"square-root"!==i||(a=`(${n} > 0)`),a}function T(e,n,i){const t=null!=n?e+" >= "+n:"",a=null!=i?e+" <= "+i:"";let l="";return l=t&&a?F(t,a):t||a,l?"("+l+")":""}function $(e,n,i,a){let l;return n?n.name!==e.objectIdField&&a.includes(n.type)||(l=new t.default(i,"'field' should be one of these types: "+a.join(","))):l=new t.default(i,"'field' is not defined in the layer schema"),l}function g(e,n,i){let a;return n?n.name!==e.objectIdField&&(0,f.isNumericField)(n)||(a=new t.default(i,"'field' should be one of these numeric types: "+f.numericTypes.join(","))):a=new t.default(i,"'field' is not defined in the layer schema"),a}function F(e,n){let i=null!=e?e:"";return null!=n&&n&&(i=i?"("+i+") AND ("+n+")":n),i}function b(e,n){if(e&&"intersects"!==e.spatialRelationship)return new t.default(n,"Only 'intersects' spatialRelationship is supported for featureFilter")}function V(e,n,i){const a=function(e){const n=e.layer;return e.fields.filter((e=>!n.getField(e)))}({layer:e,fields:n});if(a.length)return new t.default(i,"Unknown fields: "+a.join(", ")+". You can only use fields defined in the layer schema");const l=function(e){const n=e.layer;return e.fields.filter((e=>{const i=n.getFieldUsageInfo(e);return!i||!i.supportsStatistics}))}({layer:e,fields:n});return l.length?new t.default(i,"Unsupported fields: "+l.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0}function E(e,n,i){const t=[],a=[],l=[],o=[],s=[];e.forEach(((e,n)=>{const r=e.field?"field":"expression",u=e.field||e.valueExpression;e.field?(s.push(u),a.push(`var ${r}${n} = Number($feature["${u}"]);`)):(t.push(`function getValueForExpr${n}() {\n  ${u} \n}`),a.push(`var ${r}${n} = Number(getValueForExpr${n}());`)),i||l.push(`${r}${n} = IIf(${r}${n} < 0, 0, ${r}${n});`),o.push(`${r}${n}`)}));const r=t.length?null:s.reduce(((e,n)=>`${e} + ${n}`));let u=null;return n||i?n?i||r&&(u=`(( ${r} ) >= 0)`):r&&(u=`(( ${r} ) <> 0)`):r&&(u=`(( ${r} ) > 0)`),{valueExpression:[t.length?t.join("\n"):"",a.join("\n"),l.join("\n"),`var total = ${o.join(" + ")};`,"return total;"].filter(Boolean).join("\n\n"),sqlExpression:r,sqlWhere:u}}}}]);
//# sourceMappingURL=81835.2cabd307.chunk.js.map