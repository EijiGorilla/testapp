"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[21964,52030,63733,88877,89646,95327],{4955:(e,t,a)=>{function i(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e,t){return"number"==typeof e?e:e?.stops?.length?function(e){let t=0,a=0;for(let i=0;i<e.length;i++){const n=e[i].size;"number"==typeof n&&(t+=n,a++)}return t/a}(e.stops):t}function r(e,t){if(!t)return e;const a=t.filter((e=>"size"===e.type)).map((t=>{const{maxSize:a,minSize:i}=t;return(n(a,e)+n(i,e))/2}));let i=0;const r=a.length;if(0===r)return e;for(let n=0;n<r;n++)i+=a[n];const o=Math.floor(i/r);return Math.max(o,e)}function o(e){const t=e?.renderer,a=e?.pointerType,n="touch"===a?9:6;if(!t)return n;const o="visualVariables"in t?r(n,t.visualVariables):n;if("simple"===t.type)return i(o,t.symbol);if("unique-value"===t.type){let e=o;return t.uniqueValueInfos?.forEach((t=>{e=i(e,t.symbol)})),e}if("class-breaks"===t.type){let e=o;return t.classBreakInfos.forEach((t=>{e=i(e,t.symbol)})),e}return"dot-density"===t.type||t.type,o}a.d(t,{o:()=>o})},7141:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var i=a(35143),n=a(39356),r=a(50076),o=a(54901),s=(a(81806),a(76460)),l=a(30726),c=a(50346),d=a(68134),u=a(49723),p=a(46053),h=(a(47249),a(85842)),f=a(5600),y=a(87663),g=a(17983),m=a(81130);const w={"buffer-line-to-polygon":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(47413),a.e(34432)]).then(a.bind(a,12051)),"buffer-point-to-polygon":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(47413),a.e(77492)]).then(a.bind(a,77492)),"buffer-polygon-to-polygon":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(47413),a.e(38900)]).then(a.bind(a,38900)),"connection-point":()=>a.e(47615).then(a.bind(a,47615)),"equally-spaced":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(50416)]).then(a.bind(a,50416)),"offset-line":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(78836)]).then(a.bind(a,78836)),"offset-primary-line":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(32968)]).then(a.bind(a,32968)),"point-at-all-vertices-of-line":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(94687)]).then(a.bind(a,94687)),"point-at-beginning-of-line":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(55012)]).then(a.bind(a,55012)),"point-at-beginning-of-radial":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(17057)]).then(a.bind(a,17057)),"point-at-end-of-line":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(1158)]).then(a.bind(a,1158)),"point-at-interior-vertices":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(253)]).then(a.bind(a,253)),"point-at-intersection-vertices-of-line":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(16563)]).then(a.bind(a,16563)),"point-at-not-beginning-of-line":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(86017)]).then(a.bind(a,8398)),"point-at-not-end-of-line":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(70968),a.e(65587)]).then(a.bind(a,65587)),"point-at-polygon-centroid":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(23942)]).then(a.bind(a,23942)),"point-at-polygon-not-start":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(6389)]).then(a.bind(a,6389)),"point-at-polygon-start":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(98844)]).then(a.bind(a,98844)),"point-identity":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(1729)]).then(a.bind(a,1729)),"point-primary-identity":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(54767)]).then(a.bind(a,54767)),"polygon-boundary":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(30429)]).then(a.bind(a,30429)),"polygon-boundary-two-point":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(23673)]).then(a.bind(a,46054)),"polygon-identity":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(39377)]).then(a.bind(a,39377)),"polygon-primary-identity":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(50335)]).then(a.bind(a,50335)),"polygon-vertices":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(75336)]).then(a.bind(a,75336)),"radial-lines":()=>a.e(49503).then(a.bind(a,49503)),"two-point-lines":()=>Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(52847),a.e(68350)]).then(a.bind(a,68350))};var b=a(19902),v=a(28009),_=a(12899);const I=()=>s.A.getLogger("esri.editing.sharedTemplates.executor.createTemplateExecutor"),F="globalid";async function M(e){if(!(0,f.xZ)(e))throw new r.default("template-executor:template-not-loaded","The template must be loaded before it can be executed.");if((0,f.Cq)(e))return function(e){return t=>{const a=[],i=[];(0,g.i)({geometry:t,template:e,edits:a,relationships:i});const n=(0,m.zE)(a);return{edits:(0,m.Vi)(a),relationships:i,primary:a[0]??null,featureExtent:n,rotationPoint:n?.center??null}}}(e);if((0,f.Dt)(e))return async function(e){const{definition:t}=e,a=await Promise.all(t.allParts.map(A));return(i,n)=>{const r=[],o=[],s=new Set,l=()=>{if(t.createUtilityNetworkAssociations&&"completion"===n){const{utilityNetwork:e,utilityNetworkAssociationsTable:a}=t;e&&a?function(e){const{edits:t,utilityNetworkHelper:a}=e,i=new Map;for(const n of t)""!==n.tag&&a.layerIdToSourceIdLookup.has(n.id)&&(0,y.tE)(i,n.tag,(()=>[])).push(n);for(const n of i.values())if(!(n.length<2))for(let t=0;t<n.length;t++){const a=n[t];for(let i=t+1;i<n.length;i++)S(a,n[i],e)}}({associationGraphics:s,associationsTable:a,edits:r,relationships:o,utilityNetworkHelper:e}):I().warn("Unable to create utility network associations between group template features. The utility network or its associations table is unavailable.")}const e=(0,m.zE)(r);return{associationGraphics:s,edits:(0,m.Vi)(r),relationships:o,primary:r[0]??null,featureExtent:e,rotationPoint:e?.center??null}};if(null==i)return I().warn("No geometry provided to group template executor. Result will be empty."),l();const d=a.map((t=>t({edits:r,mode:n,parentTemplate:e,relationships:o,shape:i}))).filter(c.isPromiseLike);return 0===d.length?l():Promise.all(d).then((()=>l()))}}(e);if((0,f.JC)(e))return async function(e){const{createPresetServiceEdit:t}=await Promise.all([a.e(26871),a.e(91523),a.e(16364),a.e(82103),a.e(48045),a.e(75274)]).then(a.bind(a,75274));return function(a,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(0,b.isPoint)(a))throw new r.default("template-executor:invalid-input-geometry","The input goemetry for a preset template must be a point.");const o=[],s=[],l=t({geometry:a,template:e,edits:o,relationships:s,rotation:n,mode:i});return{edits:(0,m.Vi)(o),relationships:s,primary:o[0]??null,featureExtent:(0,m.zE)(o),rotationPoint:l}}}(e);throw new r.default("template-executor:unsupported-template-type","The template type is not supported.")}async function A(e){const t=await function(e){const t=w[e];if(!t)throw new Error(`Builder type ${e} is not supported.`);return t()}(e.builderType);return a=>t.execute({...a,templatePart:e})}function S(e,t,a){const{associationGraphics:i,associationsTable:r,edits:o,utilityNetworkHelper:s,relationships:l}=a,c=s.findAgat(e.graphic,e.layer),d=s.findAgat(t.graphic,t.layer);if(!c||!d)return;const p=s.findRules(c).map((a=>a.fromNetworkSource?.sourceId!==c.networkSourceId||a.fromAssetGroup?.assetGroupCode!==c.assetGroup||null!==a.fromAssetType?.assetTypeCode&&a.fromAssetType?.assetTypeCode!==c.assetType||a.toNetworkSource.sourceId!==d.networkSourceId||a.toAssetGroup?.assetGroupCode!==d.assetGroup||null!==a.toAssetType&&a.toAssetType?.assetTypeCode!==d.assetType?a.toNetworkSource.sourceId!==c.networkSourceId||a.toAssetGroup?.assetGroupCode!==c.assetGroup||null!==a.toAssetType&&a.toAssetType?.assetTypeCode!==c.assetType||a.fromNetworkSource.sourceId!==d.networkSourceId||a.fromAssetGroup?.assetGroupCode!==d.assetGroup||null!==a.fromAssetType?.assetTypeCode&&a.fromAssetType?.assetTypeCode!==d.assetType?null:{rule:a,from:{agat:d,item:t},to:{agat:c,item:e}}:{rule:a,from:{agat:c,item:e},to:{agat:d,item:t}})).filter((e=>e?.rule.ruleType===_.D2.RTJunctionEdgeConnectivity||e?.rule.ruleType===_.D2.RTEdgeJunctionEdgeConnectivity||e?.rule.ruleType===_.D2.RTContainment?null:e)).filter((e=>null!==e));if(0===p.length)return;const h=(0,v.E)(r),f=new Set;for(const y of p){const e={};e[h.fromNetworkSourceId]=y.rule.fromNetworkSource.sourceId,e[h.fromGlobalId]=y.from.item.graphic.attributes[y.from.item.layer.globalIdField??F],e[h.fromTerminalId]=null,y.rule.fromTerminal&&(e[h.fromTerminalId]=y.rule.fromTerminal.terminalId),e[h.toNetworkSourceId]=y.rule.toNetworkSource.sourceId,e[h.toGlobalId]=y.to.item.graphic.attributes[y.to.item.layer.globalIdField??F],e[h.toTerminalId]=null,y.rule.toTerminal&&(e[h.toTerminalId]=y.rule.toTerminal.terminalId),e[h.associationType]=y.rule.ruleType,e[h.percentAlong]=null,e[h.isContentVisible]=y.rule.ruleType===_.D2.RTContainment?1:0,e[h.status]=0,e[h.globalId]=(0,u.yS)();const t=`${e[h.fromNetworkSourceId]}-${e[h.fromGlobalId]}-${e[h.toNetworkSourceId]}-${e[h.toGlobalId]}-${e[h.associationType]}`;if(f.has(t))continue;f.add(t);const a=new n.default({attributes:e,sourceLayer:r});i.add(a),o.push({id:r.layerId,graphic:a,tag:"",layer:r}),l.push({sourceGraphic:y.to.item.graphic,sourceLayerId:y.to.item.layer.layerId,destinationGraphic:a,destinationLayerId:r.layerId,sourceField:y.to.item.layer.globalIdField??F,destinationField:h.toGlobalId??F}),l.push({sourceGraphic:y.from.item.graphic,sourceLayerId:y.from.item.layer.layerId,destinationGraphic:a,destinationLayerId:r.layerId,sourceField:y.from.item.layer.globalIdField??F,destinationField:h.fromGlobalId??F})}}var T,k=a(63733),P=a(31933),E=a(8503),x=a(94277),V=a(20072),C=a(97513),Z=a(3589),O=a(1723),H=a(48594),R=a(21661),L=a(88877),D=a(95600),z=a(87102),G=a(81257);const U=Symbol(),N=Symbol(),q=Symbol(),W=Symbol(),j={point:["point"],multipoint:["multipoint"],polygon:["polygon","freehandPolygon","rectangle","circle"],polyline:["polyline","freehandPolyline"],mesh:[],multipatch:[]};let $=T=class extends L.default{constructor(e){super(e),this.type="create-features",this.createFeatureState="create-new",this.data=void 0,this.isNested=!1,this._getDrawMeshHelpMessage=void 0,this._webStyleCache=new Map,this._featureFormHandle=null,this._visualVariableAttributes={rotation:null,size:null},this._featureFormViewModel=new z.default,this._sketchViewModel=null,this._attachmentFileInfos=new Map,this._isActive=!0}initialize(){this.isNested&&(this._isActive=!1),this._initializeSketchViewModel()}destroy(){this._sketchViewModel.destroy()}get featureFormViewModel(){return this._featureFormViewModel}get hasPendingEdits(){if(this.pendingFeatures.some((e=>!!this.data.getEditsForPendingFeature(e)?.modified)))return!0;const{creationInfo:e,upload:t}=this.data,a=this._sketchViewModel,{activeComponent:i}=a,n=a.createGraphic?.geometry?.type;return!("polyline"!==n&&"polygon"!==n&&"multipoint"!==n||"draw-2d"!==i?.type&&"draw-3d"!==i?.type)&&i.drawOperation.committedVertices.length>0||!(!t||"pending"!==t.state&&"success"!==t.state)||!!e?.geometryToPlace}get hasPreviousStep(){return this._stepIndex>0||"update-pending"===this.createFeatureState&&!!this.data.selectedPendingFeature&&!this.parent&&!(0,R.v)(this.data.creationInfo)}get helpMessage(){const{creationInfo:e,viewModel:t}=this.data;if("creating-features"!==this.stepId||!e)return;const i=e.layer.geometryType,n=this._sketchViewModel.createGraphic;if("mesh"===i){this._getDrawMeshHelpMessage||a.e(76030).then(a.bind(a,76030)).then((e=>{this._getDrawMeshHelpMessage=e.getDrawMeshHelpMessage}));const{view:e}=t;return"3d"===e?.type?this._getDrawMeshHelpMessage?.(n,e):void 0}const r=this._sketchViewModel.activeCreateToolDrawMode,o=this._sketchViewModel.activeTool;return(0,x.$)("rectangle"===o?"rectangle":"circle"===o?"circle":i,n?.geometry,r)}get layer(){return this.data.creationInfo?.layer}get numPendingFeatures(){return this.pendingFeatures.length}get numPendingFeaturesExcludingHidden(){return this.pendingFeatures.filter((e=>this.data.isDisplayable(e))).length}get parent(){return this.data.parent}get parentLayer(){return this.parent?.data.editorItem.layer}get pendingFeatures(){return this.data.pendingFeatures}get keyboardCancellationEnabled(){return 0===this.numPendingFeatures}get reliesOnOwnerAdminPrivileges(){return this.data.editorItem?.capabilities.create.reliesOnOwnerAdminPrivileges??!1}get shouldShowAttachments(){return(this.data.selectedPendingFeature&&this.data.editorItem?.capabilities.create.attachments.enabled)??!1}get shouldAllowAttachmentEditing(){return this.shouldShowAttachments}get sketchViewModel(){return this._sketchViewModel}get test(){}get availableCreateTools(){const e=this.data.creationInfo?.layer.geometryType,t=this.data.viewModel.view;if(!e)return[];if(this.data.creationInfo?.maxFeatures&&this.data.creationInfo.maxFeatures<=this.numPendingFeatures)return[];if((0,f.w2)(this.data.fullTemplate)){const{tool:t}=(0,D.Xm)(e,this.data.fullTemplate);return[t]}return"2d"!==t?.type&&"multipoint"===e?[]:[...j[e]]}get _attachmentsActive(){const e=this.data.viewModel.attachmentsViewModel.mode,t=this.stepId;return this.shouldShowAttachments&&("add"===e||"edit"===e||"adding-attachment"===t||"editing-attachment"===t)}async enter(){this._isActive=!0,"awaiting-feature-creation-info"!==this.stepId&&await this._updatingHandles.addPromise(this._setUpCreatingFeaturesStep())}exit(){this._isActive=!1,this.removeHandles([q])}async updatePendingFeature(e){if(e!==this.data.selectedPendingFeature)return this._sketchViewModel.cancel(),this._startUpdating({feature:e})}async start(){return await super.start(),(0,P.bI)(this.data.creationInfo?.layer)?null:{enter:async()=>{},exit:async()=>{},viewModel:this._sketchViewModel}}async save(){const{featureFormViewModel:e}=this;if(e.pendingSubtypeChoice)return;e.submit(),this._stashValidationState();const t=this.data.selectedPendingFeature,a=this._hasValidationErrors(t)?t:this.data.pendingFeatures.find((e=>this._hasValidationErrors(e)));return a?(await this._startUpdating({feature:a}),void e?.submit()):super.save()}back(e){return"update-pending"!==this.createFeatureState||!this.data.selectedPendingFeature||(0,R.v)(this.data.creationInfo)||this._attachmentsActive||this.parent?super.back(e):this._clearSelectedFeature()}previous(e){return"update-pending"!==this.createFeatureState||!this.data.selectedPendingFeature||(0,R.v)(this.data.creationInfo)||this._attachmentsActive?super.previous(e):this._clearSelectedFeature()}cancelFeature(e){this.data.isSharedTemplateWorkflow?s.A.getLogger(this).warn("Cannot cancel individual features created by shared templates."):(this.data.removePendingFeature(e),this.sketchViewModel.layer.graphics.remove(e))}static create(e){const{addAttachmentsCallback:t,applyEditsCallback:a,applyEditsFeatureServiceCallback:i,isNested:n,creationInfo:r,parent:o,snappingManager:s,startAt:l,viewModel:c}=e,d=e.sketchOptions??new C.A,p=r?.layer,h=p?c.findEditorItemForLayer(p):void 0,y=new T({data:new H.default({creationInfo:r,editorItem:h,parent:o,sketchOptions:d,snappingManager:s,viewModel:c}),isNested:n,onCommit:async e=>{const{creationInfo:n}=e;if(!n)return;y._sketchViewModel.cancel();const r=e.pendingFeatures.toArray(),{layer:o}=n,s=o.capabilities?.editing.supportsGlobalId&&"globalIdField"in o,l=y._attachmentFileInfos,{fullTemplate:d}=e,p=(0,D._3)(y.data),h=(0,f.Sf)(d)&&p;if(s){if(function(e){for(const t of e){const{sourceLayer:e}=t;e&&"globalIdField"in e&&null!=e.globalIdField&&(t.attributes[e.globalIdField]??=(0,u.yS)())}}(r),h){let t=function(e,t){return e.map((e=>{const{addFeatures:a}=e;if(!a||0===a.length)return e;const i=[];for(const n of a){const e=t.get(n);if(e)for(const{file:t}of e)i.push({feature:n,attachment:{globalId:(0,u.yS)(),data:t}})}return i.length?{...e,addAttachments:i}:e}))}(p,l);const a=await(0,D.uh)(o,c.view);a&&(t=(0,D.sy)({edits:t,serviceInfo:a,view:c.view,findOriginalFeature:t=>e.getEditsForPendingFeature(t)?.initialFeature??t})),await i(d.featureService,t,{globalIdUsed:!0,gdbVersion:d.layer.gdbVersion??void 0})}else{const e=function(e,t){const a=[];if(!t||0===t.size)return{addFeatures:e};for(const[i,n]of t)for(const{file:e}of n)a.push({feature:i,attachment:{globalId:(0,u.yS)(),data:e}});return a.length?{addFeatures:e,addAttachments:a}:{addFeatures:e}}(r,l);await a(o,e,{globalIdUsed:!0})}return}const g=h?await i(d.featureService,p,{gdbVersion:d.layer.gdbVersion??void 0}):[await a(o,{addFeatures:r})];g&&l.size>0&&await Promise.all(g.map((e=>{if(e?.addFeatureResults)return t(o,function(e,t,a,i){const n=[];return t.forEach(((t,r)=>{if(!t.error){const o=e[r],s=i.get(o)||[];o.attributes[a.objectIdField]=t.objectId,s.forEach((e=>{let{form:t}=e;return n.push({feature:o,attachment:t})}))}})),n}(r,e.addFeatureResults,o,l))})))}});return y._set("steps",this._createWorkflowSteps(y,l)),y}_fadeExistingFeatures(e){if("effect"in e){const t=e.effect;return e.effect="saturate(0.6) opacity(0.8)",(0,o.hA)((()=>e.effect=t))}const t=e.opacity;return e.opacity=.7,(0,o.hA)((()=>e.opacity=t))}async _initializeFullTemplateAndExecutorInfo(e){const{creationInfo:t}=e,{view:a}=e.viewModel;if(!t||!a)return null;const i=await(0,D.sE)(t,a);if(e.fullTemplate=i,i&&(0,f.Sf)(i)){const n={completionResults:[],executor:await M(i),serviceLayersById:await(0,D.EH)(t.layer,a)};e.templateExecutorInfo=n}return i}async _startCreating(){this.removeHandles(N);const{data:e}=this;if(!e.creationInfo)return;const t=this.data.creationInfo?.maxFeatures;if(t&&this.numPendingFeatures>=t)return this.sketchViewModel.cancel(),void(this.numPendingFeatures&&await this._startUpdating({feature:this.pendingFeatures.at(-1)}));this.createFeatureState="create-new",await(0,D.AP)(this._sketchViewModel,e,this._webStyleCache)}async _clearSelectedFeature(){const e=this._featureFormViewModel.pendingSubtypeChoice;e&&(e.resolve("undo"),await e.promise),this._stashValidationState(),this.sketchViewModel.cancel(),this.data.selectedPendingFeature=null,this._featureFormHandle=(0,l.xt)(this._featureFormHandle),this._featureFormViewModel.feature=null;const t=this.data.viewModel.attachmentsViewModel;"add"!==t.mode&&"edit"!==t.mode||this.data.viewModel.activeWorkflow?.previous()}_stashValidationState(){const e=this._featureFormViewModel.feature,t=e&&this.data.getEditsForPendingFeature(e);t&&(t.submittable=this._featureFormViewModel.submittable)}async _selectFeatureForUpdate(e){let{feature:t,initialFeature:a=t}=e;this._stashValidationState();const{data:i,pendingFeatures:n,_webStyleCache:r}=this;n.includes(t)||i.addPendingFeature(t,a),i.selectedPendingFeature=t;const{_featureFormViewModel:s,_sketchViewModel:c}=this,{creationInfo:u,viewModel:p}=i,{attachmentsViewModel:h,layerInfos:f,view:y}=p;if(!y||!u)return;(0,l.xt)(this._featureFormHandle);const g=t.sourceLayer,m=(0,D.Z5)(f,g),w=m?.formTemplate,b=y.spatialReference;s.set({arcadeEditType:"INSERT",feature:t,formTemplate:w,spatialReference:b,map:y.map}),"add"!==h.mode&&"edit"!==h.mode||p.activeWorkflow?.previous(),h.graphic=t,h.fileInfos.removeAll(),h.mode="view",(this._attachmentFileInfos.get(t)||[]).forEach((e=>{let{file:t,form:a}=e;return h.addFile(t,a)})),await(0,D.FC)(t,r,"2d"===y.type?y.scale:null);const v=i.getEditsForPendingFeature(t);this._featureFormHandle=(0,o.vE)([s.on("value-change",(async()=>{v?.updateAttributes(s.getValues()),await(0,D.FC)(t,r,"2d"===y.type?y.scale:null)})),c.on(["update","undo","redo"],(e=>{("undo"===e.type||"redo"===e.type||"update"===e.type&&null!=e.toolEventInfo&&(0,D.Ks)(e.toolEventInfo.type))&&s.notifyFeatureGeometryChanged()})),(0,d.watch)((()=>s.feature?.sourceLayer),(e=>t.sourceLayer=e)),(0,d.watch)((()=>[s.feature,s.submittable]),(()=>this._stashValidationState()))]),this.createFeatureState="update-pending"}async _startUpdating(e){let{feature:t,initialFeature:a=t}=e;await this._selectFeatureForUpdate({feature:t,initialFeature:a});const{_sketchViewModel:i,data:n}=this,{creationInfo:r,viewModel:o}=n,{view:s}=o;if(!s||!r)return;const l=t.sourceLayer??r.layer;return(0,P.bI)(l)?void 0:(this._visualVariableAttributes=(0,D.EO)(t),(0,D.J_)({graphic:t,sketchViewModel:i,sourceLayer:l,visualVariables:this._visualVariableAttributes,webStyleCache:this._webStyleCache}))}static _createWorkflowSteps(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"awaiting-feature-creation-info";const{data:a}=e,i=(0,D.z4)(["awaiting-feature-creation-info","creating-features","adding-attachment","editing-attachment"],t,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){const{creationInfo:t,viewModel:i}=a,{view:n}=i;n&&((0,R.v)(t)?e.addHandles(await(0,R.P)({view:n,data:a,next:()=>e.next(),cancel:()=>i.cancelWorkflow({warnIfNoWorkflow:!1})}),this.id):(a.parent&&t&&e.addHandles(i.restrictFeatureTemplatesViewModelToLayer(t.layer),this.id),e.addHandles(i.featureTemplatesViewModel.on("select",(t=>{let{item:i}=t;i&&(a.creationInfo={...a.creationInfo,layer:i.layer,template:i.template},e.next())})),this.id)))},async tearDown(){e.removeHandles(this.id)}}),"creating-features":()=>({id:"creating-features",async setUp(){e._isActive&&await e._setUpCreatingFeaturesStep()},async tearDown(t){const{viewModel:i}=a;t.canceled&&(e.removeHandles([q,U,N,W]),i.attachmentsViewModel.fileInfos.removeAll(),e._attachmentFileInfos.clear())}}),"adding-attachment":()=>({id:"adding-attachment",parent:"creating-features",async setUp(){},async tearDown(){const{attachmentsViewModel:t}=a.viewModel,{graphic:i,fileInfos:n}=t;e._attachmentFileInfos.set(i,n.toArray()),t.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"creating-features",async setUp(){},async tearDown(){const{attachmentsViewModel:t}=a.viewModel,{graphic:i,fileInfos:n}=t;e._attachmentFileInfos.set(i,n.toArray()),t.mode="view"}})});return(0,D.bn)(a,i)}static _configureSketchViewModel(e){const{data:t}=e,a=e._webStyleCache,{creationInfo:i,viewModel:n}=t,{view:r}=n,s=e._sketchViewModel,u=[];if(!r)return(0,o.hA)();if("2d"===r.type){i&&u.push(e._fadeExistingFeatures(i.layer));const t=(0,c.debounce)(((e,t)=>Promise.all(e.map((e=>(0,D.FC)(e,a,t))))));u.push((0,d.watch)((()=>r.scale),(e=>t(s.layer.graphics,e))))}const p=(0,D.nc)(t.fullTemplate,i?.attributeOverrides),h=(0,d.watch)((()=>s.createGraphic),(i=>{i&&!e.hasHandles(N)&&e._updatingHandles.addPromise((0,D.Pi)({creationAttributes:p,data:t,sketchViewModel:s,view:r,webStyleCache:a}).then((t=>e.addHandles(t,N))))})),f=async a=>{const{attachmentsViewModel:o}=n,{_featureFormViewModel:l}=e;if(a.graphics.length>1)return void await e._clearSelectedFeature();const c=a.graphics[0];if("complete"===a.state){const{submittable:t}=l;if(e.numPendingFeatures!==i?.maxFeatures&&t||l.submit(),await e._clearSelectedFeature(),"add"!==o.mode&&"edit"!==o.mode||n.activeWorkflow?.previous(),!a.aborted&&r.activeTool===e.sketchViewModel.activeComponent&&(await e.sketchViewModel.wait(),"ready"===e.sketchViewModel.state&&"mesh"!==e.data.creationInfo?.layer.geometryType))return e._startCreating()}else{if("start"===a.state)return c.sourceLayer??=t.creationInfo?.layer,await(0,D.cY)({sketchViewModel:s,graphic:c,visualVariables:e._visualVariableAttributes,webStyleCache:e._webStyleCache,sourceLayer:c.sourceLayer}),e._selectFeatureForUpdate({feature:c});if("active"===a.state){await e.updatePendingFeature(c);const t=e._visualVariableAttributes;await(0,D.EA)(r,c,a,t,e._webStyleCache);const i=c.attributes,{rotation:n,size:o}=t;if(null!=n){const{field:e}=n;l.setValue(e,i[e])}if(null!=o){const{field:e}=o;l.setValue(e,i[e])}}}},y=async a=>{if(a.graphics.forEach((e=>{t.removePendingFeature(e)})),!(0,R.v)(t.creationInfo))return e._startCreating()};u.push(h,s.on("create",(t=>e._updatingHandles.addPromise((async t=>{if("cancel"!==t.state&&"complete"!==t.state||e.removeHandles(N),"cancel"===t.state&&null!==r.activeTool&&r.activeTool!==e.sketchViewModel.activeComponent&&(await e._waitForActiveToolCleared(),await e._startCreating()),"complete"===t.state&&t.graphic){const a=await e._processEdits(t.graphic,{scale:"2d"===r.type?r.scale:null,useSourceLayer:!0,webStyleCache:e._webStyleCache});a&&(await e._waitForActiveToolCleared(),await e._startUpdating({feature:a}))}})(t)))),s.on("update",(t=>e._updatingHandles.addPromise(f(t)))),s.on("delete",(t=>e._updatingHandles.addPromise(y(t)))),(0,d.when)((()=>!e.numPendingFeatures),(()=>e._updatingHandles.addPromise((async()=>{if((0,R.v)(t.creationInfo))try{await e.data.viewModel.back()}catch{}return e._startCreating()})()))),(0,o.hA)((()=>{s.cancel()})),function(e,t){let a=null;const i=()=>e.snappingOptions.featureSources,n=()=>(a=new Z.default({layer:e.layer}),i().add(a),a),r=()=>{null!=a&&(i().remove(a),a=(0,l.pR)(a))};return(0,o.vE)([(0,d.watch)((()=>{const e=t.creationInfo?.layer,a=i().find((t=>t.layer===e));return{hasFeatureLayerSource:!!a,enabled:a?.enabled??!1}}),(e=>{let{hasFeatureLayerSource:t,enabled:i}=e;if(!t)return r();a??=n(),a.enabled=i}),d.syncAndInitial),(0,o.hA)(r)])}(s,t),...function(e){const t=e.viewModel.view;if(!t)return[];const a=[];if("3d"===t.type){const i=new V.A({view:t});a.push((0,d.watch)((()=>e.selectedPendingFeature),((e,t)=>{i.remove(e),i.add(t)})),(0,o.hA)((()=>i.destroy())))}const i=new V.A({view:t,highlightName:O.n4});return a.push((0,d.watch)((()=>e.temporaryHighlightFeature),(e=>{i.removeAll(),i.add(e)})),(0,o.hA)((()=>i.destroy()))),a}(t));const g=(0,o.vE)(u);return s.addHandles(g),g}_initializeSketchViewModel(){const{data:e}=this,{view:t}=e.viewModel,a=new k.default({elevationInfo:e.creationInfo?.layer.elevationInfo,internal:!0,listMode:"hide",title:"createFeaturesWorkflow-internal"}),i=new G.default({layer:a,creationMode:"single",sketchOptions:e.sketchOptions,snappingManager:e.snappingManager,updateOnGraphicClick:!1,defaultUpdateOptions:{multipleSelectionEnabled:!1},view:t});this._sketchViewModel=i,t?.map.add(a),this.addHandles([(0,o.hA)((()=>{t?.destroyed||t?.map.remove(a),a.destroy()})),(0,d.watch)((()=>this.numPendingFeatures>0),(e=>this._sketchViewModel.updateOnGraphicClick=e),d.initial)])}_hasValidationErrors(e){return!!e&&(!this.data.isSubmittable(e)||!!this._featureFormViewModel.validateContingencyConstraints(e.attributes,{includeIncompleteViolations:!0})?.length)}async _processEdits(e,t){const{data:a}=this,{layerInfos:i,view:n}=a.viewModel,r=this._featureFormViewModel,{templateExecutorInfo:o}=a;if(!o){const t=e.clone();return t.geometry=null,a.addPendingFeature(e,t),e}const s=this.sketchViewModel.layer;s.remove(e);const{executor:l}=o,u=l(e.geometry,"completion"),p=(0,c.isPromiseLike)(u)?await u:u;o.completionResults.push(p),(0,D.O)(p.relationships),r.arcadeEditType="INSERT",r.map=n?.map,r.spatialReference=n?.spatialReference,p.primary&&a.creationInfo?.attributeOverrides&&(p.primary.graphic.attributes={...p.primary.graphic.attributes,...a.creationInfo.attributeOverrides});for(const c of p.edits){let e=null;if(c.addFeatures)for(const n of c.addFeatures){const o=n.clone();o.geometry=null,null!=n.geometry&&(n.symbol=await(0,E.getDisplayedSymbol)(n,t),s.add(n));const l=a.addPendingFeature(n,o,{isAssociation:!!p.associationGraphics?.has(n)});n.sourceLayer!==e?.layer&&(e=(0,D.Z5)(i,n.sourceLayer)),r.feature=n,r.formTemplate=e?.formTemplate,await(0,d.whenOnce)((()=>!r.updating)),l.submittable=r.submittable}}return r.feature=null,await(0,d.whenOnce)((()=>!r.updating)),p.edits.reduce(((e,t)=>e+(t.addFeatures?.length??0)),0)>1?null:p.primary?.graphic}async _setUpCreatingFeaturesStep(){if(this.hasHandles(q))return;const{data:e,sketchViewModel:t}=this,{creationInfo:a,viewModel:i}=e,{attachmentsViewModel:s,view:c}=i;if(!c||!a?.layer)throw new r.default("missing-parameters","CreateFeaturesWorkflow requires a view and creationInfo.");const{initialFeature:u,layer:p}=a,h=[],y=[];this._featureFormHandle=(0,l.xt)(this._featureFormHandle),this._visualVariableAttributes={rotation:null,size:null},e.editorItem=i.findEditorItemForLayer(a.layer),a.template&&(null==e.fullTemplate&&await this._initializeFullTemplateAndExecutorInfo(e),y.push((0,o.hA)((()=>{e.templateExecutorInfo&&(e.templateExecutorInfo.completionResults=[])})))),t.allowDeleteKey=!e.isSharedTemplateWorkflow,(0,D.r8)(s),h.push((0,d.watch)((()=>s.mode),(e=>{switch(e){case"add":this.go("adding-attachment");break;case"edit":this.go("editing-attachment")}})));const g=(0,D.Pz)(c);h.push(g);const m=(0,P.bI)(a.layer),{template:w}=a,b=!w||(0,f.gZ)(w)||(0,f.w2)(w)&&"feature"===w.type,v=m&&b;try{if(v){const t=u??new n.default({attributes:(0,D.nc)(e.fullTemplate,a.attributeOverrides),sourceLayer:p}),i=await this._processEdits(t);i&&await this._startUpdating({feature:i})}else h.push(T._configureSketchViewModel(this)),u?(t.layer.add(u),await this._startUpdating({feature:u})):await this._startCreating()}finally{g.remove()}const _=(0,o.hA)((()=>{for(const a of e.pendingFeatures)t.layer.remove(a),e.removePendingFeature(a)})),I=(0,d.watch)((()=>c?.timeZone),(e=>{this._featureFormViewModel.timeZone=e,this.data.timeZone=e}),d.initial),F=(0,o.hA)((()=>{(0,R.v)(a)&&i.cancelWorkflow({warnIfNoWorkflow:!1})}));this._featureFormHandle&&h.push(this._featureFormHandle),this.addHandles(h,this._handleKeys.beforeCommit),this.addHandles(y,this._handleKeys.afterCommit),this.addHandles([(0,o.hA)((()=>s.fileInfos.removeAll())),(0,o.vE)(h),(0,o.vE)(y),F,_,I],q)}async _waitForActiveToolCleared(){const e=this.data.viewModel.view;if(null==e?.activeTool)return;const t=new AbortController;this.addHandles((0,o.rE)(t),W),await(0,d.whenOnce)((()=>null==e?.activeTool),t.signal),t.abort()}};(0,i._)([(0,p.MZ)()],$.prototype,"createFeatureState",void 0),(0,i._)([(0,p.MZ)()],$.prototype,"data",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],$.prototype,"isNested",void 0),(0,i._)([(0,p.MZ)()],$.prototype,"featureFormViewModel",null),(0,i._)([(0,p.MZ)()],$.prototype,"hasPendingEdits",null),(0,i._)([(0,p.MZ)()],$.prototype,"hasPreviousStep",null),(0,i._)([(0,p.MZ)()],$.prototype,"_getDrawMeshHelpMessage",void 0),(0,i._)([(0,p.MZ)()],$.prototype,"helpMessage",null),(0,i._)([(0,p.MZ)()],$.prototype,"layer",null),(0,i._)([(0,p.MZ)()],$.prototype,"parent",null),(0,i._)([(0,p.MZ)()],$.prototype,"parentLayer",null),(0,i._)([(0,p.MZ)()],$.prototype,"keyboardCancellationEnabled",null),(0,i._)([(0,p.MZ)()],$.prototype,"reliesOnOwnerAdminPrivileges",null),(0,i._)([(0,p.MZ)()],$.prototype,"shouldShowAttachments",null),(0,i._)([(0,p.MZ)()],$.prototype,"shouldAllowAttachmentEditing",null),(0,i._)([(0,p.MZ)()],$.prototype,"sketchViewModel",null),(0,i._)([(0,p.MZ)()],$.prototype,"availableCreateTools",null),(0,i._)([(0,p.MZ)()],$.prototype,"_attachmentsActive",null),$=T=(0,i._)([(0,h.$)("esri.widgets.Editor.CreateFeaturesWorkflow")],$);const B=$},17983:(e,t,a)=>{a.d(t,{i:()=>h});var i=a(39356),n=a(50076),r=a(49723),o=a(5600),s=a(81130),l=a(66388),c=a(19247),d=a(65215),u=a(23701),p=a(31933);function h(e){let{edits:t,geometry:a,relationships:l,tag:c="",template:d}=e;if((0,s.AO)(a)){const e=a.geometry.clone();for(const a of e.paths)h({geometry:new u.default({spatialReference:e.spatialReference,paths:[a],hasZ:e.hasZ,hasM:e.hasM}),template:d,edits:t,relationships:l,tag:c});return}const{definition:p,layer:y}=d;a=f(a,y);const g=new i.default({attributes:p.defaultValues?{...p.defaultValues}:{},geometry:a,sourceLayer:y});if(b(g,y),y.globalIdField&&(g.attributes[y.globalIdField]=(0,r.yS)()),t.push({id:y.layerId,graphic:g,tag:c,layer:y}),0!==p.relationships.length)for(const s of p.relationships||[]){const e=s.template;if(null==s.relationshipMetadata||!(0,o.xZ)(e))throw new n.default("shared-template:missing-relationship-metadata-or-definition","Relationship part must have metadata and a fully loaded template with definition");const{layer:a}=e,c=new i.default({attributes:{...p.defaultValues},sourceLayer:a});b(c,a),a.globalIdField&&(c.attributes[a.globalIdField]=(0,r.yS)()),t.push({graphic:c,id:a.layerId,tag:"",layer:a}),l.push({...s.relationshipMetadata,sourceGraphic:g,destinationGraphic:c})}}function f(e,t){if(!e)return null;if(e.hasZ===t.hasZ&&e.hasM===t.hasM)return e;switch(e.type){case"point":return new c.default({spatialReference:e.spatialReference,x:e.x,y:e.y,...t.hasZ?e.hasZ?{z:e.z}:{z:m(t)}:{},...t.hasM?e.hasM?{m:e.m}:{m:w(t)??void 0}:{}});case"polygon":return new d.default({spatialReference:e.spatialReference,rings:y(e.rings,t.hasZ,t.hasM,m(t),w(t),e.hasM?e.hasZ?3:2:-1,e.hasZ?2:-1),hasZ:t.hasZ,hasM:t.hasM});case"polyline":return new u.default({spatialReference:e.spatialReference,paths:y(e.paths,t.hasZ,t.hasM,m(t),w(t),e.hasM?e.hasZ?3:2:-1,e.hasZ?2:-1),hasZ:t.hasZ,hasM:t.hasM});case"multipoint":return new l.default({spatialReference:e.spatialReference,hasZ:t.hasZ,hasM:t.hasM,points:g(e.points,t.hasZ,t.hasM,m(t),w(t),e.hasM?e.hasZ?3:2:-1,e.hasZ?2:-1)});default:return e}}function y(e,t,a,i,n,r,o){const s=[];for(const l of e)s.push(g(l,t,a,i,n,r,o));return s}function g(e,t,a,i,n,r,o){const s=[];for(const l of e){const e=[l[0],l[1]];t&&(e[2]=o>-1?l[2]:i),a&&(e[t?3:2]=r>-1?l[r]:n),s.push(e)}return s}function m(e){return e.capabilities.editing?.zDefault??0}function w(e){return e.capabilities.editing.supportsUpdateWithoutM?void 0:0}function b(e,t){(0,p.F2)(t)&&(e.sourceLayer=t.findSublayerForFeature(e))}},20072:(e,t,a)=>{a.d(t,{A:()=>p});var i=a(35143),n=a(91967),r=a(46053),o=(a(81806),a(76460),a(47249),a(85842)),s=a(69120),l=a(1723),c=a(90992),d=a(9912);let u=class extends n.default{constructor(e){super(e),this.view=null,this.highlightName=l.Tv}add(e){const t=!e||Array.isArray(e)?e:[e];t?.length&&t.forEach((e=>this._highlight(e)))}remove(e){const t=!e||Array.isArray(e)?e:[e];t?.length&&t.forEach((e=>this._removeHighlight(e)))}removeAll(){this.removeAllHandles()}_highlight(e){const t=(0,s.i)(this.view,e.layer);(0,c.Of)(t)&&this.addHandles(t.highlight(e,{name:this.highlightName}),(0,d.getHighlightKeyForFeature)(e))}_removeHighlight(e){e&&this.removeHandles((0,d.getHighlightKeyForFeature)(e))}};(0,i._)([(0,r.MZ)()],u.prototype,"view",void 0),(0,i._)([(0,r.MZ)({constructOnly:!0})],u.prototype,"highlightName",void 0),u=(0,i._)([(0,o.$)("esri.views.draw.support.HighlightHelper")],u);const p=u},21661:(e,t,a)=>{a.d(t,{P:()=>l,v:()=>c});var i=a(39356),n=a(54901),r=a(50346),o=a(68134),s=a(95600);async function l(e){let{view:t,data:l,signal:d,next:u,cancel:p}=e;const{creationInfo:h}=l;if(!h)return(0,n.hA)();if(!c(h))return(0,n.hA)();const{layer:f}=h,y=null!=h.geometryToPlace;if(h.geometryToPlace=null,y)return p(),(0,n.hA)();const{Upload:g}=await a.e(34881).then(a.bind(a,34881));(0,r.throwIfAborted)(d);const m=new g;l.upload=m;let w=null;const b=()=>w?.remove(),v=(0,n.vE)([(0,o.watch)((()=>m.state),(e=>{switch(e){case"default":case"error":b();break;case"pending":b(),w=(0,s.Pz)(t);break;case"success":{h.maxFeatures=1;const{result:e}=m;"georeferenced"===e?.type||"georeferenced-reprojected"===e?.type?(h.geometryToPlace=e.mesh,h.initialFeature=new i.default({attributes:(0,s.nc)(l.fullTemplate,h.attributeOverrides),geometry:e.mesh,sourceLayer:f}),t.goTo(h.initialFeature,{animate:!1}).catch(r.ignoreAbortErrors)):h.geometryToPlace=e?.mesh,b(),u();break}}})),(0,n.hA)((()=>{m.cancel(),b()}))]);return m.uploadTo(f),v}function c(e){const t=e?.layer;return"scene"===t?.type}},48594:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var i=a(35143),n=a(91967),r=a(19276),o=a(76460),s=a(67993),l=a(46053),c=(a(81806),a(47249),a(85842)),d=a(5600),u=a(79256);let p=class extends n.default{constructor(e){super(e),this.creationInfo=null,this.editorItem=null,this.fullTemplate=null,this.parent=null,this.temporaryHighlightFeature=null,this.sketchOptions=null,this.snappingManager=null,this.templateExecutorInfo=null,this.viewModel=null,this.upload=null,this._pendingEdits=new s.A}get isSharedTemplateWorkflow(){return!!this.fullTemplate&&(0,d.w2)(this.fullTemplate)}get pendingFeatures(){return new r.default([...this._pendingEdits.keys()])}set selectedPendingFeature(e){this._set("selectedPendingFeature",e),this.temporaryHighlightFeature=null}set timeZone(e){this._set("timeZone",e),this._pendingEdits.forEach((t=>{t.timeZone=e}))}isSubmittable(e){const t=this._pendingEdits.get(e);return!!t?.submittable||!!t?.isAssociation}isDisplayable(e){return!this._pendingEdits.get(e)?.isAssociation}addPendingFeature(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isAssociation:!1};this.temporaryHighlightFeature=null;const{_pendingEdits:i}=this;if(i.has(e))return i.get(e);e.sourceLayer||o.A.getLogger("esri.widgets.Editor.CreateFeaturesWorkflowData").warn("source-layer-not-set","A feature added to `pendingFeatures` did not have `sourceLayer` set. This may cause problems throughout `CreateFeaturesWorkflow`.");const n=new u.default({feature:e,isAssociation:a.isAssociation});return n.trackChanges(t),i.set(e,n),n}getEditsForPendingFeature(e){return this._pendingEdits.get(e)}removePendingFeature(e){this.temporaryHighlightFeature=null;const{_pendingEdits:t}=this,a=t.get(e);a&&(a.destroy(),t.delete(e)),this.selectedPendingFeature===e&&(this.selectedPendingFeature=null)}getFeatureTitle(e){return this._pendingEdits.get(e)?.displayTitle}};(0,i._)([(0,l.MZ)()],p.prototype,"creationInfo",void 0),(0,i._)([(0,l.MZ)()],p.prototype,"editorItem",void 0),(0,i._)([(0,l.MZ)()],p.prototype,"fullTemplate",void 0),(0,i._)([(0,l.MZ)()],p.prototype,"isSharedTemplateWorkflow",null),(0,i._)([(0,l.MZ)()],p.prototype,"parent",void 0),(0,i._)([(0,l.MZ)()],p.prototype,"pendingFeatures",null),(0,i._)([(0,l.MZ)()],p.prototype,"selectedPendingFeature",null),(0,i._)([(0,l.MZ)()],p.prototype,"temporaryHighlightFeature",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],p.prototype,"sketchOptions",void 0),(0,i._)([(0,l.MZ)()],p.prototype,"snappingManager",void 0),(0,i._)([(0,l.MZ)()],p.prototype,"templateExecutorInfo",void 0),(0,i._)([(0,l.MZ)()],p.prototype,"viewModel",void 0),(0,i._)([(0,l.MZ)()],p.prototype,"upload",void 0),(0,i._)([(0,l.MZ)()],p.prototype,"timeZone",null),p=(0,i._)([(0,c.$)("esri.widgets.Editor.CreateFeaturesWorkflowData")],p);const h=p},52447:(e,t,a)=>{a.d(t,{y:()=>s});var i=a(35143),n=a(54099),r=a(46053),o=(a(81806),a(76460),a(47249),a(85842));let s=class extends n.A.EventedAccessor{constructor(e){super(e),this.tracking=!1,this.displaying=!1,this.error=null,this.isDraped=!1}};(0,i._)([(0,r.MZ)({constructOnly:!0})],s.prototype,"graphic",void 0),(0,i._)([(0,r.MZ)()],s.prototype,"tracking",void 0),(0,i._)([(0,r.MZ)()],s.prototype,"displaying",void 0),(0,i._)([(0,r.MZ)()],s.prototype,"error",void 0),(0,i._)([(0,r.MZ)()],s.prototype,"isDraped",void 0),s=(0,i._)([(0,o.$)("esri.views.3d.layers.graphics.GraphicState")],s)},55754:(e,t,a)=>{a.d(t,{V:()=>o,t:()=>s});var i=a(31633),n=a(76797),r=a(4955);function o(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new n.default,o=0;if("2d"===a.type)o=t*(a.resolution??0);else if("3d"===a.type){const n=a.overlayPixelSizeInMapUnits(e),r=a.basemapSpatialReference;o=null==r||r.equals(a.spatialReference)?t*n:(0,i.GA)(r)/(0,i.GA)(a.spatialReference)}const s=e.x-o,l=e.y-o,c=e.x+o,d=e.y+o,{spatialReference:u}=a;return r.xmin=Math.min(s,c),r.ymin=Math.min(l,d),r.xmax=Math.max(s,c),r.ymax=Math.max(l,d),r.spatialReference=u,r}function s(e,t,a){const i=a.toMap(e);return null!=i&&o(i,(0,r.o)(),a,l).intersects(t)}const l=new n.default},56061:(e,t,a)=>{a.d(t,{t:()=>n,x:()=>i});const i=["freehand","hybrid","click"],n="click"},63733:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var i=a(35143),n=a(46053),r=(a(81806),a(76460),a(47249),a(85842)),o=a(5364),s=a(25515),l=a(65624),c=a(5682),d=a(64519),u=a(731);let p=class extends((0,l.dM)((0,c.j)(s.default))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new d.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,i._)([(0,n.MZ)({type:u.A})],p.prototype,"elevationInfo",void 0),(0,i._)([(0,n.MZ)((0,o.C)(d.Y,"graphics"))],p.prototype,"graphics",void 0),(0,i._)([(0,n.MZ)({type:["show","hide"]})],p.prototype,"listMode",void 0),(0,i._)([(0,n.MZ)()],p.prototype,"screenSizePerspectiveEnabled",void 0),(0,i._)([(0,n.MZ)({readOnly:!0})],p.prototype,"type",void 0),(0,i._)([(0,n.MZ)({constructOnly:!0})],p.prototype,"internal",void 0),p=(0,i._)([(0,r.$)("esri.layers.GraphicsLayer")],p);const h=p},79256:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=a(35143),n=a(91967),r=a(50346),o=a(46053),s=(a(81806),a(76460),a(47249),a(85842)),l=a(41289),c=a(23301);let d=class extends n.default{constructor(e){super(e),this._stagedForDelete=!1,this.feature=null,this.initialFeature=null,this.submittable=!1,this.displayTitle=null,this.isAssociation=!1,this._debouncedRefreshDisplayTitle=(0,r.debounce)(this._refreshDisplayTitle.bind(this),100)}get attributesModified(){return!function(e,t){const a=e??{},i=t??{},n=new Set(Object.keys(a));(0,l.FB)(n,Object.keys(i));for(const r of n){const e=a[r],t=i[r];if(!(0,c.D_)(e,t))return!1}return!0}(this.initialFeature?.attributes,this.feature?.attributes)}get geometryModified(){return this._stringifyGeometry(this.feature)!==this._stringifyGeometry(this.initialFeature)}get stagedForDelete(){return this._stagedForDelete}get modified(){return this.attributesModified||this.geometryModified||this._stagedForDelete}set timeZone(e){this._set("timeZone",e),(0,r.ignoreAbortErrors)(this._debouncedRefreshDisplayTitle())}stageDelete(){this._stagedForDelete=!0}unstageDelete(){this._stagedForDelete=!1}trackChanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.feature;this.initialFeature=e?.clone(),(0,r.ignoreAbortErrors)(this._debouncedRefreshDisplayTitle())}updateAttributes(e){const{feature:t}=this;t&&(t.attributes=e,this.notifyChange("attributesModified")),(0,r.ignoreAbortErrors)(this._debouncedRefreshDisplayTitle())}updateGeometry(e){const{feature:t}=this;t&&(t.geometry=e,this.notifyChange("geometryModified"))}_stringifyGeometry(e){const t=e?.geometry;return function(e){return null==e?null:JSON.stringify(e)}("mesh"===t?.type?{transform:t.transform,vertexSpace:t.vertexSpace}:t)}async _refreshDisplayTitle(e){const t=this.feature,a=t?.sourceLayer;if(!a||!("getFeatureTitle"in a))return;const i=await a.getFeatureTitle(t,{fetchMissingFields:!1,timeZone:this.timeZone});e.aborted||(this.displayTitle=""===i?null:i)}};(0,i._)([(0,o.MZ)()],d.prototype,"_stagedForDelete",void 0),(0,i._)([(0,o.MZ)()],d.prototype,"attributesModified",null),(0,i._)([(0,o.MZ)()],d.prototype,"feature",void 0),(0,i._)([(0,o.MZ)()],d.prototype,"geometryModified",null),(0,i._)([(0,o.MZ)()],d.prototype,"initialFeature",void 0),(0,i._)([(0,o.MZ)()],d.prototype,"modified",null),(0,i._)([(0,o.MZ)()],d.prototype,"submittable",void 0),(0,i._)([(0,o.MZ)()],d.prototype,"displayTitle",void 0),(0,i._)([(0,o.MZ)()],d.prototype,"isAssociation",void 0),(0,i._)([(0,o.MZ)()],d.prototype,"timeZone",null),d=(0,i._)([(0,s.$)("esri.widgets.Editor.Edits")],d);const u=d},81130:(e,t,a)=>{a.d(t,{AO:()=>c,Bi:()=>s,Cg:()=>r,Rg:()=>l,Vi:()=>u,fT:()=>o,zE:()=>d});var i=a(87663),n=a(76797);const r=100;function o(e){return"point"===e.type}function s(e){return"polygon"===e.type}function l(e){return"polyline"===e.type}function c(e){return!!e&&"radial"===e.type}function d(e){let t=null;for(const a of e)if(a.graphic.geometry){const e=a.graphic.geometry,i=o(e)?new n.default({spatialReference:e.spatialReference,xmin:e.x,xmax:e.x,ymax:e.y,ymin:e.y}):e.extent;t=null==t?i?.clone():t.union(i.extent)}return t}function u(e){const t=new Map;for(const a of e)(0,i.tE)(t,a.id,(()=>({addFeatures:[],id:a.id,identifierFields:{globalIdField:a.layer.globalIdField,objectIdField:a.layer.objectIdField}}))).addFeatures?.push(a.graphic);return[...t.values()]}},88877:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=a(35143),n=a(50076),r=a(54099),o=a(50346),s=a(46053),l=(a(81806),a(76460),a(47249),a(85842)),c=a(19451);let d=class extends r.A.EventedAccessor{constructor(e){super(e),this._indexHistory=[],this._lastStepIndex=-1,this._stepIndex=-1,this._updatingHandles=new c.U,this._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"},this.data=void 0,this.started=!1,this.steps=[],this.type=null,this._pendingOperation=null}destroy(){this._updatingHandles.destroy()}get hasNextStep(){const{steps:e}=this;return!!(e&&this._stepIndex<e.filter((e=>!e.parent)).length-1)}get hasPreviousStep(){return this._stepIndex>0}get reliesOnOwnerAdminPrivileges(){return!1}get hasInvalidFormTemplate(){return!1}get shouldShowAttachments(){return!1}get shouldAllowAttachmentEditing(){return!1}get stepId(){const{steps:e}=this,t=e&&e[this._stepIndex];return t&&t.id}get helpMessage(){}get hasPendingEdits(){return!1}get keyboardCancellationEnabled(){return!0}get updating(){return this._updatingHandles.updating}async back(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>Promise.resolve(!0);this.hasPendingEdits&&!await e()||(this.hasPreviousStep?await this.previous({cancelCurrentStep:!0}):await this.cancel({force:!0}))}async cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{force:!0};return!1!==e.force?this._cancel(e):new Promise(((t,a)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel({...e,force:!0}).then(t)},deny:()=>a(new n.default("workflow:cancel-denied","Request to cancel workflow was denied."))}})}))}async commit(){this.removeHandles(this._handleKeys.beforeCommit),this.onCommit&&await this.onCommit(this.data),this.removeHandles(this._handleKeys.afterCommit),this.emit("commit")}async go(e){const{steps:t}=this,a=t.findIndex((t=>t.id===e));this._indexHistory.push(this._stepIndex),await this._go(a)}async next(){this._indexHistory.push(this._stepIndex),await this._go(this._stepIndex+1)}async previous(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cancelCurrentStep:!1};await this._go(this._indexHistory.pop(),e.cancelCurrentStep)}async reset(){await this._cancel({emitCancelEvent:!1}),await this.start()}async save(){await this.commit(),await this.reset()}async start(){this._set("started",!0);const e=-1===this._stepIndex?0:this._stepIndex;await this._go(e)}async _cancel(){let{emitCancelEvent:e=!0,error:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started&&(this._set("started",!1),await this._transaction((()=>this.steps[this._stepIndex]?.tearDown({canceled:!0})))),this.removeHandles([this._handleKeys.afterCommit,this._handleKeys.beforeCommit]),this._resetIndexing(e),e&&this.emit("cancel",{error:t})}_go(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._transaction((async()=>{const{steps:a}=this;if(!(e<=-1||e>=a.length)){if(!this.started)return this._stepIndex=e,void this._notifyStepProps();this._lastStepIndex>-1&&await a[this._lastStepIndex].tearDown({canceled:t});try{await a[e].setUp()}catch(i){(0,o.throwIfNotAbortError)(i)}this._lastStepIndex=e,this._stepIndex=e,this._notifyStepProps()}}))}async _transaction(e){const t=this._pendingOperation,a=(0,o.createResolver)(),i=(t??Promise.resolve()).then((()=>a.promise));this._pendingOperation=i,this._updatingHandles.addPromise(i);try{t&&await t,await e()}finally{a.resolve(),i===this._pendingOperation&&(this._pendingOperation=null)}}_resetIndexing(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._stepIndex=-1,this._lastStepIndex=-1,this._indexHistory.length=0,e&&this._notifyStepProps()}_notifyStepProps(){this.notifyChange("stepId"),this.notifyChange("hasPreviousStep"),this.notifyChange("hasNextStep")}};(0,i._)([(0,s.MZ)()],d.prototype,"data",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"hasNextStep",null),(0,i._)([(0,s.MZ)()],d.prototype,"hasPreviousStep",null),(0,i._)([(0,s.MZ)()],d.prototype,"onCommit",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"reliesOnOwnerAdminPrivileges",null),(0,i._)([(0,s.MZ)()],d.prototype,"hasInvalidFormTemplate",null),(0,i._)([(0,s.MZ)()],d.prototype,"shouldShowAttachments",null),(0,i._)([(0,s.MZ)()],d.prototype,"shouldAllowAttachmentEditing",null),(0,i._)([(0,s.MZ)()],d.prototype,"started",void 0),(0,i._)([(0,s.MZ)({readOnly:!0})],d.prototype,"stepId",null),(0,i._)([(0,s.MZ)()],d.prototype,"steps",void 0),(0,i._)([(0,s.MZ)({readOnly:!0})],d.prototype,"type",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"helpMessage",null),(0,i._)([(0,s.MZ)()],d.prototype,"hasPendingEdits",null),(0,i._)([(0,s.MZ)()],d.prototype,"keyboardCancellationEnabled",null),(0,i._)([(0,s.MZ)()],d.prototype,"updating",null),d=(0,i._)([(0,l.$)("esri.widgets.Editor.Workflow")],d);const u=d},89646:(e,t,a)=>{a.d(t,{$h:()=>y,Ef:()=>M,IP:()=>m,P1:()=>_,hF:()=>F,jQ:()=>v,rT:()=>I,rZ:()=>i,uR:()=>w});var i,n,r=a(73582),o=a(24648),s=a(31633),l=a(19555),c=a(72745),d=a(20664),u=a(9392),p=a(14487),h=a(7137),f=a(80963);function y(e,t){if(null==e||null==t)return;const a=g(e,t);return null!=a?(0,o.Wq)(a,"radians","geographic"):void 0}(n=i||(i={})).Absolute="absolute",n.Relative="relative",n.RelativeBilateral="relative-bilateral";const g=(()=>{const e=(0,u.vt)(),t=(0,u.vt)();return(a,i)=>((0,d.i)(e,a.x,a.y,a.z??0),(0,d.i)(t,i.x,i.y,i.z??0),m(e,t,a.spatialReference,i.spatialReference))})(),m=(()=>{const e=(0,c.vt)(),t=(0,u.vt)(),a=(0,u.vt)();return(i,n,r,o)=>{if((0,d.p)(i,n))return;const u=(0,h.geodesicCompatibleSpatialReference)(r),y=(0,h.geodesicCompatibleSpatialReference)(o);if(u&&y&&(0,f.aI)(u,y)&&(0,p.F)(i,r,t,u)&&(0,p.F)(n,o,a,y)){const{azimuth:e}=(0,h.inverseGeodeticSolver)(S,t,a,u);return null!=e?(0,s.oU)(e,"degrees","radians"):void 0}e[0]=n[0]-i[0],e[1]=n[1]-i[1];let g=(0,l.g7)(c.JP,e);return e[0]<0&&(g=T-g),g}})();function w(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.Absolute;if(t&&a)switch(n){case i.Absolute:return y(t,a);case i.Relative:return v(b(e,t,a),i.Relative);case i.RelativeBilateral:return v(b(e,t,a),i.RelativeBilateral)}}function b(e,t,a){if(!e||!t||!a)return;const i=g(e,t),n=g(t,a);return null!=i&&null!=n?(0,o.Wq)(n-i,"radians","geographic"):void 0}function v(e,t){if(null!=e)switch(t){case i.Absolute:return _(e);case i.Relative:{const t=F(e);let a=P.normalize(t,0,!0);return-180===a&&(a=180),(0,o.Wq)(a,"degrees","geographic")}case i.RelativeBilateral:{const t=F(e),a=Math.abs(P.normalize(t,0,!0));return(0,o.Wq)(a,"degrees","geographic")}}}function _(e){const t=F(e),a=k.normalize(t,0,!0);return(0,o.Wq)(a,"degrees","geographic")}const I=(()=>{const e=(0,u.vt)();return function(t,a,i,n,r){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"geodesic";(0,d.c)(e,a);const c=F(r);if("geodesic"===l){const r=(0,h.geodesicCompatibleSpatialReference)(i);if(r&&(0,p.F)(e,i,e,r))return(0,h.directGeodeticSolver)(t,e,c,n,r),t[2]=a[2],!!(0,p.F)(t,r,t,i)}const u=(0,o.g2)(c,"geographic","arithmetic"),f=(0,s.oU)(u,"degrees","radians"),y=a[0]+n*Math.cos(f),g=a[1]+n*Math.sin(f),m=a[2];return(0,d.i)(t,y,g,m),!0}})();function F(e){if(null!=e)return(0,o.g2)(A(e),e.rotationType,"geographic")}function M(e){if(null!=e)return(0,o.g2)(A(e),e.rotationType,"arithmetic")}function A(e){return(0,s.oU)(e.value,e.unit,"degrees")}const S=new h.InverseGeodeticSolverResult,T=2*Math.PI,k=r.ie,P=new r.hr(-180,180)},94277:(e,t,a)=>{function i(e,t,a){if(null==e)return"noTool";switch(e){case"point":return"point";case"multipoint":return"multipoint";case"polyline":return function(e,t){const a=null!=e&&"polyline"===e.type&&e.paths.length?e.paths[0].length:0;return"freehand"===t?a<2?"freehandStart":"freehandEnd":a<2?"polylineZeroVertices":"polylineOneVertex"}(t,a);case"polygon":return function(e,t){const a=null!=e&&"polygon"===e.type&&e.rings.length?e.rings[0].length:0;if(a<3)switch(t){case"freehand":return"freehandStart";case"hybrid":return"polygonZeroVerticesHybrid";default:return"polygonZeroVertices"}else if(a<4)return"freehand"===t?"freehandEnd":"polygonOneVertex";return"polygonTwoVertices"}(t,a);case"rectangle":case"circle":return function(e,t){if((null!=e&&"polygon"===e.type&&e.rings.length?e.rings[0].length:0)<3)switch(t){case"freehand":return"freehandStart";case"click":return"shapeStartClick";default:return"shapeStartHybrid"}switch(t){case"freehand":return"freehandEnd";case"click":return"shapeEndClick";default:return"shapeEndHybrid"}}(t,a);default:return}}a.d(t,{$:()=>i})},95327:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var i=a(35143),n=a(91967),r=a(46053),o=(a(81806),a(76460),a(47249),a(85842));let s=class extends n.default{constructor(e){super(e),this.enabled=!1}};(0,i._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],s.prototype,"enabled",void 0),s=(0,i._)([(0,o.$)("esri.views.interactive.sketch.SketchLabelOptions")],s);const l=s},95600:(e,t,a)=>{a.d(t,{bn:()=>be,nv:()=>Me,ON:()=>Ae,Xm:()=>W,z4:()=>we,Zs:()=>le,mU:()=>de,Z5:()=>se,nc:()=>ne,sE:()=>Te,_3:()=>Pe,uh:()=>Q,EH:()=>Y,EO:()=>U,Ks:()=>Ie,bl:()=>G,sy:()=>ee,r8:()=>_e,O:()=>ke,vM:()=>fe,Pi:()=>$,cY:()=>pe,Pz:()=>Se,AP:()=>j,J_:()=>ue,z7:()=>ye,FC:()=>q,EA:()=>he,QZ:()=>Fe});var i=a(69539),n=a(39356),r=a(18690),o=a(98773),s=(a(81806),a(50076)),l=a(54901),c=a(53084),d=a(76460),u=a(87663),p=a(50346),h=a(68134),f=a(76931),y=a(15011),g=a(5600),m=a(49750),w=a(66830),b=a(63733),v=a(53430),_=a(31933),I=a(4955),F=a(3454),M=a(4815),A=a(15492),S=a(86875),T=a(38996),k=a(76940),P=a(87708),E=a(8503),x=a(5874),V=a(52447),C=a(56061),Z=a(55754),O=a(53787);function H(e,t){const a={};t=t||{continueOnCircularDependency:!1};const i=[],n={};e.forEach((e=>{const t=e[0];let i;(i=a[t])||(i=a[t]=new R(t)),e.forEach((e=>{e!==t&&(a[e]||(a[e]=new R(e)),i.afters.push(e))}))}));const r=Object.keys(a);return r.sort(L),r.forEach((function e(r,o){const s=a[r],l=s.id;if(n[r])return;const c=Array.isArray(o)?o:[];c.push(l),n[r]=!0,s.afters.sort(L),s.afters.forEach((a=>{if(c.includes(a)){if(t?.continueOnCircularDependency)return;throw new Error("Circular chain found: "+l+" must be before "+a+" due to a direct order specification, but "+a+" must be before "+l+" based on other specifications.")}e(a,c.slice())})),i.push(l)})),i.reverse()}class R{constructor(e){this.id=e,this.afters=[]}}function L(e,t){return e<t?1:e>t?-1:0}var D=a(21270);const z=()=>d.A.getLogger("esri.widgets.Editor.workflowUtils");function G(e){return"update"===e.type}function U(e){const t=e.sourceLayer;if(!t||"feature"!==t.type||!function(e){switch(e?.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":case"pie-chart":return!0;default:return!1}}(t.renderer))return{rotation:null,size:null};let i=null,n=null;const r=t.renderer.getVisualVariablesForType("rotation").filter((t=>(!t.axis||"heading"===t.axis)&&t.field&&!t.valueExpression&&null!=(0,A.getRotationAngle)(t,e)));1===r.length&&(i=function(e,t){const a="heading"===(e.axis||"heading")&&"arithmetic"===e.rotationType?-1:1,i=e.field,n=t.fields&&t.fields.filter((e=>e.name===i)),r=n&&1===n.length?n[0].type:"double",o={initial:0,current:0};return{field:i,fieldType:r,getDefault:()=>Promise.resolve(0),getValue:e=>(o.current=o.initial-a*e,N((o.current+360)%360,r)),setInitialValue:e=>{o.initial=e,o.current=0},isUpdatingInteractively:!1,rotationType:e.rotationType??"geographic"}}(r[0],t));const o=t.renderer.getVisualVariablesForType("size").filter((t=>t.field&&!t.useSymbolValue&&!t.valueExpression&&(0,M.KZ)(t)===M._w.RealWorldSize&&null!=(0,A.getSize)(t,e)));return 1===o.length&&(n=function(e,t){const i=e.field,n=e.axis,r=t.fields&&t.fields.filter((e=>e.name===i)),o=r&&1===r.length?r[0].type:"double",s={initial:0,current:0},l=F.j[e.valueUnit]??1;let c;return c="area"===e.valueRepresentation?e=>(e*l/2)**2*Math.PI:"radius"===e.valueRepresentation||"distance"===e.valueRepresentation?e=>e*l/2:e=>e*l,{field:i,fieldType:o,getDefault:async(e,t)=>N(c(await async function(e,t,i){if(null==t)return 0;const{symbol:n}=(0,P.t)(t);if(null==n||"web-style"===n.type||"cim"===n.type)return 0;const r=n.symbolLayers.at(0);if(!r)return 0;switch(r.type){case"icon":{const{computeIconLayerResourceSize:e}=await a.e(44374).then(a.bind(a,44374));return r.size||Math.min(me.icon,(await e(r,me.icon))[0])||me.icon}case"text":return r.size||me.text;case"line":return r.size||me.line;case"object":{const{computeObjectLayerResourceSize:t}=await a.e(44374).then(a.bind(a,44374));return function(e,t){switch(t){case"width":return e[0];case"depth":return e[1];case"height":return e[2];default:return e[2]||e[1]||e[0]}}(await t(r,e.scale/me.viewScaleSizeFactor),i)}case"path":return(null!=r.width?r.width:r.height)||e.scale/me.viewScaleSizeFactor;case"extrude":return r.size||e.scale/me.viewScaleSizeFactor;default:return 0}}(t,e,n)),o),getValue:(e,t)=>(s.initial||(s.initial=t.pixelSizeAt(t.center)),s.current=s.initial*e,N(s.current,o)),setInitialValue:e=>{s.initial=e,s.current=0},isUpdatingInteractively:!1,displayUnit:ve(e.valueUnit),axis:e.axis}}(o[0],t)),{rotation:i,size:n}}function N(e,t){switch(t){case"small-integer":case"integer":case"long":return Math.round(e);case"double":case"single":return e;default:return 0}}async function q(e,t,a){const i=await(0,E.getDisplayedSymbol)(e,{useSourceLayer:!0,ignoreGraphicSymbol:!0,webStyleCache:t,scale:a});null!=(0,y.Ui)(e.symbol,i)&&(e.symbol=i)}function W(e,t){if(!e||!t)throw new Error("no geometry type");if("multipatch"===e)return{tool:"mesh",createOptions:{mode:"hybrid"}};const a=new Map;a.set("circle",{mode:"freehand"}),a.set("rectangle",{mode:"freehand"});const i={mode:C.t,optionsPerTool:a};if((0,g.w2)(t)){const n=t.defaultTool,r=(0,g.Dt)(t)?t.definition?.inputGeometryType??e:e;switch(n){case"freehand":case"stream-line":return{tool:"polyline"===r?"freehandPolyline":"freehandPolygon",createOptions:i};case"autocomplete-freehand-polygons":case"stream-polygon":return{tool:"freehandPolygon",createOptions:i};case"autocomplete-polygons":case"difference-polygon":case"create-structures":case"polygon":case"trace":return{tool:"polygon"===r?"polygon":"polyline",createOptions:i};case"circle":return a.get("circle").preserveAspectRatio=!0,{tool:"circle",createOptions:i};case"ellipse":return a.get("circle").preserveAspectRatio=!1,{tool:"circle",createOptions:i};case"create-points-along-line":case"multipoint":return{tool:"multipoint",createOptions:i};case"line":case"radial-line":case"right-angle-line":case"split":case"two-point-line":return{tool:"polyline",createOptions:i};case"rectangle":case"regular-polygon":case"right-angle-polygon":return{tool:"rectangle",createOptions:i};case"elevation-point-from-contour":case"elevation-point-from-dem":case"parcel-seed":case"point":case"point-and-rotation":case"point-at-end-of-line":return{tool:"point",createOptions:i}}}else{const n=t.drawingTool;if("circle"===n||"ellipse"===n)return a.get("circle").preserveAspectRatio="circle"===n,{tool:"circle",createOptions:i};if("rectangle"===n)return{tool:"rectangle",createOptions:i};if("freehand"===n)return{tool:"polygon"===e?"freehandPolygon":"freehandPolyline",createOptions:i}}return{tool:e,createOptions:i}}async function j(e,t,a){const{creationInfo:i,fullTemplate:n}=t;if(!i)throw new s.default("No creation info provided.");const r=i.layer,o=ne(n,i.attributeOverrides),{view:l}=e,c="2d"===l?.type;(0,g.Dt)(n)||(0,g.JC)(n)||await re(e,r,o,a,c?l.scale:null);const{capabilities:d}=r;e.layer.elevationInfo=r.elevationInfo;const u=W(r.geometryType,n);e.defaultCreateOptions={graphicProperties:{attributes:o,sourceLayer:r},mode:u.createOptions.mode,optionsPerTool:u.createOptions.optionsPerTool,preserveAspectRatio:u.createOptions.preserveAspectRatio,hasZ:d.data.supportsZ,defaultZ:(c?d.editing.zDefault:null)??e.defaultCreateOptions.defaultZ},null==i.geometryToPlace?await e.create(u.tool):await e.place(i.geometryToPlace,{graphicProperties:{attributes:o,sourceLayer:r}})}async function $(e){return(0,l.vE)([await B(e),await J(e)])}async function B(e){let{creationAttributes:t,data:a,sketchViewModel:i,view:n,webStyleCache:r}=e;const{creationInfo:o}=a,{fullTemplate:s}=a;if(!o||"2d"!==n?.type||(0,g.Dt)(s)||(0,g.JC)(s))return null;const l=(0,p.debounce)((e=>re(i,o.layer,t,r,e)));return(0,h.watch)((()=>n.scale),(e=>l(e)))}async function J(e){let{data:t,sketchViewModel:a,view:n}=e;const{templateExecutorInfo:o}=t;if(!o)return null;const c=a.activeComponent;if(!n||!(0,D.xJ)(c))return z().error(new s.default("Failed to set up template feedback.")),null;const d=new b.default({effect:"saturate(0.6) opacity(0.8)",listMode:"hide",title:"Shared Template Feedback Graphics"});n.map?.add(d);const{executor:u,serviceLayersById:f}=o,y=n.theme?.accentColor??new i.default([255,165,0,1]);return(0,l.vE)([(0,h.on)((()=>c),["cursor-update","vertex-add"],(()=>{d.removeAll();const e=c.graphic?.geometry;if(!e||!function(e){switch(e.type){case"point":case"multipoint":return!0;case"polyline":return e.paths[0].length>1;case"polygon":{const t=e.rings[0];return(0,r.aI)(t.at(0),t.at(-1))?t.length>2:t.length>1}default:return!1}}(e))return;const t=u(e,"digitizing");if(!(0,p.isPromiseLike)(t))for(const a of t.edits){const e=f.get(a.id);if(e&&a.addFeatures&&0!==a.addFeatures.length)for(const t of e)if(!t.isTable)for(const e of a.addFeatures){const t=K(e,y);t&&d.add(t)}}})),(0,l.hA)((()=>{n.map.remove(d),d.destroy()}))])}function K(e,t){let a=null;switch(e.geometry?.type){case"point":case"multipoint":a=new k.default({angle:0,color:t,outline:new T.default({cap:"round",color:t,join:"round",miterLimit:1,style:"solid",width:1}),path:"undefined",size:8,style:"circle",xoffset:0,yoffset:0});break;case"polygon":a=new S.default({color:t,outline:new T.default({cap:"round",color:t,join:"round",miterLimit:1,style:"solid",width:3}),style:"none"});break;case"polyline":a=new T.default({cap:"round",color:t,join:"round",miterLimit:1,style:"solid",width:2});break;default:return null}return new n.default({geometry:e.geometry,symbol:a,attributes:{...e.attributes}})}async function Q(e,t){const a=await(0,x.Z)(t).load(),i=(0,_.Sv)(e)?e.parent:e;return a.tablesAndLayersLookup.get(i)}async function Y(e,t){const a=await Q(e,t);if(!a)return new Map;const i=new Map;for(const n of a.layersAndTables)(0,u.tE)(i,n.layerId,(()=>[])).push(n);return i}function X(e){const t=e.objectIdField,a=e.globalIdField??"";return{id:e.layerId,identifierFields:{objectIdField:t,globalIdField:a},addFeatures:[],deleteAttachments:[],addAttachments:[],deleteFeatures:[],updateFeatures:[]}}function ee(e){const{edits:t,serviceInfo:a,view:i,findOriginalFeature:n}=e,o=function(e){const t=new Map;for(const a of e)t.set(a.layerId,a);return t}(a.layersAndTables),l=a.layersAndTables.toArray(),{allEditData:c,editDataByLayerIdMap:d,editDataByIdMap:u}=function(e,t,a){const i=new Map,n=[],r=new Map;let o=1;for(const l of e){const e=[],c=t.get(l.id);if(!c)throw new s.default(`Failed to prepare applyEdits payload. Layer with id ${l.id} not found.`);for(const t of l.addFeatures??[])e.push({uniqueId:"T"+o++,operationType:"add",layer:c,after:t});for(const t of l.deleteFeatures??[])e.push({uniqueId:"T"+o++,operationType:"delete",before:t,layer:c});for(const t of l.deleteAttachments??[])e.push({uniqueId:"T"+o++,operationType:"deleteAttachment",attachmentId:t,layer:c});for(const t of l.addAttachments??[])e.push({uniqueId:"T"+o++,operationType:"addAttachment",attachment:t,layer:c});for(const t of l.updateFeatures??[])e.push({uniqueId:"T"+o++,operationType:"modify",before:a(t),after:t,layer:c});i.set(c.layerId,e);for(const t of e)n.push(t),r.set(t.uniqueId,t)}return{allEditData:n,editDataByIdMap:r,editDataByLayerIdMap:i}}(t,o,n),p=function(e,t,a){const i=[];for(const n of e){const e=n.layer.relationships??[],{uniqueId:r}=n;for(const o of e){const e=o.keyField;if("origin"===o.role){const s=a.get(o.relatedTableId);if(!s||0===s.length)continue;const l=te(n.layer,o),c=t.get(l);if(void 0===c||""===c)continue;switch(n.operationType){case"add":for(const t of s)t!==n&&("add"!==t.operationType&&"modify"!==t.operationType||t.after.attributes[c]===n.after.attributes[e]&&i.push([r,t.uniqueId]));break;case"modify":if(n.before.attributes[e]!==n.after.attributes[e])for(const t of s){const a=t.uniqueId;t!==n&&("delete"===t.operationType?t.before.attributes[c]===n.before.attributes[e]?i.push([a,r]):t.before.attributes[c]===n.after.attributes[e]&&i.push([r,a]):"add"===t.operationType?t.after.attributes[c]===n.after.attributes[e]?i.push([r,a]):t.after.attributes[c]===n.before.attributes[e]&&i.push([a,r]):"modify"===t.operationType&&(t.before.attributes[c]!==t.after.attributes[c]?t.after.attributes[c]===n.after.attributes[e]?i.push([r,a]):i.push([a,r]):i.push([r,a])))}break;case"delete":for(const t of s)t!==n&&("delete"!==t.operationType&&"modify"!==t.operationType||t.before.attributes[c]===n.before.attributes[e]&&i.push([t.uniqueId,r]))}}}}return i}(c,function(e,t){const a=new Map;for(const i of e)for(const e of i.relationships??[])if(a.set(te(i,e),""),t.has(e.relatedTableId)){const n=t.get(e.relatedTableId);if(n.length>0)for(const t of n[0].layer.relationships??[])if(t.id===e.id){a.set(te(i,e),t.keyField);break}}return a}(l,d),d);if(function(e,t,a){const i=[];for(const r of e)ae(r.layer,a)&&i.push(r);if(0===i.length)return;let n=[];for(const r of i){const a=r.layer;switch(r.operationType){case"delete":n=[...ie(r.before.attributes[a.fieldsIndex.get("fromglobalid").name],e),...ie(r.before.attributes[a.fieldsIndex.get("toglobalid").name],e)];for(const e of n)t.push([r.uniqueId,e.uniqueId]);break;case"add":n=[...ie(r.after.attributes[a.fieldsIndex.get("fromglobalid").name],e),...ie(r.after.attributes[a.fieldsIndex.get("toglobalid").name],e)];for(const e of n)t.push([e.uniqueId,r.uniqueId])}}}(c,p,i),0===p.length)return t;const h=H(p,{continueOnCircularDependency:!0}).map((e=>u.get(e))).filter(r.Ru),f=new Map;for(const r of h)f.set(r.uniqueId,r);const y=[];for(const r of c)f.has(r.uniqueId)||y.push(r);const g=[];let m=null;for(const r of h){const{layer:e}=r;switch(null==m?m=X(e):m.id!==e.layerId&&(g.push(m),m=X(e)),r.operationType){case"add":case"modify":m.addFeatures.push(r.after);break;case"delete":m.deleteFeatures.push(r.before)}}null!==m&&g.push(m);for(const r of y){const e=r.layer.layerId,t=g.find((t=>t.id===e))??X(r.layer);switch(g.includes(t)||g.push(t),r.operationType){case"add":t.addFeatures.push(r.after);break;case"modify":t.updateFeatures.push(r.after);break;case"delete":t.deleteFeatures.push(r.before);break;case"deleteAttachment":t.deleteAttachments.push(r.attachmentId);break;case"addAttachment":t.addAttachments.push(r.attachment)}}for(const r of g)void 0!==r.deleteAttachments&&0===r.deleteAttachments.length&&delete r.deleteAttachments,void 0!==r.addAttachments&&0===r.addAttachments.length&&delete r.addAttachments;return g}function te(e,t){return`${e.layerId}:${t.id}`}function ae(e,t){return!!(t?.map&&"utilityNetworks"in t.map&&t.map.utilityNetworks?.length&&t.map.utilityNetworks.some((t=>!(!t.loaded||!e.url?.startsWith(t.featureServiceUrl)||e.layerId!==t.networkSystemLayers.associationsTableId))))}function ie(e,t){const a=[],i=t.filter((e=>{let{layer:t}=e;return""!==t.globalIdField&&null!=t.globalIdField}));for(const n of i){const t=n.layer.globalIdField;("before"in n&&n.before?.attributes[t]===e||"after"in n&&n.after?.attributes[t]===e)&&a.push(n)}return a}function ne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,g.Dt)(e)||(0,g.JC)(e)?{}:(0,g.gZ)(e)?{...e.prototype.attributes,...t}:(0,g.Cq)(e)?{...e.definition?.defaultValues,...t}:{...t}}async function re(e,t,a,i,r){const o=new n.default({sourceLayer:t,attributes:a}),{rotation:s,size:l}=U(o);let c=await(0,E.getDisplayedSymbol)(o,{useSourceLayer:!0,webStyleCache:i,scale:r}),d=!1;for(const n of[l,s])null!=n&&null==a[n.field]&&(a[n.field]=await n.getDefault(c,e.view),d=!0);switch(d&&(c=await(0,E.getDisplayedSymbol)(o,{useSourceLayer:!0,webStyleCache:i,scale:r})),c?.type){case"simple-fill":case"polygon-3d":e.polygonSymbol=c;break;case"simple-line":case"line-3d":e.polylineSymbol=c;break;case"simple-marker":case"picture-marker":case"point-3d":case"cim":e.pointSymbol=c;break;case"mesh-3d":e.meshSymbol=c}oe(e.tooltipOptions,l,s)}function oe(e,t,a){e.visualVariables=null!=t||null!=a?{size:null!=t?{unit:t.displayUnit,axis:t.axis,valueType:t.fieldType}:null,rotation:null!=a?{valueType:a.fieldType,rotationType:a.rotationType??"geographic"}:null}:null}function se(e,t){return e?.find((e=>e.layer===t))}async function le(e,t,a,i){switch(t.type){case"3d":return async function(e,t,a,i){if(0===e.length)return[];const{updatable:n,graphicsByLayer:o}=await a.async((async()=>{const{results:n}=await(0,p.whenOrAbort)((0,O.oZ)(t,a),i),r=new Map,o=e=>{const t=e.layer,a=r.get(t);if(!a){const e=new Array;return r.set(t,e),e}return a};(0,O.h$)(n).forEach((e=>{let{graphic:t}=e;return o(t).push(t)}));const s=e.filter((e=>{let{capabilities:t,layer:a}=e;return t.update.enabled&&r.has(a)}));return 0!==s.length&&a.stopPropagation(),{updatable:s,graphicsByLayer:r}}));return(0,p.whenOrAbort)(Promise.allSettled(n.map((async e=>{let{layer:t}=e;const a=o.get(t),n=ce(t);if(a.every((e=>(0,v.featureHasFields)(n,e))))return a;const s=[];for(const i of a){s.push(i.getObjectId());const e=Object.keys(i.attributes);(0,r.FB)(n,e)}const l=t.createQuery();return l.returnGeometry=!1,l.objectIds=s,l.outFields=(0,v.fixFields)(t.fieldsIndex,n),t.queryFeatures(l,{signal:i}).then((e=>{let{features:t}=e;return t}))}))),i)}(e,t,a,i);case"2d":return async function(e,t,a,i){if(0===e.length)return[];const{mapPoint:n}=a;if(null==n)return[];let r=null;const o=await a.async((async()=>{const{results:n}=await(0,p.whenOrAbort)(t.hitTest(a),i);if(0===n.length)return[];const o=new Set;r=(0,O.h$)(n),r.forEach((e=>{let{graphic:t}=e;return t&&o.add(t.layer)}));const s=e.filter((e=>o.has(e.layer)&&e.supportsUpdateWorkflow));return s.length>0&&a.stopPropagation(),s}));return(0,p.whenOrAbort)(Promise.allSettled(o.map((async e=>{let{layer:o}=e;const s=o.createQuery();s.returnGeometry=!0,s.outFields=ce(o);const l="renderer"in o?(0,I.o)({renderer:o.renderer,pointerType:a.pointerType}):0;s.geometry=(0,Z.V)(n,l,t),s.outSpatialReference=t.spatialReference;const{features:c}=await o.queryFeatures(s,{signal:i});return r?.forEach((e=>{let{graphic:t}=e;t.layer!==o||c.some((e=>e.getObjectId()===t.getObjectId()))||c.push(t)})),c}))),i)}(e,t,a,i)}}function ce(e){return(0,v.fixFields)(e.fieldsIndex,[e.objectIdField,(0,v.getDisplayFieldName)({displayField:"displayField"in e?e.displayField:null,fields:e.fields})])}async function de(e,t,a){const{sourceLayer:i}=e,n=i.createQuery();n.objectIds=[e.getAttribute(i.objectIdField)],n.outFields=["*"],n.returnM=i.capabilities.data.supportsM,n.returnZ=i.capabilities.data.supportsZ,"scene"===i.type&&null!=i.infoFor3D||(n.outSpatialReference=t);const r=await i.queryFeatures(n,{signal:a});return(0,p.throwIfAborted)(a),r.features[0]}async function ue(e){const{graphic:t,sketchViewModel:a,sourceLayer:i,visualVariables:n}=e;await pe(e);const r={multipleSelectionEnabled:!1};return"point"===i.geometryType&&(r.enableRotation=null!=n.rotation,r.enableScaling=null!=n.size),a.update(t,r)}async function pe(e){const{graphic:t,sketchViewModel:a,sourceLayer:i,visualVariables:n,webStyleCache:r}=e;let o=!1;const{rotation:s,size:l}=n;if([s,l].forEach((async e=>{if(null==e)return;const i=t.getAttribute(e.field);if(null!=i)e.setInitialValue(i);else{const i=await e.getDefault(t.symbol,a.view);e.setInitialValue(i),t.setAttribute(e.field,i),o=!0}})),o){const e="2d"===a.view?.type?a.view.scale:null;await q(t,r,e)}oe(a.tooltipOptions,l,s),a.layer.elevationInfo=i.elevationInfo}async function he(e,t,a,i,n){if(null==t.geometry||"point"!==t.geometry?.type)return;const r=i.rotation,o=function(e){return null==e||"rotate-start"!==e.type&&"rotate"!==e.type&&"rotate-stop"!==e.type?null:e}(a.toolEventInfo);if(null!=r&&null!=o){const{field:a,getValue:i}=r;"rotate-stop"===o.type?(r.isUpdatingInteractively=!1,r.setInitialValue(t.getAttribute(a))):(r.isUpdatingInteractively=!0,t.setAttribute(a,i(o.angle,e)))}const s=i.size,l=function(e){return null==e||"scale-start"!==e.type&&"scale"!==e.type&&"scale-stop"!==e.type?null:e}(a.toolEventInfo);if(null!=s&&null!=l){const{field:a,getValue:i}=s;"scale-stop"===l.type?(s.isUpdatingInteractively=!1,s.setInitialValue(t.getAttribute(a))):(s.isUpdatingInteractively=!0,t.setAttribute(a,i(l.xScale,e)))}await q(t,n,"2d"===e.type?e.scale:null)}async function fe(e){let{feature:t,featureClone:a,visualVariableAttributes:i,sketchViewModel:n,view:r,onUpdate:o,webStyleCache:s,addUpdatingPromise:c,addHandle:d}=e;await q(a,s,"2d"===r.type?r.scale:null);let u=null;if("2d"===n?.view?.type){const e=(0,p.debounce)((e=>q(a,s,e)));u=(0,h.watch)((()=>n?.view?.scale),(t=>e(t)))}const f=a.sourceLayer,y=Fe(r,f);await ue({graphic:a,sketchViewModel:n,sourceLayer:f,visualVariables:i,webStyleCache:s});let g=null;y.then((e=>g=e)).catch((()=>{}));const m=i.size,w=i.rotation,b=(0,h.watch)((()=>t.attributes),(async e=>{let t=!1;for(const i in e){const n=e[i];n!==a.getAttribute(i)&&(a.setAttribute(i,n),null==m||m.isUpdatingInteractively||m.field!==i||m.setInitialValue(n),null==w||w.isUpdatingInteractively||w.field!==i||w.setInitialValue(n),(null==g||g.requiredFields.includes(i))&&(t=!0))}t&&await q(a,s,"2d"===r.type?r.scale:null)})),v=n.on("update",(async e=>{const t=e.graphics[0],a={graphic:t,sketchViewModel:n,sourceLayer:f,visualVariables:i,webStyleCache:s};if("complete"===e.state){if(null===r.activeTool)return ue(a);const e=new AbortController,t=(0,l.rE)(e);return d(t),c((0,h.whenOnce)((()=>null===r.activeTool),e.signal).then((()=>(e.abort(),ue(a)))))}await he(r,t,e,i,s),o(Ae(t),e)})),_=n.on(["undo","redo"],(async e=>{o(Ae(e.graphics[0]),e)}));return(0,l.vE)([_,v,(0,l.hA)((()=>n.cancel())),b,u])}async function ye(e,t,a){const i=e.view;e.layer.add(a);const n=t.sourceLayer,r=t.layer,s=t.getAttribute(r.objectIdField);let c=null;function d(e){c?.abort(),c=(0,o.UT)((async t=>{const a=await Fe(i,n);(0,p.throwIfAborted)(t),a.setVisibility?.(s,e)}))}return await async function(e,t){if("3d"===e.type){const a=new V.y({graphic:t}),i=e.trackGraphicState(a);await(0,h.whenOnce)((()=>a.displaying||a.error)),i.remove()}else await(0,h.whenOnce)((()=>t.visible))}(i,a),d(!1),(0,l.vE)([ge(i,a,(e=>d(!e))),(0,l.hA)((async()=>{d(!0);try{const e=await Fe(i,n);await(0,h.whenOnce)((()=>!e.updating))}finally{e.layer.remove(a)}}))])}function ge(e,t,a){if("3d"===e.type){const i=new V.y({graphic:t});return(0,l.vE)([e.trackGraphicState(i),(0,h.watch)((()=>i.displaying),a)])}return(0,h.watch)((()=>t.visible),a)}const me={icon:(0,f.PN)(24),text:(0,f.PN)(12),line:(0,f.PN)(1),viewScaleSizeFactor:100};function we(e,t,a){let i=!1;return e.filter((e=>!!i||(i=e===t,i))).map((e=>a[e]()))}function be(e,t){e.viewModel.syncFeatureTemplates();const a=e.creationInfo;if("awaiting-feature-creation-info"===t[0].id&&a){const i=a.layer,n=e.viewModel.getTemplatesForLayer(i);1===n.length&&"scene"!==i.type&&(a.template=n[0],t.shift())}return t}function ve(e){return"unknown"===e?null:e}function _e(e){e.filesEnabled=!0,e.mode="view",e.capabilities={editing:!0,operations:{add:!0,update:!0,delete:!0}}}const Ie=e=>/-stop/.test(e)||/vertex-/.test(e),Fe=(e,t)=>{const a="subtype-sublayer"===t.type?t.parent:t;return e.whenLayerView(a)};function Me(e){return"createInteractiveEditSession"in e}function Ae(e){const t=e.geometry;if("mesh"===t?.type){const a=e.cloneShallow();return a.attributes=(0,c.clone)(e.attributes),a.geometry=t.cloneShallow(),a.geometry.transform=t.transform?.clone()??null,a}return e.clone()}function Se(e){const t=e.cursor;return e.cursor="progress",(0,l.hA)((()=>e.cursor=t))}async function Te(e,t){const{template:a}=e;if(null==a)return null;if((0,g.Sf)(a))return a.load();if((0,g.w2)(a)){const e=(0,w.B)(t,{makeSharedTemplateFromJSON:Ee}),i=await e.getTemplates({templateIds:[a.templateId],featureService:a.featureService});if(0===i.length)throw new s.default("editor:failed-to-load-template","Unable to load the provided template");return i[0].load()}return a}function ke(e){for(const t of e){const{destinationGraphic:e,destinationField:a,sourceGraphic:i,sourceField:n}=t;e.setAttribute(a,i.getAttribute(n))}}function Pe(e){const t=e.templateExecutorInfo?.completionResults;return t?.length?(t.forEach((e=>ke(e.relationships))),t.flatMap((e=>e.edits))):null}const Ee=e=>m.default.fromJSON(e)}}]);
//# sourceMappingURL=52030.73d2b126.chunk.js.map