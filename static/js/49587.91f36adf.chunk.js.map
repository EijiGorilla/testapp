{"version":3,"file":"static/js/49587.91f36adf.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/catalog/CatalogDynamicGroupLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Collection.js\";import{makeHandle as r}from\"../../core/handleUtils.js\";import{LRUCache as o}from\"../../core/LRUCache.js\";import{someMap as i,getOrCreateMapValue as s}from\"../../core/MapUtils.js\";import{MultiOriginJSONMixin as a}from\"../../core/MultiOriginJSONSupport.js\";import n from\"../../core/ReactiveMap.js\";import{watch as l}from\"../../core/reactiveUtils.js\";import{signal as p}from\"../../core/signal.js\";import{property as d}from\"../../core/accessorSupport/decorators/property.js\";import{Integer as y}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"../Layer.js\";import{BlendLayer as u}from\"../mixins/BlendLayer.js\";import{ScaleRangeLayer as m}from\"../mixins/ScaleRangeLayer.js\";import{legendEnabled as f,opacity as _}from\"../support/commonProperties.js\";import g from\"../support/OrderByInfo.js\";import{getAttributeComparator as j}from\"../../statistics/utils.js\";let v=class extends(m(u(a(h)))){constructor(e){super(e),this._layerCache=new o(20,(e=>e.destroy())),this._oidToReference=new n,this._layerToReference=new Map,this.legendEnabled=!0,this.layers=new t,this.maximumVisibleSublayers=10,this.opacity=1,this.parent=null,this.persistenceEnabled=!0,this.title=\"Layers in view\",this.type=\"catalog-dynamic-group\",this.visible=!0}initialize(){this.addHandles([this.layers.on(\"after-add\",(({item:e})=>{e.parent=this})),this.layers.on(\"after-remove\",(({item:e})=>{e.parent=null})),l((()=>this._orderBy),(()=>{this._updateLayerSortValues(),this._sortAllLayers()}))])}load(e){return this.addResolvingPromise(this.parent.load()),Promise.resolve(this)}destroy(){this._layerCache.destroy(),this._oidToReference.clear(),this._layerToReference.clear()}get _orderBy(){return this.parent?this.parent.orderBy?.find((e=>!e.valueExpression&&e.field))??new g({field:this.parent.objectIdField}):null}get _referenceComparator(){const e=this._orderBy;if(!this.parent||!e)return()=>0;const t=this.parent.fieldsIndex.get(e.field),r=j(t?.toJSON().type,\"descending\"===e.order),o=j(\"esriFieldTypeOID\",\"descending\"===e.order);return(e,t)=>r(t.sortValue,e.sortValue)||o(t.objectId,e.objectId)}get fullExtent(){return this.parent?.fullExtent??null}get updating(){return i(this._oidToReference,(({pending:e})=>null!=e))}acquireLayer(e){if(this.destroyed)return r();const t=this._getLayerReference(e);return t.count++,r((()=>{t.count--,t.count||this._destroyLayerReference(t)}))}_getLayerReference(e){const t=e.getObjectId();return s(this._oidToReference,t,(()=>{const t=e.getObjectId(),r=`${t}`,o=e.getAttribute(this.parent.itemSourceField),i=new L(e,t,o),s=this._layerCache.pop(r);return s?(this._addLayer(i,s),i):(i.pending=this.parent.createLayerFromFootprint(e).then((e=>{i.count?this._addLayer(i,e):(this.destroyed||this._layerCache.get(r)||this._layerCache.put(r,e),i.layer=null)})).catch((()=>{})).finally((()=>{i.pending=null})),i)}))}_destroyLayerReference(e){e.layer&&(this._layerToReference.delete(e.layer),this.layers.remove(e.layer),this.destroyed?e.layer.destroy():this._layerCache.put(`${e.objectId}`,e.layer),e.layer=null),this._oidToReference.delete(e.objectId)}_addLayer(e,t){e.layer=t,t.persistenceEnabled=!1,this._layerToReference.set(t,e),this._updateLayerSortValue(e),this.layers.add(t),this._sortAllLayers()}_updateLayerSortValues(){for(const e of this._layerToReference.values())this._updateLayerSortValue(e)}_updateLayerSortValue(e){this._orderBy&&(e.sortValue=e.footprint.getAttribute(this._orderBy.field))}_sortAllLayers(){this.layers.sort(((e,t)=>this._referenceComparator(this._layerToReference.get(e),this._layerToReference.get(t))))}};e([d()],v.prototype,\"_orderBy\",null),e([d({readOnly:!0})],v.prototype,\"_referenceComparator\",null),e([d(f)],v.prototype,\"legendEnabled\",void 0),e([d({type:[\"show\",\"hide\",\"hide-children\"],json:{write:!0}})],v.prototype,\"listMode\",void 0),e([d({readOnly:!0})],v.prototype,\"fullExtent\",null),e([d({type:String,json:{origins:{service:{read:!1},\"portal-item\":{read:!1}},write:{ignoreOrigin:!0,isRequired:!0}}})],v.prototype,\"id\",void 0),e([d({readOnly:!0})],v.prototype,\"layers\",void 0),e([d({type:y,range:{min:0,max:50},json:{write:!0,default:10}})],v.prototype,\"maximumVisibleSublayers\",void 0),e([d(_)],v.prototype,\"opacity\",void 0),e([d({clonable:!1})],v.prototype,\"parent\",void 0),e([d({type:String,nonNullable:!0,json:{write:{ignoreOrigin:!0,isRequired:!0}}})],v.prototype,\"title\",void 0),e([d({json:{read:!1}})],v.prototype,\"type\",void 0),e([d({readOnly:!0})],v.prototype,\"updating\",null),e([d({type:Boolean,json:{name:\"visibility\",write:!0}})],v.prototype,\"visible\",void 0),v=e([c(\"esri.layers.catalog.CatalogDynamicGroupLayer\")],v);const b=v;class L{constructor(e,t,r){this.footprint=e,this.objectId=t,this.itemSource=r,this.count=0,this.layer=null,this.sortValue=void 0,this._pending=p(null)}get pending(){return this._pending.value}set pending(e){this._pending.value=e}}export{b as default};\n"],"names":["v","m","u","a","h","constructor","e","super","this","_layerCache","o","destroy","_oidToReference","n","_layerToReference","Map","legendEnabled","layers","t","maximumVisibleSublayers","opacity","parent","persistenceEnabled","title","type","visible","initialize","addHandles","on","_ref","item","_ref2","l","_orderBy","_updateLayerSortValues","_sortAllLayers","load","addResolvingPromise","Promise","resolve","clear","orderBy","find","valueExpression","field","g","objectIdField","_referenceComparator","fieldsIndex","get","r","j","toJSON","order","sortValue","objectId","fullExtent","updating","i","_ref3","pending","acquireLayer","destroyed","_getLayerReference","count","_destroyLayerReference","getObjectId","s","getAttribute","itemSourceField","L","pop","_addLayer","createLayerFromFootprint","then","put","layer","catch","finally","delete","remove","set","_updateLayerSortValue","add","values","footprint","sort","d","prototype","readOnly","f","json","write","String","origins","service","read","ignoreOrigin","isRequired","y","range","min","max","default","_","clonable","nonNullable","Boolean","name","c","b","itemSource","_pending","p","value"],"sourceRoot":""}