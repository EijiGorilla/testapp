"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[8775,96141],{7150:(t,e,n)=>{n.d(e,{K:()=>c});var o=n(15941),r=n(30015),s=n(20664),i=n(9392);const a=-1;function c(t,e,n){const o=t.vertices.position,r=t.vertices.componentIndex,i=h.position0,c=h.position1,f=h.faceNormal0,g=h.faceNormal1,{edges:p,normals:N}=u(t),I=p.length/4,O=e.allocate(I);let S=0;const m=I,E=n?.allocate(m);let w=0,P=0,y=0;d.length=0;for(let a=0;a<I;++a){const t=4*a;o.getVec(p.data[t],i),o.getVec(p.data[t+1],c);const e=d.pushNew();e.index=4*a,e.length=(0,s.j)(i,c)}d.sort(((t,e)=>e.length-t.length));const M=new Array,R=new Array;d.forAll((t=>{let{length:u,index:d}=t;const I=p.data[d],m=p.data[d+1],V=p.data[d+2],L=p.data[d+3],C=L===a;if(o.getVec(I,i),o.getVec(m,c),C){const t=3*V;(0,s.i)(f,N.data[t],N.data[t+1],N.data[t+2]),(0,s.c)(g,f),h.componentIndex=r.get(I),h.cosAngle=(0,s.f)(f,g)}else{let t=3*V;if((0,s.i)(f,N.data[t],N.data[t+1],N.data[t+2]),t=3*L,(0,s.i)(g,N.data[t],N.data[t+1],N.data[t+2]),h.componentIndex=r.get(I),h.cosAngle=(0,s.f)(f,g),function(t,e){return t.cosAngle>e}(h,v))return;h.cosAngle<-.9999&&(0,s.c)(g,f)}P+=u,y++,C||function(t,e){return t.cosAngle<e}(h,T)?(e.write(O,S++,h),M.push(u)):l(h,A)&&(E&&n&&n.write(E,w++,h),R.push(u))}));const V=new Float32Array(M.reverse()),L=new Float32Array(R.reverse()),C=E&&n?{instancesData:E.slice(0,w),lodInfo:{lengths:L}}:void 0;return{regular:{instancesData:O.slice(0,S),lodInfo:{lengths:V}},silhouette:C,averageEdgeLength:P/y}}function l(t,e){const n=(0,o.XM)(t.cosAngle);return(0,s.o)(I,t.position1,t.position0),n*((0,s.f)((0,s.e)(N,t.faceNormal0,t.faceNormal1),I)>0?-1:1)>e}function u(t){const e=t.faces.length/3,n=t.faces,o=t.neighbors,r=t.vertices.position;g.length=p.length=0;for(let i=0;i<e;i++){const t=3*i,e=o[t],c=o[t+1],l=o[t+2],u=n[t],f=n[t+1],d=n[t+2];r.getVec(u,O),r.getVec(f,S),r.getVec(d,m),(0,s.d)(S,S,O),(0,s.d)(m,m,O),(0,s.e)(O,S,m),(0,s.n)(O,O),p.pushArray(O),(e===a||u<f)&&(g.push(u),g.push(f),g.push(i),g.push(e)),(c===a||f<d)&&(g.push(f),g.push(d),g.push(i),g.push(c)),(l===a||d<u)&&(g.push(d),g.push(u),g.push(i),g.push(l))}return{edges:g,normals:p}}class f{constructor(){this.index=0,this.length=0}}const d=new r.A({allocator:t=>t||new f,deallocator:null}),g=new r.A({deallocator:null}),p=new r.A({deallocator:null}),h=new class{constructor(){this.position0=(0,i.vt)(),this.position1=(0,i.vt)(),this.faceNormal0=(0,i.vt)(),this.faceNormal1=(0,i.vt)(),this.componentIndex=0,this.cosAngle=0}},N=(0,i.vt)(),I=(0,i.vt)(),O=(0,i.vt)(),S=(0,i.vt)(),m=(0,i.vt)(),A=(0,o.kU)(4),v=Math.cos(A),E=(0,o.kU)(35),T=Math.cos(E)},8775:(t,e,n)=>{n.d(e,{o6:()=>u,extractComponentsEdgeLocationsLayout:()=>N,hx:()=>f,Jb:()=>h});var o=n(77176);function r(t,e,n){const o=e/3,r=new Uint32Array(n+1),s=new Uint32Array(n+1),i=(t,e)=>{t<e?r[t+1]++:s[e+1]++};for(let I=0;I<o;I++){const e=t[3*I],n=t[3*I+1],o=t[3*I+2];i(e,n),i(n,o),i(o,e)}let a=0,c=0;for(let I=0;I<n;I++){const t=r[I+1],e=s[I+1];r[I+1]=a,s[I+1]=c,a+=t,c+=e}const l=new Uint32Array(6*o),u=r[n],f=(t,e,n)=>{if(t<e){const o=r[t+1]++;l[2*o]=e,l[2*o+1]=n}else{const o=s[e+1]++;l[2*u+2*o]=t,l[2*u+2*o+1]=n}};for(let I=0;I<o;I++){const e=t[3*I],n=t[3*I+1],o=t[3*I+2];f(e,n,I),f(n,o,I),f(o,e,I)}const d=(t,e)=>{const n=2*t,o=e-t;for(let r=1;r<o;r++){const t=l[n+2*r],e=l[n+2*r+1];let o=r-1;for(;o>=0&&l[n+2*o]>t;o--)l[n+2*o+2]=l[n+2*o],l[n+2*o+3]=l[n+2*o+1];l[n+2*o+2]=t,l[n+2*o+3]=e}};for(let I=0;I<n;I++)d(r[I],r[I+1]),d(u+s[I],u+s[I+1]);const g=new Int32Array(3*o),p=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,h=(t,e)=>{const n=p(t,e);g[3*e+n]=-1},N=(t,e,n,o)=>{const r=p(t,e);g[3*e+r]=o;const s=p(n,o);g[3*o+s]=e};for(let I=0;I<n;I++){let t=r[I];const e=r[I+1];let n=s[I];const o=s[I+1];for(;t<e&&n<o;){const e=l[2*t],o=l[2*u+2*n];e===o?(N(I,l[2*t+1],o,l[2*u+2*n+1]),t++,n++):e<o?(h(I,l[2*t+1]),t++):(h(o,l[2*u+2*n+1]),n++)}for(;t<e;)h(I,l[2*t+1]),t++;for(;n<o;)h(l[2*u+2*n],l[2*u+2*n+1]),n++}return g}var s=n(48549),i=n(66470),a=n(96141),c=n(69413),l=n(7150);function u(t){const e=f(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return g.updateSettings(t.writerSettings),p.updateSettings(t.writerSettings),(0,l.K)(e,g,p)}function f(t,e,n,s){if(e){const e=r(n,s,t.count);return new d(n,s,e,t)}const i=(0,o.b)(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:s}),c=r(i.indices,s,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:c,vertices:a.EdgeInputBufferLayout.createView(i.buffer)}}class d{constructor(t,e,n,o){this.faces=t,this.facesLength=e,this.neighbors=n,this.vertices=o}}const g=new c.T,p=new c.k,h=(0,s.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1),N=(0,s.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1).u16(i.r.COMPONENTINDEX)},69413:(t,e,n)=>{n.d(e,{T:()=>I,k:()=>O});var o=n(47249),r=n(20664),s=n(9392),i=n(57481),a=n(25672),c=n(96141);class l{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?p:g}write(t,e,n){m.seed=this._edgeHashFunction(n);const o=m.getIntRange(0,255),r=m.getIntRange(0,this.settings.variants-1),s=m.getFloat(),i=255*(.5*function(t,e){return Math.abs(t)**e*Math.sign(t)}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),1.2)+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,o),t.variantStroke.set(e,r),t.variantExtension.set(e,i)}}const u=new Float32Array(6),f=new Uint32Array(u.buffer),d=new Uint32Array(1);function g(t){return u[0]=t.position0[0],u[1]=t.position0[1],u[2]=t.position0[2],u[3]=t.position1[0],u[4]=t.position1[1],u[5]=t.position1[2],d[0]=31*(31*(31*(31*(31*(166811+f[0])+f[1])+f[2])+f[3])+f[4])+f[5],d[0]}function p(t){const e=u;e[0]=N(t.position0[0]),e[1]=N(t.position0[1]),e[2]=N(t.position0[2]),e[3]=N(t.position1[0]),e[4]=N(t.position1[1]),e[5]=N(t.position1[2]),d[0]=5381;for(let n=0;n<f.length;n++)d[0]=31*d[0]+f[n];return d[0]}const h=1e4;function N(t){return Math.round(t*h)/h}class I{constructor(){this._commonWriter=new l}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return c.gr.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),(0,r.g)(S,n.faceNormal0,n.faceNormal1),(0,r.n)(S,S);const{typedBuffer:o,typedBufferStride:s}=t.normalCompressed;(0,a.aT)(o,e,S[0],S[1],S[2],s)}}I.Layout=c.gr,I.glLayout=(0,i.U)(c.gr,1);class O{constructor(){this._commonWriter=new l}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return c.In.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n);{const{typedBuffer:o,typedBufferStride:r}=t.normalCompressed;(0,a.aT)(o,e,n.faceNormal0[0],n.faceNormal0[1],n.faceNormal0[2],r)}{const{typedBuffer:o,typedBufferStride:r}=t.normal2Compressed;(0,a.aT)(o,e,n.faceNormal1[0],n.faceNormal1[1],n.faceNormal1[2],r)}}}O.Layout=c.In,O.glLayout=(0,i.U)(c.In,1);const S=(0,s.vt)(),m=new o.A},96141:(t,e,n)=>{n.d(e,{EdgeInputBufferLayout:()=>i,In:()=>u,gr:()=>l,vG:()=>f,vJ:()=>a,wO:()=>c});var o=n(57481),r=n(48549),s=n(66470);const i=(0,r.BP)().vec3f(s.r.POSITION).u16(s.r.COMPONENTINDEX).freeze(),a=(0,r.BP)().vec2u8(s.r.SIDENESS).freeze(),c=(0,o.U)(a),l=(0,r.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).vec2i16(s.r.NORMALCOMPRESSED).u16(s.r.COMPONENTINDEX).u8(s.r.VARIANTOFFSET,{glNormalized:!0}).u8(s.r.VARIANTSTROKE).u8(s.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),u=(0,r.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).vec2i16(s.r.NORMALCOMPRESSED).vec2i16(s.r.NORMAL2COMPRESSED).u16(s.r.COMPONENTINDEX).u8(s.r.VARIANTOFFSET,{glNormalized:!0}).u8(s.r.VARIANTSTROKE).u8(s.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),f=new Map([[s.r.POSITION0,0],[s.r.POSITION1,1],[s.r.COMPONENTINDEX,2],[s.r.VARIANTOFFSET,3],[s.r.VARIANTSTROKE,4],[s.r.VARIANTEXTENSION,5],[s.r.NORMALCOMPRESSED,6],[s.r.NORMAL2COMPRESSED,7],[s.r.SIDENESS,8]])}}]);
//# sourceMappingURL=8775.71eaa45f.chunk.js.map