"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[6498,53680,75166,82414,84689,85685],{770:(e,n,t)=>{t.d(n,{bG:()=>r,Ty:()=>o,YJ:()=>u,Fq:()=>c,vt:()=>l});var a=t(53084),i=t(42633);class s{constructor(e){const{name:n,label:t,description:a,schemes:s}=e;this.name=n,this.label=t,this.description=a,this.schemes=s;const r=e.basemapGroups||i.Np;let l=[];Object.keys(r).forEach((e=>{l=l.concat(r[e])})),this.supportedBasemaps=l,this.basemapGroups=r}isBasemapSupported(e){const n=(0,i.T1)(e,this.supportedBasemaps);return!(!n||!this.supportedBasemaps.includes(n))}getRawSchemes(e){const{basemapId:n,basemapTheme:t}=function(e,n,t){let a=null,s=null;if(n&&(a=(0,i.T1)(n,e,!1),a)){const e=(0,i.BV)(a);null!=e&&(s=e)}return!a&&t&&(a="dark"===t?"dark-gray":"gray",s=t),a||s||(a="gray",s="light"),{basemapId:a,basemapTheme:s}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let s=t;if(n){const e=(0,i.BV)(n,this.basemapGroups);null!=e&&(s=e)}let r=e.geometryType;"multipoint"===r?r="point":"mesh"===r&&(r="polygon");const l=this.schemes[r]||this.schemes.default;return{schemesInfo:(0,a.clone)(l[s]),basemapId:n,basemapTheme:t}}}function r(e){const n=e.themeDictionary,t=new Map;for(const a in n){const e=n[a];t.set(a,new s(e))}return t}function l(e,n){const t=[];return e.forEach((e=>{e.isBasemapSupported(n)&&t.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),t}function o(e,n){if(!e)return;if(!n)return;let t=null;const a=[n.primaryScheme,...n.secondarySchemes];for(const i of a)if(i.name?.toLowerCase()===e.toLowerCase()){t=i;break}return t}function u(e,n,t){if(!e&&!n)return[];if(!t)return[];const a=!e?.length,i=!n?.length,s=[t.primaryScheme,...t.secondarySchemes],r=[];for(const l of s){const t=!!a||e.some((e=>l.tags.includes(e))),s=!i&&n.some((e=>l.tags.includes(e)));t&&!s&&r.push(l)}return r}function c(e){const n=e.theme;if(n)return n.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},17237:(e,n,t)=>{t.d(n,{A:()=>l});var a=t(50076),i=t(84171),s=t(27208),r=t(42633);async function l(e){const n="days",t={...e,outStatisticTypes:r.XR,unit:n},l=await(0,i.default)(t);if(null==l.avg)throw new a.default("age-unit:insufficient-info","'avg' statistics is invalid");const o=function(e){const n=Math.abs(e.avg);let t=null;return s.supportedAgeUnits.some((e=>{const a=r.SO[e];return n>2*a&&(t=e),!!t})),t}({...l,avg:l.avg});if(o===n)return{unit:o,statistics:l};t.unit=o;const u=await(0,i.default)(t);if(null==u.avg)throw new a.default("age-unit:insufficient-info","'avg' statistics is invalid");return{unit:o,statistics:u}}},29857:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});var a=t(50076),i=t(68002),s=t(16525),r=t(90494),l=t(11563);const o=500,u=1e8,c=1280,f=12,p=30,m=15;async function d(e){const{view:n,sampleSize:t}=e;if(!e||!e.layer)throw new a.default("scale-range:missing-parameters","'layer' parameter is required");if(e.snapToLOD&&!n)throw new a.default("scale-range:missing-parameters","'view' parameter is required when 'snapToLOD' is true");e.forBinning&&(0,r.p)(e,"scale-range");const{layer:i,...s}=e,u=e.forBinning?l.Mi:l.J4,c=(0,l.Jg)(i,u,e.forBinning);if(!c)throw new a.default("scale-range:invalid-parameters","'layer' must be one of these types: "+(0,l.Ho)(u).join(", "));const f={layerAdapter:c,...s};f.sampleSize=t||o,await(n?.when());const p=null!=f.signal?{signal:f.signal}:null;return await c.load(p),f}function g(e,n,t){const a=function(e,n){const t=f,a=c/4,i=p,s=c/4,r=m,l=c/2;let o=0,u=0,d=0,g=0;switch(e){case"point":case"multipoint":{const e=n;o=e.avgMinDistance??0,u=t,d=e.minDistance??0,g=a;break}case"polyline":{const e=n;o=e.avgLength??0,u=i,d=e.minLength??0,g=s;break}case"polygon":{const e=n;o=e.avgSize??0,u=r,d=e.minSize??0,g=l;break}}return{resolutionForMinScale:o>0?o/u:null,resolutionForMaxScale:d>0?d/g:null}}(e.geometryType,n),s=t?.spatialReference||e.layer.spatialReference;return{minScale:(0,i.gB)(a.resolutionForMinScale??0,s),maxScale:(0,i.gB)(a.resolutionForMaxScale??0,s)}}function v(e,n){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.constraints&&"effectiveLODs"in e.constraints){const a=e.constraints.effectiveLODs,i=t?a:a.slice().reverse();let s=null;for(const e of i)if(!(t?e.scale>n:e.scale<n)){s=e;break}return s}}function y(e,n,t,i){const{view:s,snapToLOD:r,layerAdapter:l}=e;if(r&&s){const e=v(s,n),a=v(s,t,!1);n=e?e.scale:n,t=a?a.scale:t}if(n<t)throw new a.default("scale-range:invalid","calculated minScale is less than maxScale.");return t>n/2&&(t=Math.floor(t/2)),n>u&&(n=0),"polygon"!==l.geometryType&&(t=0),{minScale:Math.ceil(n),maxScale:Math.floor(t),spatialStatistics:i}}async function h(e){const n=await d(e),{view:t,sampleSize:i,layerAdapter:r,signal:l,filter:o}=n,u=await r.getSampleFeatures({view:t,sampleSize:i,returnGeometry:!0,filter:o,signal:l},"json");if(!u?.length)throw new a.default("scale-range:insufficient-info","No features are available to calculate statistics");const c=await(0,s.A)({features:u,geometryType:r.geometryType}),{minScale:f,maxScale:p}=g(r,c,t);return y(n,f,p,c)}},31650:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b});t(81806);var a=t(50076),i=t(76931),s=t(68002),r=t(43996),l=t(63040),o=t(29857),u=t(90494),c=t(11563);const f=1e8,p=1128.497176,m=591657527.591555,d=[10,8,4,2],g=[100,100,60,30],v=[2,1,.75,.5],y=[32,18,12,6],h=[{level:0,resolution:156543.03392800014,scale:591657527.591555},{level:1,resolution:78271.51696399994,scale:295828763.795777},{level:2,resolution:39135.75848200009,scale:147914381.897889},{level:3,resolution:19567.87924099992,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}];function w(e,n){const{view:t}=e;if(!t)throw new a.default("scale-range:invalid-parameters","'view' is required");const i=n.minScale||f,s=t.constraints&&"effectiveLODs"in t.constraints&&t.constraints.effectiveLODs||h,r=[];for(let a=0;a<s.length;a++){if(s[a].scale>i)continue;const e=Number(a),n=[e-3,e,e+3,e+6];for(const t of n)t>-1&&t<s.length&&r.push(s[t].scale);break}return r.sort(((e,n)=>e-n))}function S(e,n){const{view:t,layerAdapter:i}=e;if(!t)throw new a.default("scale-range:invalid-parameters","'view' is required");const r=i.fullExtent,l=i.minScale||p,o=i.maxScale||m,u=n.minScale||0,c=n.maxScale||0;let f=null!=r?(0,s.X_)(t,r):0;return f=f<l&&f>o?f:0,{scales:[l,o,u,c,f].map(Math.round).sort(((e,n)=>e-n)).filter(((e,n,t)=>!!e&&t.indexOf(e)===n)).filter(((e,n,t)=>!n||Math.abs(e-t[n-1])>5)),fullExtentScale:f}}function z(e,n){const{spatialStatistics:t,minScale:s,maxScale:o}=n;if(!("avgSize"in t)||!t.avgSize)throw new a.default("size-range:insufficient-info","average polygon size is invalid");const u=t.avgSize,{view:c}=e;if(!c)throw new a.default("scale-range:invalid-parameters","'view' is required");const{resolution:f,scale:p}=c,m=f/p,{scales:d,fullExtentScale:g}=S(e,{minScale:s,maxScale:o}),v=[],y=[];return d.forEach(((e,n)=>{const{min:t,max:a}=function(e,n){const t=Math.ceil(e/n);let a=Math.ceil(t/4);a<4?a=4:a>16&&(a=16);const i=5*a;return{min:a,max:i<50?50:i}}(u,m*e),s=d.indexOf(g),r=s>-1&&n>s?2:1;v.push(new l.default({value:e,size:(0,i.PN)(t/r)})),y.push(new l.default({value:e,size:(0,i.PN)(a/r)}))})),{minSize:new r.default({valueExpression:"$view.scale",stops:v}),maxSize:new r.default({valueExpression:"$view.scale",stops:y})}}async function b(e){const n=await async function(e){const{view:n}=e;if(!(e&&n&&e.layer))throw new a.default("size-range:missing-parameters","'view' and 'layer' parameters are required");e.forBinning&&(0,u.p)(e,"size-range");const{layer:t,...i}=e,s=e.forBinning?c.Mi:c.J4,r=(0,c.Jg)(t,s,e.forBinning);if(!r)throw new a.default("size-range:invalid-parameters","'layer' must be one of these types: "+(0,c.Ho)(s).join(", "));const l={layerAdapter:r,...i,view:n};await n.when();const o=null!=l.signal?{signal:l.signal}:null;await r.load(o);const f=r.geometryType;if("point"!==f&&"multipoint"!==f&&"polyline"!==f&&"polygon"!==f)throw new a.default("size-range:not-supported",`sizeRange is not supported for geometryType: ${f}`);return l}(e),{view:t,layerAdapter:s,signal:f,filter:p}=n,m=await(0,o.default)({layer:s,view:t,signal:f,filter:p});switch(s.geometryType){case"point":case"multipoint":return function(e,n){const{minScale:t,maxScale:s}=n,o=w(e,{minScale:t,maxScale:s});if(!o.length)throw new a.default("scale-range:insufficient-info","not enough scale values");return{minSize:new r.default({valueExpression:"$view.scale",stops:o.map(((e,n)=>new l.default({value:e,size:(0,i.PN)(d[n])})))}),maxSize:new r.default({valueExpression:"$view.scale",stops:o.map(((e,n)=>new l.default({value:e,size:(0,i.PN)(g[n])})))})}}(n,m);case"polyline":return function(e,n){const{minScale:t,maxScale:s}=n,o=w(e,{minScale:t,maxScale:s});if(!o.length)throw new a.default("scale-range:insufficient-info","not enough scale values");return{minSize:new r.default({valueExpression:"$view.scale",stops:o.map(((e,n)=>new l.default({value:e,size:(0,i.PN)(v[n])})))}),maxSize:new r.default({valueExpression:"$view.scale",stops:o.map(((e,n)=>new l.default({value:e,size:(0,i.PN)(y[n])})))})}}(n,m);case"polygon":return z(n,m);case"mesh":case"multipatch":return null}return null}},53680:(e,n,t)=>{t.d(n,{AC:()=>i,DW:()=>o,Hj:()=>z,Ih:()=>g,Jy:()=>f,OW:()=>y,Rv:()=>u,UJ:()=>l,_i:()=>c,d8:()=>m,fs:()=>p,kc:()=>d,ke:()=>S,mE:()=>s,wx:()=>r});var a=t(50076);async function i(e,n){const{layer:t,view:i,forBinning:s,filter:r}=e;if(!t||!i)throw new a.default(`${n}:missing-parameters`,"'layer' and 'view' parameters are required");await t.load();const l="featureReduction"in t?t.featureReduction:null;if(s){if("binning"!==l?.type)throw new a.default(`${n}:invalid-parameters`,"'layer' must have 'featureReduction' property defined with 'binning' type when 'forBinning' parameter is true");if(r)throw new a.default(`${n}:invalid-parameters`,"'filter' parameter is not supported when 'forBinning' parameter is true")}return e}async function s(e){const{layer:n,forBinning:t,renderer:i}=e;await n.load();const s="featureReduction"in n?n.featureReduction:null,r=i?.clone()??(t&&"binning"===s?.type?s?.renderer?.clone():"renderer"in n?n.renderer?.clone():null);if(!r)throw new a.default("get-renderer-to-update:invalid-parameters","renderer not available");return r}function r(e,n,t){const a=e?.authoringInfo?.visualVariables;return a?.find((e=>"reference-size"===t?e.type===n&&"reference-size"===e.theme:e.type===n))}function l(e){if(!e)return null;const n=e.type,t="visualVariables"in e?e.visualVariables:null,a=t?.find(g),i=t?.find(y),s=e.authoringInfo,l=r(e,"color"),o=r(e,"size"),u=r(e,"size","reference-size");if("class-breaks"===n){if("univariate-color-size"===s?.type)return"univariate-color-size";if(a)return i?o?.units?"color-size-age":l?.units?"color-age-size":"color-size":l?.units?"color-age":u?"color-size":"color-continuous";if(i)return o?.units?"size-age":"size-continuous";if(e.classBreakInfos.length>1)return"class-breaks-color"===s?.type?"color-class-breaks":"class-breaks-size"===s?.type?"size-class-breaks":null;if(u)return"size-continuous"}return"unique-value"===n?e.valueExpression?"predominance"===s?.type?"predominance":"relationship"===s?.type?i||u?"relationship-size":"relationship":i||u?"type-size":"type":i?o?.units?"type-size-age":"type-size":u?"type-size":"type":"pie-chart"===n?"pie-chart":"dot-density"===n?"dot-density":null}function o(e){return!!e.visualVariables?.some(h)}function u(e){return!!e.visualVariables?.some(w)}function c(e){return e?.findIndex(h)??-1}function f(e){return e?.findIndex(y)??-1}function p(e){return e?.findIndex(g)??-1}function m(e){return e?.findIndex(v)??-1}function d(e){return e?.findIndex(w)??-1}function g(e){return"color"===e.type}function v(e){return"opacity"===e.type}function y(e){return"size"===e.type&&"outline"!==e.target&&"$view.scale"!==e.valueExpression}function h(e){return"size"===e.type&&"outline"===e.target}function w(e){return"size"===e.type&&"$view.scale"===e.valueExpression&&"outline"!==e.target&&Array.isArray(e.stops)}function S(e,n,t){const a=e.visualVariables,i=t(a);if(!n||Array.isArray(n)&&!n.length)return;Array.isArray(n)||(n=[n]);const s=n.map((e=>e.clone()));a?i>-1?a.splice(i,1,...s):a.push(...s):e.visualVariables=s}function z(e,n,t){const a=n?.visualVariables.find((e=>e.type===t)),i=r(e,t);i&&a&&(i.minSliderValue=a.minSliderValue,i.maxSliderValue=a.maxSliderValue,"size"===t&&"reference-size"===i.theme&&(i.sizeStops=a.sizeStops?.map((e=>e.clone())),i.referenceSizeScale=a.referenceSizeScale))}},80791:(e,n,t)=>{t.d(n,{_J:()=>u,_t:()=>o});var a=t(76931),i=t(42633);const s=i.Np.light,r=i.Np.dark;function l(e,n){return e.r===n.r&&e.g===n.g&&e.b===n.b}function o(e,n){let t=0;if(e.length===n.length){let a=e.every(((e,t)=>l(e,n[t])));a?t=1:(a=e.slice().reverse().every(((e,t)=>l(e,n[t]))),a&&(t=-1))}return t}function u(e,n){return Math.ceil(function(e){const n=e.width,t=e.height;let i=e.pixelSizeAt(e.toMap((0,a.tc)(.5*n,.5*t),{exclude:[]}));if(i<=0&&(i=e.pixelSizeAt(e.toMap((0,a.tc)(.5*n,.95*t),{exclude:[]})),i<=0&&"camera"in e)){const n=e.camera.position.clone();n.z=0,i=2*e.pixelSizeAt(n)}return i}(n)*(0,a.Lz)((0,a.cr)(e)))}},84171:(e,n,t)=>{t.r(n),t.d(n,{default:()=>l});var a=t(50076),i=t(46481),s=t(27208),r=t(11563);async function l(e){const{layerAdapter:n,...t}=await async function(e){if(!(e&&e.layer&&e.startTime&&e.endTime&&e.unit))throw new a.default("summary-statistics-for-age:missing-parameters","'layer', 'startTime', 'endTime' and 'unit' parameters are required");const{layer:n,...t}=e,i=(0,r.Jg)(n,r.J4);if(!i)throw new a.default("summary-statistics-for-age:invalid-parameters","'layer' must be one of these types: "+(0,r.Ho)(r.J4).join(", "));const l={layerAdapter:i,...t},o=l.view,u=null!=l.signal?{signal:l.signal}:null;await Promise.all([o?.when(),i.load(u)]);const c=(0,s.verifyDates)(i,l.startTime,l.endTime,"summary-statistics-for-age:invalid-parameters");if(c)throw c;if(!l.unit||!s.supportedAgeUnits.includes(l.unit))throw new a.default("summary-statistics-for-age:invalid-parameters",`Supported units are: ${s.supportedAgeUnits.join(", ")}`);return l}(e),{view:l,startTime:o,endTime:u,unit:c,minValue:f,maxValue:p,signal:m,filter:d,outStatisticTypes:g}=t,{valueExpression:v,statisticsQuery:y}=(0,s.getAgeExpressions)({layer:n,startTime:o,endTime:u,unit:c}),h={layer:n,valueExpression:v,...y,minValue:f,maxValue:p,outStatisticTypes:g,view:l,filter:d,signal:m};return(0,i.default)(h)}}}]);
//# sourceMappingURL=82414.f8d3b208.chunk.js.map