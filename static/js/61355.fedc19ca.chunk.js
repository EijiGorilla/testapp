"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[61355],{51287:(t,i,e)=>{e.d(i,{A:()=>v});var o=e(35143),r=e(39356),a=e(91967),n=e(50076),s=e(54099),l=e(50346),c=e(68134),d=e(46053),h=(e(81806),e(76460),e(47249),e(85842)),p=e(89465),g=e(99403),u=e(79535);const y={type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYaSURBVHgBvVfNb1VFFD/nzP16xRYJKYREEiJoDLLShQkrSNzoHv8I2QgxwY8FJWHhxoVxISEu2AordWNiQjAxEBeEsKAmhCCwkPDRAn1t33v33jnH37n3Fam0pa8kTjOde+/MnN/5+J0z85jW08yYTpxgfzx0bS+fO0R0YHqyeb9w7YEtLTv+9rSdOH7ciNleJJJX/Do1JQ3AltdlT35fiN6gG8kD8akdmzO+6w/zM7wdw725rUY78DBXtmATA6PZntFgm9Kjm6o/HFJpdi5Xhp+16sDBC+H+gUmZfjIXHKC+35U42ZHZfpe30BZS7okNFnhu8wTRk2ek5LEV2q+N8nEj6yuNVRjHddftrt4ahyJbOxF+Uppi/Rf47NlA05Pp9vkyRNkkD8sqUJHwOGfSpYFQFXhTJryQBaZSeAxbFus+U1K0gJm2oy3QKwuZzqeuSK5kpW6BEsE6+nCsAHDXQWuaOljzU8uP/ToxUW4KcwKg8QzOSdFL6Swm0hurAC7N2qIW7ncwNgYKF4la3/w7RnzrUK29KseXWqmTKXGl45Zrd9CLrsSjr96fcw4kS46mTsJznSTrVBR6VQJQdDbpZTWexxgCYCFz30cquD8oYVQgtUAUzfo8wGtqGoNRFmFZ1KKulJMQu3Vpm/I8Pup3ekvES57GaabXo4lsszEA6zrkhcmAAkBNshi59O9wVsokBLZUCQAxllXVBkyCDRQuTlLLiLSEqw3gfUqU0kVdsKymsnzyPLm8fXZxDxVZgvUhg9QyaKDI7AhpSlRVEaA83JM+/V8pGO0PMTHyZwra9FQVk4i1e0D6dPK9v5agkmXAhc0Bw5MjlAQQE0lSDbUmbBX4kGfsiiQWuSZtdle1S4F73cUKJgviyw4mmmqlVSoR/FAK2d1noWQZ8N79MySw0tgNzhN00jRFaPM6y3IyLWBxXuOdvMfhaIy1MQctmvnEMGrMq2Y/ekC3dHF14I84gmZP2s0pgiJFHVwYhIIrMC1zgT4fQgsS0CG48LWtslAsgeKZK5U1c5Slj+nEvvJZqOWubr5ks8iE3bVqCMQCz4p5aiUqpMrOdHz2qLFTxAMSPLwY8WpmntNwrXIMCWvESGH+7n9hVi6ZJ6/sR5gnycFFQgsCQEEB8T9TbsCGy4PrZrEBjGyIt4EApoGRXWKP6Mt3fnvOvhWBjR4gdjtJEDmGQQkBSCS6Teys5qECABTPWOBwcPWgAPIU+E2+Rq3J8lsrQawMHNPbqAXvRqasWcMB/mK42N3twM6/FsbJTZK2Fru15K7niPVIp6RHn++9vRKErAg8ta+MFq4LBxAJKY1EajpxLj5KUzFzOMTni4btxoUzXPzIIOwLnEPxGVqlyWoTdO/WNRUXJhDmAgNAJVd0eABj8FTCvLbpEnxdOycJlFNXVq6MDvzthwOQ654LaMGGVofQWIWtXhM9xaCQp85QIZFMPXcpuUPH3uquJj6htVonvySD+KY6c2AulPAzHdVaZElvPCGBgvkIRUECr1J4qmV6LdGyJvAnu+94HZMla1Eg1AuGVyQWnNCwzqsUXK5+AIsUyPRc1Rbpi93X1xK9tsXtkj9U7INWSWvU0DaZ6OlVAmUDiqgbrwY2Z3ThRVKFXrgi/R0x9GMplxAyER6ynAtZin1DQoLVznLMU+/mywMf3dlDpbyMlbjLQDhLw/Sh24sm5dhTrlHKgS/T0X2zLw/sLeGr5OlEbg2uHwAFw5reKuKsJj8kcIj0zq9H5PqAj+z6E8y+YRIaUhnAEOrcWgv9m3shQ1H7mz5duVJtDLhZqZcNlrEDwXKwCzncdFg+PJeVf1m3uPUupLR7Hq6tHNyLhw1TCmdGbm0BmaUjr63LzaMBH943D9f+yO5uZ7HfcLktqdwqMU0jtPUDN6vDOfzgKFrXtta6q83vfHU4M5KoURbT4W3zsPIqrgQFO8GozV8ocZGOTN4dRdRowN6CnOLmKkk5t7H1i+HPNGJj2kj7buYajoRXh2+36eOt+2nENrrF3ozODEmFC0D4hjbQNgYc+DSYjd9qqGSJXqL/tZ16/DWdfvw9bbCt41hcpYn9RAEX9Q22fwC74ny5v9iplQAAAABJRU5ErkJggg=="},m=new p.default({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:16,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:0,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,0,0,66]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,offsetX:0,offsetY:-1},y],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"TintColor",valueExpressionInfo:{type:"CIMExpressionInfo",title:"TintColor override",expression:"IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 1])",returnType:"Default"}}]}});let A=class extends((0,u.A)(s.A.EventedMixin(a.default))){constructor(){super(...arguments),this._geolocationUsable=!0,this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new r.default({symbol:m}),this.scale=null,this.rotationEnabled=!0,this.view=null}initialize(){(0,g.$j)()||(this._geolocationUsable=!1),this.addHandles([(0,c.watch)((()=>this.view?.type),(()=>this._handleViewTypeChange()),c.initial)])}destroy(){this._clearGraphic(),this.view=null}_clearGraphic(){const{view:t,graphic:i}=this;t&&i&&t.graphics.remove(i)}_addGraphic(){const{view:t,graphic:i}=this;t?.graphics&&i&&!t.graphics.includes(i)&&t.graphics.push(i)}_handleViewTypeChange(){y.enable="2d"===this.view?.type}_getScaleWithinConstraints(t,i){if(!i)return t;if("2d"===i.type){const{effectiveMaxScale:e,effectiveMinScale:o}=i.constraints;return Math.min(o,Math.max(e,t))}return t}_getScale(t){const{scale:i}=this,e="number"==typeof i?i:2500;return this._getScaleWithinConstraints(e,t)}_getHeading(t,i){const e=i?.spatialReference,o=e?.isWebMercator||e?.isGeographic,r=t.coords?.heading;return!o||"number"!=typeof r||isNaN(r)||r<0||r>360?null:r}_addHeading(t){const{heading:i,target:e,view:o}=t;o&&null!==i&&("3d"!==o.type?"2d"===o.type&&(e.rotation=360-i):e.heading=i)}async _animatePoint(t,i,e,o){const{view:r}=this;if(!this.goToLocationEnabled||!r)return;const a={target:t,scale:i};this.rotationEnabled&&this._addHeading({heading:e,target:a,view:r});const n={signal:o.signal};(0,l.throwIfAborted)(n),await this.callGoTo({target:a,options:n})}async updatePosition(t,i){try{const e=this.view,o=await(0,g.Ly)({position:t,view:e},{signal:i.signal}),{graphic:r}=this,{timestamp:a,coords:n}=t,{accuracy:s,altitude:l,altitudeAccuracy:c,latitude:d,longitude:h,speed:p}=n,u=this._getHeading(t,e),y={timestamp:a,accuracy:s,altitude:l,altitudeAccuracy:c,heading:u,latitude:d,longitude:h,speed:p};r&&(r.geometry=o,r.attributes=y);const m=this._getScale(e);await this._animatePoint(o,m,u,i)}catch(e){if(!(0,l.isAbortError)(e))throw new n.default("geolocation-positioning:invalid-point","Cannot position invalid point",{error:e})}return t}};(0,o._)([(0,d.MZ)()],A.prototype,"_geolocationUsable",void 0),(0,o._)([(0,d.MZ)()],A.prototype,"geolocationOptions",void 0),(0,o._)([(0,d.MZ)()],A.prototype,"goToLocationEnabled",void 0),(0,o._)([(0,d.MZ)({type:r.default,nonNullable:!0})],A.prototype,"graphic",void 0),(0,o._)([(0,d.MZ)()],A.prototype,"scale",void 0),(0,o._)([(0,d.MZ)()],A.prototype,"rotationEnabled",void 0),(0,o._)([(0,d.MZ)()],A.prototype,"view",void 0),A=(0,o._)([(0,h.$)("esri.widgets.support.GeolocationPositioning")],A);const v=A},61355:(t,i,e)=>{e.r(i),e.d(i,{default:()=>c});var o=e(35143),r=e(50346),a=e(46053),n=(e(81806),e(76460),e(47249),e(85842)),s=e(51287);let l=class extends s.A{constructor(t){super(t),this._watchId=void 0,this._trackStartingTimeoutId=void 0,this._settingPosition=null,this._trackController=null,this.error=void 0,this.positionFilterFunction=null}destroy(){this._stopTracking()}get state(){return this._geolocationUsable?this.view&&!this.view.ready?"disabled":this._settingPosition||void 0!==this._trackStartingTimeoutId?"waiting":this.tracking?"tracking":null!=this.error?"error":"ready":"feature-unsupported"}get tracking(){return void 0!==this._watchId}start(){"disabled"!==this.state&&"feature-unsupported"!==this.state&&this._startTracking()}stop(){"disabled"!==this.state&&"feature-unsupported"!==this.state&&this._stopTracking()}_stopWatchingPosition(){void 0!==this._watchId&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=void 0)}_stopTracking(){this._abortTrack(),this._clearWaitingTimer(),this._stopWatchingPosition(),this._clearGraphic()}_startTracking(){this._stopTracking();const t=(0,r.debounce)((async t=>{this._abortTrack();const i=new AbortController;this._trackController=i;const{timestamp:e,coords:o}=t,a={timestamp:e,coords:{...o}};this.error=void 0;try{if("function"==typeof this.positionFilterFunction&&!this.positionFilterFunction.call(null,{position:a}))return;if(await this.updatePosition(t,i),this._trackController!==i)return;this._clearWaitingTimer(),this._addGraphic(),this.emit("track",{position:t}),this._trackController=null}catch(n){if((0,r.isAbortError)(n))return;throw this._trackController=null,this._emitError(n),this._clearWaitingTimer(),n}}),0);this._watchId=navigator.geolocation.watchPosition((i=>{this._settingPosition=t(i).catch(r.ignoreAbortErrors)}),this._handleWatchPositionError.bind(this),this.geolocationOptions??void 0),this._trackStartingTimeoutId=setTimeout((()=>{this._trackStartingTimeoutId=void 0}),15e3)}_handleWatchPositionError(t){t.code===t.PERMISSION_DENIED&&this._stopTracking(),this._emitError(t)}_abortTrack(){this._trackController?.abort(),this._trackController=null}_clearWaitingTimer(){clearTimeout(this._trackStartingTimeoutId),this._trackStartingTimeoutId=void 0,this._settingPosition=null}_emitError(t){this.error=t,this.emit("track-error",{error:t})}};(0,o._)([(0,a.MZ)()],l.prototype,"_watchId",void 0),(0,o._)([(0,a.MZ)()],l.prototype,"_trackStartingTimeoutId",void 0),(0,o._)([(0,a.MZ)()],l.prototype,"_settingPosition",void 0),(0,o._)([(0,a.MZ)()],l.prototype,"error",void 0),(0,o._)([(0,a.MZ)()],l.prototype,"positionFilterFunction",void 0),(0,o._)([(0,a.MZ)({readOnly:!0})],l.prototype,"state",null),(0,o._)([(0,a.MZ)({readOnly:!0})],l.prototype,"tracking",null),(0,o._)([(0,a.MZ)()],l.prototype,"start",null),(0,o._)([(0,a.MZ)()],l.prototype,"stop",null),l=(0,o._)([(0,n.$)("esri.widgets.Track.TrackViewModel")],l);const c=l}}]);
//# sourceMappingURL=61355.fedc19ca.chunk.js.map