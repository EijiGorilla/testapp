"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[27147],{27147:(e,t,n)=>{n.r(t),n.d(t,{create:()=>d});var a=n(76460),i=n(31633),o=n(10851),r=n(19247),s=n(9624),l=n(79629),u=n(56623),c=n(97153);const m=()=>a.A.getLogger("esri.geometry.support.meshUtils.elevation");async function d(e,t,n){let a;if(f(e)||(0,c.Q)(e)){const i=await async function(e){return f(e)?e.load():(await e.load(),await Promise.allSettled(e.layers.items.map((e=>e.load()))),e)}(e);return a=await i.createElevationSampler(t,{demResolution:n?.demResolution??"finest-contiguous"}),p(a,t,{material:n?.material})}return"string"==typeof n?.demResolution?(m().error("create()","demResolution must be a number when used directly with a sampler"),new o.default):p(e,t,{material:n?.material,demResolution:n?.demResolution})}function p(e,t,n){if(e.demResolution.min<=0&&!n?.demResolution)return m().error("create()","demResolution must be specified when used with groundView.elevationSampler"),new o.default;const a=(0,i.GA)(t.spatialReference),r=(n?.demResolution??e.demResolution.min)/a,c=Math.round(t.width/r),d=Math.round(t.height/r),p=c+1,f=d+1,R=new Float64Array(p*f*3),h=new Float32Array(p*f*2);let y=0,g=0;const v=new Uint32Array(c*d*2*3);let A=0,b=0;const k=!e.spatialReference.equals(t.spatialReference);w.spatialReference=t.spatialReference;const{xmin:x,ymin:S,height:C,width:F}=t;for(let i=0;i<f;i++){const t=S+C*(i/d);for(let n=0;n<p;n++){const a=x+F*(n/c);if(R[y++]=a,R[y++]=t,k){w.x=a,w.y=t;const n=(0,s.project)(w,e.spatialReference);R[y++]=e.elevationAt(n.x,n.y)??0}else R[y++]=e.elevationAt(a,t)??0;const o=n/c,r=i/d;h[g++]=o,h[g++]=r,i!==d&&n!==c&&(v[b++]=A+1,v[b++]=A+p+1,v[b++]=A+p,v[b++]=A,v[b++]=A+1,v[b++]=A+p),A++}}return new o.default({vertexAttributes:new u.H({position:R,uv:h}),components:[new l.default({faces:v,shading:"smooth",material:n?.material??null})],spatialReference:t.spatialReference})}function f(e){return"type"in e&&("elevation"===e.type||"base-elevation"===e.type)}const w=new r.default}}]);
//# sourceMappingURL=27147.2aa1a1f1.chunk.js.map