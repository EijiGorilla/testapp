"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[1947],{1947:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var s=a(35143),i=a(28899),l=a(63241),r=a(76460),n=a(68134),o=a(46053),d=(a(81806),a(47249),a(85842)),m=a(86300),c=a(25329),p=a(71276);const h="esri-basemap-gallery",u={base:h,sourceLoading:`${h}--source-loading`,loader:`${h}__loader`,item:`${h}__item`,itemContainer:`${h}__item-container`,itemContent:`${h}__item-content`,itemTitle:`${h}__item-title`,itemTagsContainer:`${h}__item-tags-container`,itemThumbnail:`${h}__item-thumbnail`,selectedItem:`${h}__item--selected`,itemError:`${h}__item--error`};var g=a(94126),_=a(98108),v=a(87540),b=a(20459),y=a(63582),w=a(54761);a(76099);let B=class extends c.default{constructor(e,t){super(e,t),this.disabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new p.default,this._focusBasemapItemEnabled=!1,(0,l.ED)(r.A.getLogger(this),"Basemap Gallery","arcgis-basemap-gallery",{version:"4.32"})}initialize(){this.addHandles((0,n.when)((()=>this.source),(()=>this.viewModel.loadSource()),{sync:!0,initial:!0}))}loadDependencies(){return(0,g.W)({scrim:()=>Promise.resolve().then(a.bind(a,32263)),chip:()=>Promise.resolve().then(a.bind(a,10239))})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get icon(){return"basemap"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e="loading"===this.source.state,t=this.disabled||"disabled"===this.viewModel.state,a={[u.sourceLoading]:e,[_.D.disabled]:t};return(0,w.K)("div",{class:this.classes(u.base,_.D.widget,_.D.panel,a),key:"container"},this._getContext())}_getContext(){if("unsupported"===this.viewModel.state)return(0,w.K)("div",{class:_.D.empty,key:"empty-message"},(0,w.K)(v.D,{level:this.headingLevel},this.messages.unsupported));if("loading"===this.source.state)return(0,w.K)("div",{class:u.loader,key:"loader"});const e=this.viewModel.items;return e.length>0?(0,w.K)("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:u.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},e.map(((e,t)=>this._renderBasemapGalleryItem(e,t))).toArray()):(0,w.K)("div",{class:_.D.empty,key:"empty-message"},(0,w.K)(v.D,{level:this.headingLevel},this.messages.noBasemaps))}_getRoundRobinIndex(e,t){return(e+t)%t}_handleKeyDown(e){const{key:t}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t))return;e.preventDefault();const{items:a,activeBasemapIndex:s}=this.viewModel,i="ArrowUp"===t||"ArrowLeft"===t?this._getRoundRobinIndex(Math.max(s-1,-1),a.length):this._getRoundRobinIndex(s+1,a.length),l=a.at(i);"ready"===l?.state&&(this.viewModel.activeBasemap=l.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&0===e.tabIndex&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const t=e.currentTarget["data-item"];"ready"===t.state&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e,t){const a=(0,m.hA)(e.basemap)||(0,i.s)("esri/themes/base/images/basemap-toggle-64.svg"),s=e.basemap.title,l=e.basemap.portalItem?.snippet,r=e.error?.message||l||s,{viewModel:{state:n,activeBasemapIndex:o}}=this,d=this.disabled||"disabled"===n,c=o===t,p=c||-1===o&&0===t?0:-1,h="loading"===n,g={[u.selectedItem]:c,[u.itemError]:"error"===e.state},v=`basemapgallery-item-${e.uid}`;return(0,w.K)("li",{afterUpdate:this._focusBasemapItem,"aria-checked":c.toString(),"aria-disabled":d.toString(),"aria-labelledby":v,bind:this,class:this.classes(u.item,g),"data-item":e,key:e.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:p,title:r},(0,w.K)("img",{alt:"",class:u.itemThumbnail,src:a}),(0,w.K)("div",{class:u.itemContent,key:"content"},(0,w.K)("div",{class:u.itemTitle,key:"title"},(0,w.K)("span",{id:v},s)),(0,m.$P)(e.basemap)?this._renderTags(e.basemap):null),"loading"===e.state||c&&h?(0,w.K)("calcite-scrim",null,(0,w.K)("span",{"aria-hidden":"true",class:_.D.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(e){return(0,w.K)("div",{class:u.itemTagsContainer,key:"tag"},this._render3DTag(),(0,m.t5)(e)?this._renderBetaTag():null)}_render3DTag(){const{messages:e}=this;return(0,w.K)("calcite-chip",{key:"tag-3d",label:e.tag3D,scale:"s"},this.messages.tag3D)}_renderBetaTag(){const{messages:e}=this;return(0,w.K)("calcite-chip",{appearance:"outline-fill",key:"tag-beta",label:e.tagBeta,scale:"s"},this.messages.tagBeta)}};(0,s._)([(0,o.MZ)()],B.prototype,"activeBasemap",null),(0,s._)([(0,o.MZ)()],B.prototype,"disabled",void 0),(0,s._)([(0,o.MZ)()],B.prototype,"headingLevel",void 0),(0,s._)([(0,o.MZ)()],B.prototype,"icon",null),(0,s._)([(0,o.MZ)()],B.prototype,"label",null),(0,s._)([(0,o.MZ)(),(0,y.G)("esri/widgets/BasemapGallery/t9n/BasemapGallery")],B.prototype,"messages",void 0),(0,s._)([(0,o.MZ)()],B.prototype,"source",null),(0,s._)([(0,o.MZ)()],B.prototype,"view",null),(0,s._)([(0,o.MZ)()],B.prototype,"viewModel",void 0),(0,s._)([(0,o.MZ)()],B.prototype,"_focusBasemapItemEnabled",void 0),(0,s._)([(0,b.$)()],B.prototype,"_handleClick",null),B=(0,s._)([(0,d.$)("esri.widgets.BasemapGallery")],B);const M=B}}]);
//# sourceMappingURL=1947.d091ca16.chunk.js.map