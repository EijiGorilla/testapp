"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[30416],{29201:(e,t,i)=>{i.d(t,{I:()=>_,a:()=>P,b:()=>g});var r=i(34981),s=i(26917),o=i(59395),n=i(90080),a=i(94192),c=i(80883),l=i(3799),p=i(21390),u=i(86955),d=i(70367),h=i(66470),v=i(91911),f=i(31432),I=i(2687);class P extends f.Y{}function g(e){const t=new I.N5,{vertex:i,fragment:f}=t,{output:P,perspectiveInterpolation:g}=e;return(0,l.NB)(i,e),t.include(o.d,e),t.include(a.Z,e),t.fragment.include(s.HQ,e),t.include(n.g,e),t.include(v.z,e),t.attributes.add(h.r.POSITION,"vec3"),t.attributes.add(h.r.UV0,"vec2"),g&&t.attributes.add(h.r.PERSPECTIVEDIVIDE,"float"),i.main.add(u.H`
    vpos = position;
    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);
    vTexCoord = uv0;
    gl_Position = transformPosition(proj, view, vpos);
    ${(0,u.If)(g,"gl_Position *= perspectiveDivide;")}`),t.varyings.add("vpos","vec3"),t.varyings.add("vTexCoord","vec2"),f.include(c.a),f.uniforms.add(new p.m("opacity",(e=>e.opacity)),new d.N("tex",(e=>e.texture))).main.add(u.H`
    discardBySlice(vpos);
    discardByTerrainDepth();
    ${(0,u.If)(P===r.V.ObjectAndLayerIdColor,"fragColor = vec4(0, 0, 0, 1); return;")}
    vec4 finalColor = texture(tex, vTexCoord) * opacity;
    outputColorHighlightOID(finalColor, vpos);`),t}const _=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:P,build:g},Symbol.toStringTag,{value:"Module"}))},30416:(e,t,i)=>{i.d(t,{r:()=>C});var r=i(88105),s=i(34981),o=i(83490),n=i(75803),a=i(45463),c=i(60322),l=i(77730),p=i(86994),u=i(66470),d=i(82809),h=i(86401),v=i(63928),f=i(52757),I=i(16506),P=i(59246),g=i(72001),_=i(96643),T=i(29201),O=i(57162);class E extends P.w{constructor(e,t){super(e,t,new I.$(T.I,(()=>i.e(48391).then(i.bind(i,48391)))),m)}_getPipelineState(e,t){const{oitPass:i,output:r,hasOccludees:o,enableOffset:n,cullFace:a}=e,l=i===g.Y.NONE,p=i===g.Y.FrontFace;return(0,O.Ey)({blending:(0,s.RN)(r)?l?O.Os:(0,c.ez)(i):null,culling:(0,O.Xt)(a),depthTest:{func:(0,c.K_)(i)},depthWrite:(0,c.z5)(e),drawBuffers:(0,c.m6)(i,r),colorWrite:O.kn,stencilWrite:o?_.v0:null,stencilTest:o?t?_.a9:_.qh:null,polygonOffset:l||p?null:(0,c.aB)(n)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const m=new Map([[u.r.POSITION,0],[u.r.UV0,2],[u.r.PERSPECTIVEDIVIDE,3]]);var D=i(35143),b=i(97808),N=i(42717),w=i(6485),y=i(94570);class A extends y.E{constructor(){super(...arguments),this.cullFace=o.s2.None,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=b.I.None,this.emissionSource=N.ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1}}(0,D._)([(0,w.W)({count:o.s2.COUNT})],A.prototype,"cullFace",void 0),(0,D._)([(0,w.W)()],A.prototype,"enableOffset",void 0),(0,D._)([(0,w.W)()],A.prototype,"writeDepth",void 0),(0,D._)([(0,w.W)()],A.prototype,"hasOccludees",void 0),(0,D._)([(0,w.W)()],A.prototype,"terrainDepthTest",void 0),(0,D._)([(0,w.W)()],A.prototype,"cullAboveTerrain",void 0),(0,D._)([(0,w.W)()],A.prototype,"perspectiveInterpolation",void 0);class C extends v.W{constructor(e){super(e,R),this._configuration=new A,this.vertexAttributeLocations=m,this.supportsEdges=!0,this.produces=new Map([[l.N.OPAQUE_MATERIAL,e=>(0,s.CL)(e)],[l.N.TRANSPARENT_MATERIAL,e=>(0,s._o)(e)&&this.parameters.writeDepth],[l.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,s._o)(e)&&!this.parameters.writeDepth],[l.N.DRAPED_MATERIAL,e=>(0,s._o)(e)||(0,s.CL)(e)]])}getConfiguration(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<c.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new x(e)}createBufferWriter(){const e=h.zK.clone();return this.parameters.perspectiveInterpolation&&e.f32(u.r.PERSPECTIVEDIVIDE),new S(e)}}class x extends n.m8{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.getTechnique(E,e)}}class S extends d.Z{write(e,t,i,s,o,n){for(const a of this.vertexBufferLayout.fields.keys()){const s=i.get(a);if(s)if(a===u.r.PERSPECTIVEDIVIDE){(0,p.vA)(1===s.size);const e=o.getField(a,r.Y$);e&&(0,f.uO)(s,e,n)}else(0,f.zC)(a,s,e,t,o,n)}}}class R extends a.qA{constructor(e){super(),this.textureId=e,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=o.s2.None,this.opacity=1,this.perspectiveInterpolation=!1}}},86401:(e,t,i)=>{i.d(t,{Ci:()=>o,Dq:()=>c,dB:()=>a,zK:()=>n});var r=i(48549),s=i(66470);const o=(0,r.BP)().vec3f(s.r.POSITION),n=(0,r.BP)().vec3f(s.r.POSITION).vec2f(s.r.UV0),a=(0,r.BP)().vec3f(s.r.POSITION).vec4u8(s.r.COLOR),c=(0,r.BP)().vec3f(s.r.POSITION).vec2f(s.r.UV0).vec4u8(s.r.OBJECTANDLAYERIDCOLOR)}}]);
//# sourceMappingURL=30416.b48c94b0.chunk.js.map