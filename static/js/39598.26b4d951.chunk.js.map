{"version":3,"file":"static/js/39598.26b4d951.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/draw/PointDrawAction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/Logger.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import\"../../core/Error.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Point.js\";import o from\"./DrawAction.js\";import{DrawTool as r}from\"./DrawTool.js\";import{CursorUpdateEvent as s,DrawCompleteEvent as n}from\"./input/DrawEvents.js\";import{ViewEventPriorities as a}from\"../input/InputManager.js\";import{sketchKeys as d}from\"../interactive/keybindings.js\";import{createScreenPointFromEvent as h}from\"../support/screenUtils.js\";let p=class extends o{constructor(t){super(t),this._addVertexOnPointerUp=!1,this._drawTool=null}initialize(){this._addViewHandles(),\"3d\"===this.view.type&&this._addDrawTool()}destroy(){this._removeDrawTool(),this.emit(\"destroy\")}complete(){this._completeDrawing()}_addViewHandles(){this._addViewHandles2DOnly(),this.addHandles([this.view.on(\"key-down\",(t=>{t.key===d.complete&&(this._drawTool?this.complete():(this._abortSnapping(),this._vertexAddHandler(t)))}),a.TOOL)])}_addViewHandles2DOnly(){\"2d\"===this.view.type&&this.addHandles([this.view.on(\"pointer-down\",(t=>{this._shouldHandlePointerEvent(t)&&(this._abortSnapping(),this._activePointerId=t.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=h(t),\"touch\"===t.pointerType&&this._updateCursor())}),a.TOOL),this.view.on(\"pointer-move\",(t=>{this._abortSnapping(),this._cursorScreenPoint=h(t),\"touch\"!==t.pointerType&&this._updateCursor()}),a.TOOL),this.view.on(\"pointer-drag\",(t=>{this._shouldHandlePointerEvent(t)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)}),a.TOOL),this.view.on(\"pointer-up\",(t=>{if(this._shouldHandlePointerEvent(t))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)t.stopPropagation(),this._vertexAddHandler(t);else{const e=\"touch\"===t.pointerType;this._updateCursor(e)}}),a.TOOL),this.view.on(\"drag\",[\"Shift\"],(t=>{t.stopPropagation()}),a.TOOL)])}_addDrawTool(){const t=new r({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:\"point\",mode:\"click\"});this._drawTool=t,this.view.addAndActivateTool(t),this.addHandles([t.on(\"cursor-update\",(e=>{1===e.vertices.length&&this.emit(\"cursor-update\",new s(this.view,e.vertices[0].vertexIndex,t.getVertexCoords()))})),t.on(\"complete\",(e=>{this.emit(\"draw-complete\",new n(t.getVertexCoords())),this._removeDrawTool(),this.removeAllHandles()}))])}_removeDrawTool(){this._drawTool&&(this.view.tools.remove(this._drawTool),this._drawTool=null)}_addVertex(t){const e=this._coordinateHelper.arrayToVector(t);this._isDuplicateOfLastVertex(e)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(e),this.notifyChange(\"vertices\"),this._completeDrawing())}_updateCursor(t=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const e=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);null==e||t||this._pushCursorVertex(e.vertex,(()=>this.emit(\"cursor-update\",new s(this.view,this._activeComponent.vertices.length,this.vertices,null!=this._stagedVertex?new i(this._stagedVertex):null))))}_completeDrawing(){if(this._drawTool)return void this._drawTool.completeCreateOperation();this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),null!=this._snappingManager&&this._snappingManager.doneSnapping();const t=new n(this.vertices);this.emit(\"draw-complete\",t),t.defaultPrevented||this.removeAllHandles()}};p=t([e(\"esri.views.draw.PointDrawAction\")],p);const l=p;export{l as default};\n"],"names":["p","o","constructor","t","super","this","_addVertexOnPointerUp","_drawTool","initialize","_addViewHandles","view","type","_addDrawTool","destroy","_removeDrawTool","emit","complete","_completeDrawing","_addViewHandles2DOnly","addHandles","on","key","d","_abortSnapping","_vertexAddHandler","a","TOOL","_shouldHandlePointerEvent","_activePointerId","pointerId","_cursorScreenPoint","h","pointerType","_updateCursor","stopPropagation","e","r","elevationInfo","hasZ","geometryType","mode","addAndActivateTool","vertices","length","s","vertexIndex","getVertexCoords","n","removeAllHandles","tools","remove","_addVertex","_coordinateHelper","arrayToVector","_isDuplicateOfLastVertex","_lastVertexUnsnapped","_stagedVertexUnsnapped","_popCursorVertex","_editGeometryOperations","appendVertex","notifyChange","arguments","undefined","getCoordsAndPointFromScreenPoint","_pushCursorVertex","vertex","_activeComponent","_stagedVertex","i","completeCreateOperation","_snappingManager","doneSnapping","defaultPrevented","l"],"sourceRoot":""}