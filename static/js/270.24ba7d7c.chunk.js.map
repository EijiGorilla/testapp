{"version":3,"file":"static/js/270.24ba7d7c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/smartMapping/labels/bins.js","../node_modules/@arcgis/core/smartMapping/labels/support/utils.js","../node_modules/@arcgis/core/smartMapping/support/binningUtils.js","../node_modules/@arcgis/core/smartMapping/popup/support/utils.js","../node_modules/@arcgis/core/smartMapping/support/clusterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../intl.js\";import e from\"../../core/Error.js\";import{getAggregateFieldInfo as r,createLabelExpressionForAggregateField as n,createLabelClass as t}from\"./support/utils.js\";import{aggregateCountField as i}from\"../support/binningUtils.js\";import{fetchMessageBundle as a}from\"../../intl/messages.js\";async function s(r){const{layer:n,renderer:t}=r;if(await n.load(),\"binning\"!==n.featureReduction?.type)throw new e(\"bins-label-schemes:invalid-parameters\",\"featureReduction type of the layer is not valid\");const i=t||n.featureReduction.renderer;if(!i)throw new e(\"bins-label-schemes:invalid-parameters\",\"'renderer' is not valid\");return{layer:n,renderer:i}}async function o(e,i,a,s){const o=r(e,i);if(!o)return null;const l=n(i,a,o,s);return{name:`binning-${e}`,labelingInfo:[t(l,!0)],fieldName:e}}function l(e){let r=[];const n=e.featureReduction;return\"fields\"in n&&(r=n.fields.map((e=>e.name))),r}async function c(r){const[{renderer:n,layer:t},c]=await Promise.all([s(r),a(\"esri/smartMapping/t9n/smartMapping\")]),m=c.clusters.predominantNoneValue;if(r.field){const i=await o(r.field,t,n,m);if(!i)throw new e(\"bins-label-schemes:invalid-parameters\",\"'field' is not a valid aggregate field\");return{primaryScheme:i,secondarySchemes:[]}}const f=await o(i,t),d=[],u=l(t).filter((e=>e.toLowerCase()!==i.toLowerCase()));for(const e of u){const r=await o(e,t,n,m);r&&d.push(r)}return{primaryScheme:f,secondarySchemes:d}}export{c as getLabelSchemes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../layers/support/LabelClass.js\";import n from\"../../../layers/support/LabelExpressionInfo.js\";import o from\"../../../renderers/support/UniqueValueInfo.js\";import{getPredominantTypeExpression as t}from\"../../support/clusterUtils.js\";import l from\"../../../symbols/TextSymbol.js\";function r(e,n){const o=n.featureReduction;if(\"fields\"in o)for(const t of o.fields)if(t.name.toLowerCase()===e.toLowerCase())return t;return null}function a(e){return`\\n  $feature[\"${e}\"];\\n  var value = $feature[\"${e}\"];\\n  var num = Count(Text(Round(value)));\\n  var label = When(\\n    num < 4, Text(value, \"#.#\"),\\n    num == 4, Text(value / Pow(10, 3), \"#.0k\"),\\n    num <= 6, Text(value / Pow(10, 3), \"#k\"),\\n    num == 7, Text(value / Pow(10, 6), \"#.0m\"),\\n    num > 7, Text(value / Pow(10, 6), \"#m\"),\\n    Text(value, \"#,###\")\\n  );\\n  return label;\\n  `}function u(e,n,l,r){const u=l.name;if(\"mode\"===l.statisticType){const a=\"getFieldDomain\"in e?e.getFieldDomain(l.onStatisticField):null;let s=null;return\"coded-value\"===a?.type?s=a.codedValues.map((e=>new o({value:e.code,label:e.name}))):\"unique-value\"===n?.type&&null!=n.field&&n.field.toLowerCase()===u.toLowerCase()&&(s=(n.uniqueValueInfos??[]).map((e=>e.clone()))),s?t(s,u,r):`Text($feature[\"${u}\"])`}return a(u)}function s(o,t=!1){const r=new l({haloColor:\"#373837\",haloSize:\"1px\",color:\"#f0f0f0\",font:{family:\"Noto Sans\",size:\"12px\",weight:\"bold\"}});return new e({symbol:r,deconflictionStrategy:\"none\",labelPlacement:t?\"always-horizontal\":\"center-center\",labelExpressionInfo:new n({expression:o})})}export{s as createLabelClass,u as createLabelExpressionForAggregateField,a as createNumericLabelExpression,r as getAggregateFieldInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport r from\"../../core/Error.js\";const e=\"aggregateCount\";function i(e,i){if(!e.view)throw new r(`${i}:missing-parameters`,\"'view' parameter is required for binning\");if(e.sqlExpression)throw new r(`${i}:invalid-parameters`,\"'sqlExpression' parameter is not supported for binning\");if(\"3d\"===e.view.type)throw new r(`${i}:invalid-parameters`,\"3d view is not supported for binning\")}export{e as aggregateCountField,i as verifyBinningParams};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{unique as e}from\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{fetchMessageBundle as t}from\"../../../intl/messages.js\";import{substitute as n}from\"../../../intl/substitute.js\";import{numericTypes as i}from\"../../../layers/support/fieldUtils.js\";import\"../../../popup/content/AttachmentsContent.js\";import\"../../../popup/content/Content.js\";import\"../../../popup/content/CustomContent.js\";import\"../../../popup/content/ExpressionContent.js\";import o from\"../../../popup/content/FieldsContent.js\";import\"../../../popup/content/MediaContent.js\";import\"../../../popup/content/RelationshipContent.js\";import s from\"../../../popup/content/TextContent.js\";import\"../../../popup/content/UtilityNetworkAssociationsContent.js\";import r from\"../../../popup/ExpressionInfo.js\";import p from\"../../../popup/FieldInfo.js\";import a from\"../../../popup/support/FieldInfoFormat.js\";import{getAttributes as l}from\"../../../renderers/support/utils.js\";import{viewScaleRE as u}from\"../../../renderers/visualVariables/support/visualVariableUtils.js\";import{getFeatureReductionFields as m}from\"../../support/adapters/support/utils.js\";let f=0;function d(e=0){}const c=\"expression/\";function b(e){return\"hasVisualVariables\"in e&&e.hasVisualVariables()?e.visualVariables.filter((e=>!u.test(e.valueExpression)&&(!(\"target\"in e)||\"outline\"!==e.target))):[]}function x(e,t){if(!t)return null;const n=m(e);return n?.find((e=>e.name.toLowerCase()===t.toLowerCase()))}function j(e,t,n){let o=null;if(n&&\"featureReduction\"in e){const t=e.featureReduction;t&&\"popupTemplate\"in t&&t.popupTemplate&&(o=t.popupTemplate.fieldInfos)}else\"popupTemplate\"in e&&e.popupTemplate&&(o=e.popupTemplate.fieldInfos);const s=n?x(e,t):e.getField(t);let r=null;if(o&&o.some((e=>!(!e||e.fieldName?.toLowerCase()!==s?.name.toLowerCase())&&(r=e.clone(),!0))),!r){const e=i.includes(s.type),t=\"integer\"===s.type||\"small-integer\"===s.type;r=new p({fieldName:s.name,isEditable:s.editable,visible:!0,format:e?new a({places:t?0:2,digitSeparator:!0}):void 0})}return r.label||(r.label=s.alias),r}function F(e){const{expression:t,title:n,returnType:i}=e;return new r({name:\"expr\"+f++,expression:t,title:n,returnType:i})}function g(e){const t=\"number\"===e.returnType?new a({places:2,digitSeparator:!0}):void 0;return new p({fieldName:`${c}${e.name}`,visible:!0,format:t})}async function y(i){const o=await t(\"esri/smartMapping/t9n/smartMapping\"),{renderer:s,layer:r,normFieldExpressionTemplate:p,isFeatureReduction:a}=i,u=[],m=[],f=l(s,b);for(const e of f)if(\"field\"===e.type)u.push(j(r,e.field,a));else if(\"normalized-field\"===e.type){const t=a?x(r,e.field):r.getField(e.field),i=a?x(r,e.normalizationField):r.getField(e.normalizationField),s=F({type:\"expression\",expression:`\\n      $feature[\"${t.name}\"];\\n      $feature[\"${i.name}\"];\\n      ${\"percentage\"===p?`($feature[\"${t.name}\"] / $feature[\"${i.name}\"]) * 100;`:`$feature[\"${t.name}\"] / $feature[\"${i.name}\"];`}\\n      `,title:n(\"percentage\"===p?o.normFieldLabelAsPercent:o.normFieldLabel,{expression1:t.alias,expression2:i.alias}),returnType:\"number\"});u.push(g(s),j(r,e.field,a),j(r,e.normalizationField,a)),m.push(s)}else if(\"expression\"===e.type){const t=F(e);u.push(g(t)),m.push(t)}return{fieldInfos:e(u,((e,t)=>e.fieldName===t.fieldName)),expressionInfos:e(m,((e,t)=>e.expression===t.expression))}}async function $(e,i,r){const{fieldInfos:p,expressionInfos:a}=i,l=await t(\"esri/smartMapping/t9n/smartMapping\");if(p.length>2)return[new o({fieldInfos:p})];const u=[];for(const t of p){const i=t.fieldName||\"\";let o=t.label;if(!o){const t=r?x(e,i):e.getField(i);if(t)o=t.alias||i;else if(a){const e=i.split(c)[1],t=a[a.findIndex((t=>t.name===e))];t&&(o=t.title||t.name)}}u.push(new s({text:n(l.fieldInfo,{fieldLabel:o,fieldValue:`{${i}}`})}))}return u}function h(e){return!(!(\"normalizationField\"in e)||!e.normalizationField)||\"hasVisualVariables\"in e&&e.hasVisualVariables()&&e.visualVariables.some((e=>!(!(\"normalizationField\"in e)||!e.normalizationField)))}export{c as expressionFieldPrefix,$ as getContentFromFieldInfos,F as getExpressionInfo,y as getFieldAndExpressionInfos,j as getFieldInfo,g as getFieldInfoFromExpressionInfo,b as getPrimaryVisualVariables,h as hasNormalizedField,d as resetSuffixForTests};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{unique as n}from\"../../core/arrayUtils.js\";import{createMD5Hash as e}from\"../../core/MD5.js\";import{isValidNumber as i}from\"../../renderers/visualVariables/support/sizeVariableUtils.js\";import{getPrimaryVisualVariables as t}from\"../popup/support/utils.js\";import{getNormalizationType as o}from\"./utils.js\";const l=\"cluster_count\";function r(n,e){return n.split(`cluster_${e}_`).pop()}function a(n){if(!n)return null;const{field:e,valueExpression:t,normalizationField:l,normalizationType:r,normalizationTotal:a}=n;let u=null;if(t)u=t;else if(e){const n=o({normalizationType:r,normalizationField:l,normalizationTotal:a});if(n){const t=n.toLowerCase();if(u=e.toLowerCase()+\",norm:\"+t,l)u+=\",\"+l.toLowerCase();else if(\"percent-of-total\"===t){let n=a;i(n)&&0!==n||(n=null),u+=\",\"+n}}}return u}function u(n){return e(n)}function s(n,e){const i=a(n);return`${e}_${null!=i?u(i):n.field}`}function p(n,e){return`cluster_${s(n,e)}`}function f(n,e){const i=e.getField(n);return i?.type}function c(n,e){const i=\"field\"in e?e.field:null,t=i?f(i,n):null;return{field:i,fieldType:null!=t?t:null,valueExpression:\"valueExpression\"in e?e.valueExpression:null,valueExpressionTitle:\"valueExpressionTitle\"in e?e.valueExpressionTitle:null,normalizationField:\"normalizationField\"in e?e.normalizationField:null,normalizationType:\"normalizationType\"in e?e.normalizationType:null,normalizationTotal:\"normalizationTotal\"in e?e.normalizationTotal:null}}function m(n,e){const i=\"rotation\"===e.type?e.rotationType:null,t=e.legendOptions?.title,o=e.field,l=o?f(o,n):null;return{field:o,fieldType:null!=l?l:null,rotationType:i,valueExpression:e.valueExpression,valueExpressionTitle:e.valueExpressionTitle||e.valueExpression&&t,normalizationField:\"normalizationField\"in e?e.normalizationField:null,vvType:e.type}}function v(n){return n.map((n=>`{\\n        \"value\": \"${String(n.value)}\",\\n        \"label\": \"${T(String(n.label))}\"\\n      }`))}function T(n){return n?n.replaceAll('\"','\\\\\"'):\"\"}function d(n,e,i){return`\\n  var uvInfos = [${v(n).join(\", \")}];\\n  var predominantType = Text($feature[\"${e}\"]);\\n  var label = \"${T(i)}\";\\n\\n  for (var i = 0; i < Count(uvInfos); i++) {\\n    if (uvInfos[i].value == predominantType) {\\n      label = uvInfos[i].label;\\n      break;\\n    }\\n  }\\n\\n  return label;\\n  `}function y(n,e){const i=[s(n,e)];return\"date\"===n.fieldType&&i.push(n.fieldType.toLowerCase()),n.rotationType&&i.push(n.rotationType.toLowerCase()),i.join(\"_\")}function z(n,e){return{statisticHash:y(n,e),attributeInfo:n,statisticType:e}}function x(e,i,o=!0){const l=[],r=c(e,i);\"class-breaks\"===i.type?l.push(z(r,\"avg\")):\"unique-value\"===i.type&&l.push(z(r,\"type\"));const a=t(i);for(const n of a){const i=m(e,n);l.push(z(i,\"avg\"))}return o?n(l,((n,e)=>n.statisticHash===e.statisticHash)):l}export{l as clusterCountField,p as getClusterField,r as getClusterFieldHash,d as getPredominantTypeExpression,c as getRendererAttributeInfo,s as getStatisticId,z as getStatisticInfo,x as getStatisticInfos,m as getVariableAttributeInfo};\n"],"names":["async","s","r","layer","n","renderer","t","load","featureReduction","type","e","i","o","a","l","name","labelingInfo","fieldName","c","Promise","all","m","clusters","predominantNoneValue","field","primaryScheme","secondarySchemes","f","d","u","fields","map","filter","toLowerCase","push","statisticType","getFieldDomain","onStatisticField","codedValues","value","code","label","uniqueValueInfos","clone","arguments","length","undefined","haloColor","haloSize","color","font","family","size","weight","symbol","deconflictionStrategy","labelPlacement","labelExpressionInfo","expression","view","sqlExpression","b","hasVisualVariables","visualVariables","test","valueExpression","target","x","find","j","popupTemplate","fieldInfos","getField","some","includes","p","isEditable","editable","visible","format","places","digitSeparator","alias","F","title","returnType","g","y","normFieldExpressionTemplate","isFeatureReduction","normalizationField","normFieldLabelAsPercent","normFieldLabel","expression1","expression2","expressionInfos","$","split","findIndex","text","fieldInfo","fieldLabel","fieldValue","h","pop","normalizationType","normalizationTotal","rotationType","legendOptions","fieldType","valueExpressionTitle","vvType","T","replaceAll","String","v","join","z","statisticHash","attributeInfo"],"sourceRoot":""}