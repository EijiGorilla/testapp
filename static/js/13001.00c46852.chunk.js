"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[6498,13001,35382,38574,53680,75166,85685],{770:(e,a,n)=>{n.d(a,{bG:()=>t,Ty:()=>o,YJ:()=>u,Fq:()=>c,vt:()=>s});var i=n(53084),r=n(42633);class l{constructor(e){const{name:a,label:n,description:i,schemes:l}=e;this.name=a,this.label=n,this.description=i,this.schemes=l;const t=e.basemapGroups||r.Np;let s=[];Object.keys(t).forEach((e=>{s=s.concat(t[e])})),this.supportedBasemaps=s,this.basemapGroups=t}isBasemapSupported(e){const a=(0,r.T1)(e,this.supportedBasemaps);return!(!a||!this.supportedBasemaps.includes(a))}getRawSchemes(e){const{basemapId:a,basemapTheme:n}=function(e,a,n){let i=null,l=null;if(a&&(i=(0,r.T1)(a,e,!1),i)){const e=(0,r.BV)(i);null!=e&&(l=e)}return!i&&n&&(i="dark"===n?"dark-gray":"gray",l=n),i||l||(i="gray",l="light"),{basemapId:i,basemapTheme:l}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let l=n;if(a){const e=(0,r.BV)(a,this.basemapGroups);null!=e&&(l=e)}let t=e.geometryType;"multipoint"===t?t="point":"mesh"===t&&(t="polygon");const s=this.schemes[t]||this.schemes.default;return{schemesInfo:(0,i.clone)(s[l]),basemapId:a,basemapTheme:n}}}function t(e){const a=e.themeDictionary,n=new Map;for(const i in a){const e=a[i];n.set(i,new l(e))}return n}function s(e,a){const n=[];return e.forEach((e=>{e.isBasemapSupported(a)&&n.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),n}function o(e,a){if(!e)return;if(!a)return;let n=null;const i=[a.primaryScheme,...a.secondarySchemes];for(const r of i)if(r.name?.toLowerCase()===e.toLowerCase()){n=r;break}return n}function u(e,a,n){if(!e&&!a)return[];if(!n)return[];const i=!e?.length,r=!a?.length,l=[n.primaryScheme,...n.secondarySchemes],t=[];for(const s of l){const n=!!i||e.some((e=>s.tags.includes(e))),l=!r&&a.some((e=>s.tags.includes(e)));n&&!l&&t.push(s)}return t}function c(e){const a=e.theme;if(a)return a.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},13001:(e,a,n)=>{n.r(a),n.d(a,{createRenderer:()=>F,regenerateRenderer:()=>V,updateRenderer:()=>M});var i=n(59784),r=n(50076),l=n(53084),t=n(63860),s=n(9922),o=n(76841),u=n(44884),c=n(33766),p=n(31650),d=n(53151),m=n(53680),f=n(51006),h=n(90494),y=n(11563),g=n(38574),w=n(94439);const v=new Set(["equal-interval","natural-breaks","quantile"]),b=new Set(["HH","HL","LH","LL"]),z={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]},k={2:["L","H"],3:["L","M","H"],4:["L","M1","M2","H"]},S=e=>({minValue:e.minValue,maxValue:e.maxValue});async function C(e){if(!(e?.layer&&e.view&&e.field1&&e.field2))throw new r.default("relationship-renderer:missing-parameters","'layer', 'view', 'field1' and 'field2' parameters are required");e.forBinning&&(0,h.p)(e,"relationship-renderer");const a={...e,layer:e.layer,field1:e.field1,field2:e.field2};if(a.symbolType??="2d",a.defaultSymbolEnabled??=!0,a.classificationMethod??="quantile",a.numClasses??=3,a.focus??=null,!v.has(a.classificationMethod))throw new r.default("relationship-renderer:invalid-parameters",`classification method ${a.classificationMethod} is not supported`);if(a.numClasses<2||a.numClasses>4)throw new r.default("relationship-renderer:invalid-parameters","'numClasses' must be 2, 3 or 4");if(e.focus&&!b.has(e.focus))throw new r.default("relationship-renderer:invalid-parameters","'focus' must be 'HH', 'HL', 'LH', 'LL' or null");const n=e.forBinning?y.Mi:y.J4,i=(0,y.Jg)(a.layer,n,e.forBinning);if(!i)throw new r.default("relationship-renderer:invalid-parameters","'layer' must be one of these types: "+(0,y.Ho)(n).join(", "));const l=null!=a.signal?{signal:a.signal}:null;await i.load(l);const t=i.geometryType,s=a.symbolType.includes("3d");if(a.outlineOptimizationEnabled="polygon"===t&&a.outlineOptimizationEnabled,a.sizeOptimizationEnabled=("point"===t||"multipoint"===t||"polyline"===t)&&a.sizeOptimizationEnabled,"mesh"===t)a.symbolType="3d-volumetric",a.colorMixMode=a.colorMixMode||"replace",a.edgesType=a.edgesType||"none";else{if("3d-volumetric-uniform"===a.symbolType&&"point"!==t)throw new r.default("relationship-renderer:not-supported","3d-volumetric-uniform symbols are supported for point layers only");if(s&&"polygon"===t)throw new r.default("relationship-renderer:not-supported","3d symbols are not supported for polygon layers");if(a.symbolType.includes("3d-volumetric")&&(!a.view||"3d"!==a.view.type))throw new r.default("relationship-renderer:invalid-parameters","'view' parameter should be an instance of SceneView when 'symbolType' parameter is '3d-volumetric' or '3d-volumetric-uniform'")}const{field1:o,field2:u}=a,c=[o.field,u.field];o.normalizationField&&c.push(o.normalizationField),u.normalizationField&&c.push(u.normalizationField);const p=(0,f.MH)(i,c,"relationship-renderer:invalid-parameters");if(p)throw p;return{...a,layer:i}}function B(e,a){const n=(0,l.clone)(z[e]);return(0,g.flatten2DArray)(n,a)}function x(e,a,n,i){const{field:r,normalizationField:l}=e,{field:t,normalizationField:s}=a,o=n.map((e=>[e.minValue,e.maxValue])),u=i.map((e=>[e.minValue,e.maxValue])),c=o.length,p=k[c];return`\n  var field1 = $feature['${r}'];\n  var field2 = $feature['${t}'];\n  var hasNormField1 = ${l?"true":"false"};\n  var hasNormField2 = ${s?"true":"false"};\n  var normField1 = ${l?`$feature['${l}']`:"null"};\n  var normField2 = ${s?`$feature['${s}']`:"null"};\n\n  if (\n    IsEmpty(field1) ||\n    IsEmpty(field2) ||\n    (hasNormField1 && (IsEmpty(normField1) || normField1 == 0)) ||\n    (hasNormField2 && (IsEmpty(normField2) || normField2 == 0))\n  ) {\n    return null;\n  }\n\n  var value1 = IIf(hasNormField1, (field1 / normField1), field1);\n  var value2 = IIf(hasNormField2, (field2 / normField2), field2);\n\n  var breaks1 = ${JSON.stringify(o)};\n  var breaks2 = ${JSON.stringify(u)};\n  var classCodes = ${JSON.stringify(p)};\n\n  function getClassCode(value, breaks) {\n    var code = null;\n\n    for (var i in breaks) {\n      var info = breaks[i];\n      if (value >= info[0] && value <= info[1]) {\n        code = classCodes[i];\n        break;\n      }\n    }\n\n    return code;\n  }\n\n  var code1 = getClassCode(value1, breaks1);\n  var code2 = getClassCode(value2, breaks2);\n\n  var classValue = IIf(IsEmpty(code1) || IsEmpty(code2), null, code1 + code2);\n  return classValue;\n  `}async function T(e,a,n){const i=await(0,t.ud)("esri/smartMapping/t9n/smartMapping"),{basemap:l,classificationMethod:c,field1:p,field2:m,focus:h,numClasses:y,signal:w}=e,v=e.layer,b=a.classBreakInfos,z=n.classBreakInfos;if(y!==b.length||b.length!==z.length)throw new r.default("relationship-renderer:error","incompatible class breaks");const k=function(e,a){return B(e,a).map((e=>({value:e,count:0})))}(y,h),S=x(e.field1,e.field2,b,z),C=(await async function(e){let a=e.relationshipScheme,n=null,i=null;const r=await(0,f.Ib)(e.basemap,e.view);if(n=null!=r.basemapId?r.basemapId:null,i=null!=r.basemapTheme?r.basemapTheme:null,a)return{scheme:(0,g.cloneScheme)(a),basemapId:n,basemapTheme:i};const l=(0,g.getSchemes)({basemapTheme:i,geometryType:e.geometryType,theme:e.theme,worldScale:e.worldScale,view:e.view});return l&&(a=l.primaryScheme,n=l.basemapId,i=l.basemapTheme),{scheme:a,basemapId:n,basemapTheme:i}}({basemap:l,geometryType:v.geometryType,theme:"default",relationshipScheme:e.relationshipScheme,worldScale:!!e.symbolType?.includes("3d-volumetric"),view:e.view})).scheme,T=await(0,d.createRenderer)({layer:v,basemap:l,valueExpression:S,valueExpressionTitle:i.relationship.legendTitle,numTypes:-1,sortEnabled:!1,defaultSymbolEnabled:e.defaultSymbolEnabled,typeScheme:{colors:(0,g.getColors)(C,y,h),...C},statistics:{uniqueValueInfos:k},legendOptions:e.legendOptions,outlineOptimizationEnabled:e.outlineOptimizationEnabled,sizeOptimizationEnabled:e.sizeOptimizationEnabled,symbolType:e.symbolType,colorMixMode:e.colorMixMode,edgesType:e.edgesType,filter:e.filter,view:e.view,signal:w}),I=T.renderer,M=I.uniqueValueInfos,F=i.relationship;for(const r of M??[])r.label=F[r.value];const V=new s.default({type:"relationship",classificationMethod:c,numClasses:y,focus:h,field1:new u.K({field:p.field,normalizationField:p.normalizationField,label:p.label,classBreakInfos:b.map((e=>{let{minValue:a,maxValue:n}=e;return new o.n({minValue:a,maxValue:n})}))}),field2:new u.K({field:m.field,normalizationField:m.normalizationField,label:m.label,classBreakInfos:z.map((e=>{let{minValue:a,maxValue:n}=e;return new o.n({minValue:a,maxValue:n})}))})});return I.authoringInfo=V,{renderer:I,classBreaks:{field1:a,field2:n},uniqueValueInfos:T.uniqueValueInfos,relationshipScheme:C,basemapId:T.basemapId,basemapTheme:T.basemapTheme}}async function I(e){const{layer:a,classificationMethod:n,field1:i,field2:l,numClasses:t,filter:s,view:o,signal:u}=e,c={layer:a,classificationMethod:n,field:i.field,normalizationField:i.normalizationField,normalizationType:i.normalizationField?"field":null,minValue:i.minValue,maxValue:i.maxValue,analyzeData:!(null!=i.minValue&&null!=i.maxValue),numClasses:t,filter:s,view:o,signal:u},p={layer:a,classificationMethod:n,field:l.field,normalizationField:l.normalizationField,normalizationType:l.normalizationField?"field":null,minValue:l.minValue,maxValue:l.maxValue,analyzeData:!(null!=l.minValue&&null!=l.maxValue),numClasses:t,filter:s,view:o,signal:u},[d,m]=await Promise.all([(0,f.Pv)(c),(0,f.Pv)(p)]);if(!d||!m)throw new r.default("relationship-renderer:error","error when calculating class breaks");return{field1:d.result,field2:m.result}}async function M(e){const a=await async function(e){if(!e?.renderer||!e.numClasses)throw new r.default("update-relationship-renderer:missing-parameters","'renderer' and 'numClasses' parameters are required");const{field1:a,field2:n,renderer:i,numClasses:l,colors:t}=e,s=l**2;if((a||n)&&!(a&&n&&a.field&&n.field))throw new r.default("update-relationship-renderer:missing-parameters","'field1' and 'field2' parameters are required");if(a&&!a.classBreakInfos||n&&!n.classBreakInfos)throw new r.default("update-relationship-renderer:missing-parameters","'field1.classBreakInfos' and 'field2.classBreakInfos' are required");if(!i.authoringInfo)throw new r.default("update-relationship-renderer:missing-parameters","'renderer.authoringInfo' is required");if(i.uniqueValueInfos?.length!==s)throw new r.default("update-relationship-renderer:invalid-parameters",`Renderer must have ${s} unique value infos to support ${l} classes`);if(t&&t.length!==s)throw new r.default("update-relationship-renderer:invalid-parameters",`The scheme must have ${s} colors`);return e}(e),{field1:n,field2:l,renderer:t,numClasses:c,focus:p,colors:d}=a,m=t.clone();m.valueExpression=x(n,l,n.classBreakInfos,l.classBreakInfos);const f=m.uniqueValueInfos??[];if(function(e,a,n){const i=B(a,n);e.sort(((e,a)=>{const n=i.indexOf(e.value),r=i.indexOf(a.value);let l=0;return n<r?l=-1:n>r&&(l=1),l}))}(f,c,p),d){const e=(0,i.Iy)(d,d.length);f.forEach(((a,n)=>(0,w.dt)(a.symbol,e[n])))}return function(e,a){e.authoringInfo??=new s.default;const n=e.authoringInfo;n.numClasses=a.numClasses,n.focus=a.focus||null,n.focus||delete n.focus;const{field1:i,field2:r}=a;n.field1=new u.K({field:i.field,normalizationField:i.normalizationField,label:i.label,classBreakInfos:i.classBreakInfos.map((e=>new o.n(S(e))))}),n.field2=new u.K({field:r.field,normalizationField:r.normalizationField,label:r.label,classBreakInfos:r.classBreakInfos.map((e=>new o.n(S(e))))}),e.authoringInfo=n}(m,a),m}async function F(e){const a=await C(e),{field1:n,field2:i}=await I(a);return T(a,n,i)}async function V(e){const{creatorParameters:a,view:n,signal:i,filter:l,renderer:t}=await async function(e){const a="regenerate-relationship-renderer";await(0,m.AC)(e,a);const n=await(0,m.mE)(e),i=(0,m.UJ)(n);if(!i||!["relationship","relationship-size"].includes(i))throw new r.default(`${a}:invalid-parameters`,"Renderer is invalid");const{layer:l,forBinning:t,filter:s,view:o,signal:u}=e,c=(0,m.DW)(n),p=(0,m.Rv)(n),{field1:d,field2:f,classificationMethod:h,focus:y,numClasses:g}=n.authoringInfo,w={field:d.field,normalizationField:d.normalizationField,label:d.label},v={field:f.field,normalizationField:f.normalizationField,label:f.label},b=await C({layer:l,field1:w,field2:v,classificationMethod:h,numClasses:g,focus:y,outlineOptimizationEnabled:c,sizeOptimizationEnabled:p,forBinning:t,filter:s,view:o,signal:u});return{...e,creatorParameters:b,renderer:n}}(e),{layer:s,field1:o,field2:u,numClasses:d,focus:h,outlineOptimizationEnabled:y,sizeOptimizationEnabled:g}=a,{field1:w,field2:v}=await I(a),[b,z,k]=await Promise.all([M({field1:{...o,classBreakInfos:w.classBreakInfos},field2:{...u,classBreakInfos:v.classBreakInfos},renderer:t,numClasses:d,focus:h}),y?(0,c.A)({layer:s,view:n,signal:i,filter:l}).catch(f.ou):null,g?(0,p.default)({layer:s,view:n,signal:i,filter:l}).catch(f.ou):null]);return(0,m.ke)(b,z?.visualVariables,m._i),(0,m.ke)(b,k?.minSize,m.kc),{renderer:b}}},29857:(e,a,n)=>{n.r(a),n.d(a,{default:()=>w});var i=n(50076),r=n(68002),l=n(16525),t=n(90494),s=n(11563);const o=500,u=1e8,c=1280,p=12,d=30,m=15;async function f(e){const{view:a,sampleSize:n}=e;if(!e||!e.layer)throw new i.default("scale-range:missing-parameters","'layer' parameter is required");if(e.snapToLOD&&!a)throw new i.default("scale-range:missing-parameters","'view' parameter is required when 'snapToLOD' is true");e.forBinning&&(0,t.p)(e,"scale-range");const{layer:r,...l}=e,u=e.forBinning?s.Mi:s.J4,c=(0,s.Jg)(r,u,e.forBinning);if(!c)throw new i.default("scale-range:invalid-parameters","'layer' must be one of these types: "+(0,s.Ho)(u).join(", "));const p={layerAdapter:c,...l};p.sampleSize=n||o,await(a?.when());const d=null!=p.signal?{signal:p.signal}:null;return await c.load(d),p}function h(e,a,n){const i=function(e,a){const n=p,i=c/4,r=d,l=c/4,t=m,s=c/2;let o=0,u=0,f=0,h=0;switch(e){case"point":case"multipoint":{const e=a;o=e.avgMinDistance??0,u=n,f=e.minDistance??0,h=i;break}case"polyline":{const e=a;o=e.avgLength??0,u=r,f=e.minLength??0,h=l;break}case"polygon":{const e=a;o=e.avgSize??0,u=t,f=e.minSize??0,h=s;break}}return{resolutionForMinScale:o>0?o/u:null,resolutionForMaxScale:f>0?f/h:null}}(e.geometryType,a),l=n?.spatialReference||e.layer.spatialReference;return{minScale:(0,r.gB)(i.resolutionForMinScale??0,l),maxScale:(0,r.gB)(i.resolutionForMaxScale??0,l)}}function y(e,a){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.constraints&&"effectiveLODs"in e.constraints){const i=e.constraints.effectiveLODs,r=n?i:i.slice().reverse();let l=null;for(const e of r)if(!(n?e.scale>a:e.scale<a)){l=e;break}return l}}function g(e,a,n,r){const{view:l,snapToLOD:t,layerAdapter:s}=e;if(t&&l){const e=y(l,a),i=y(l,n,!1);a=e?e.scale:a,n=i?i.scale:n}if(a<n)throw new i.default("scale-range:invalid","calculated minScale is less than maxScale.");return n>a/2&&(n=Math.floor(n/2)),a>u&&(a=0),"polygon"!==s.geometryType&&(n=0),{minScale:Math.ceil(a),maxScale:Math.floor(n),spatialStatistics:r}}async function w(e){const a=await f(e),{view:n,sampleSize:r,layerAdapter:t,signal:s,filter:o}=a,u=await t.getSampleFeatures({view:n,sampleSize:r,returnGeometry:!0,filter:o,signal:s},"json");if(!u?.length)throw new i.default("scale-range:insufficient-info","No features are available to calculate statistics");const c=await(0,l.A)({features:u,geometryType:t.geometryType}),{minScale:p,maxScale:d}=h(t,c,n);return g(a,p,d,c)}},31650:(e,a,n)=>{n.r(a),n.d(a,{default:()=>k});n(81806);var i=n(50076),r=n(76931),l=n(68002),t=n(43996),s=n(63040),o=n(29857),u=n(90494),c=n(11563);const p=1e8,d=1128.497176,m=591657527.591555,f=[10,8,4,2],h=[100,100,60,30],y=[2,1,.75,.5],g=[32,18,12,6],w=[{level:0,resolution:156543.03392800014,scale:591657527.591555},{level:1,resolution:78271.51696399994,scale:295828763.795777},{level:2,resolution:39135.75848200009,scale:147914381.897889},{level:3,resolution:19567.87924099992,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}];function v(e,a){const{view:n}=e;if(!n)throw new i.default("scale-range:invalid-parameters","'view' is required");const r=a.minScale||p,l=n.constraints&&"effectiveLODs"in n.constraints&&n.constraints.effectiveLODs||w,t=[];for(let i=0;i<l.length;i++){if(l[i].scale>r)continue;const e=Number(i),a=[e-3,e,e+3,e+6];for(const n of a)n>-1&&n<l.length&&t.push(l[n].scale);break}return t.sort(((e,a)=>e-a))}function b(e,a){const{view:n,layerAdapter:r}=e;if(!n)throw new i.default("scale-range:invalid-parameters","'view' is required");const t=r.fullExtent,s=r.minScale||d,o=r.maxScale||m,u=a.minScale||0,c=a.maxScale||0;let p=null!=t?(0,l.X_)(n,t):0;return p=p<s&&p>o?p:0,{scales:[s,o,u,c,p].map(Math.round).sort(((e,a)=>e-a)).filter(((e,a,n)=>!!e&&n.indexOf(e)===a)).filter(((e,a,n)=>!a||Math.abs(e-n[a-1])>5)),fullExtentScale:p}}function z(e,a){const{spatialStatistics:n,minScale:l,maxScale:o}=a;if(!("avgSize"in n)||!n.avgSize)throw new i.default("size-range:insufficient-info","average polygon size is invalid");const u=n.avgSize,{view:c}=e;if(!c)throw new i.default("scale-range:invalid-parameters","'view' is required");const{resolution:p,scale:d}=c,m=p/d,{scales:f,fullExtentScale:h}=b(e,{minScale:l,maxScale:o}),y=[],g=[];return f.forEach(((e,a)=>{const{min:n,max:i}=function(e,a){const n=Math.ceil(e/a);let i=Math.ceil(n/4);i<4?i=4:i>16&&(i=16);const r=5*i;return{min:i,max:r<50?50:r}}(u,m*e),l=f.indexOf(h),t=l>-1&&a>l?2:1;y.push(new s.default({value:e,size:(0,r.PN)(n/t)})),g.push(new s.default({value:e,size:(0,r.PN)(i/t)}))})),{minSize:new t.default({valueExpression:"$view.scale",stops:y}),maxSize:new t.default({valueExpression:"$view.scale",stops:g})}}async function k(e){const a=await async function(e){const{view:a}=e;if(!(e&&a&&e.layer))throw new i.default("size-range:missing-parameters","'view' and 'layer' parameters are required");e.forBinning&&(0,u.p)(e,"size-range");const{layer:n,...r}=e,l=e.forBinning?c.Mi:c.J4,t=(0,c.Jg)(n,l,e.forBinning);if(!t)throw new i.default("size-range:invalid-parameters","'layer' must be one of these types: "+(0,c.Ho)(l).join(", "));const s={layerAdapter:t,...r,view:a};await a.when();const o=null!=s.signal?{signal:s.signal}:null;await t.load(o);const p=t.geometryType;if("point"!==p&&"multipoint"!==p&&"polyline"!==p&&"polygon"!==p)throw new i.default("size-range:not-supported",`sizeRange is not supported for geometryType: ${p}`);return s}(e),{view:n,layerAdapter:l,signal:p,filter:d}=a,m=await(0,o.default)({layer:l,view:n,signal:p,filter:d});switch(l.geometryType){case"point":case"multipoint":return function(e,a){const{minScale:n,maxScale:l}=a,o=v(e,{minScale:n,maxScale:l});if(!o.length)throw new i.default("scale-range:insufficient-info","not enough scale values");return{minSize:new t.default({valueExpression:"$view.scale",stops:o.map(((e,a)=>new s.default({value:e,size:(0,r.PN)(f[a])})))}),maxSize:new t.default({valueExpression:"$view.scale",stops:o.map(((e,a)=>new s.default({value:e,size:(0,r.PN)(h[a])})))})}}(a,m);case"polyline":return function(e,a){const{minScale:n,maxScale:l}=a,o=v(e,{minScale:n,maxScale:l});if(!o.length)throw new i.default("scale-range:insufficient-info","not enough scale values");return{minSize:new t.default({valueExpression:"$view.scale",stops:o.map(((e,a)=>new s.default({value:e,size:(0,r.PN)(y[a])})))}),maxSize:new t.default({valueExpression:"$view.scale",stops:o.map(((e,a)=>new s.default({value:e,size:(0,r.PN)(g[a])})))})}}(a,m);case"polygon":return z(a,m);case"mesh":case"multipatch":return null}return null}},38574:(e,a,n)=>{n.r(a),n.d(a,{cloneScheme:()=>g,flatten2DArray:()=>w,flipColors:()=>b,getColors:()=>v,getMatchingSchemes:()=>z,getSchemeByName:()=>h,getSchemes:()=>f,getSchemesByTag:()=>y,getThemes:()=>m});var i=n(69539),r=n(18690),l=n(53084),t=n(89132),s=n(770),o=n(80791);const u={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},c={lightBasemaps:{primary:"relationship-blue-orange-brown",secondary:["relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green","relationship-blue-red-pink","relationship-blue-green-brightgreen","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal"]},darkBasemaps:{primary:"relationship-blue-green-brightgreen",secondary:["relationship-blue-red-pink","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal","relationship-blue-orange-brown","relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green"]}},p="#aaaaaa",d=(0,s.bG)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features based on relationship between two attributes.",schemes:{point:{light:{common:{noDataColor:p,outline:u.light,size:"8px"},primary:c.lightBasemaps.primary,secondary:c.lightBasemaps.secondary},dark:{common:{noDataColor:p,outline:u.darker,size:"8px"},primary:c.darkBasemaps.primary,secondary:c.darkBasemaps.secondary}},polyline:{light:{common:{noDataColor:p,width:"2px"},primary:c.lightBasemaps.primary,secondary:c.lightBasemaps.secondary},dark:{common:{noDataColor:p,width:"2px"},primary:c.darkBasemaps.primary,secondary:c.darkBasemaps.secondary}},polygon:{light:{common:{noDataColor:p,outline:u.light,fillOpacity:.8},primary:c.lightBasemaps.primary,secondary:c.lightBasemaps.secondary},dark:{common:{noDataColor:p,outline:u.dark,fillOpacity:.8},primary:c.darkBasemaps.primary,secondary:c.darkBasemaps.secondary}}}}}});function m(e){return(0,s.vt)(d,e)}function f(e){const a=(0,s.Fq)({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:d.get("default")});if(!a)return;const{schemesInfo:n,basemapId:i,basemapTheme:l}=a,t={...e,basemap:i};return{primaryScheme:B(t,n.primary,n.common),secondarySchemes:n.secondary.map((e=>B(t,e,n.common))).filter(r.Ru),basemapId:i,basemapTheme:l}}function h(e){return(0,s.Ty)(e.name,f(e))}function y(e){return(0,s.YJ)(e.includedTags,e.excludedTags,f(e))}function g(e){if(!e)return;const a={...e};return a.colorsForClassBreaks=a.colorsForClassBreaks.map((e=>({numClasses:e.numClasses,colors:e.colors.map((e=>e.map((e=>new i.default(e)))))}))),a.tags=[...a.tags],a.noDataColor&&(a.noDataColor=new i.default(a.noDataColor)),"outline"in a&&a.outline&&(a.outline={color:a.outline.color&&new i.default(a.outline.color),width:a.outline.width}),a}function w(e,a){e=(0,l.clone)(e);let n=[];const i=(a||"HH").split(""),r=i[0],t=i[1];"L"===r&&e.reverse();const s="H"===t;return e.forEach((e=>{s&&e.reverse(),n=n.concat(e)})),n}function v(e,a,n){let r;return e.colorsForClassBreaks.some((e=>(e.numClasses===a&&(r=e.colors),!!r))),r=r?.map((e=>e.map((e=>new i.default(e))))),r?w(r,n):null}function b(e,a){const n=a?e:g(e);return n.colorsForClassBreaks.forEach((e=>{const a=e.colors.reverse(),n=[];for(let i=0;i<e.numClasses;i++){const e=[];a.forEach((a=>{e.push(a[i])})),n.push(e)}e.colors=n})),n}function z(e){const a=e.theme||"default",n=e.geometryType,i=e.colors,r=e.numClasses,l=d.get(a);if(!l)return[];const t=l.supportedBasemaps,s=[];return t.forEach((e=>{const l=f({theme:a,basemap:e,geometryType:n});if(l){let e=C(l.primaryScheme,i,r);e&&s.push(e),l.secondarySchemes.forEach((a=>{e=C(a,i,r),e&&s.push(e)}))}})),s}function k(e,a,n,i){let r;const l=v(e,n,i);return l&&1===(0,o._t)(a,l)&&(r=e),r}function S(e,a,n,i){let r,l=1;do{r=k(e,a,n,i),r||(e=b(e),l++)}while(!r&&l<=4);return r}function C(e,a,n){return S(e,a,n,"HH")||S(e,a,n,"HL")||S(e,a,n,"LH")||S(e,a,n,"LL")}function B(e,a,n){const r="mesh"!==e.geometryType&&e.worldScale?e.view:null,l=t.A[a],s=e.theme||"default";if(!l)return;const u=s+"/"+e.basemap+"/"+a,c=[];for(const i in l)if("stops"!==i&&"name"!==i&&"tags"!==i){const e=+i,a=l[i];c.push({numClasses:e,colors:a})}switch(e.geometryType){case"point":case"multipoint":{const e=n;return function(e,a){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:x(e.colorsForClassBreaks),noDataColor:new i.default(e.noDataColor),outline:{color:new i.default(e.outline.color),width:e.outline.width},size:a?(0,o._J)(e.size,a):e.size,opacity:e.opacity}}({id:u,name:l.name,tags:l.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:1,outline:e.outline,size:e.size},r)}case"polyline":{const e=n;return function(e,a){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:x(e.colorsForClassBreaks),noDataColor:new i.default(e.noDataColor),opacity:e.opacity,width:a?(0,o._J)(e.width,a):e.width}}({id:u,name:l.name,tags:l.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:1,width:e.width},r)}case"polygon":{const e=n;return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:x(e.colorsForClassBreaks),noDataColor:new i.default(e.noDataColor),outline:{color:new i.default(e.outline.color),width:e.outline.width},opacity:e.opacity}}({id:u,name:l.name,tags:l.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:e.fillOpacity,outline:e.outline})}case"mesh":{const e=n;return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colorsForClassBreaks:x(e.colorsForClassBreaks),noDataColor:new i.default(e.noDataColor),opacity:e.opacity}}({id:u,name:l.name,tags:l.tags,colorsForClassBreaks:c,noDataColor:e.noDataColor,opacity:e.fillOpacity})}}}function x(e){return e.map((e=>({numClasses:e.numClasses,colors:e.colors.map((e=>e.map((e=>new i.default(e)))))})))}},53680:(e,a,n)=>{n.d(a,{AC:()=>r,DW:()=>o,Hj:()=>z,Ih:()=>h,Jy:()=>p,OW:()=>g,Rv:()=>u,UJ:()=>s,_i:()=>c,d8:()=>m,fs:()=>d,kc:()=>f,ke:()=>b,mE:()=>l,wx:()=>t});var i=n(50076);async function r(e,a){const{layer:n,view:r,forBinning:l,filter:t}=e;if(!n||!r)throw new i.default(`${a}:missing-parameters`,"'layer' and 'view' parameters are required");await n.load();const s="featureReduction"in n?n.featureReduction:null;if(l){if("binning"!==s?.type)throw new i.default(`${a}:invalid-parameters`,"'layer' must have 'featureReduction' property defined with 'binning' type when 'forBinning' parameter is true");if(t)throw new i.default(`${a}:invalid-parameters`,"'filter' parameter is not supported when 'forBinning' parameter is true")}return e}async function l(e){const{layer:a,forBinning:n,renderer:r}=e;await a.load();const l="featureReduction"in a?a.featureReduction:null,t=r?.clone()??(n&&"binning"===l?.type?l?.renderer?.clone():"renderer"in a?a.renderer?.clone():null);if(!t)throw new i.default("get-renderer-to-update:invalid-parameters","renderer not available");return t}function t(e,a,n){const i=e?.authoringInfo?.visualVariables;return i?.find((e=>"reference-size"===n?e.type===a&&"reference-size"===e.theme:e.type===a))}function s(e){if(!e)return null;const a=e.type,n="visualVariables"in e?e.visualVariables:null,i=n?.find(h),r=n?.find(g),l=e.authoringInfo,s=t(e,"color"),o=t(e,"size"),u=t(e,"size","reference-size");if("class-breaks"===a){if("univariate-color-size"===l?.type)return"univariate-color-size";if(i)return r?o?.units?"color-size-age":s?.units?"color-age-size":"color-size":s?.units?"color-age":u?"color-size":"color-continuous";if(r)return o?.units?"size-age":"size-continuous";if(e.classBreakInfos.length>1)return"class-breaks-color"===l?.type?"color-class-breaks":"class-breaks-size"===l?.type?"size-class-breaks":null;if(u)return"size-continuous"}return"unique-value"===a?e.valueExpression?"predominance"===l?.type?"predominance":"relationship"===l?.type?r||u?"relationship-size":"relationship":r||u?"type-size":"type":r?o?.units?"type-size-age":"type-size":u?"type-size":"type":"pie-chart"===a?"pie-chart":"dot-density"===a?"dot-density":null}function o(e){return!!e.visualVariables?.some(w)}function u(e){return!!e.visualVariables?.some(v)}function c(e){return e?.findIndex(w)??-1}function p(e){return e?.findIndex(g)??-1}function d(e){return e?.findIndex(h)??-1}function m(e){return e?.findIndex(y)??-1}function f(e){return e?.findIndex(v)??-1}function h(e){return"color"===e.type}function y(e){return"opacity"===e.type}function g(e){return"size"===e.type&&"outline"!==e.target&&"$view.scale"!==e.valueExpression}function w(e){return"size"===e.type&&"outline"===e.target}function v(e){return"size"===e.type&&"$view.scale"===e.valueExpression&&"outline"!==e.target&&Array.isArray(e.stops)}function b(e,a,n){const i=e.visualVariables,r=n(i);if(!a||Array.isArray(a)&&!a.length)return;Array.isArray(a)||(a=[a]);const l=a.map((e=>e.clone()));i?r>-1?i.splice(r,1,...l):i.push(...l):e.visualVariables=l}function z(e,a,n){const i=a?.visualVariables.find((e=>e.type===n)),r=t(e,n);r&&i&&(r.minSliderValue=i.minSliderValue,r.maxSliderValue=i.maxSliderValue,"size"===n&&"reference-size"===r.theme&&(r.sizeStops=i.sizeStops?.map((e=>e.clone())),r.referenceSizeScale=i.referenceSizeScale))}},80791:(e,a,n)=>{n.d(a,{_J:()=>u,_t:()=>o});var i=n(76931),r=n(42633);const l=r.Np.light,t=r.Np.dark;function s(e,a){return e.r===a.r&&e.g===a.g&&e.b===a.b}function o(e,a){let n=0;if(e.length===a.length){let i=e.every(((e,n)=>s(e,a[n])));i?n=1:(i=e.slice().reverse().every(((e,n)=>s(e,a[n]))),i&&(n=-1))}return n}function u(e,a){return Math.ceil(function(e){const a=e.width,n=e.height;let r=e.pixelSizeAt(e.toMap((0,i.tc)(.5*a,.5*n),{exclude:[]}));if(r<=0&&(r=e.pixelSizeAt(e.toMap((0,i.tc)(.5*a,.95*n),{exclude:[]})),r<=0&&"camera"in e)){const a=e.camera.position.clone();a.z=0,r=2*e.pixelSizeAt(a)}return r}(a)*(0,i.Lz)((0,i.cr)(e)))}}}]);
//# sourceMappingURL=13001.00c46852.chunk.js.map