"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[24387,52883,70058],{46768:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var o,i=r(35143),n=r(19276),s=r(42553),l=r(46053),a=r(40565),p=(r(81806),r(47249),r(85842)),u=r(17707),y=r(76797),d=r(13312),f=r(19902),m=r(31608),c=r(59187);let h=o=class extends s.A{static from(e){return(0,a.PZ)(o,e)}constructor(e){super(e),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.historicMoment=null,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}};(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],h.prototype,"dpi",void 0),(0,i._)([(0,l.MZ)()],h.prototype,"floors",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],h.prototype,"gdbVersion",void 0),(0,i._)([(0,l.MZ)({types:m.yR,json:{read:f.fromJSON,write:!0}})],h.prototype,"geometry",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],h.prototype,"geometryPrecision",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],h.prototype,"height",void 0),(0,i._)([(0,l.MZ)({type:Date})],h.prototype,"historicMoment",void 0),(0,i._)([(0,u.K)("historicMoment")],h.prototype,"writeHistoricMoment",null),(0,i._)([(0,l.MZ)({type:[Number],json:{write:!0}})],h.prototype,"layerIds",void 0),(0,i._)([(0,l.MZ)({type:["top","visible","all","popup"],json:{write:!0}})],h.prototype,"layerOption",void 0),(0,i._)([(0,l.MZ)({type:y.default,json:{write:!0}})],h.prototype,"mapExtent",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],h.prototype,"maxAllowableOffset",void 0),(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],h.prototype,"returnFieldName",void 0),(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],h.prototype,"returnGeometry",void 0),(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],h.prototype,"returnM",void 0),(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],h.prototype,"returnUnformattedValues",void 0),(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],h.prototype,"returnZ",void 0),(0,i._)([(0,l.MZ)({type:d.default,json:{write:!0}})],h.prototype,"spatialReference",void 0),(0,i._)([(0,l.MZ)({type:n.default})],h.prototype,"sublayers",void 0),(0,i._)([(0,l.MZ)({type:c.default,json:{write:!0}})],h.prototype,"timeExtent",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],h.prototype,"tolerance",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],h.prototype,"width",void 0),h=o=(0,i._)([(0,p.$)("esri.rest.support.IdentifyParameters")],h);const g=h},52883:(e,t,r)=>{r.r(t),r.d(t,{identify:()=>h});var o=r(3825),i=r(73953),n=r(54994),s=r(34154),l=r(19902),a=r(68002),p=r(80963),u=r(46530),y=r(65419);function d(e,t){const{dpi:r,gdbVersion:o,geometry:i,geometryPrecision:n,height:s,historicMoment:a,layerOption:u,mapExtent:y,maxAllowableOffset:d,returnFieldName:m,returnGeometry:c,returnUnformattedValues:h,returnZ:g,spatialReference:b,timeExtent:w,tolerance:M,width:v}=e.toJSON(),{dynamicLayers:_,layerDefs:Z,layerIds:x}=f(e),N=null!=t?.geometry?t.geometry:null,j={historicMoment:a,geometryPrecision:n,maxAllowableOffset:d,returnFieldName:m,returnGeometry:c,returnUnformattedValues:h,returnZ:g,tolerance:M},O=N?.toJSON()||i;j.imageDisplay=`${v},${s},${r}`,o&&(j.gdbVersion=o),O&&(delete O.spatialReference,j.geometry=JSON.stringify(O),j.geometryType=(0,l.getJsonType)(O));const S=b??O?.spatialReference??y?.spatialReference;if(S&&(j.sr=(0,p.YX)(S)),j.time=w?[w.start,w.end].join(","):null,y){const{xmin:e,ymin:t,xmax:r,ymax:o}=y;j.mapExtent=`${e},${t},${r},${o}`}return Z&&(j.layerDefs=Z),_&&!Z&&(j.dynamicLayers=_),j.layers="popup"===u?"visible":u,x&&!_&&(j.layers+=`:${x.join(",")}`),j}function f(e){const{mapExtent:t,floors:r,width:o,sublayers:i,layerIds:n,layerOption:l,gdbVersion:p}=e,d=i?.find((e=>null!=e.layer))?.layer?.serviceSublayers,f="popup"===l,m={},c=(0,a.X_)({extent:t,width:o,spatialReference:t?.spatialReference}),h=[],g=e=>{const t=0===c,r=0===e.minScale||c<=e.minScale,o=0===e.maxScale||c>=e.maxScale;if(e.visible&&(t||r&&o))if(e.sublayers)e.sublayers.forEach(g);else{if(!1===n?.includes(e.id)||f&&(!e.popupTemplate||!e.popupEnabled))return;h.unshift(e)}};if(i?.forEach(g),i&&!h.length)m.layerIds=[];else{const e=(0,y.Sk)(h,d,p),t=h.map((e=>{const t=(0,u.f)(r,e);return e.toExportImageJSON(t)}));if(e)m.dynamicLayers=JSON.stringify(t);else{if(i){let e=h.map((e=>{let{id:t}=e;return t}));n&&(e=e.filter((e=>n.includes(e)))),m.layerIds=e}else n?.length&&(m.layerIds=n);const e=function(e,t){const r=!!e?.length,o=t.filter((e=>null!=e.definitionExpression||r&&null!=e.floorInfo));return o.length?o.map((t=>{const r=(0,u.f)(e,t),o=(0,s.sqlAnd)(r,t.definitionExpression);return{id:t.id,definitionExpression:o??void 0}})):null}(r,h);if(null!=e&&e.length){const t={};for(const r of e)r.definitionExpression&&(t[r.id]=r.definitionExpression);Object.keys(t).length&&(m.layerDefs=JSON.stringify(t))}}}return m}var m=r(46768),c=r(70058);async function h(e,t,r){const s=(a=t,t=m.default.from(a)).geometry?[t.geometry]:[],l=(0,n.Dl)(e);var a;return l.path+="/identify",(0,i.normalizeCentralMeridian)(s).then((e=>{const i=d(t,{geometry:e?.[0]}),s=(0,n.lF)({...l.query,f:"json",...i}),a=(0,n.jV)(s,r);return(0,o.default)(l.path,a).then(g).then((e=>function(e,t){if(!t?.length)return e;const r=new Map;function o(e){r.set(e.id,e),e.sublayers&&e.sublayers.forEach(o)}t.forEach(o);for(const i of e.results)i.feature.sourceLayer=r.get(i.layerId);return e}(e,t.sublayers)))}))}function g(e){const t=e.data;return t.results=t.results||[],t.exceededTransferLimit=Boolean(t.exceededTransferLimit),t.results=t.results.map((e=>c.default.fromJSON(e))),t}},70058:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var o=r(35143),i=r(39356),n=r(42553),s=r(46053),l=(r(81806),r(76460),r(47249),r(28379)),a=r(85842),p=r(17707),u=r(31608);let y=class extends n.A{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(e,t){return i.default.fromJSON({attributes:{...t.attributes},geometry:{...t.geometry}})}writeFeature(e,t){if(!e)return;const{attributes:r,geometry:o}=e;r&&(t.attributes={...r}),null!=o&&(t.geometry=o.toJSON(),t.geometryType=u.Ye.toJSON(o.type))}};(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"displayFieldName",void 0),(0,o._)([(0,s.MZ)({type:i.default})],y.prototype,"feature",void 0),(0,o._)([(0,l.w)("feature",["attributes","geometry"])],y.prototype,"readFeature",null),(0,o._)([(0,p.K)("feature")],y.prototype,"writeFeature",null),(0,o._)([(0,s.MZ)({type:Number,json:{write:!0}})],y.prototype,"layerId",void 0),(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"layerName",void 0),y=(0,o._)([(0,a.$)("esri.rest.support.IdentifyResult")],y);const d=y}}]);
//# sourceMappingURL=52883.9c3ece14.chunk.js.map