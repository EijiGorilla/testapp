"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[30617,34890,73467],{770:(e,a,t)=>{t.d(a,{bG:()=>l,Ty:()=>o,YJ:()=>m,Fq:()=>u,vt:()=>i});var r=t(53084),n=t(42633);class s{constructor(e){const{name:a,label:t,description:r,schemes:s}=e;this.name=a,this.label=t,this.description=r,this.schemes=s;const l=e.basemapGroups||n.Np;let i=[];Object.keys(l).forEach((e=>{i=i.concat(l[e])})),this.supportedBasemaps=i,this.basemapGroups=l}isBasemapSupported(e){const a=(0,n.T1)(e,this.supportedBasemaps);return!(!a||!this.supportedBasemaps.includes(a))}getRawSchemes(e){const{basemapId:a,basemapTheme:t}=function(e,a,t){let r=null,s=null;if(a&&(r=(0,n.T1)(a,e,!1),r)){const e=(0,n.BV)(r);null!=e&&(s=e)}return!r&&t&&(r="dark"===t?"dark-gray":"gray",s=t),r||s||(r="gray",s="light"),{basemapId:r,basemapTheme:s}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let s=t;if(a){const e=(0,n.BV)(a,this.basemapGroups);null!=e&&(s=e)}let l=e.geometryType;"multipoint"===l?l="point":"mesh"===l&&(l="polygon");const i=this.schemes[l]||this.schemes.default;return{schemesInfo:(0,r.clone)(i[s]),basemapId:a,basemapTheme:t}}}function l(e){const a=e.themeDictionary,t=new Map;for(const r in a){const e=a[r];t.set(r,new s(e))}return t}function i(e,a){const t=[];return e.forEach((e=>{e.isBasemapSupported(a)&&t.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),t}function o(e,a){if(!e)return;if(!a)return;let t=null;const r=[a.primaryScheme,...a.secondarySchemes];for(const n of r)if(n.name?.toLowerCase()===e.toLowerCase()){t=n;break}return t}function m(e,a,t){if(!e&&!a)return[];if(!t)return[];const r=!e?.length,n=!a?.length,s=[t.primaryScheme,...t.secondarySchemes],l=[];for(const i of s){const t=!!r||e.some((e=>i.tags.includes(e))),s=!n&&a.some((e=>i.tags.includes(e)));t&&!s&&l.push(i)}return l}function u(e){const a=e.theme;if(a)return a.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}},30617:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var r=t(50076),n=t(53430),s=t(4414),l=t(28383),i=t(42633),o=t(11563);const m=n.numericTypes;async function u(e){const{layerAdapter:a,...t}=await async function(e){if(!e?.layer||!e.view)throw new r.default("heatmap-statistics:missing-parameters","'layer' and 'view' parameters are required");const a=[o.mb.CSVLayer,o.mb.FeatureLayer,o.mb.GeoJSONLayer,o.mb.KnowledgeGraphSublayer,o.mb.OGCFeatureLayer,o.mb.OrientedImageryLayer,o.mb.ParquetLayer,o.mb.StreamLayer,o.mb.WFSLayer],{layer:t,...n}=e,u=(0,o.Jg)(t,a);if(!u)throw new r.default("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+(0,o.Ho)(a).join(", "));const p={layerAdapter:u,...n};p.radius=null==p.radius?null==p.blurRadius?18:(0,s.zp)(p.blurRadius):p.radius;const c=null!=p.signal?{signal:p.signal}:null;await u.load(c);const d=p.field,h=d?u.getField(d):null,f=await(0,i.EG)({field:d}),y=(0,l.MH)(u,f,"heatmap-statistics:invalid-parameters");if(y)throw y;if(h){const e=(0,l.a)(u,h,"heatmap-statistics:invalid-parameters",m);if(e)throw e}return p}(e);return a.heatmapStatistics(t)}},34890:(e,a,t)=>{t.r(a),t.d(a,{cloneScheme:()=>c,getSchemeByName:()=>u,getSchemes:()=>m,getSchemesByTag:()=>p,getThemes:()=>o});var r=t(69539),n=t(18690),s=t(89132),l=t(770);const i=(0,l.bG)({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features using heatmap.",schemes:{default:{light:{primary:"heatmap-v1",secondary:["heatmap-v2","heatmap-v3","heatmap-plasma","heatmap-cividis","neutral-yellow-orange","neutral-yellow-green","neutral-yellow-purple","neutral-yellow-magenta","neutral-white-blue","neutral-white-blue-metal","neutral-white-gold","neutral-yellow-bronze","heatmap-v4","heatmap-viridis","heatmap-magma","heatmap-inferno","dark-yellow-orange","dark-yellow-green","dark-yellow-purple","dark-yellow-magenta","dark-white-blue","dark-white-blue-metal","dark-white-gold","dark-yellow-bronze"]},dark:{primary:"heatmap-v4",secondary:["heatmap-inferno","heatmap-viridis","heatmap-magma","dark-white-blue","dark-yellow-orange","dark-yellow-green","dark-yellow-purple","dark-yellow-magenta","dark-white-blue-metal","dark-white-gold","dark-yellow-bronze","heatmap-v1","heatmap-v2","heatmap-v3","heatmap-plasma","heatmap-cividis","neutral-yellow-orange","neutral-yellow-green","neutral-yellow-purple","neutral-yellow-magenta","neutral-white-blue","neutral-white-blue-metal","neutral-white-gold","neutral-yellow-bronze"]}}}}}});function o(e){return(0,l.vt)(i,e)}function m(e){const a="default",t=(0,l.Fq)({basemap:e.basemap,basemapTheme:e.basemapTheme,theme:i.get(a)});if(!t)return;const{schemesInfo:r,basemapId:s,basemapTheme:o}=t,m=`${a}/${s}/`;return{primaryScheme:d(r.primary,m+r.primary),secondarySchemes:r.secondary.map((e=>d(e,m+e))).filter(n.Ru),basemapId:s,basemapTheme:o}}function u(e){return(0,l.Ty)(e.name,m(e))}function p(e){return(0,l.YJ)(e.includedTags,e.excludedTags,m(e))}function c(e){if(!e)return;const a={...e};return a.colors=a.colors.map((e=>new r.default(e))),a.tags=[...a.tags],a}function d(e,a){const t=s.A[e];if(t)return function(e){return{id:e.id,name:e.name,tags:[...e.tags],colors:e.colors.map((e=>new r.default(e))),opacity:e.opacity}}({id:a,name:t.name,tags:t.tags,colors:t.stops??[],opacity:.7})}},73467:(e,a,t)=>{t.r(a),t.d(a,{createRenderer:()=>w,updateRenderer:()=>g});var r=t(69539),n=t(59784),s=t(50076),l=t(72690),i=t(9922),o=t(83804),m=t(4414),u=t(51006),p=t(30617),c=t(42633),d=t(11563),h=t(34890);const f=.01;async function y(e,a){const{field:t,basemap:s,radius:m,fadeToTransparent:p,heatmapScheme:c,view:d}=a,{scheme:y,basemapId:w,basemapTheme:g}=await async function(e){let a=e.scheme,t=null,r=null;const n=await(0,u.Ib)(e.basemap,e.view);if(t=null!=n.basemapId?n.basemapId:null,r=null!=n.basemapTheme?n.basemapTheme:null,a)return{scheme:(0,h.cloneScheme)(a),basemapId:t,basemapTheme:r};const s=(0,h.getSchemes)({basemapTheme:r});return s&&(a=s.primaryScheme,t=s.basemapId,r=s.basemapTheme),{scheme:a,basemapId:t,basemapTheme:r}}({basemap:s,scheme:c,view:d}),v=y.colors,T=v.length,S=null==e.min,k=S?[0,.04]:[e.min,e.max];let I;const R=a.fadeRatio??0,L=a.maxRatio??0,G=a.minRatio??0,B=(L-G)/(T-1),F=v[0],C=p?G:f,z=[new o.default({ratio:0,color:new r.default([F.r,F.g,F.b,0])}),new o.default({ratio:f,color:new r.default([F.r,F.g,F.b,0])}),new o.default({ratio:C,color:new r.default([F.r,F.g,F.b,C])})];return(0,n.Iy)(v,T).forEach(((e,a)=>{const t=G+B*a;z.push(new o.default({ratio:t,color:e}))})),p&&(b(z,R),I=new i.default({fadeRatio:R})),{renderer:new l.default({authoringInfo:I,radius:m,colorStops:z,field:t,minDensity:k[0],maxDensity:k[1]}),statistics:e,defaultValuesUsed:S,scheme:(0,h.cloneScheme)(y),basemapId:w,basemapTheme:g}}function b(e,a){const t=10*(1-a)+1,r=e.length-3,n=e[2].color.a;e.forEach(((e,s)=>{if(s<=2)return;const{color:l}=e,i=(s-3)/r;l.a=0===a?1:Math.min(Math.max(i*t+i+n,n),1)}))}async function w(e){const a=await async function(e){if(!e?.layer||!e.view)throw new s.default("heatmap-renderer:missing-parameters","'layer' and 'view' parameters are required");const a={...e,layer:e.layer,view:e.view};a.radius??=null==a.blurRadius?18:(0,m.zp)(a.blurRadius),a.minRatio??=.01,a.maxRatio??=1,a.fadeRatio??=.2,a.fadeToTransparent??=!0;const t=[d.mb.CSVLayer,d.mb.FeatureLayer,d.mb.GeoJSONLayer,d.mb.KnowledgeGraphSublayer,d.mb.OGCFeatureLayer,d.mb.OrientedImageryLayer,d.mb.ParquetLayer,d.mb.StreamLayer,d.mb.WFSLayer],r=(0,d.Jg)(a.layer,t);if(!r)throw new s.default("heatmap-renderer:invalid-parameters","'layer' must be one of these types: "+(0,d.Ho)(t).join(", "));a.layer=r;const n=null!=a.signal?{signal:a.signal}:null;await r.load(n);const l=await(0,c.EG)({field:a.field}),i=(0,u.MH)(r,l,"heatmap-renderer:invalid-parameters");if(i)throw i;return a}(e);return y(a.statistics??await(0,p.default)({layer:a.layer,field:a.field,radius:a.radius,view:a.view,filter:a.filter,signal:a.signal}),a)}function g(e){const{fadeRatio:a,renderer:t}=e,r=t.clone(),n=a??(r?.authoringInfo?.fadeRatio||0);return b(r.colorStops,n),r.authoringInfo?r.authoringInfo.fadeRatio=n:r.authoringInfo=new i.default({fadeRatio:n}),r}}}]);
//# sourceMappingURL=73467.f441c6c0.chunk.js.map