"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[20744,51313,94131],{20744:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n,a=i(35143),s=(i(11265),i(46053)),o=(i(81806),i(76460),i(47249),i(85842)),r=i(25329),l=i(94131),d=i(98108),h=i(76099),u=i(63582),m=i(54761),c=i(39348);const p="esri-histogram",g={base:p,horizontalLayout:`${p}--horizontal`,verticalLayout:`${p}--vertical`,content:`${p}__content`,svg:`${p}__svg`,bar:`${p}__bar`,bars:`${p}__bars`,label:`${p}__label`,dataLines:`${p}__data-lines`,dataLinesSubgroup:`${p}__data-lines-subgroup`,dataLine:`${p}__data-line`,averageLabel:`${p}__average-label`,averageDataLine:`${p}__average-data-line`,averageSymbol:`${p}__average-symbol`};let b=n=class extends r.default{constructor(e,t){super(e,t),this._bgFillId=`${this.id}-bg-fill`,this._containerNode=null,this._containerDimensions={width:0,height:0},this._defaultBarColor="#d8d8d8",this.barCreatedFunction=null,this.dataLines=null,this.dataLineCreatedFunction=null,this.dataLineUpdatedFunction=null,this.messages=null,this.viewModel=new l.default}get average(){return this.viewModel.average}set average(e){this.viewModel.average=e}get bins(){return this.viewModel.bins}set bins(e){this.viewModel.bins=e}get icon(){return"graph-histogram"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}set layout(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get state(){return this.viewModel.state}static fromHistogramResult(e){const{bins:t,maxValue:i,minValue:a}=e;return new n({bins:t,max:i,min:a})}render(){const{label:e,layout:t,state:i}=this,n=this.classes(g.base,d.D.widget,"horizontal"===t?g.horizontalLayout:g.verticalLayout,"disabled"===i?d.D.disabled:null);return(0,m.K)("div",{afterCreate:this._afterContainerNodeCreate,"aria-label":e,bind:this,class:n},"ready"===i?this._renderContent():null)}_renderContent(){if(!this._containerNode)return;const e=this._bgFillId,t=`clip-path: url(#${e})`;return(0,m.K)("div",{class:g.content},(0,m.K)("svg",{class:g.svg,xmlns:"http://www.w3.org/2000/svg"},(0,m.K)("defs",null,this._renderFillDefinition(e)),(0,m.K)("g",{style:t},this._renderBarsGroup()),this._renderLinesGroup()))}_renderBarsGroup(){return(0,m.K)("g",{class:this.classes(g.bars)},this._renderBars())}_renderBars(){const{layout:e,viewModel:{binRange:t,range:i}}=this;if(!t||!i)return;const n=t/i,{width:a,height:s}=this._containerDimensions;if(0===s&&0===a)return;if(0===s&&0!==a)return void this.scheduleRender();const[o,r]="vertical"===e?[s*n,a]:[s,a*n];return this._getBarDimensions(o,r).map(((e,t)=>{let[i,n]=e;return this._renderBar(t,i,n)}))}_renderBar(e,t,i){const{bins:n,layout:a,max:s,messages:o,viewModel:{range:r}}=this;if(!n||null==s)return;const{width:l,height:d}=this._containerDimensions,h=n.slice()[e],{count:u,maxValue:p,minValue:b}=h,v=s-p,[_,M]="vertical"===a?[0,v*(d/r)]:[l-i-v*(l/r),d-t],w=(0,c.V)(o.barLabel,{count:u,maxValue:p,minValue:b});return(0,m.K)("rect",{afterCreate:this._afterBarCreate,"aria-label":w,bind:this,class:g.bar,"data-index":e,fill:this._defaultBarColor,height:t,role:"img","shape-rendering":"crispEdges","stroke-width":"0",width:i,x:_,y:M})}_renderLinesGroup(){return(0,m.K)("g",{class:this.classes(g.dataLines)},this._renderAverageLine(),this._renderCustomLines())}_renderAverageLine(){const{average:e}=this;if(null==e)return;const t=[(0,m.K)("tspan",{class:this.classes(g.averageSymbol)},"x\u0304 "),(0,m.K)("tspan",{class:this.classes(g.averageLabel)},this.labelFormatFunction?this.labelFormatFunction(e,"average"):e)];return(0,m.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(g.dataLinesSubgroup)},(0,m.K)("title",{key:"title"},e),this._renderLine(e,this.classes(g.averageDataLine)),this._renderLabel({label:t,value:e}))}_renderCustomLines(){if(this.dataLines?.length)return this.dataLines.map(((e,t)=>this._renderLineSubgroup(e,t)))}_renderLineSubgroup(e,t){const{value:i}=e;return(0,m.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(g.dataLinesSubgroup),"data-index":t},(0,m.K)("title",{key:"title"},i),this._renderLine(i),this._renderLabel(e))}_renderLine(e,t){const[i,n,a,s]=this._getLinePosition(e);return(0,m.K)("line",{class:this.classes(g.dataLine,t),"shape-rendering":"crispEdges",x1:i,x2:n,y1:a,y2:s})}_renderLabel(e,t){const{label:i,value:n}=e,[a,s]=this._getLabelPosition(n);return(0,m.K)("text",{class:this.classes(g.label,t),"text-anchor":"end",transform:"horizontal"===this.layout?"rotate(270)":null,x:a,y:s-2},i??"")}_renderFillDefinition(e){const{width:t,height:i}=this._containerDimensions;return(0,m.K)("clipPath",{id:e},(0,m.K)("rect",{height:i,width:t,x:"0",y:"0"}))}_afterContainerNodeCreate(e){this._containerNode=e,this.addHandles((0,h.EV)(e,(e=>{const{width:t,height:i}=e.contentRect;this._containerDimensions={width:t,height:i}})))}_getIndexFromElement(e){const t=e.dataset?.index,i=e.getAttribute("data-index");return null!=t?parseInt(t,10):null!=i?parseInt(i,10):null}_afterBarCreate(e){if(this.barCreatedFunction){const t=this._getIndexFromElement(e)??-1;this.barCreatedFunction(t,e)}}_afterLinesSubgroupCreate(e){if(this.dataLineCreatedFunction){const t=this._getIndexFromElement(e),i=e.childNodes[1],n=e.childNodes[2]?e.childNodes[2]:null;this.dataLineCreatedFunction(i,n,t)}}_afterLinesSubgroupUpdate(e){if(this.dataLineUpdatedFunction){const t=this._getIndexFromElement(e),i=e.childNodes[1],n=e.childNodes[2]?e.childNodes[2]:null;this.dataLineUpdatedFunction(i,n,t)}}_getBarDimensions(e,t){const{bins:i,layout:n}=this,a=i?i.map((e=>e.count)):[],s=Math.max.apply(Math,a);return a.map((i=>"vertical"===n?[e/a.length,0!==s?i/s*t:0]:[0!==s?i/s*e:0,t/a.length]))}_getLinePosition(e){const{layout:t,min:i,viewModel:{range:n}}=this;if(null==i)return[0,0,0,0];const a=Math.round((e-i)/n*100)/100,{width:s,height:o}=this._containerDimensions,[r,l]=[a*s||1,o-a*o||1];return"vertical"===t?[0,"100%",l,l]:[r,r,"100%",0]}_getLabelPosition(e){const{layout:t,min:i,viewModel:{range:n}}=this;if(null==i)return[0,0];const a=Math.round((e-i)/n*100)/100,{width:s,height:o}=this._containerDimensions;return"vertical"===t?[s,o-a*o]:[0,a*s]}};(0,a._)([(0,s.MZ)()],b.prototype,"_bgFillId",void 0),(0,a._)([(0,s.MZ)()],b.prototype,"_containerNode",void 0),(0,a._)([(0,s.MZ)()],b.prototype,"_containerDimensions",void 0),(0,a._)([(0,s.MZ)()],b.prototype,"_defaultBarColor",void 0),(0,a._)([(0,s.MZ)()],b.prototype,"average",null),(0,a._)([(0,s.MZ)()],b.prototype,"barCreatedFunction",void 0),(0,a._)([(0,s.MZ)()],b.prototype,"dataLines",void 0),(0,a._)([(0,s.MZ)()],b.prototype,"dataLineCreatedFunction",void 0),(0,a._)([(0,s.MZ)()],b.prototype,"dataLineUpdatedFunction",void 0),(0,a._)([(0,s.MZ)()],b.prototype,"icon",null),(0,a._)([(0,s.MZ)()],b.prototype,"label",null),(0,a._)([(0,s.MZ)()],b.prototype,"labelFormatFunction",null),(0,a._)([(0,s.MZ)({value:"horizontal"})],b.prototype,"layout",null),(0,a._)([(0,s.MZ)()],b.prototype,"max",null),(0,a._)([(0,s.MZ)(),(0,u.G)("esri/widgets/Histogram/t9n/Histogram")],b.prototype,"messages",void 0),(0,a._)([(0,s.MZ)()],b.prototype,"min",null),(0,a._)([(0,s.MZ)({readOnly:!0})],b.prototype,"state",null),(0,a._)([(0,s.MZ)({type:l.default})],b.prototype,"viewModel",void 0),b=n=(0,a._)([(0,o.$)("esri.widgets.Histogram")],b);const v=b},51313:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var n=i(35143),a=i(69539),s=i(68134),o=i(46053),r=i(21403),l=(i(81806),i(47249),i(85842)),d=i(20744),h=i(22785),u=i(25329),m=i(7095),c=(i(76099),i(54761));const p="zoom-cap",g={zoomCap:p,maxZoomCap:`${p}--max`,minZoomCap:`${p}--min`,zoomCapLine:`${p}--line`,zoomCapMask:`${p}--mask`,zoomCapUnderline:`${p}--underline`},b={interactiveTrack:!1};let v=class extends u.default{constructor(e,t){super(e,t),this.histogram=new d.default({layout:"vertical"}),this.histogramConfig=null,this.slider=new h.default({syncedSegmentsEnabled:!0,thumbsConstrained:!1,layout:"vertical",visibleElements:{labels:!0,rangeLabels:!0},labelInputsEnabled:!0,rangeLabelInputsEnabled:!0}),this.viewModel=null,this.visibleElements={...b};const i=this.slider;!e?.hasTimeData||e?.inputParseFunction||e?.inputFormatFunction||i.set({labelInputsEnabled:!1,rangeLabelInputsEnabled:!1}),i.draggableSegmentsEnabled=!!e?.visibleElements?.interactiveTrack,this.addHandles([i.on("max-change",(e=>this.emit("max-change",e))),i.on("max-click",(e=>this.emit("max-click",e))),i.on("min-change",(e=>this.emit("min-change",e))),i.on("min-click",(e=>this.emit("min-click",e))),i.on("segment-click",(e=>this.emit("segment-click",e))),i.on("segment-drag",(e=>this.emit("segment-drag",e))),i.on("thumb-change",(e=>this.emit("thumb-change",e))),i.on("thumb-click",(e=>this.emit("thumb-click",e))),i.on("thumb-drag",(e=>this.emit("thumb-drag",e))),i.on("track-click",(e=>this.emit("track-click",e))),(0,s.watch)((()=>[this.histogramConfig,this.max,this.min,this.zoomOptions]),(()=>{const{histogram:e,histogramConfig:t,viewModel:{max:i,min:n}}=this,a=this.getParamsFromHistogramConfig(t);e.set({...a,max:i,min:n})})),(0,s.watch)((()=>this.labelFormatFunction),(()=>{const{histogram:e,labelFormatFunction:t}=this;e.set({labelFormatFunction:t})})),(0,s.watch)((()=>this.hasTimeData),(e=>{const{labelInputsEnabled:t,rangeLabelInputsEnabled:n}=this.slider,a=!e||this.inputFormatFunction&&this.inputParseFunction;i.set({labelInputsEnabled:t&&a,rangeLabelInputsEnabled:n&&a})})),(0,s.watch)((()=>this.visibleElements?.interactiveTrack),(e=>{i.draggableSegmentsEnabled=!!e}))]),this._onMaxZoomCapPointerDown=this._onMaxZoomCapPointerDown.bind(this),this._onMinZoomCapPointerDown=this._onMinZoomCapPointerDown.bind(this)}initialize(){const{histogramConfig:e={},viewModel:t}=this,{labelFormatFunction:i,max:n,min:a}=t,s=this.getParamsFromHistogramConfig(e);this.histogram.set({labelFormatFunction:i,...s,max:n,min:a}),this.slider.set({viewModel:t})}get hasTimeData(){return this.viewModel?.hasTimeData??!1}set hasTimeData(e){this.viewModel&&(this.viewModel.hasTimeData=e)}get inputFormatFunction(){return this.viewModel?.inputFormatFunction}set inputFormatFunction(e){this.viewModel&&(this.viewModel.inputFormatFunction=e)}get inputParseFunction(){return this.viewModel?.inputParseFunction}set inputParseFunction(e){this.viewModel&&(this.viewModel.inputParseFunction=e)}get labelFormatFunction(){return this.viewModel?.labelFormatFunction}set labelFormatFunction(e){this.viewModel&&(this.viewModel.labelFormatFunction=e)}get max(){return this.viewModel?.getUnzoomedMax()??this._get("max")??null}set max(e){this.viewModel?this.viewModel.max=e:this._set("max",e)}get min(){return this.viewModel?.getUnzoomedMin()??this._get("min")??null}set min(e){this.viewModel?this.viewModel.min=e:this._set("min",e)}get precision(){return this.viewModel?.precision??4}set precision(e){this.viewModel&&(this.viewModel.precision=e)}get state(){return this.viewModel?.state??"disabled"}get syncedSegmentsEnabled(){return this.slider?.syncedSegmentsEnabled}set syncedSegmentsEnabled(e){this.slider&&(this.slider.syncedSegmentsEnabled=e)}get values(){return this.viewModel?.values??[]}castVisibleElements(e){return{...b,...e}}get zoomOptions(){return this.viewModel?.zoomOptions}set zoomOptions(e){this.viewModel&&(this.viewModel.zoomOptions=e)}renderContent(e,t,i){return this.slider.extraNodes=[e,this.renderHistogram(i)],(0,c.K)("div",{class:t},this.slider.render())}renderHistogram(e){return this.histogramConfig?(0,c.K)("div",{class:e??void 0,key:"histogram"},this.histogram.render()):null}renderBackgroundFillDefinition(e){return(0,c.K)("pattern",{height:"15",id:e,patternUnits:"userSpaceOnUse",width:"15",x:"0",y:"0"},(0,c.K)("image",{height:"15",href:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNjY2MiIC8+PHBhdGggZD0iTTAgMCBMOCAwIEw4IDggTDAgOCBaIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIiAvPjxwYXRoIGQ9Ik0wIDAgTDggMCBMOCA4IEwwIDggWiIgZmlsbD0iI2NjYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCw4KSIgLz48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsMCkiIC8+PC9zdmc+",width:"15",x:"0",y:"0"}))}renderRampFillDefinition(e,t){return(0,c.K)("linearGradient",{id:e,x1:"0",x2:"0",y1:"0",y2:"1"},this.renderRampFillStops(t))}renderRampFillStops(e){return e.reverse().map(((e,t)=>this.renderStop(e,t)))}renderStop(e,t){const{color:i,offset:n,opacity:a}=this.getPropsForStop(e);return(0,c.K)("stop",{key:`${t}-stop`,offset:n,"stop-color":i,"stop-opacity":a})}renderZoomCaps(){return[this.renderMaxZoomCap(),this.renderMinZoomCap()]}renderMinZoomCap(){if(null!=this.zoomOptions?.min)return(0,c.K)("svg",{class:this.classes(g.zoomCap,g.minZoomCap),key:"bottom",onpointerdown:this._onMinZoomCapPointerDown,viewBox:"0 0 30 11",xmlns:"http://www.w3.org/2000/svg"},(0,c.K)("polygon",{class:g.zoomCapMask,fill:"#1b8617",key:"mask",points:"0 11.3846154 30 11.3846154 30 1 25 5.38461538 20 1 15 5.38461538 10 1 5 5.38461538 0 1"}),(0,c.K)("polygon",{class:g.zoomCapUnderline,fill:"#69dcff",key:"underline",points:"0 0 5 4.38461538 10 0 15 4.38461538 20 0 25 4.38461538 30 0 30 4.61538462 25 9 20 4.61538462 15 9 10 4.61538462 5 9 0 4.61538462"}),(0,c.K)("polygon",{class:g.zoomCapLine,fill:"#da5656",key:"line",points:"0 1 5 5.38461538 10 1 15 5.38461538 20 1 25 5.38461538 30 1 30 5.61538462 25 10 20 5.61538462 15 10 10 5.61538462 5 10 0 5.61538462"}))}renderMaxZoomCap(){if(null!=this.zoomOptions?.max)return(0,c.K)("svg",{class:this.classes(g.zoomCap,g.maxZoomCap),key:"top",onpointerdown:this._onMaxZoomCapPointerDown,viewBox:"0 0 30 11",xmlns:"http://www.w3.org/2000/svg"},(0,c.K)("polygon",{class:g.zoomCapMask,key:"mask",points:"0 -1.81994377e-12 30 -1.81994377e-12 30 8.23076923 25 3.61538462 20 8.23076923 15 3.61538462 10 8.23076923 5 3.61538462 0 8.23076923"}),(0,c.K)("polygon",{class:g.zoomCapUnderline,key:"underline",points:"0 5.61538462 5 1 10 5.61538462 15 1 20 5.61538462 25 1 30 5.61538462 30 10.2307692 25 5.61538462 20 10.2307692 15 5.61538462 10 10.2307692 5 5.61538462 0 10.2307692"}),(0,c.K)("polygon",{class:g.zoomCapLine,key:"line",points:"0 4.61538462 5 -1.87329639e-12 10 4.61538462 15 -1.87329639e-12 20 4.61538462 25 -1.87329639e-12 30 4.61538462 30 9.23076923 25 4.61538462 20 9.23076923 15 4.61538462 10 9.23076923 5 4.61538462 0 9.23076923"}))}getPropsForStop(e){const{color:t,offset:i}=e;return{color:t instanceof a.default?t.toCss(!0):a.default.fromString(t).toCss(!0),offset:(100*i).toFixed(2)+"%",opacity:t instanceof a.default?t.toRgba()[3]:null}}getParamsFromHistogramConfig(e){if(!e)return null;const{average:t,barCreatedFunction:i,bins:n,dataLineCreatedFunction:a,dataLineUpdatedFunction:s}=e;return{average:t,barCreatedFunction:i,bins:n,dataLineCreatedFunction:a,dataLineUpdatedFunction:s,dataLines:this._getDataLines(e)}}_onMaxZoomCapPointerDown(){const{zoomOptions:e}=this;if(null!=e?.max){const{min:t}=e;this.zoomOptions=null!=t?{min:t}:null}}_onMinZoomCapPointerDown(){const{zoomOptions:e}=this;if(null!=e?.min){const{max:t}=e;this.zoomOptions=null!=t?{max:t}:null}}_getDataLines(e){const{average:t,standardDeviation:i,standardDeviationCount:n}=e,{max:a,min:s}=this.viewModel.getBounds();return[...this._getStandardDeviationDataLines(i,t,n||1),...e.dataLines||[]].filter((e=>{let{value:t}=e;return t<=a&&t>=s}))}_getStandardDeviationDataLines(e,t,i){const{max:n,min:a}=this.viewModel,s=.06*(n-a);return(0,m.getDeviationValues)(e,t,i).filter((e=>Math.abs(t-e)>s)).map(((e,i,n)=>{const a=this.labelFormatFunction?this.labelFormatFunction(e):e,s=n.length/2,o=i>=s?i-s+1:s-i;return{value:e,label:`${e>t?"+":"-"}${1===o?"":o}\u03c3 ${a}`}}))}};(0,n._)([(0,o.MZ)()],v.prototype,"hasTimeData",null),(0,n._)([(0,o.MZ)()],v.prototype,"histogram",void 0),(0,n._)([(0,o.MZ)()],v.prototype,"histogramConfig",void 0),(0,n._)([(0,o.MZ)()],v.prototype,"inputFormatFunction",null),(0,n._)([(0,o.MZ)()],v.prototype,"inputParseFunction",null),(0,n._)([(0,o.MZ)()],v.prototype,"labelFormatFunction",null),(0,n._)([(0,o.MZ)()],v.prototype,"max",null),(0,n._)([(0,o.MZ)()],v.prototype,"min",null),(0,n._)([(0,o.MZ)()],v.prototype,"precision",null),(0,n._)([(0,o.MZ)()],v.prototype,"slider",void 0),(0,n._)([(0,o.MZ)({readOnly:!0})],v.prototype,"state",null),(0,n._)([(0,o.MZ)()],v.prototype,"syncedSegmentsEnabled",null),(0,n._)([(0,o.MZ)({readOnly:!0})],v.prototype,"values",null),(0,n._)([(0,o.MZ)()],v.prototype,"viewModel",void 0),(0,n._)([(0,o.MZ)()],v.prototype,"visibleElements",void 0),(0,n._)([(0,r.w)("visibleElements")],v.prototype,"castVisibleElements",null),(0,n._)([(0,o.MZ)()],v.prototype,"zoomOptions",null),v=(0,n._)([(0,l.$)("esri.widgets.smartMapping.SmartMappingSliderBase")],v);const _=v},94131:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(35143),a=i(91967),s=i(46053),o=(i(81806),i(76460),i(47249),i(85842));let r=class extends a.default{constructor(e){super(e),this.average=null,this.bins=null,this.max=null,this.min=null}get binRange(){const{bins:e}=this;return e&&e.length>1?e[e.length-1].maxValue-e[0].minValue:0}set labelFormatFunction(e){this._set("labelFormatFunction",e)}get range(){const{max:e,min:t}=this;return null!=e&&null!=t?e-t:0}get state(){const{bins:e,range:t}=this;return t>0&&e?.length?"ready":"disabled"}};(0,n._)([(0,s.MZ)()],r.prototype,"average",void 0),(0,n._)([(0,s.MZ)()],r.prototype,"bins",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],r.prototype,"binRange",null),(0,n._)([(0,s.MZ)()],r.prototype,"labelFormatFunction",null),(0,n._)([(0,s.MZ)()],r.prototype,"max",void 0),(0,n._)([(0,s.MZ)()],r.prototype,"min",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],r.prototype,"range",null),(0,n._)([(0,s.MZ)({readOnly:!0})],r.prototype,"state",null),r=(0,n._)([(0,o.$)("esri.widgets.Histogram.HistogramViewModel")],r);const l=r}}]);
//# sourceMappingURL=51313.8d250139.chunk.js.map