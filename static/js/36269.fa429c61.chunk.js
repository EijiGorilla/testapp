"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[36269],{771:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(35143),n=i(76460),r=i(50346),o=i(68134),h=(i(81806),i(47249),i(50076),i(85842));const a=t=>{let e=class extends t{initialize(){this.addHandles((0,o.on)((()=>this.layer),"refresh",(t=>{this.doRefresh(t.dataChanged).catch((t=>{(0,r.isAbortError)(t)||n.A.getLogger(this).error(t)}))})),"RefreshableLayerView")}};return e=(0,s._)([(0,h.$)("esri.views.layers.RefreshableLayerView")],e),e}},24586:(t,e,i)=>{i.d(e,{Cv:()=>_,Nk:()=>y,lK:()=>p});var s=i(18690),n=i(50346),r=i(9624),o=i(28778),h=i(80963),a=i(45417);const l=[0,0];function x(t,e){if(!e)return null;if("x"in e){const i={x:0,y:0};return[i.x,i.y]=t(e.x,e.y,l),null!=e.z&&(i.z=e.z),null!=e.m&&(i.m=e.m),i}if("xmin"in e){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=t(e.xmin,e.ymin,l),[i.xmax,i.ymax]=t(e.xmax,e.ymax,l),e.hasZ&&(i.zmin=e.zmin,i.zmax=e.zmax,i.hasZ=!0),e.hasM&&(i.mmin=e.mmin,i.mmax=e.mmax,i.hasM=!0),i}return"rings"in e?{rings:c(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:c(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:u(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:null}function c(t,e){const i=[];for(const s of t)i.push(u(s,e));return i}function u(t,e){const i=[];for(const s of t){const t=e(s[0],s[1],[0,0]);i.push(t),s.length>2&&t.push(s[2]),s.length>3&&t.push(s[3])}return i}async function y(t,e){if(!t||!e)return;const i=Array.isArray(t)?t.map((t=>null!=t.geometry?t.geometry.spatialReference:null)).filter(s.Ru):[t];await(0,r.initializeProjection)(i.map((t=>({source:t,dest:e}))))}const d=x.bind(null,a.lngLatToXY),f=x.bind(null,a.xyToLngLat);function _(t,e,i,s){if(!t)return null;if(i||(i=e,e=t.spatialReference),!(0,h.fn)(e)||!(0,h.fn)(i)||(0,h.aI)(e,i))return t;if((0,a.canProject)(e,i)){const e=(0,h.K8)(i)?d(t):f(t);return e.spatialReference=i,e}return(0,r.projectMany)(o.g,[t],e,i,null,s)[0]}const m=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,e,i,s){if(!t?.length||!e||!i||(0,h.aI)(e,i))return t;const r={geometries:t,inSpatialReference:e,outSpatialReference:i,geographicTransformation:s,resolve:(0,n.createResolver)()};return this._jobs.push(r),this._timer??=setTimeout(this._process,10),r.resolve.promise}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:e,inSpatialReference:i,outSpatialReference:s,resolve:n,geographicTransformation:l}=t;(0,a.canProject)(i,s)?(0,h.K8)(s)?n(e.map(d)):n(e.map(f)):n((0,r.projectMany)(o.g,e,i,s,l,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function p(t,e,i,s){return m.push(t,e,i,s)}},27307:(t,e,i)=>{i.d(e,{i:()=>d});var s=i(28808),n=i(5095);function r(t,e){return t.x===e.x&&t.y===e.y}function o(t){if(!t)return;const e=t.length;if(e<=1)return;let i=0;for(let s=1;s<e;s++)r(t[s],t[i])||++i===s||(t[i]=t[s]);t.length=i+1}function h(t,e){return t.x=e.y,t.y=-e.x,t}function a(t,e){return t.x=-e.y,t.y=e.x,t}function l(t,e){return t.x=e.x,t.y=e.y,t}function x(t,e){return t.x=-e.x,t.y=-e.y,t}function c(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function u(t,e){return t.x*e.x+t.y*e.y}function y(t,e,i,s){return t.x=e.x*i+e.y*s,t.y=e.x*s-e.y*i,t}class d{constructor(t,e,i){this._writeVertex=t,this._writeTriangle=e,this._canUseThinTessellation=i,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._canUseThinTessellation;o(t),i&&e.halfWidth<n.Gh&&!e.offset?this._tessellateThin(t,e):this._tessellate(t,e)}_tessellateThin(t,e){if(t.length<2)return;const i=e.wrapDistance||65535;let s=e.initialDistance||0,n=!1,r=t[0].x,o=t[0].y;const h=t.length;for(let a=1;a<h;++a){n&&(n=!1,s=0);let e=t[a].x,h=t[a].y,l=e-r,x=h-o,c=Math.sqrt(l*l+x*x);if(l/=c,x/=c,s+c>i){n=!0;const t=(i-s)/c;c=i-s,e=(1-t)*r+t*e,h=(1-t)*o+t*h,--a}const u=this._writeVertex(r,o,0,0,l,x,x,-l,0,-1,s),y=this._writeVertex(r,o,0,0,l,x,-x,l,0,1,s);s+=c;const d=this._writeVertex(e,h,0,0,l,x,x,-l,0,-1,s),f=this._writeVertex(e,h,0,0,l,x,-x,l,0,1,s);this._writeTriangle(u,y,d),this._writeTriangle(y,d,f),r=e,o=h}}_tessellate(t,e){const i=t[0],n=t[t.length-1],o=r(i,n),d=o?3:2;if(t.length<d)return;const f=e.pixelCoordRatio,_=null!=e.capType?e.capType:s.xR.BUTT,m=null!=e.joinType?e.joinType:s.JO.MITER,p=null!=e.miterLimit?Math.min(e.miterLimit,4):2,v=null!=e.roundLimit?Math.min(e.roundLimit,1.05):1.05,g=null!=e.halfWidth?e.halfWidth:2,w=!!e.textured;let T,R,M,O=null;const b=this._prevNormal,P=this._nextNormal;let V=-1,I=-1;const N=this._joinNormal;let E,k;const C=this._textureNormalLeft,S=this._textureNormalRight,L=this._textureNormal;let A=-1,Z=-1;const j=e.wrapDistance||65535;let z=e.initialDistance||0;const U=this._writeVertex,B=this._writeTriangle,D=(t,e,i,s,n,r)=>{const o=U(R,M,E,k,i,s,t,e,n,r,z);return A>=0&&Z>=0&&o>=0&&B(A,Z,o),A=Z,Z=o,o};o&&(T=t[t.length-2],P.x=n.x-T.x,P.y=n.y-T.y,I=c(P),P.x/=I,P.y/=I);let G=!1;for(let r=0;r<t.length;++r){if(G&&(G=!1,z=0),T&&(b.x=-P.x,b.y=-P.y,V=I,z+V>j&&(G=!0)),G){const e=(j-z)/V;V=j-z,T={x:(1-e)*T.x+e*t[r].x,y:(1-e)*T.y+e*t[r].y},--r}else T=t[r];R=T.x,M=T.y;const e=r<=0&&!G,i=r===t.length-1;if(e||(z+=V),O=i?o?t[1]:null:t[r+1],O?(P.x=O.x-R,P.y=O.y-M,I=c(P),P.x/=I,P.y/=I):(P.x=void 0,P.y=void 0),!o){if(e){a(N,P),E=N.x,k=N.y,_===s.xR.SQUARE&&(D(-P.y-P.x,P.x-P.y,P.x,P.y,0,-1),D(P.y-P.x,-P.x-P.y,P.x,P.y,0,1)),_===s.xR.ROUND&&(D(-P.y-P.x,P.x-P.y,P.x,P.y,-1,-1),D(P.y-P.x,-P.x-P.y,P.x,P.y,-1,1)),_!==s.xR.ROUND&&_!==s.xR.BUTT||(D(-P.y,P.x,P.x,P.y,0,-1),D(P.y,-P.x,P.x,P.y,0,1));continue}if(i){h(N,b),E=N.x,k=N.y,_!==s.xR.ROUND&&_!==s.xR.BUTT||(D(b.y,-b.x,-b.x,-b.y,0,-1),D(-b.y,b.x,-b.x,-b.y,0,1)),_===s.xR.SQUARE&&(D(b.y-b.x,-b.x-b.y,-b.x,-b.y,0,-1),D(-b.y-b.x,b.x-b.y,-b.x,-b.y,0,1)),_===s.xR.ROUND&&(D(b.y-b.x,-b.x-b.y,-b.x,-b.y,1,-1),D(-b.y-b.x,b.x-b.y,-b.x,-b.y,1,1));continue}}let n,d,U=(F=P,-((J=b).x*F.y-J.y*F.x));if(Math.abs(U)<.01)u(b,P)>0?(N.x=b.x,N.y=b.y,U=1,n=Number.MAX_VALUE,d=!0):(a(N,P),U=1,n=1,d=!1);else{N.x=(b.x+P.x)/U,N.y=(b.y+P.y)/U,n=c(N);const t=(n-1)*g*f;d=n>4||t>V&&t>I}E=N.x,k=N.y;let B=m;switch(m){case s.JO.BEVEL:n<1.05&&(B=s.JO.MITER);break;case s.JO.ROUND:n<v&&(B=s.JO.MITER);break;case s.JO.MITER:n>p&&(B=s.JO.BEVEL)}switch(B){case s.JO.MITER:if(D(N.x,N.y,-b.x,-b.y,0,-1),D(-N.x,-N.y,-b.x,-b.y,0,1),i)break;if(w){const t=G?0:z;A=this._writeVertex(R,M,E,k,P.x,P.y,N.x,N.y,0,-1,t),Z=this._writeVertex(R,M,E,k,P.x,P.y,-N.x,-N.y,0,1,t)}break;case s.JO.BEVEL:{const t=U<0;let e,s,n,r;if(t){const t=A;A=Z,Z=t,e=C,s=S}else e=S,s=C;if(d)n=t?a(this._innerPrev,b):h(this._innerPrev,b),r=t?h(this._innerNext,P):a(this._innerNext,P);else{const e=t?x(this._inner,N):l(this._inner,N);n=e,r=e}const o=t?h(this._bevelStart,b):a(this._bevelStart,b);D(n.x,n.y,-b.x,-b.y,e.x,e.y);const c=D(o.x,o.y,-b.x,-b.y,s.x,s.y);if(i)break;const u=t?a(this._bevelEnd,P):h(this._bevelEnd,P);if(d){const t=this._writeVertex(R,M,E,k,-b.x,-b.y,0,0,0,0,z);A=this._writeVertex(R,M,E,k,P.x,P.y,r.x,r.y,e.x,e.y,z),Z=this._writeVertex(R,M,E,k,P.x,P.y,u.x,u.y,s.x,s.y,z),this._writeTriangle(c,t,Z)}else{if(w){const t=this._bevelMiddle;t.x=(o.x+u.x)/2,t.y=(o.y+u.y)/2,y(L,t,-b.x,-b.y),D(t.x,t.y,-b.x,-b.y,L.x,L.y),y(L,t,P.x,P.y),A=this._writeVertex(R,M,E,k,P.x,P.y,t.x,t.y,L.x,L.y,z),Z=this._writeVertex(R,M,E,k,P.x,P.y,r.x,r.y,e.x,e.y,z)}else{const t=A;A=Z,Z=t}D(u.x,u.y,P.x,P.y,s.x,s.y)}if(t){const t=A;A=Z,Z=t}break}case s.JO.ROUND:{const t=U<0;let e,s;if(t){const t=A;A=Z,Z=t,e=C,s=S}else e=S,s=C;const r=t?x(this._inner,N):l(this._inner,N);let o,c;d?(o=t?a(this._innerPrev,b):h(this._innerPrev,b),c=t?h(this._innerNext,P):a(this._innerNext,P)):(o=r,c=r);const f=t?h(this._roundStart,b):a(this._roundStart,b),_=t?a(this._roundEnd,P):h(this._roundEnd,P),m=D(o.x,o.y,-b.x,-b.y,e.x,e.y),p=D(f.x,f.y,-b.x,-b.y,s.x,s.y);if(i)break;const v=this._writeVertex(R,M,E,k,-b.x,-b.y,0,0,0,0,z);d||this._writeTriangle(A,Z,v);const g=x(this._outer,r),T=this._writeVertex(R,M,E,k,P.x,P.y,_.x,_.y,s.x,s.y,z);let O,V;const I=n>2;if(I){let e;n!==Number.MAX_VALUE?(g.x/=n,g.y/=n,e=u(b,g),e=(n*(e*e-1)+1)/e):e=-1,O=t?h(this._startBreak,b):a(this._startBreak,b),O.x+=b.x*e,O.y+=b.y*e,V=t?a(this._endBreak,P):h(this._endBreak,P),V.x+=P.x*e,V.y+=P.y*e}y(L,g,-b.x,-b.y);const j=this._writeVertex(R,M,E,k,-b.x,-b.y,g.x,g.y,L.x,L.y,z);y(L,g,P.x,P.y);const B=w?this._writeVertex(R,M,E,k,P.x,P.y,g.x,g.y,L.x,L.y,z):j,G=v,J=w?this._writeVertex(R,M,E,k,P.x,P.y,0,0,0,0,z):v;let F=-1,q=-1;if(I&&(y(L,O,-b.x,-b.y),F=this._writeVertex(R,M,E,k,-b.x,-b.y,O.x,O.y,L.x,L.y,z),y(L,V,P.x,P.y),q=this._writeVertex(R,M,E,k,P.x,P.y,V.x,V.y,L.x,L.y,z)),w?I?(this._writeTriangle(G,p,F),this._writeTriangle(G,F,j),this._writeTriangle(J,B,q),this._writeTriangle(J,q,T)):(this._writeTriangle(G,p,j),this._writeTriangle(J,B,T)):I?(this._writeTriangle(v,p,F),this._writeTriangle(v,F,q),this._writeTriangle(v,q,T)):(this._writeTriangle(v,p,j),this._writeTriangle(v,B,T)),d?(A=this._writeVertex(R,M,E,k,P.x,P.y,c.x,c.y,e.x,e.y,z),Z=T):(A=w?this._writeVertex(R,M,E,k,P.x,P.y,c.x,c.y,e.x,e.y,z):m,this._writeTriangle(A,J,T),Z=T),t){const t=A;A=Z,Z=t}break}}}var J,F}}},28778:(t,e,i)=>{i.d(e,{g:()=>s});const s={convertToGEGeometry:function(t,e){return null==e?null:t.convertJSONToGeometry(e)},exportPoint:function(t,e,i){const s=new n(t.getPointX(e),t.getPointY(e),i),r=t.hasZ(e),o=t.hasM(e);return r&&(s.z=t.getPointZ(e)),o&&(s.m=t.getPointM(e)),s},exportPolygon:function(t,e,i){return new r(t.exportPaths(e),i,t.hasZ(e),t.hasM(e))},exportPolyline:function(t,e,i){return new o(t.exportPaths(e),i,t.hasZ(e),t.hasM(e))},exportMultipoint:function(t,e,i){return new h(t.exportPoints(e),i,t.hasZ(e),t.hasM(e))},exportExtent:function(t,e,i){const s=t.hasZ(e),n=t.hasM(e),r=new a(t.getXMin(e),t.getYMin(e),t.getXMax(e),t.getYMax(e),i);if(s){const i=t.getZExtent(e);r.zmin=i.vmin,r.zmax=i.vmax}if(n){const i=t.getMExtent(e);r.mmin=i.vmin,r.mmax=i.vmax}return r}};class n{constructor(t,e,i){this.x=t,this.y=e,this.spatialReference=i,this.z=void 0,this.m=void 0}}class r{constructor(t,e,i,s){this.rings=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),s&&(this.hasM=s)}}class o{constructor(t,e,i,s){this.paths=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),s&&(this.hasM=s)}}class h{constructor(t,e,i,s){this.points=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),s&&(this.hasM=s)}}class a{constructor(t,e,i,s,n){this.xmin=t,this.ymin=e,this.xmax=i,this.ymax=s,this.spatialReference=n,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},36269:(t,e,i)=>{i.r(e),i.d(e,{default:()=>I});var s=i(35143),n=i(46053),r=(i(81806),i(76460),i(47249),i(85842)),o=i(38983),h=i(2413),a=i(5262),l=i(54222),x=i(80963),c=i(24586),u=i(40181),y=(i(93453),i(15389),i(96345),i(5095)),d=i(27307),f=i(2101),_=i(71296),m=i(21904),p=i(61551);class v extends m.m{constructor(t){super(),this.layerView=t,this._childrenRenderParameters={context:null,pixelRatio:1,state:new _.default,stationary:!0,painter:null},this._name=this.constructor.name,this.requestRender=this.requestRender.bind(this)}doRender(t){if(t.drawPhase!==p.S5.MAP)return;t.painter.setPipelineState(null);const e=window.devicePixelRatio,{stationary:i,context:s,painter:n,profiler:r}=t,o=this._childrenRenderParameters;o.context=s.gl,o.state.copy(t.state),o.state.pixelRatio=e,o.stationary=i,o.painter=n;const h=this.createRenderParams(t);n.beforeRenderLayer(h,this.clips?255:0,h.globalOpacity),r.recordContainerStart(this._name);const a=s.getBoundFramebufferObject(),l=s.getViewport();s.resetState(),s.bindFramebuffer(a),s.setViewport(l.x,l.y,l.width,l.height),this.layerView._renderTarget.framebuffer=a.glName,this.layerView._renderTarget.viewport[0]=l.x,this.layerView._renderTarget.viewport[1]=l.y,this.layerView._renderTarget.viewport[2]=l.width,this.layerView._renderTarget.viewport[3]=l.height,this.layerView.render(o),s.enforceState(),n.afterRenderLayer(h,h.globalOpacity),r.recordContainerEnd()}createRenderParams(t){return{...t,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.opacity,inFadeTransition:this.inFadeTransition}}}var g=i(13692),w=i(91196),T=i(771);const R=new Set,M=[],O=[];class b{constructor(t,e,i,s,n,r,o){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[0,0],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:(0,h.vt)();this.id=t,this.level=e,this.row=i,this.col=s,this.world=n,this.resolution=r,this.scale=o,this.coords=a,this.bounds=l}}let P=class extends((0,T.A)((0,f.e)(w.default))){constructor(t){super(t),this._tileMap=new Map,this.container=new v(this),this.layer=null,this.tiles=[],this._renderTarget={framebuffer:null,viewport:[0,0,0,0]}}get _tileInfoView(){const t=this.layer?.tileInfo;return t?new u.A(t):null}get context(){return this.view.stage.context.gl}attach(){}detach(){}requestRender(){this.container.requestRender()}tilesChanged(t,e){}supportsSpatialReference(t){const e=this.layer?.tileInfo;return!e||(0,x.aI)(e.spatialReference,t)}async doRefresh(){}isUpdating(){return!1}update(t){const e=this._tileInfoView,i=this.tiles;if(e){const s=e.getTileCoverage(t.state,0),n=s?.spans,r=s?.lodInfo;if(n?.length&&r){const t=r.level;for(const{row:e,colFrom:s,colTo:o}of n)for(let n=s;n<=o;n++){const s=r.normalizeCol(n),o=r.getWorldForColumn(n),h=`${t}/${e}/${s}/${o}`;if(!this._tileMap.has(h)){const n=new b(h,t,e,s,o,r.resolution,r.scale);r.getTileCoords(n.coords,n,!1),r.getTileBounds(n.bounds,n,!0),this._tileMap.set(h,n),i.push(n),M.push(n)}R.add(h)}}}for(let s=i.length-1;s>=0;s--){const t=i[s];R.has(t.id)||(i.splice(s,1),O.push(t),this._tileMap.delete(t.id))}(M.length||O.length)&&(this.tilesChanged(M,O),M.length=O.length=0),R.clear(),this.requestRender()}viewChange(){this.requestUpdate()}moveEnd(){}bindRenderTarget(){this.context.bindFramebuffer(this.context.FRAMEBUFFER,this._renderTarget.framebuffer),this.context.viewport(this._renderTarget.viewport[0],this._renderTarget.viewport[1],this._renderTarget.viewport[2],this._renderTarget.viewport[3])}getRenderTarget(){return this._renderTarget}async tessellateExtent(t){const e={vertices:[],indices:[]},i=await this._projectAndNormalizeGeometry(t),s=e.vertices.length;return e.vertices.push({x:i.xmin,y:i.ymin,xOffset:0,yOffset:0,uTexcoord:0,vTexcoord:0,distance:0}),e.vertices.push({x:i.xmax,y:i.ymin,xOffset:0,yOffset:0,uTexcoord:1,vTexcoord:0,distance:0}),e.vertices.push({x:i.xmin,y:i.ymax,xOffset:0,yOffset:0,uTexcoord:0,vTexcoord:1,distance:0}),e.vertices.push({x:i.xmax,y:i.ymax,xOffset:0,yOffset:0,uTexcoord:1,vTexcoord:1,distance:0}),e.indices.push(s,s+1,s+2,s+1,s+3,s+2),e}async tessellatePoint(t,e){const i=await this._projectAndNormalizeGeometry(t);return this._tessellatePoints([i],e)}async tessellateMultipoint(t,e){const i=await this._projectAndNormalizeGeometry(t),s=i.points.map((t=>({x:t[0],y:t[1],spatialReference:i.spatialReference})));return this._tessellatePoints(s,e)}async _tessellatePoints(t,e){const i={vertices:[],indices:[]};for(const s of t){const t=i.vertices.length;i.vertices.push({x:s.x,y:s.y,xOffset:e.x,yOffset:e.y+e.height,uTexcoord:0,vTexcoord:0,distance:0}),i.vertices.push({x:s.x,y:s.y,xOffset:e.x+e.width,yOffset:e.y+e.height,uTexcoord:1,vTexcoord:0,distance:0}),i.vertices.push({x:s.x,y:s.y,xOffset:e.x,yOffset:e.y,uTexcoord:0,vTexcoord:1,distance:0}),i.vertices.push({x:s.x,y:s.y,xOffset:e.x+e.width,yOffset:e.y,uTexcoord:1,vTexcoord:1,distance:0}),i.indices.push(t,t+1,t+2,t+1,t+3,t+2)}return i}async tessellatePolyline(t,e){const i={vertices:[],indices:[]},s=(await this._projectAndNormalizeGeometry(t)).paths;if(!s?.length)return i;let n;const r=new d.i(((t,s,r,o,h,a,l,x,c,u,y)=>{const d=i.vertices.length;return i.vertices.push({x:t,y:-s,xOffset:l*e/2,yOffset:x*e/2,uTexcoord:y/n,vTexcoord:(u+1)/2,distance:y}),d}),((t,e,s)=>{i.indices.push(t,e,s)}),!0);for(const o of s){n=0;for(let e=1;e<o.length;++e){const t=o[e][0]-o[e-1][0],i=o[e][1]-o[e-1][1];n+=Math.sqrt(t*t+i*i)}const t=o.map((t=>({x:t[0],y:-t[1]})));r.tessellate(t,V)}return i}async tessellatePolygon(t){const e={vertices:[],indices:[]},i=await this._projectAndNormalizeGeometry(t),s=i.rings;if(!s?.length)return e;(0,a.m3)(i);for(const a of i.rings)for(const t of a)t[1]=-t[1];let n=1/0,r=1/0,o=-1/0,h=-1/0;return(0,g.Ak)(i.rings,(()=>{}),((t,e,i)=>{for(let s=t;s<e;s+=2)n=Math.min(n,i[s]),r=Math.min(r,i[s+1]),o=Math.max(o,i[s]),h=Math.max(h,i[s+1])})),(0,g.Ak)(i.rings,(()=>{}),((t,i,s,a)=>{this._invokeEarcut(e,t,i,s,a,[n,r,o,h])})),e}_invokeEarcut(t,e,i,s,n,r){const h=s.slice(e,i),a=(0,o.e)(h,n,2),l=t.vertices.length;for(let o=0;o<h.length;o+=2){const e=h[o],i=h[o+1];t.vertices.push({x:e,y:-i,xOffset:0,yOffset:0,uTexcoord:(e-r[0])/(r[2]-r[0]),vTexcoord:1-(i-r[1])/(r[3]-r[1]),distance:0})}for(let o=0;o<a.length;++o)t.indices.push(l+a[o])}async _projectAndNormalizeGeometry(t){await(0,c.Nk)(t.spatialReference,this.view.spatialReference);const e=(0,l.b3)(t);return(0,c.Cv)(e,t.spatialReference,this.view.spatialReference)}};(0,s._)([(0,n.MZ)()],P.prototype,"_tileInfoView",null),(0,s._)([(0,n.MZ)()],P.prototype,"layer",void 0),(0,s._)([(0,n.MZ)()],P.prototype,"context",null),P=(0,s._)([(0,r.$)("esri.views.2d.layers.BaseLayerViewGL2D")],P);const V={pixelCoordRatio:1,wrapDistance:1e11,halfWidth:y.Gh+1,initialDistance:0,textured:!0,offset:0},I=P},54222:(t,e,i)=>{i.d(e,{b3:()=>c,jZ:()=>x});var s=i(42553),n=i(2413),r=i(65391),o=i(5262),h=i(19902),a=i(73548),l=i(80963);function x(t){return u(t,!0)}function c(t){return u(t,!1)}function u(t,e){if(null==t)return null;const i=t.spatialReference,n=(0,l.Vp)(i),o=s.A.isSerializable(t)?t.toJSON():t;if(!n)return o;const x=(0,l.K8)(i)?102100:4326,c=a.j7[x].maxX,u=a.j7[x].minX;if((0,h.isPoint)(o))return d(o,c,u);if((0,h.isMultipoint)(o))return o.points=o.points.map((t=>d(t,c,u))),o;if((0,h.isExtent)(o))return y(o,n);if((0,h.isPolygon)(o)||(0,h.isPolyline)(o)){const t=(0,r.Rg)(g,o),i={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},s=(0,a.kd)(i.xmin,u)*(2*c),n=0===s?o:(0,a.kS)(o,s);return i.xmin+=s,i.xmax+=s,i.xmax>c?p(n,c,e):i.xmin<u?p(n,u,e):n}return o}function y(t,e){if(!e)return t;const i=function(t,e){const i=[],{ymin:s,ymax:n,xmin:r,xmax:o}=t,h=t.xmax-t.xmin,[a,l]=e.valid,{x:x,frameId:c}=f(t.xmin,e),{x:u,frameId:y}=f(t.xmax,e),d=x===u&&h>0;if(h>2*l){const t={xmin:r<o?x:u,ymin:s,xmax:l,ymax:n},e={xmin:a,ymin:s,xmax:r<o?u:x,ymax:n},h={xmin:0,ymin:s,xmax:l,ymax:n},d={xmin:a,ymin:s,xmax:0,ymax:n},f=[],m=[];_(t,h)&&f.push(c),_(t,d)&&m.push(c),_(e,h)&&f.push(y),_(e,d)&&m.push(y);for(let i=c+1;i<y;i++)f.push(i),m.push(i);i.push(new v(t,[c]),new v(e,[y]),new v(h,f),new v(d,m))}else x>u||d?i.push(new v({xmin:x,ymin:s,xmax:l,ymax:n},[c]),new v({xmin:a,ymin:s,xmax:u,ymax:n},[y])):i.push(new v({xmin:x,ymin:s,xmax:u,ymax:n},[c]));return i}(t,e).map((t=>t.extent));return i.length<2?i[0]||t:i.length>2?(t.xmin=e.valid[0],t.xmax=e.valid[1],t):{rings:i.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}function d(t,e,i){if(Array.isArray(t)){const s=t[0];if(s>e){const i=(0,a.kd)(s,e);t[0]=s+i*(-2*e)}else if(s<i){const e=(0,a.kd)(s,i);t[0]=s+e*(-2*i)}}else{const s=t.x;if(s>e){const i=(0,a.kd)(s,e);t.x+=i*(-2*e)}else if(s<i){const e=(0,a.kd)(s,i);t.x+=e*(-2*i)}}return t}function f(t,e){const[i,s]=e.valid,n=2*s;let r,o=0;return t>s?(r=Math.ceil(Math.abs(t-s)/n),t-=r*n,o=r):t<i&&(r=Math.ceil(Math.abs(t-i)/n),t+=r*n,o=-r),{x:t,frameId:o}}function _(t,e){const{xmin:i,ymin:s,xmax:n,ymax:r}=e;return m(t,i,s)&&m(t,i,r)&&m(t,n,r)&&m(t,n,s)}function m(t,e,i){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax}function p(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=!(0,h.isPolyline)(t);if(s&&(0,o.m3)(t),i)return(new w).cut(t,e);const n=s?t.rings:t.paths,r=s?4:2,a=n.length,l=-2*e;for(let o=0;o<a;o++){const t=n[o];if(t&&t.length>=r){const e=[];for(const i of t)e.push([i[0]+l,i[1]]);n.push(e)}}return s?t.rings=n:t.paths=n,t}class v{constructor(t,e){this.extent=t,this.frameIds=e}}const g=(0,n.vt)();class w{constructor(){this._linesIn=[],this._linesOut=[]}cut(t,e){let i;if(this._xCut=e,t.rings)this._closed=!0,i=t.rings,this._minPts=4;else{if(!t.paths)return null;this._closed=!1,i=t.paths,this._minPts=2}for(const n of i){if(!n||n.length<this._minPts)continue;let t=!0;for(const e of n)t?(this.moveTo(e),t=!1):this.lineTo(e);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),i=[];for(const n of this._linesIn)n&&n.length>=this._minPts&&i.push(n);const s=-2*this._xCut;for(const n of this._linesOut)if(n&&n.length>=this._minPts){for(const t of n)t[0]+=s;i.push(n)}return this._closed?t.rings=i:t.paths=i,t}moveTo(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t}lineTo(t){const e=this._side(t[0]);if(e*this._prevSide==-1){const i=this._intersect(this._prevPt,t);this._lineTo(this._xCut,i,0),this._prevSide=0,this._lineTo(t[0],t[1],e)}else this._lineTo(t[0],t[1],e);this._prevSide=e,this._prevPt=t}close(){const t=this._firstPt,e=this._prevPt;t[0]===e[0]&&t[1]===e[1]||this.lineTo(t),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(t,e,i){this._closed?(this._lineIn.push([i<=0?t:this._xCut,e]),this._lineOut.push([i>=0?t:this._xCut,e])):(i<=0&&this._lineIn.push([t,e]),i>=0&&this._lineOut.push([t,e]))}_lineTo(t,e,i){this._closed?(T(this._lineIn,i<=0?t:this._xCut,e),T(this._lineOut,i>=0?t:this._xCut,e)):i<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([t,e])):i>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([t,e])):this._prevSide<0?(this._lineIn.push([t,e]),this._lineOut.push([t,e])):this._prevSide>0&&(this._lineOut.push([t,e]),this._lineIn.push([t,e]))}_checkClosingPt(t){const e=t.length;e>3&&t[0][0]===this._xCut&&t[e-2][0]===this._xCut&&t[1][0]===this._xCut&&(t[0][1]=t[e-2][1],t.pop())}_side(t){return t<this._xCut?-1:t>this._xCut?1:0}_intersect(t,e){const i=(this._xCut-t[0])/(e[0]-t[0]);return t[1]+i*(e[1]-t[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}function T(t,e,i){const s=t.length;s>1&&t[s-1][0]===e&&t[s-2][0]===e?t[s-1][1]=i:t.push([e,i])}}}]);
//# sourceMappingURL=36269.fa429c61.chunk.js.map