{"version":3,"file":"static/js/14321.eaf20e71.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/widgets/TimeSlider/TimeSliderViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import i from\"../../core/Evented.js\";import n from\"../../core/Logger.js\";import{after as l,isAbortError as s}from\"../../core/promiseUtils.js\";import{watch as r,whenOnce as o,initial as a,syncAndInitial as u}from\"../../core/reactiveUtils.js\";import{offsetDate as m}from\"../../core/timeUtils.js\";import{property as p}from\"../../core/accessorSupport/decorators/property.js\";import{ensureType as h}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as d}from\"../../core/accessorSupport/decorators/subclass.js\";import c from\"../../time/TimeExtent.js\";import f from\"../../time/TimeInterval.js\";import w from\"../../webdoc/Widgets.js\";import g from\"../../webdoc/widgets/TimeSlider.js\";const v=1e4;function T(t){return null!=t&&void 0!==t.count}function x(t){return null!=t&&void 0!==t.interval}function E(t){return null!=t&&void 0!==t.dates}let _=class extends i.EventedAccessor{constructor(t){super(t),this._animationController=null,this._isViewTimeExtentInitialized=!1,this._timerId=null,this.actions=new e,this.fullTimeExtent=null,this.loop=!1,this.mode=\"time-window\",this.stops={count:10},this.timeExtent=null,this.view=null}initialize(){this.addHandles([r((()=>this.effectiveStops),(()=>{null==this.timeExtent&&(this.timeExtent=this._getDefaultTimeExtent())}),a),r((()=>this.view),((t,e)=>{this._unregisterWidget(e),this._registerWidget(t)}),u),r((()=>this.timeExtent),(t=>{if(null==this.view)return;const e=this.view.timeExtent;(null!=t&&!t.isAllTime||null!=e&&!e.isAllTime)&&(null!=t&&null!=e&&t.equals(e)||(this.view.timeExtent=t))}),a),r((()=>this.view?.timeExtent),(t=>{this._isViewTimeExtentInitialized?(null!=t&&!t.isAllTime||null!=this.timeExtent&&!this.timeExtent.isAllTime)&&(null!=t&&null!=this.timeExtent&&t.equals(this.timeExtent)||(this.timeExtent=t)):this._isViewTimeExtentInitialized=!0}))])}destroy(){null!=this._timerId&&(clearInterval(this._timerId),this._timerId=null),this._unregisterWidget(this.view),this.view=null,null!=this._animationController&&(this._animationController.abort(),this._animationController=null)}get effectiveStops(){const{fullTimeExtent:t,stops:e}=this;if(E(e)){const{dates:i}=e;if(null==i||0===i.length)return null;const n=i.sort(((t,e)=>t.getTime()-e.getTime()));if(null==t)return n;const{start:l,end:s}=t;if(null==l||null==s)return n;return n.filter((t=>!(t.getTime()<l.getTime()||t.getTime()>s.getTime())))}if(T(e)){const i=e.timeExtent??t;return this._divideTimeExtentByCount(i,e.count)}if(x(e)){const i=e.timeExtent??t;return this._divideTimeExtentByInterval(i,e.interval)}return[]}set playRate(t){t<=0||t>36e5||(\"playing\"===this.state&&this._startAnimation(),this._set(\"playRate\",t))}get state(){return null==this.fullTimeExtent?\"disabled\":null!=this._animationController?\"playing\":\"ready\"}get timeExtentValues(){const{mode:t,timeExtent:e}=this;if(null==e||e.isAllTime||e.isEmpty)return null;const{start:i,end:n}=e;switch(t){case\"cumulative-from-end\":case\"instant\":return null!=i?[i.getTime()]:null;case\"cumulative-from-start\":return null!=n?[n.getTime()]:null;case\"time-window\":return null!=i&&null!=n?[i.getTime(),n.getTime()]:null}}next(){this._step({forward:!0,allowRestart:!1})}play(){this._startAnimation()}previous(){this._step({forward:!1,allowRestart:!1})}stop(){this._stopAnimation()}triggerAction(t){this.emit(\"trigger-action\",{action:t})}updateWebDocument(t){const e=new g({currentTimeExtent:this.timeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:T(this.stops)?this.stops.count:null,numThumbs:\"time-window\"===this.mode?2:1,stopDelay:this.playRate,stopInterval:x(this.stops)?this.stops.interval:null,stops:E(this.stops)?this.stops.dates:null});t.widgets?t.widgets.timeSlider=e:t.widgets=new w({timeSlider:e})}valuesToTimeExtent(t){if(null==t)return null;const e=t.sort(((t,e)=>t-e)).map((t=>new Date(t))),i=e.length>0?e[0]:null,n=e.length>1?e[1]:null;switch(this.mode){case\"time-window\":return new c({start:i,end:n});case\"instant\":return new c({start:i,end:i});case\"cumulative-from-start\":return new c({start:null,end:i});case\"cumulative-from-end\":return new c({start:i,end:null});default:return c.allTime}}async _animate(){try{const t=this.view,e=this._animationController?.signal;await Promise.all([l(this.playRate,null,e),null!=t&&o((()=>!1===t.updating),e)])}catch(t){return s(t)||n.getLogger(this).error(t),void(this._animationController=null)}this._step({forward:!0,allowRestart:!1}),null!=this._animationController&&this._animate()}_divideTimeExtentByCount(t,e=10){if(!t||!e)return[];const{start:i,end:n}=t;if(null==i||null==n)return[];if(e>v)return this._divideTimeExtentByCount(t);const l=[],s=i.getTime(),r=n.getTime()-s;for(let o=0;o<=e;o++)l.push(new Date(s+o/e*r));return l}_divideTimeExtentByInterval(t,e,i=v){if(!t||!e)return[];const{start:n,end:l}=t;if(null==n||null==l)return[];const s=l.getTime()-n.getTime(),r=e.toMilliseconds();if(r<=0||s/r>i)return this._divideTimeExtentByCount(t);const o=[],{value:a,unit:u}=e;let p=n;for(;p.getTime()<=l.getTime();)o.push(new Date(p.getTime())),p=m(p,a,u);return o}_getDefaultTimeExtent(){const{effectiveStops:t,mode:e}=this;if(null==t||!e)return null;switch(e){case\"time-window\":return t.length>1?new c({start:t[0],end:t[1]}):null;case\"cumulative-from-start\":return t.length>0?new c({start:null,end:t[0]}):null;case\"cumulative-from-end\":return t.length>0?new c({start:t[0],end:null}):null;case\"instant\":return t.length>0?new c({start:t[0],end:t[0]}):null;default:return null}}_registerWidget(t){if(null!=t){t.persistableViewModels.includes(this)||t.persistableViewModels.add(this)}}_startAnimation(){this._stopAnimation(),this._animationController=new AbortController,this._step({forward:!0,allowRestart:!0}),this._animate()}_step(t){const{forward:e,allowRestart:i}=t,{effectiveStops:n}=this;if(null==this.timeExtentValues||null==n)return;const l=n.map((t=>t.getTime())),s=this.timeExtentValues.map((t=>{const e=l.indexOf(t);if(-1!==e)return e;const i=l.reduce(((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e));return l.indexOf(i)})),r=s.map((t=>t+(e?1:-1))),o=r.some((t=>t<0||t>l.length-1)),{loop:a,state:u}=this;if(o)if(a||i){const t=Math.min(...s),i=Math.max(...s),n=(e?s.map((e=>e-t)):s.map((t=>t+(l.length-1-i)))).map((t=>l[t]));this.timeExtent=this.valuesToTimeExtent(n)}else\"playing\"===u&&this.stop();else{const t=r.map((t=>l[t]));this.timeExtent=this.valuesToTimeExtent(t)}}_stopAnimation(){null!=this._animationController&&(this._animationController.abort(),this._animationController=null)}_unregisterWidget(t){null!=t&&t.persistableViewModels.remove(this)}};t([p()],_.prototype,\"_animationController\",void 0),t([p({type:e})],_.prototype,\"actions\",void 0),t([p({readOnly:!0})],_.prototype,\"effectiveStops\",null),t([p({type:c})],_.prototype,\"fullTimeExtent\",void 0),t([p({nonNullable:!0})],_.prototype,\"loop\",void 0),t([p({nonNullable:!0})],_.prototype,\"mode\",void 0),t([p({nonNullable:!0,value:1e3})],_.prototype,\"playRate\",null),t([p({readOnly:!0})],_.prototype,\"state\",null),t([p({cast:t=>null==t?null:(x(t)&&(t.interval=h(f,t.interval)),(x(t)||T(t))&&(t.timeExtent=h(c,t.timeExtent)),t)})],_.prototype,\"stops\",void 0),t([p({type:c})],_.prototype,\"timeExtent\",void 0),t([p({readOnly:!0})],_.prototype,\"timeExtentValues\",null),t([p()],_.prototype,\"view\",void 0),t([p()],_.prototype,\"next\",null),t([p()],_.prototype,\"play\",null),t([p()],_.prototype,\"previous\",null),t([p()],_.prototype,\"stop\",null),t([p()],_.prototype,\"updateWebDocument\",null),_=t([d(\"esri.widgets.TimeSlider.TimeSliderViewModel\")],_);const y=_;export{y as default};\n"],"names":["T","t","count","x","interval","E","dates","_","i","EventedAccessor","constructor","super","this","_animationController","_isViewTimeExtentInitialized","_timerId","actions","e","fullTimeExtent","loop","mode","stops","timeExtent","view","initialize","addHandles","r","effectiveStops","_getDefaultTimeExtent","a","_unregisterWidget","_registerWidget","u","isAllTime","equals","destroy","clearInterval","abort","length","n","sort","getTime","start","l","end","s","filter","_divideTimeExtentByCount","_divideTimeExtentByInterval","playRate","state","_startAnimation","_set","timeExtentValues","isEmpty","next","_step","forward","allowRestart","play","previous","stop","_stopAnimation","triggerAction","emit","action","updateWebDocument","g","currentTimeExtent","numStops","numThumbs","stopDelay","stopInterval","widgets","timeSlider","w","valuesToTimeExtent","map","Date","c","allTime","_animate","signal","Promise","all","o","updating","getLogger","error","arguments","undefined","push","toMilliseconds","value","unit","p","m","persistableViewModels","includes","add","AbortController","indexOf","reduce","Math","abs","some","min","max","remove","prototype","type","readOnly","nonNullable","cast","h","f","d","y"],"sourceRoot":""}