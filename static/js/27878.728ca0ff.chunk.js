"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[27878],{28320:(t,e,n)=>{n.r(e),n.d(e,{default:()=>I});var i,o=n(35143),a=n(3825),r=n(50076),s=n(16770),l=n(90534),p=n(49723),c=n(46053),u=(n(81806),n(76460),n(47249),n(28379)),m=n(85842),g=n(17707),h=n(83622),d=n(62705),f=n(95474),v=n(6446),y=n(79453);let b=class extends h.A{constructor(t){super(t),this.animationOptions=null,this.content=null,this.image=null,this.type="image",this[i]=!0,this.image=null}load(){const t=this.image;if("string"==typeof t){const e=(0,s.M5)(t).then((t=>{this._set("content",t)}));this.addResolvingPromise(e)}else if(t instanceof HTMLImageElement){const e=t.decode().then((()=>{this._set("content",t)}));this.addResolvingPromise(e)}else t?this._set("content",t):this.addResolvingPromise(Promise.reject(new r.default("image-element:invalid-image-type","Invalid image type",{image:t})));return Promise.resolve(this)}get contentWidth(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalWidth:this.content.width}get contentHeight(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalHeight:this.content.height}readImage(t,e,n){return(0,y.f)(e.url,n)}writeImage(t,e,n,i){if(null==t)return;const o=i?.portalItem,r=i?.resources;if(!o||!r)return void("string"==typeof t&&(e[n]=(0,y.t)(t,i)));const s=function(t){return"string"==typeof t&&!(0,l.isDataProtocol)(t)&&!(0,l.isBlobProtocol)(t)}(t)?t:null;if(s){if(null==(0,y.i)(s))return void(e[n]=s);const t=(0,y.t)(s,{...i,verifyItemRelativeUrls:i?.verifyItemRelativeUrls?{writtenUrls:i.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},y.M.NO);if(o&&t&&!(0,l.isAbsolute)(t))return r.toKeep.push({resource:o.resourceFromPath(t),compress:!1}),void(e[n]=t)}e[n]="<pending>",r.pendingOperations.push(async function(t){if("string"==typeof t)return(0,l.isDataProtocol)(t)?(0,l.dataToBlob)(t):(await(0,a.default)(t,{responseType:"blob"})).data;return new Promise((e=>function(t){if(t instanceof HTMLCanvasElement)return t;const e=t instanceof HTMLImageElement?t.naturalWidth:t.width,n=t instanceof HTMLImageElement?t.naturalHeight:t.height,i=document.createElement("canvas"),o=i.getContext("2d");return i.width=e,i.height=n,t instanceof HTMLImageElement?o.drawImage(t,0,0,t.width,t.height):t instanceof ImageData&&o.putImageData(t,0,0),i}(t).toBlob(e)))}(t).then((t=>{const i=function(t,e){const n=(0,p.lk)(),i=`${(0,l.join)("media",n)}.${(0,f.n)({type:"blob",blob:t})}`;return e.resourceFromPath(i)}(t,o);e[n]=i.itemRelativeUrl,r.toAdd.push({resource:i,content:{type:"blob",blob:t},compress:!1,finish:t=>{this.image=t.url}})})))}};i=v.Of,(0,o._)([(0,c.MZ)()],b.prototype,"animationOptions",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],b.prototype,"content",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],b.prototype,"contentWidth",null),(0,o._)([(0,c.MZ)({readOnly:!0})],b.prototype,"contentHeight",null),(0,o._)([(0,c.MZ)(d.x3)],b.prototype,"image",void 0),(0,o._)([(0,u.w)("image",["url"])],b.prototype,"readImage",null),(0,o._)([(0,g.K)("image")],b.prototype,"writeImage",null),(0,o._)([(0,c.MZ)(d.m$)],b.prototype,"type",void 0),b=(0,o._)([(0,m.$)("esri.layers.support.ImageElement")],b);const I=b},33723:(t,e,n)=>{n.d(e,{O:()=>m,W:()=>u});var i=n(63919),o=n(44680),a=n(19555),r=n(20664);const s=(0,n(9392).vt)(),l=(0,o.vt)(),p=(0,o.vt)(),c=(0,o.vt)();function u(t,e,n){return(0,r.i)(s,e[0],e[1],1),(0,r.q)(s,s,(0,i.mg)(l,n)),0===s[2]?(0,a.hZ)(t,s[0],s[1]):(0,a.hZ)(t,s[0]/s[2],s[1]/s[2])}function m(t,e,n){return g(p,e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),g(c,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]),(0,i.lw)(t,(0,i.KC)(p,p),c),0!==t[8]&&(t[0]/=t[8],t[1]/=t[8],t[2]/=t[8],t[3]/=t[8],t[4]/=t[8],t[5]/=t[8],t[6]/=t[8],t[7]/=t[8],t[8]/=t[8]),t}function g(t,e,n,o,a,p,c,u,m){(0,i.hZ)(t,e,o,p,n,a,c,1,1,1),(0,r.i)(s,u,m,1),(0,i.KC)(l,t);const[g,h,d]=(0,r.q)(s,s,(0,i.mg)(l,l));return(0,i.hZ)(l,g,0,0,0,h,0,0,0,d),(0,i.lw)(t,l,t)}},95474:(t,e,n)=>{n.d(e,{n:()=>o});var i=n(90534);function o(t){return a[function(t){return"json"===t.type?"application/json":"blob"===t.type?t.blob.type:function(t){const e=(0,i.getPathExtension)(t);return l[e]||r}(t.url)}(t)]||s}const a={},r="text/plain",s=a[r],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const p in l)a[l[p]]=p}}]);
//# sourceMappingURL=27878.728ca0ff.chunk.js.map