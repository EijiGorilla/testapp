"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[63940],{14835:(e,t,i)=>{i.d(t,{w:()=>R});var o=i(35143),r=i(69539),s=i(91967),n=i(59784),l=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),h=i(75655),c=i(45463),d=i(35925);const u=.3;function p(e,t){t&&Object.assign(e,t)}class f{constructor(e){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=c.m$.Opaque,this.color=e.accent}}class g{constructor(e){let{colors:t,...i}=e;this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=t.accent,this.outlineColor=t.outline,this.renderOccluded=c.m$.Opaque,this.hoverOutlineColor=t.selectedOutline,p(this,i)}applyColor(e){this._apply(this.color,e)}applyOutline(e){this._apply(this.outlineColor,e)}applyHoverOutline(e){this._apply(this.hoverOutlineColor,e)}_apply(e,t){t.setParameters({color:(0,n.QP)(e),renderOccluded:this.renderOccluded})}}class _{constructor(e){let{colors:t,...i}=e;this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=c.m$.Transparent,this.minSquaredEdgeLength=900,this.color=(0,n._L)(t.accent,.5),this.hoverColor=t.accent,p(this,i)}applyColor(e){this._apply(this.color,e)}applyHover(e){this._apply(this.hoverColor,e)}_apply(e,t){t.setParameters({color:(0,n.QP)(e),renderOccluded:this.renderOccluded})}}class m{constructor(e){this.vertex=new g({colors:e,color:e.accent,outlineColor:e.outline}),this.edge=new g({colors:e,color:(0,n.Vl)((0,n._L)(e.accent,2/3),.5),outlineColor:(0,n._L)(e.outline,.5),size:8,collisionPadding:8}),this.selected=new g({colors:e,color:e.selected,outlineColor:e.outline}),this.edgeOffset=new _({colors:e})}}class y{constructor(e){let{colors:t,...i}=e;this.width=1.5,this.stipplePattern=(0,d.wk)(3.3),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=c.m$.OccludeAndTransparent,this.color=t.selected,this.stippleOffColor=t.outline,this.innerColor=t.selected,p(this,i)}apply(e){e.color=(0,n.QP)(this.color),e.width=this.width,e.stipplePattern=this.stipplePattern,e.stippleOffColor=(0,n.QP)(this.stippleOffColor),e.falloff=this.falloff,e.innerWidth=this.innerWidth,e.innerColor=(0,n.QP)(this.innerColor),e.renderOccluded=this.renderOccluded}}class w{constructor(e){let{colors:t,...i}=e;this.size=4,this.outlineSize=1,this.shape="square",this.color=t.selected,this.outlineColor=t.outline,p(this,i)}apply(e){e.color=(0,n.QP)(this.color),e.size=this.size,e.outlineSize=this.outlineSize,e.outlineColor=(0,n.QP)(this.outlineColor),e.primitive=this.shape}}class v{constructor(e){let{colors:t,...i}=e;this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=u,this.globalAlphaContrastBoost=1.5,this.radius=3,this.innerColor=t.selected,this.glowColor=t.accent,this.heightFillColor=t.accent,p(this,i)}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i={glowColor:r.default.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:r.default.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*t*this.glowColor.a,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in e?e.style=i:e.laserlineStyle=i}}class O{constructor(e){this.outline=new y({colors:e,color:e.stippleOff,renderOccluded:c.m$.OccludeAndTransparentStencil,stippleOffColor:e.stippleOn,innerWidth:0}),this.staged=new y({colors:e,color:e.stippleOn,renderOccluded:c.m$.OccludeAndTransparentStencil,innerColor:e.stagedSolid,stippleOffColor:e.stippleOff}),this.shadowStyle=new v({colors:e,globalAlpha:u,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:1})}}class C{constructor(e){this.outline=new w({colors:e,color:e.selected,outlineColor:e.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new v({colors:e,globalAlpha:u,glowColor:e.accent,glowFalloff:1.5,glowWidth:6,innerColor:e.selected,innerWidth:1,radius:2})}}class b extends y{constructor(e){let{colors:t,...i}=e;super({colors:t}),this.extensionType=h.A.GROUND_RAY,p(this,i)}}class P{constructor(e){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,this.lineObjects=new O(e),this.pointObjects=new C(e),this.heightPlane=new v({colors:e,globalAlpha:u,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:1}),this.heightBox=new v({colors:e,globalAlpha:u,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:0,heightFillColor:e.accent}),this.zVerticalLine=new b({colors:e,color:(0,n._L)(e.accent,.5),falloff:2,innerColor:(0,n._L)(e.selected,0),renderOccluded:c.m$.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:h.A.GROUND_RAY})}}let R=class extends s.default{constructor(e){super(e)}get colors(){const e=this.getTheme().accentColor,t=e.a;return{accent:e,contrast:(0,n.bJ)(e),selected:r.default.fromArray([255,255,255,t]),selectedOutline:r.default.fromArray([255,255,255,t]),staged:r.default.fromArray([12,207,255,t]),stagedSolid:r.default.fromArray([12,207,255,1]),outline:r.default.fromArray([0,0,0,.5*t]),stippleOn:r.default.fromArray([255,255,255,1]),stippleOff:r.default.fromArray([0,0,0,.5])}}get visualElements(){return new P(this.colors)}get manipulators(){return new m(this.colors)}get zManipulator(){return new f(this.colors)}};(0,o._)([(0,l.MZ)()],R.prototype,"colors",null),(0,o._)([(0,l.MZ)()],R.prototype,"visualElements",null),(0,o._)([(0,l.MZ)()],R.prototype,"manipulators",null),(0,o._)([(0,l.MZ)()],R.prototype,"zManipulator",null),(0,o._)([(0,l.MZ)()],R.prototype,"getTheme",void 0),R=(0,o._)([(0,a.$)("esri.views.3d.interactive.editingTools.settings")],R)},29889:(e,t,i)=>{i.d(t,{A:()=>h,C:()=>a});var o=i(45308),r=i(44815),s=i(99785),n=i(67425),l=i(1599);function a(e,t,i,o){const l="polygon"===e.type?s.Wq.CCW_IS_HOLE:s.Wq.NONE,a="polygon"===e.type?e.rings:e.paths,{position:h,outlines:d}=(0,s.oR)(a,!!e.hasZ,l,e.spatialReference),u=(0,r.jh)(h.length),p=(0,n.au)(h,e.spatialReference,0,u,0,h,0,h.length/3,t,i,o),f=null!=p;return{lines:f?c(d,h,u):[],projectionSuccess:f,sampledElevation:p}}function h(e,t){const i="polygon"===e.type?s.Wq.CCW_IS_HOLE:s.Wq.NONE,r="polygon"===e.type?e.rings:e.paths,{position:n,outlines:a}=(0,s.oR)(r,!1,i),h=(0,o.projectBuffer)(n,e.spatialReference,0,n,t,0);for(let o=2;o<n.length;o+=3)n[o]=l.bi;return{lines:h?c(a,n):[],projectionSuccess:h}}function c(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=new Array;for(const{index:s,count:n}of e){if(n<=1)continue;const e=3*s,l=3*n;o.push({position:(0,r.l5)(t,3*s,3*n),mapPositions:null!=i?(0,r.l5)(i,e,l):void 0})}return o}},35925:(e,t,i)=>{i.d(t,{Xq:()=>l,wk:()=>n});const o={dash:[4,3],dot:[1,3],"long-dash":[8,3],"short-dash":[4,1],"short-dot":[1,1]},r={dash:o.dash,"dash-dot":[...o.dash,...o.dot],dot:o.dot,"long-dash":o["long-dash"],"long-dash-dot":[...o["long-dash"],...o.dot],"long-dash-dot-dot":[...o["long-dash"],...o.dot,...o.dot],none:null,"short-dash":o["short-dash"],"short-dash-dot":[...o["short-dash"],...o["short-dot"]],"short-dash-dot-dot":[...o["short-dash"],...o["short-dot"],...o["short-dot"]],"short-dot":o["short-dot"],solid:null},s=8;function n(e){return{pattern:[e,e],pixelRatio:2}}function l(e){return"style"===e?.type?function(e){return null!=e?function(e,t){return null==e?e:{pattern:e.slice(),pixelRatio:t}}(r[e],s):null}(e.style):null}},41559:(e,t,i)=>{i.r(t),i.d(t,{ElevationProfileView3D:()=>D});var o=i(88321),r=i(30726),s=i(68134),n=i(54054),l=i(48975),a=i(98773),h=i(54901),c=i(50346),d=i(12482),u=i(14835),p=i(73074),f=i(52447),g=i(45463),_=i(90992);class m{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null,this._visualElementHandle=null,this._settings=new u.w({getTheme:()=>this._params.view.effectiveTheme})}destroy(){this.remove()}remove(){this._highlightTask=(0,r.DC)(this._highlightTask),this._highlightHandle=(0,r.xt)(this._highlightHandle),this._visualElementHandle=(0,r.xt)(this._visualElementHandle)}showHighlight(e){if(this.remove(),null==e||!y(e))return;const t=e.layer;this._highlightTask=(0,a.UT)((async i=>{const o=await this._params.view.whenLayerView(t);(0,c.throwIfAborted)(i),(0,_.Of)(o)&&(this._highlightHandle=o.highlight(e))}))}showReshaping(e){if(this.remove(),null==e)return;const t=this._params.view,i=new p.P({view:t,geometry:y(e)?e.geometry:null,attached:!1,elevationInfo:(0,d.bh)(e),renderOccluded:g.m$.OccludeAndTransparentStencil,isDecoration:!0}),o=new f.y({graphic:e}),r=[(0,s.watch)((()=>o.isDraped),(e=>{i.isDraped=e})),o.on("changed",(()=>{i.geometry=y(e)?e.geometry:null})),t.trackGraphicState(o),t.maskOccludee(e),(0,h.DQ)(i)];this._settings.visualElements.lineObjects.outline.apply(i),i.attached=!0,this._visualElementHandle=(0,h.vE)(r)}}function y(e){return null!=e.geometry&&"polyline"===e.geometry.type}var w=i(35143),v=i(69539),O=i(91967),C=i(79468),b=i(46053),P=(i(81806),i(76460),i(47249),i(85842)),R=i(55855),A=i(75042);let E=class extends O.default{constructor(e){super(e),this._chartData=null,this._visualElements=[],this._update=e=>{const{chartData:t}=e;if(null==t)return this.remove();if(!t.refined)return;const i=this._visualElements,o=t.lines.filter((e=>e.viewVisualizationEnabled)),r=o.length;for(;i.length>r;)i.pop().destroy();const s=(0,n.zj)().profileLinesStyle3D;for(;i.length<r;){const e=new p.P({view:this.view,elevationInfo:{mode:"absolute-height",offset:0},innerWidth:s.innerWidth,innerColor:s.innerColor,width:s.width,falloff:s.falloff,renderOccluded:s.renderOccluded,isDecoration:!0});i.push(e)}const l=e.spatialReference;for(let n=0;n<r;++n){const e=i[n],t=o[r-1-n];e.geometry=(0,A.T)(t,l),e.color=(0,R.ci)(v.default.toUnitRGBA(t.color))}}}initialize(){const e=(0,n.zj)().profileLinesUpdateThrottleMillis;let t=this._update;if(e>0){const i=(0,C.n)(this._update,e);this.addHandles(i),t=i}this.addHandles([(0,s.watch)((()=>({spatialReference:this.view.spatialReference,chartData:this._chartData})),t,s.syncAndInitial)])}destroy(){this._destroyVisualElements()}remove(){this._destroyVisualElements()}update(e){this._chartData=e}_destroyVisualElements(){this._visualElements.forEach((e=>e.destroy())),this._visualElements.length=0}};(0,w._)([(0,b.MZ)()],E.prototype,"view",void 0),(0,w._)([(0,b.MZ)()],E.prototype,"_chartData",void 0),E=(0,w._)([(0,P.$)("esri.widgets.ElevationProfile.support.ProfileLines3D")],E);class D{constructor(e,t){this._handles=new o.default,this._inputRepresentation=new m({view:e}),this._hoveredPoints=new l.t({view:e}),this._profileLines=new E({view:e}),this._handles.add([(0,s.watch)((()=>t.viewModel.hoveredPoints),(e=>this._hoveredPoints.update(e)),s.syncAndInitial),(0,s.watch)((()=>{const{state:e,editable:i,highlightEnabled:o,viewModel:r}=t,s=r.input;return s&&(s.commitProperty("geometry"),s.commitProperty("layer")),{input:s,state:e,editable:i,highlightEnabled:o}}),(e=>this._updateInputRepresentation(e)),s.syncAndInitial),(0,s.watch)((()=>t.viewModel.chartData),(e=>this._profileLines.update(e)),s.syncAndInitial),(0,s.watch)((()=>t.viewModel.input?.geometry),(()=>{this._profileLines.remove()}),s.syncAndInitial)])}destroy(){this._handles=(0,r.pR)(this._handles),this._inputRepresentation=(0,r.pR)(this._inputRepresentation),this._hoveredPoints=(0,r.pR)(this._hoveredPoints),this._profileLines=(0,r.pR)(this._profileLines)}_updateInputRepresentation(e){let{input:t,state:i,editable:o,highlightEnabled:r}=e;const s=this._inputRepresentation;if(!r)return s.remove();i===n.o8.Selected?s.showHighlight(t):i!==n.o8.Created||o?s.remove():s.showReshaping(t)}}},48975:(e,t,i)=>{i.d(t,{t:()=>d});var o=i(35143),r=i(91967),s=i(19276),n=i(68134),l=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),h=i(54054),c=i(68999);let d=class extends r.default{constructor(e){super(e),this._hoveredPoints=new s.default}initialize(){this.addHandles((0,n.watch)((()=>this._hoveredPoints.toArray().map((e=>{let{anchor:t,element:i}=e;return{screenLocation:t.screenLocation,element:i}}))),(e=>{for(const{screenLocation:t,element:i}of e)t&&(i.style.transform=`translate(${t.x}px, ${t.y}px)`)}),n.syncAndInitial))}destroy(){this._hoveredPoints.drain((e=>this._destroyHoveredPoint(e)))}update(e){const t=this.view,i=this._hoveredPoints,o=e.length;for(;this._hoveredPoints.length>o;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<o;){const e=this._makeHoveredPoint();i.push(e),t.surface?.appendChild(e.element)}for(let r=0;r<o;++r){const t=i.at(o-1-r),s=e[r];this._updateHoveredPoint(t,s)}}_makeHoveredPoint(){const{size:e,borderStyle:t,borderColor:i,borderWidth:o,boxShadow:r}=(0,h.zj)().hoveredPointsStyle,s=this.view,n=new c.A({view:s,screenLocationEnabled:!0}),l=document.createElement("div"),a=l.style;return a.position="absolute",a.top="0",a.left="0",a.contain="strict",a.boxSizing="border-box",a.width=`${e}px`,a.height=`${e}px`,a.marginTop=`-${e/2}px`,a.marginLeft=`-${e/2}px`,a.border=`${t} ${o}px ${i}`,a.borderRadius=`${e}px`,a.boxShadow=r,{anchor:n,element:l}}_updateHoveredPoint(e,t){let{anchor:i,element:o}=e;i.screenLocationEnabled=!0,i.location=t.hoveredPoint;const r=o.style;r.display="block",r.background=t.color.toCss()}_destroyHoveredPoint(e){let{anchor:t,element:i}=e;t.destroy(),this.view.surface?.removeChild(i)}};(0,o._)([(0,l.MZ)()],d.prototype,"view",void 0),(0,o._)([(0,l.MZ)()],d.prototype,"_hoveredPoints",void 0),d=(0,o._)([(0,a.$)("esri.widgets.ElevationProfile.support.HoveredPoints")],d)},52447:(e,t,i)=>{i.d(t,{y:()=>l});var o=i(35143),r=i(54099),s=i(46053),n=(i(81806),i(76460),i(47249),i(85842));let l=class extends r.A.EventedAccessor{constructor(e){super(e),this.tracking=!1,this.displaying=!1,this.error=null,this.isDraped=!1}};(0,o._)([(0,s.MZ)({constructOnly:!0})],l.prototype,"graphic",void 0),(0,o._)([(0,s.MZ)()],l.prototype,"tracking",void 0),(0,o._)([(0,s.MZ)()],l.prototype,"displaying",void 0),(0,o._)([(0,s.MZ)()],l.prototype,"error",void 0),(0,o._)([(0,s.MZ)()],l.prototype,"isDraped",void 0),l=(0,o._)([(0,n.$)("esri.views.3d.layers.graphics.GraphicState")],l)},68999:(e,t,i)=>{i.d(t,{A:()=>c});var o=i(35143),r=i(54099),s=i(68134),n=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),a=i(9624);let h=class extends r.A.EventedAccessor{constructor(e){super(e),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([(0,s.when)((()=>{const e=this.screenLocationEnabled?this.view:null;return e?[e.size,"3d"===e.type?e.camera:e.viewpoint]:null}),(()=>this.notifyChange("screenLocation"))),(0,s.watch)((()=>this.screenLocation),((e,t)=>{null!=e&&null!=t&&this.emit("view-change")}))])}destroy(){this.view=null}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this,o=t?.spatialReference,r=o?(0,a.projectOrLoad)(e,o).geometry:null;return i&&r&&t?.ready?t.toScreen(r):null}};(0,o._)([(0,n.MZ)()],h.prototype,"location",void 0),(0,o._)([(0,n.MZ)()],h.prototype,"screenLocation",null),(0,o._)([(0,n.MZ)()],h.prototype,"screenLocationEnabled",void 0),(0,o._)([(0,n.MZ)()],h.prototype,"view",void 0),h=(0,o._)([(0,l.$)("esri.widgets.support.AnchorElementViewModel")],h);const c=h},70667:(e,t,i)=>{i.d(t,{t:()=>_,z:()=>w});var o=i(19555),r=i(72745),s=i(55855),n=i(34111),l=i(482),a=i(44815),h=i(75002),c=i(38496),d=i(64465),u=i(50468),p=i(87634),f=i(17345),g=i(66470);function _(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=[],_=t.mapPositions;!function(e,t){const{attributeData:{position:i},removeDuplicateStartEnd:o}=e,r=function(e){const t=e.length;return e[0]===e[t-3]&&e[1]===e[t-2]&&e[2]===e[t-1]}(i)&&o,s=i.length/3-(r?1:0),n=new Array(2*(s-1)),l=r?i.slice(0,-3):i;let a=0;for(let h=0;h<s-1;h++)n[a++]=h,n[a++]=h+1;t.push([g.r.POSITION,new u.n(l,n,3,r)])}(t,r);const w=r[0][1].data,v=r[0][1].indices.length,O=(0,c.EH)(v);return function(e,t,i){if(null!=e.attributeData.colorFeature)return;const o=e.attributeData.color;t.push([g.r.COLOR,new u.n(o??s.Un,i,4)])}(t,r,O),function(e,t,i){null==e.attributeData.sizeFeature&&t.push([g.r.SIZE,new u.n([e.attributeData.size??1],i,1,!0)])}(t,r,O),function(e,t,i){e.attributeData.normal&&t.push([g.r.NORMAL,new u.n(e.attributeData.normal,i,3)])}(t,r,O),function(e,t,i){null!=e.attributeData.colorFeature&&t.push([g.r.COLORFEATUREATTRIBUTE,new u.n([e.attributeData.colorFeature],i,1,!0)])}(t,r,O),function(e,t,i){null!=e.attributeData.sizeFeature&&t.push([g.r.SIZEFEATUREATTRIBUTE,new u.n([e.attributeData.sizeFeature],i,1,!0)])}(t,r,O),function(e,t,i){null!=e.attributeData.opacityFeature&&t.push([g.r.OPACITYFEATUREATTRIBUTE,new u.n([e.attributeData.opacityFeature],i,1,!0)])}(t,r,O),function(e,t,i){if(null==e.overlayInfo||e.overlayInfo.renderCoordsHelper.viewingMode!==d.RT.Global||!e.overlayInfo.spatialReference.isGeographic)return;const r=(0,a.jh)(i.length),s=(0,n.tO)(e.overlayInfo.spatialReference);for(let o=0;o<r.length;o+=3)(0,l.RC)(i,o,r,o,s);const c=i.length/3,p=(0,h.oe)(c+1);let f=m,_=y,w=0,v=0;(0,o.hZ)(f,r[v++],r[v++]),v++,p[0]=0;for(let n=1;n<c+1;++n)n===c&&(v=0),(0,o.hZ)(_,r[v++],r[v++]),v++,w+=(0,o.xg)(f,_),p[n]=w,[f,_]=[_,f];t.push([g.r.DISTANCETOSTART,new u.n(p,t[0][1].indices,1,!0)])}(t,r,w),new f.V(e,r,_,p.X.Line,i)}const m=(0,r.vt)(),y=(0,r.vt)();function w(e,t){if(null==e||0===e.length)return[];const i=[];return e.forEach((e=>{const o=e.length,r=(0,a.jh)(3*o);e.forEach(((e,t)=>{r[3*t]=e[0],r[3*t+1]=e[1],r[3*t+2]=e[2]}));const s={attributeData:{position:r,normal:t},removeDuplicateStartEnd:!1};i.push(s)})),i}},73074:(e,t,i)=>{i.d(t,{P:()=>b});var o=i(54099),r=i(20664),s=i(9392),n=i(43047),l=i(55855),a=i(45308),h=i(42294),c=i(44815),d=i(18117),u=i(12482),p=i(731),f=i(85746),g=i(1307),_=i(49296),m=i(70667),y=i(29889),w=i(45463),v=i(442),O=i(66470),C=i(425);class b extends f.X{constructor(e){super(e),this._attachmentOrigin=(0,d.T)(0,0,0,null),this._attachmentOriginDirty=!0,this.events=new o.A,this._geometry=null,this._width=1,this._color=(0,l.fA)(1,0,1,1),this._innerWidth=0,this._innerColor=(0,l.fA)(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._falloff=0,this._elevationInfo=null,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=w.m$.OccludeAndTransparentStencil,this._attachmentOrigin.spatialReference=e.view.spatialReference,this._laserline=new g.o({view:e.view,isDecoration:e.isDecoration}),this.applyProperties(e),this.attached=e.attached??!0}destroy(){this._laserline.destroy(),super.destroy()}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:P,recreateGeometry:(e,t)=>{e.geometries.length=0,this._recreateGeometry(t,e.material,e.geometries)}}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:P,recreateGeometry:e=>{e.geometries=this._createRenderGeometriesDraped(e.material),this._attachmentOriginChanged()}}}get _laserlineAttached(){return this.attached&&this.visible&&null!=this._laserlineStyle&&!this.isDraped&&this.laserlineEnabled}onAttachedChange(e){this._laserline.attached=this._laserlineAttached,e&&this._attachmentOriginChanged()}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){(0,n.a)(e,this._color)||((0,n.c)(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){(0,n.a)(e,this._innerColor)||((0,n.c)(this._innerColor,e),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=null!=e!=(null!=this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){e&&this._stippleOffColor&&(0,n.a)(e,this._stippleOffColor)||(this._stippleOffColor=e?(0,l.o8)(e):null,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,this._laserline.attached=this._laserlineAttached,null!=e&&(this._laserline.style=e)}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,this._laserline.attached=this._laserlineAttached)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get attachmentOrigin(){if(!this._attachmentOriginDirty)return this._attachmentOrigin;const e=this.object3dResources.resources?.geometries;if(!e||0===e.length)return null;(0,r.i)(A,0,0,0);let t=0;for(const i of e)i.computeAttachmentOrigin(R)&&((0,r.g)(A,A,R),t++);return 0===t?null:((0,r.h)(A,A,1/t),this.view.renderCoordsHelper.fromRenderCoords(A,this._attachmentOrigin),this._attachmentOriginDirty=!1,this._attachmentOrigin)}_updateMaterial(){this.object3dResources.resources?.material.setParameters(this._materialParameters),this.drapedResources.resources?.material.setParameters(this._materialParameters)}get _isClosed(){return null!=this.geometry&&"polygon"===this.geometry.type}get _materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:!1,isClosed:this._isClosed,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,join:"round",hasPolygonOffset:!0,renderOccluded:this._normalizedRenderOccluded,isDecoration:this.isDecoration}}get _normalizedRenderOccluded(){return this.isDraped&&this._renderOccluded===w.m$.OccludeAndTransparentStencil?w.m$.OccludeAndTransparent:this._renderOccluded}_recreateGeometry(e,t,i){this._createRenderGeometries(t,i);for(const o of i)e.addGeometry(o);this._attachmentOriginChanged()}_attachmentOriginChanged(){this._attachmentOriginDirty=!0,this.events.emit("attachment-origin-changed")}_createObject3DResources(e){const t=new C.W(this._materialParameters),i=new Array;return this._recreateGeometry(e,t,i),{material:t,geometries:i,forEach:e=>{e(t),i.forEach(e)}}}_createDrapedResources(){const e=new C.W(this._materialParameters);return{material:e,geometries:this._createRenderGeometriesDraped(e)}}_createRenderGeometriesDraped(e){const{geometry:t,view:i}=this,o=i.basemapTerrain.spatialReference;return null==t||null==o?[]:(0,y.A)(t,o).lines.map((t=>{let{position:r}=t;const s={overlayInfo:{spatialReference:o,renderCoordsHelper:i.renderCoordsHelper},attributeData:{position:r},removeDuplicateStartEnd:this._isClosed};return new v.$((0,m.t)(e,s))}))}calculateMapBounds(e){if(null==this.object3dResources.resources)return!1;const t=this.view.renderCoordsHelper;for(const i of this.object3dResources.resources.geometries){const o=i.attributes.get(O.r.POSITION),r=(0,c.jh)(o.data.length);(0,a.projectBuffer)(o.data,t.spatialReference,0,r,this.view.spatialReference,0),(0,h.Hq)(e,r)}return!0}_createRenderGeometries(e,t){const i=this.geometry;if(null==i)return;const o=(0,y.C)(i,this.view.elevationProvider,this.view.renderCoordsHelper,_.F.fromElevationInfo(this.elevationInfo??new p.A({mode:(0,u.w7)(i,null)}))),r=new Array;for(const{position:s,mapPositions:n}of o.lines){const i={mapPositions:n,attributeData:{position:s},removeDuplicateStartEnd:this._isClosed};t.push((0,m.t)(e,i)),r.push(s)}this._laserline.pathVerticalPlane=r}}function P(e){e.geometries=[]}const R=(0,s.vt)(),A=(0,s.vt)()},75042:(e,t,i)=>{i.d(t,{T:()=>r});var o=i(23701);function r(e,t){const i=e.samples??[],r=i.length-1,s=[];let n=[];for(let o=0;o<=r;o++){const{x:e,y:t,z:l}=i[o];null!=l&&n.push([e,t,l]),o!==r&&null!=l||!n.length||(s.push(n),n=[])}return new o.default({paths:s,hasZ:!0,spatialReference:t})}}}]);
//# sourceMappingURL=63940.f807de0a.chunk.js.map