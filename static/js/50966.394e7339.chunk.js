"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[20744,50966,94131],{20744:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var a,n=i(35143),r=(i(11265),i(46053)),s=(i(81806),i(76460),i(47249),i(85842)),l=i(25329),o=i(94131),d=i(98108),h=i(76099),u=i(63582),c=i(54761),g=i(39348);const _="esri-histogram",p={base:_,horizontalLayout:`${_}--horizontal`,verticalLayout:`${_}--vertical`,content:`${_}__content`,svg:`${_}__svg`,bar:`${_}__bar`,bars:`${_}__bars`,label:`${_}__label`,dataLines:`${_}__data-lines`,dataLinesSubgroup:`${_}__data-lines-subgroup`,dataLine:`${_}__data-line`,averageLabel:`${_}__average-label`,averageDataLine:`${_}__average-data-line`,averageSymbol:`${_}__average-symbol`};let m=a=class extends l.default{constructor(e,t){super(e,t),this._bgFillId=`${this.id}-bg-fill`,this._containerNode=null,this._containerDimensions={width:0,height:0},this._defaultBarColor="#d8d8d8",this.barCreatedFunction=null,this.dataLines=null,this.dataLineCreatedFunction=null,this.dataLineUpdatedFunction=null,this.messages=null,this.viewModel=new o.default}get average(){return this.viewModel.average}set average(e){this.viewModel.average=e}get bins(){return this.viewModel.bins}set bins(e){this.viewModel.bins=e}get icon(){return"graph-histogram"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}set layout(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get state(){return this.viewModel.state}static fromHistogramResult(e){const{bins:t,maxValue:i,minValue:n}=e;return new a({bins:t,max:i,min:n})}render(){const{label:e,layout:t,state:i}=this,a=this.classes(p.base,d.D.widget,"horizontal"===t?p.horizontalLayout:p.verticalLayout,"disabled"===i?d.D.disabled:null);return(0,c.K)("div",{afterCreate:this._afterContainerNodeCreate,"aria-label":e,bind:this,class:a},"ready"===i?this._renderContent():null)}_renderContent(){if(!this._containerNode)return;const e=this._bgFillId,t=`clip-path: url(#${e})`;return(0,c.K)("div",{class:p.content},(0,c.K)("svg",{class:p.svg,xmlns:"http://www.w3.org/2000/svg"},(0,c.K)("defs",null,this._renderFillDefinition(e)),(0,c.K)("g",{style:t},this._renderBarsGroup()),this._renderLinesGroup()))}_renderBarsGroup(){return(0,c.K)("g",{class:this.classes(p.bars)},this._renderBars())}_renderBars(){const{layout:e,viewModel:{binRange:t,range:i}}=this;if(!t||!i)return;const a=t/i,{width:n,height:r}=this._containerDimensions;if(0===r&&0===n)return;if(0===r&&0!==n)return void this.scheduleRender();const[s,l]="vertical"===e?[r*a,n]:[r,n*a];return this._getBarDimensions(s,l).map(((e,t)=>{let[i,a]=e;return this._renderBar(t,i,a)}))}_renderBar(e,t,i){const{bins:a,layout:n,max:r,messages:s,viewModel:{range:l}}=this;if(!a||null==r)return;const{width:o,height:d}=this._containerDimensions,h=a.slice()[e],{count:u,maxValue:_,minValue:m}=h,b=r-_,[v,y]="vertical"===n?[0,b*(d/l)]:[o-i-b*(o/l),d-t],M=(0,g.V)(s.barLabel,{count:u,maxValue:_,minValue:m});return(0,c.K)("rect",{afterCreate:this._afterBarCreate,"aria-label":M,bind:this,class:p.bar,"data-index":e,fill:this._defaultBarColor,height:t,role:"img","shape-rendering":"crispEdges","stroke-width":"0",width:i,x:v,y:y})}_renderLinesGroup(){return(0,c.K)("g",{class:this.classes(p.dataLines)},this._renderAverageLine(),this._renderCustomLines())}_renderAverageLine(){const{average:e}=this;if(null==e)return;const t=[(0,c.K)("tspan",{class:this.classes(p.averageSymbol)},"x\u0304 "),(0,c.K)("tspan",{class:this.classes(p.averageLabel)},this.labelFormatFunction?this.labelFormatFunction(e,"average"):e)];return(0,c.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(p.dataLinesSubgroup)},(0,c.K)("title",{key:"title"},e),this._renderLine(e,this.classes(p.averageDataLine)),this._renderLabel({label:t,value:e}))}_renderCustomLines(){if(this.dataLines?.length)return this.dataLines.map(((e,t)=>this._renderLineSubgroup(e,t)))}_renderLineSubgroup(e,t){const{value:i}=e;return(0,c.K)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(p.dataLinesSubgroup),"data-index":t},(0,c.K)("title",{key:"title"},i),this._renderLine(i),this._renderLabel(e))}_renderLine(e,t){const[i,a,n,r]=this._getLinePosition(e);return(0,c.K)("line",{class:this.classes(p.dataLine,t),"shape-rendering":"crispEdges",x1:i,x2:a,y1:n,y2:r})}_renderLabel(e,t){const{label:i,value:a}=e,[n,r]=this._getLabelPosition(a);return(0,c.K)("text",{class:this.classes(p.label,t),"text-anchor":"end",transform:"horizontal"===this.layout?"rotate(270)":null,x:n,y:r-2},i??"")}_renderFillDefinition(e){const{width:t,height:i}=this._containerDimensions;return(0,c.K)("clipPath",{id:e},(0,c.K)("rect",{height:i,width:t,x:"0",y:"0"}))}_afterContainerNodeCreate(e){this._containerNode=e,this.addHandles((0,h.EV)(e,(e=>{const{width:t,height:i}=e.contentRect;this._containerDimensions={width:t,height:i}})))}_getIndexFromElement(e){const t=e.dataset?.index,i=e.getAttribute("data-index");return null!=t?parseInt(t,10):null!=i?parseInt(i,10):null}_afterBarCreate(e){if(this.barCreatedFunction){const t=this._getIndexFromElement(e)??-1;this.barCreatedFunction(t,e)}}_afterLinesSubgroupCreate(e){if(this.dataLineCreatedFunction){const t=this._getIndexFromElement(e),i=e.childNodes[1],a=e.childNodes[2]?e.childNodes[2]:null;this.dataLineCreatedFunction(i,a,t)}}_afterLinesSubgroupUpdate(e){if(this.dataLineUpdatedFunction){const t=this._getIndexFromElement(e),i=e.childNodes[1],a=e.childNodes[2]?e.childNodes[2]:null;this.dataLineUpdatedFunction(i,a,t)}}_getBarDimensions(e,t){const{bins:i,layout:a}=this,n=i?i.map((e=>e.count)):[],r=Math.max.apply(Math,n);return n.map((i=>"vertical"===a?[e/n.length,0!==r?i/r*t:0]:[0!==r?i/r*e:0,t/n.length]))}_getLinePosition(e){const{layout:t,min:i,viewModel:{range:a}}=this;if(null==i)return[0,0,0,0];const n=Math.round((e-i)/a*100)/100,{width:r,height:s}=this._containerDimensions,[l,o]=[n*r||1,s-n*s||1];return"vertical"===t?[0,"100%",o,o]:[l,l,"100%",0]}_getLabelPosition(e){const{layout:t,min:i,viewModel:{range:a}}=this;if(null==i)return[0,0];const n=Math.round((e-i)/a*100)/100,{width:r,height:s}=this._containerDimensions;return"vertical"===t?[r,s-n*s]:[0,n*r]}};(0,n._)([(0,r.MZ)()],m.prototype,"_bgFillId",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"_containerNode",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"_containerDimensions",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"_defaultBarColor",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"average",null),(0,n._)([(0,r.MZ)()],m.prototype,"barCreatedFunction",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"dataLines",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"dataLineCreatedFunction",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"dataLineUpdatedFunction",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"icon",null),(0,n._)([(0,r.MZ)()],m.prototype,"label",null),(0,n._)([(0,r.MZ)()],m.prototype,"labelFormatFunction",null),(0,n._)([(0,r.MZ)({value:"horizontal"})],m.prototype,"layout",null),(0,n._)([(0,r.MZ)()],m.prototype,"max",null),(0,n._)([(0,r.MZ)(),(0,u.G)("esri/widgets/Histogram/t9n/Histogram")],m.prototype,"messages",void 0),(0,n._)([(0,r.MZ)()],m.prototype,"min",null),(0,n._)([(0,r.MZ)({readOnly:!0})],m.prototype,"state",null),(0,n._)([(0,r.MZ)({type:o.default})],m.prototype,"viewModel",void 0),m=a=(0,n._)([(0,s.$)("esri.widgets.Histogram")],m);const b=m},20873:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var a=i(35143),n=i(46053),r=(i(81806),i(76460),i(47249),i(85842)),s=i(6515),l=i(7095);let o=class extends s.default{constructor(e){super(e),this.average=null,this.bins=null,this.hasTimeData=!1,this.labelFormatFunction=e=>{if(this.hasTimeData)return(0,l.formatDateLabel)(e);const{max:t,min:i,precision:a}=this,n=t-i>10?2:a;return(0,l.formatNumberLabel)(parseFloat(e.toFixed(n)))},this.rangeType="equal",this.standardDeviation=null}generateWhereClause(e){const{rangeType:t,state:i,values:a}=this;if("ready"!==i||!a?.length||null==e)return null;const n=a[0],r=a.length>1?a[a.length-1]:null;switch(t){case"equal":return`${e} = ${n}`;case"not-equal":return`${e} <> ${n}`;case"less-than":return`${e} < ${n}`;case"greater-than":return`${e} > ${n}`;case"at-least":return`${e} >= ${n}`;case"at-most":return`${e} <= ${n}`;case"between":return`${e} BETWEEN ${n} AND ${r}`;case"not-between":return`${e} NOT BETWEEN ${n} AND ${r}`;default:return null}}};(0,a._)([(0,n.MZ)()],o.prototype,"average",void 0),(0,a._)([(0,n.MZ)()],o.prototype,"bins",void 0),(0,a._)([(0,n.MZ)()],o.prototype,"hasTimeData",void 0),(0,a._)([(0,n.MZ)()],o.prototype,"labelFormatFunction",void 0),(0,a._)([(0,n.MZ)()],o.prototype,"rangeType",void 0),(0,a._)([(0,n.MZ)()],o.prototype,"standardDeviation",void 0),o=(0,a._)([(0,r.$)("esri.widgets.HistogramRangeSlider.HistogramRangeSliderViewModel")],o);const d=o},50966:(e,t,i)=>{i.r(t),i.d(t,{default:()=>M});var a=i(35143),n=i(69539),r=i(68134),s=i(46053),l=i(40565),o=(i(81806),i(47249),i(85842)),d=i(20744),h=i(22785),u=i(25329),c=i(20873),g=i(7095),_=i(98108),p=(i(76099),i(63582)),m=i(54761);const b="esri-histogram-range-slider",v={base:b,sliderContainer:`${b}__slider-container`,histogramContainer:`${b}__histogram-container`,rangeTypePrefix:`${b}__range-type--`};let y=class extends u.default{constructor(e,t){super(e,t),this._barElements=[],this._histogram=null,this._slider=null,this.barCreatedFunction=null,this.dataLines=null,this.dataLineCreatedFunction=null,this.excludedBarColor=new n.default("#d7e5f0"),this.includedBarColor=new n.default("#599dd4"),this.messages=null,this.standardDeviationCount=1,this.viewModel=new c.default}initialize(){const{average:e,bins:t,hasTimeData:i,max:a,min:n,viewModel:s}=this;this._updateBarFill=this._updateBarFill.bind(this),this._histogram=new d.default({average:e,bins:t,barCreatedFunction:(e,t)=>{0===e&&(this._barElements=[]),this._barElements.push(t),this._updateBarFill(e,t),this.barCreatedFunction&&this.barCreatedFunction(e,t)},dataLines:this._getDataLines(),dataLineCreatedFunction:(e,t)=>{this.dataLineCreatedFunction&&this.dataLineCreatedFunction(e,t)},labelFormatFunction:this.labelFormatFunction,layout:"horizontal",max:a,min:n}),this._slider=new h.default({labelFormatFunction:this.labelFormatFunction,layout:"horizontal",visibleElements:{labels:!0,rangeLabels:!0},rangeLabelInputsEnabled:!i,viewModel:s}),this.addHandles([this._slider.on("max-change",(e=>this.emit("max-change",e))),this._slider.on("min-change",(e=>this.emit("min-change",e))),this._slider.on("segment-drag",(e=>{this._updateBarFills(),this.emit("segment-drag",e)})),this._slider.on("thumb-change",(e=>{this._updateBarFills(),this.emit("thumb-change",e)})),this._slider.on("thumb-drag",(e=>{this._updateBarFills(),this.emit("thumb-drag",e)})),(0,r.watch)((()=>this.bins),(e=>{if(e&&this._histogram.bins){const t=this._histogram.bins.length-e.length;this._barElements.splice(-t,t)}else this._barElements=[];this._histogram.set({bins:e}),this._updateBarFills(),this.scheduleRender()})),(0,r.watch)((()=>[this.max,this.min,this.rangeType,this.values]),(e=>{let[t,i]=e;this._histogram.set({max:t,min:i}),this._updateBarFills(),this.scheduleRender()})),(0,r.watch)((()=>[this.average,this.dataLines,this.standardDeviation,this.standardDeviationCount]),(e=>{let[t]=e;this._histogram.set({average:t,dataLines:this._getDataLines()})})),(0,r.watch)((()=>this.labelFormatFunction),(e=>{this._histogram.set({labelFormatFunction:e})})),(0,r.watch)((()=>this.hasTimeData),(e=>{this._slider.set({rangeLabelInputsEnabled:!e})}))])}get average(){return this.viewModel.average}set average(e){this.viewModel.average=e}get bins(){return this.viewModel.bins}set bins(e){this.viewModel.bins=e}get hasTimeData(){return this.viewModel.hasTimeData}set hasTimeData(e){this.viewModel.hasTimeData=e}get icon(){return"arrow-double-horizontal"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get precision(){return this.viewModel.precision}set precision(e){this.viewModel.precision=e}get rangeType(){return this.viewModel.rangeType}set rangeType(e){this.viewModel.rangeType=e}get standardDeviation(){return this.viewModel.standardDeviation}set standardDeviation(e){this.viewModel.standardDeviation=e}get values(){return this.viewModel.values}set values(e){this.viewModel.values=e}generateWhereClause(e){return this.viewModel.generateWhereClause(e)}render(){const{rangeType:e,viewModel:t,label:i}=this,a=this.classes(v.base,_.D.widget,`${v.rangeTypePrefix}${e}`,"disabled"===t.state?_.D.disabled:null);return(0,m.K)("div",{"aria-label":i,class:a},"disabled"===t.state?null:this._renderContent())}_renderContent(){return[this._renderHistogram(),this._renderSlider()]}_renderSlider(){return(0,m.K)("div",{class:v.sliderContainer,key:`${this.id}-slider-container`},this._slider.render())}_renderHistogram(){return(0,m.K)("div",{class:v.histogramContainer},this._histogram.render())}_getDataLines(){return[...this._getStandardDeviationDataLines(),...this.dataLines||[]]}_getStandardDeviationDataLines(){const{average:e,standardDeviation:t,standardDeviationCount:i}=this;return(0,g.getDeviationValues)(t,e,i).map((e=>({value:e})))}_updateBarFills(){this._barElements.forEach(((e,t)=>this._updateBarFill(t,e)))}_updateBarFill(e,t){t.setAttribute("fill",this._getFillForBar(e)?.toHex()??"")}_getFillForBar(e){const{bins:t,rangeType:i,values:a}=this;if(-1===e||!t?.length||!i||!a?.length)return null;const n=t[e];if(!n)return null;const{maxValue:r,minValue:s}=n,l=r-s,o=a[0]>s&&a[0]<r;switch(i){case"equal":case"not-equal":return this.includedBarColor;case"less-than":case"at-most":return o?this._getBlendedColor((a[0]-s)/l):r<=a[0]?this.includedBarColor:this.excludedBarColor;case"greater-than":case"at-least":return o?this._getBlendedColor(1-(a[0]-s)/l):s>=a[0]?this.includedBarColor:this.excludedBarColor;case"between":if(2===a.length)return a[0]>s&&a[0]<r?this._getBlendedColor(1-(a[0]-s)/l):a[1]>s&&a[1]<r?this._getBlendedColor((a[1]-s)/l):s>=a[0]&&r<=a[1]?this.includedBarColor:this.excludedBarColor;break;case"not-between":if(2===a.length)return a[0]>s&&a[0]<r?this._getBlendedColor((a[0]-s)/l):a[1]>s&&a[1]<r?this._getBlendedColor(1-(a[1]-s)/l):s>a[0]&&r<a[1]?this.excludedBarColor:this.includedBarColor}return this.includedBarColor}_getBlendedColor(e){return n.default.blendColors(this.excludedBarColor,this.includedBarColor,e)}};(0,a._)([(0,s.MZ)()],y.prototype,"average",null),(0,a._)([(0,s.MZ)()],y.prototype,"barCreatedFunction",void 0),(0,a._)([(0,s.MZ)()],y.prototype,"bins",null),(0,a._)([(0,s.MZ)()],y.prototype,"dataLines",void 0),(0,a._)([(0,s.MZ)()],y.prototype,"dataLineCreatedFunction",void 0),(0,a._)([(0,s.MZ)({type:n.default,json:{type:[l.jz],write:!0}})],y.prototype,"excludedBarColor",void 0),(0,a._)([(0,s.MZ)()],y.prototype,"hasTimeData",null),(0,a._)([(0,s.MZ)({type:n.default,json:{type:[l.jz],write:!0}})],y.prototype,"includedBarColor",void 0),(0,a._)([(0,s.MZ)()],y.prototype,"icon",null),(0,a._)([(0,s.MZ)()],y.prototype,"label",null),(0,a._)([(0,s.MZ)()],y.prototype,"labelFormatFunction",null),(0,a._)([(0,s.MZ)()],y.prototype,"max",null),(0,a._)([(0,s.MZ)(),(0,p.G)("esri/widgets/HistogramRangeSlider/t9n/HistogramRangeSlider")],y.prototype,"messages",void 0),(0,a._)([(0,s.MZ)()],y.prototype,"min",null),(0,a._)([(0,s.MZ)()],y.prototype,"precision",null),(0,a._)([(0,s.MZ)()],y.prototype,"rangeType",null),(0,a._)([(0,s.MZ)()],y.prototype,"standardDeviation",null),(0,a._)([(0,s.MZ)()],y.prototype,"standardDeviationCount",void 0),(0,a._)([(0,s.MZ)()],y.prototype,"values",null),(0,a._)([(0,s.MZ)({type:c.default})],y.prototype,"viewModel",void 0),y=(0,a._)([(0,o.$)("esri.widgets.HistogramRangeSlider")],y);const M=y},94131:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var a=i(35143),n=i(91967),r=i(46053),s=(i(81806),i(76460),i(47249),i(85842));let l=class extends n.default{constructor(e){super(e),this.average=null,this.bins=null,this.max=null,this.min=null}get binRange(){const{bins:e}=this;return e&&e.length>1?e[e.length-1].maxValue-e[0].minValue:0}set labelFormatFunction(e){this._set("labelFormatFunction",e)}get range(){const{max:e,min:t}=this;return null!=e&&null!=t?e-t:0}get state(){const{bins:e,range:t}=this;return t>0&&e?.length?"ready":"disabled"}};(0,a._)([(0,r.MZ)()],l.prototype,"average",void 0),(0,a._)([(0,r.MZ)()],l.prototype,"bins",void 0),(0,a._)([(0,r.MZ)({readOnly:!0})],l.prototype,"binRange",null),(0,a._)([(0,r.MZ)()],l.prototype,"labelFormatFunction",null),(0,a._)([(0,r.MZ)()],l.prototype,"max",void 0),(0,a._)([(0,r.MZ)()],l.prototype,"min",void 0),(0,a._)([(0,r.MZ)({readOnly:!0})],l.prototype,"range",null),(0,a._)([(0,r.MZ)({readOnly:!0})],l.prototype,"state",null),l=(0,a._)([(0,s.$)("esri.widgets.Histogram.HistogramViewModel")],l);const o=l}}]);
//# sourceMappingURL=50966.394e7339.chunk.js.map