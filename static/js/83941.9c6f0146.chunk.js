"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[83941,84841],{83941:(e,t,i)=>{i.r(t),i.d(t,{default:()=>R});var s=i(35143),l=i(19276),a=i(5632),o=i(67993),n=i(68134),r=i(46053),d=(i(81806),i(76460),i(47249),i(85842)),c=i(25329),h=i(84841),m=i(91967);let p=class extends m.default{constructor(){super(...arguments),this.baseLayers=!0,this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.editTitleButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!0,this.referenceLayers=!0,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"baseLayers",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"catalogLayerList",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"closeButton",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"collapseButton",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"editTitleButton",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"errors",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"filter",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"flow",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"heading",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"referenceLayers",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"statusIndicators",void 0),(0,s._)([(0,r.MZ)({type:Boolean,nonNullable:!0})],p.prototype,"temporaryLayerIndicators",void 0),p=(0,s._)([(0,d.$)("esri.widgets.BasemapLayerList.BasemapLayerListVisibleElements")],p);const _=p,u="esri-basemap-layer-list",y=`${u}__item`,b={base:u,actionMenu:`${u}__action-menu`,actionGroup:`${u}__action-group`,filterNoResults:`${u}__filter-no-results`,item:y,itemActive:`${y}--active`,itemContentBottom:`${y}-content-bottom`,itemMessage:`${y}-message`,itemActionIcon:`${y}-action-icon`,itemActionImage:`${y}-action-image`,itemTableIcon:`${y}-table-icon`,itemTemporaryIcon:`${y}-temporary-icon`,itemCatalogIcon:`${y}-catalog-icon`,statusIndicator:`${u}__status-indicator`,editingForm:`${u}__editing-form`,publishing:`${u}__publishing`,updating:`${u}__updating`,editing:`${u}__editing`,connectionStatus:`${u}__connection-status`,connectionStatusConnected:`${u}__connection-status--connected`,visibleToggle:`${u}__visible-toggle`,visibleIcon:`${u}__visible-icon`,section:`${u}__section`};var f=i(81558),g=i(30545),v=i(50912),L=i(94126),I=i(98108),w=i(87540),M=i(66355),F=i(76099),E=i(63582),C=i(12254),T=i(54761);const Z=l.default.ofType(g.default),B="nested",k="data-basemap-layer-type";let A=class extends(a.A.IdentifiableMixin(c.default)){constructor(e,t){super(e,t),this._baseListEl=null,this._referenceListEl=null,this._activeItem=null,this._tooltipReferenceMap=new Map,this._editTitleInput=null,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._focusEditingFlowItem=!1,this._layerListMap=new o.A,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`basemap-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.editingTitle=!1,this.filterPlaceholder="",this.baseFilterPredicate=null,this.baseFilterText="",this.referenceFilterPredicate=null,this.referenceFilterText="",this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new l.default(["knowledge-graph"]),this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minFilterItems=v.dv,this.openedLayers=new l.default,this.openedLayerLists=new l.default,this.tableList=null,this.selectedItems=new Z,this.selectionMode="none",this.tileOptions=null,this.viewModel=new h.default,this.visibilityAppearance="default",this.visibleElements=new _,this._canMove=(e,t)=>{let{dragEl:i,fromEl:s,toEl:l}=e;const a="pull"===t?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,o=(0,v.Gq)(i);if(!o?.sortable)return!1;const n=(0,v.Gq)(s),r=(0,v.MN)(s),d=(0,v.Gq)(l),c=(0,v.MN)(l),h=!!r&&!!c&&r===c,m={selected:o,from:n,to:d},p=s.group,_=l.group,u=n?.layer?.type??"",y=d?.layer?.type??"",b=new Set(["map-image","catalog","knowledge-graph"]);return p&&_&&"function"==typeof a?a.call(null,m):h&&!b.has(u)&&!b.has(y)&&"sublayer"!==o?.layer?.type},this._onSelectedDragItemLayerUidChange=e=>{this._selectedDragItemLayerUid=e},this._onTriggerAction=(e,t)=>{this.triggerAction(e,t)},this._onTooltipReferenceChange=(e,t)=>{t?this._tooltipReferenceMap.set(e,t):this._tooltipReferenceMap.delete(e)},this._onTablesOpen=e=>{this.openedLayers.push(e.layer),this._focusLayerFlowItem=e.layer?.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onCatalogOpen=e=>{this.openedLayers.push(e.layer?.parent),this._focusLayerFlowItem=e.layer?.uid},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=e=>{if("default"!==this.visibilityAppearance)return;const t=Array.from(e.composedPath()).find((e=>e.classList?.contains(b.item)));this._activeItem=(0,v.Gq)(t)},this._onCalciteListOrderChange=e=>{const{_lastDragDetail:t}=this,{toEl:i,fromEl:s,dragEl:l,newIndex:a}=e;if(!s||!i||t?.newIndex===a&&t?.dragEl===l&&t?.toEl===i&&t?.fromEl===s)return;this._lastDragDetail=e,this._selectedDragItemLayerUid=l.value;const o=s,n=i;if(o!==n)this._moveLayerFromChildList({toEl:n,fromEl:o,dragEl:l,newIndex:a});else{const e=Array.from(s.children).filter((e=>e?.matches("calcite-list-item"))).map((e=>e.value));this._sortLayers(o,e)}}}initialize(){this.addHandles([(0,n.on)((()=>this.openedLayers),"change",(()=>this._handleOpenedLayersChange()),n.initial),(0,n.watch)((()=>[this.viewModel.referenceItems.toArray(),this.viewModel.baseItems.toArray()]),(()=>(0,v.eY)(this.selectedItems)),n.syncAndInitial),(0,n.watch)((()=>[this.baseFilterPredicate,this._baseListEl]),(()=>(0,v._L)(this._baseListEl,this.baseFilterPredicate))),(0,n.watch)((()=>[this.referenceFilterPredicate,this._referenceListEl]),(()=>(0,v._L)(this._referenceListEl,this.referenceFilterPredicate)))])}loadDependencies(){return(0,L.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),block:()=>i.e(75502).then(i.bind(i,75502)),label:()=>Promise.resolve().then(i.bind(i,11839)),input:()=>Promise.resolve().then(i.bind(i,38841)),button:()=>Promise.resolve().then(i.bind(i,43285)),flow:()=>i.e(87473).then(i.bind(i,87473)),"flow-item":()=>i.e(68445).then(i.bind(i,68445)),list:()=>Promise.resolve().then(i.bind(i,75802)),notice:()=>i.e(12261).then(i.bind(i,12261)),tooltip:()=>i.e(31748).then(i.bind(i,31748))})}destroy(){this._tooltipReferenceMap.clear(),this._destroyOpenedLayerLists()}get _visibleBaseItems(){return this.baseItems?.filter((e=>!e.hidden&&(this.visibleElements.errors||!e.error)))}get _visibleReferenceItems(){return this.referenceItems?.filter((e=>!e.hidden&&(this.visibleElements.errors||!e.error)))}get _openedPanelItems(){return this._visibleReferenceItems.concat(this._visibleBaseItems).flatten((e=>e.children)).filter((e=>{let{hidden:t,panel:i}=e;return!t&&i?.open&&!i.disabled&&i.flowEnabled}))}get _totalBaseItems(){return this.viewModel.baseItems.flatten((e=>e.children.filter((e=>"catalog-dynamic-group"!==e.layer?.type)))).length}get _totalReferenceItems(){return this.viewModel.referenceItems.flatten((e=>e.children.filter((e=>"catalog-dynamic-group"!==e.layer?.type)))).length}get _baseFilterEnabled(){return this._totalBaseItems>=this.minFilterItems&&this.visibleElements.filter}get _referenceFilterEnabled(){return this._totalReferenceItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:e}=this;return e.toArray().map(((t,i)=>this._renderLayerFlowItem(t,i===e.length-1)))}get basemapTitle(){return this.viewModel.basemapTitle}set basemapTitle(e){this.viewModel.basemapTitle=e}get baseListItemCreatedFunction(){return this.viewModel.baseListItemCreatedFunction}set baseListItemCreatedFunction(e){this.viewModel.baseListItemCreatedFunction=e}get icon(){return"layers"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get referenceListItemCreatedFunction(){return this.viewModel.referenceListItemCreatedFunction}set referenceListItemCreatedFunction(e){this.viewModel.referenceListItemCreatedFunction=e}get baseItems(){return this.viewModel.baseItems}get referenceItems(){return this.viewModel.referenceItems}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){const{state:e}=this.viewModel,t={[I.D.hidden]:"loading"===e,[I.D.disabled]:"disabled"===e};return(0,T.K)("div",{class:this.classes(b.base,I.D.widget,I.D.panel,t)},this._renderItems())}async _createCatalogLayerList(e){const{default:t}=await i.e(70018).then(i.bind(i,70018)),{headingLevel:s,catalogOptions:l,view:a,filterPlaceholder:o,minFilterItems:n,selectionMode:r,visibilityAppearance:d,_onCatalogOpen:c,_onTablesOpen:h,layerTablesEnabled:m}=this;return new t({headingLevel:s,view:a,filterPlaceholder:o,minFilterItems:n,selectionMode:r,visibilityAppearance:d,...l,catalogLayer:e,layerTablesEnabled:m,onCatalogOpen:c,onTablesOpen:h})}_getTableListParams(e){switch(e.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:e.tables};case"map-image":return{...this.mapImageOptions,tables:e.subtables};case"tile":return{...this.tileOptions,tables:e.subtables};default:return null}}async _createTableList(e){const{default:t}=await i.e(21922).then(i.bind(i,21922)),{headingLevel:s,selectionMode:l,dragEnabled:a}=this;return new t({headingLevel:s,selectionMode:l,dragEnabled:a,...this._getTableListParams(e)})}async _createFlowList(e,t){const{_layerListMap:i}=this,s=i.get(e);if(s)return s;const l="catalog"===e.type?await this._createCatalogLayerList(e):await this._createTableList(e);return t.aborted||i.set(e,l),l}async _handleOpenedLayersChange(){const{_layerListMap:e,openedLayers:t,openedLayerLists:i}=this;this._openedLayersController?.abort();const s=new AbortController,{signal:l}=s;this._openedLayersController=s,e.forEach(((i,s)=>{t.includes(s)||(i.destroy(),e.delete(s))}));const a=await Promise.all(t.map((e=>this._createFlowList(e,l))));if(l.aborted)return;i.removeAll(),i.addMany(a);const o=i.at(-1);o?"catalogLayer"in o?(this._set("catalogLayerList",o),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",o)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(e){return e?(0,T.K)("calcite-tooltip",{key:`tooltip-${e.layer?.uid}`,overlayPositioning:"fixed",referenceElement:this._tooltipReferenceMap.get(e.layer?.uid)},this.messages.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){return e.incompatible?this._renderItemTooltip(e):e.children?.filter((e=>!e.hidden)).toArray().map((e=>this._renderItemTooltipNodes(e)))}_renderItemTooltips(){return this._visibleReferenceItems.concat(this._visibleBaseItems)?.toArray().map((e=>this._renderItemTooltipNodes(e)))}_focusLayerFlowItemNode(e){this._focusLayerFlowItem===e.dataset.layerUid&&(this._focusLayerFlowItem=null,(0,F.Z6)(e))}_renderPanelFlowItems(){const{_openedPanelItems:e,openedLayers:t}=this;return e.toArray().map(((i,s)=>{let{title:l,panel:a}=i;const o=()=>this._handlePanelFlowItemBack(a);return(0,T.K)("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:l,heading:a.title,headingLevel:this.headingLevel,key:`flow-panel-${a.uid}`,selected:!t.length&&s===e.length-1,onCalciteFlowItemBack:e=>{e.preventDefault(),o()}},a.render(),(0,T.K)("calcite-button",{appearance:"transparent",onclick:o,slot:"footer-actions",width:"full"},this.messagesCommon.back))}))}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusEditingFlowItemNode(e){this._focusEditingFlowItem&&(this._focusEditingFlowItem=!1,(0,F.Z6)(e))}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,(0,F.Z6)(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,(0,F.Z6)(e))}_renderItem(e,t,i,s){return(0,T.K)(f.A,{activeItem:this._activeItem,canMove:this._canMove,css:b,displayMode:B,dragEnabled:!t&&this.dragEnabled,item:e,key:`layerListItem-${e.layer?.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:s,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList(e){let{toEl:t,fromEl:i,dragEl:s,newIndex:l}=e;const a=(0,v.Gq)(s),o=(0,v.Gq)(t),n=(0,v.Gq)(i),r=P(i),d=P(t);r&&d&&this.viewModel.moveListItem({targetItem:a,fromParentItem:n,toParentItem:o,newIndex:l,from:r,to:d})}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:i,oldIndex:s}=e;t.insertBefore(i,t.children[s])}_sortLayers(e,t){if(e)if(e===this._referenceListEl||e===this._baseListEl){const i=e===this._referenceListEl?"reference":"base",s="base"===i?this.view?.map?.basemap?.baseLayers:"reference"===i?this.view?.map?.basemap?.referenceLayers:null;(0,v.mk)(s,t)}else{const i=(0,v.Gq)(e);if(!i)return;(0,v.kL)(i,t)}}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:i}=this;if("none"===t)return;const s=e.target.selectedItems.map((e=>(0,v.Gq)(e))).filter(Boolean);i.removeAll(),i.addMany(s)}_renderEditingInput(){const{messages:e}=this,{basemapTitle:t}=this.viewModel;return(0,T.K)("div",{class:b.editing},(0,T.K)("calcite-label",null,e.basemapTitle,(0,T.K)("calcite-input",{afterCreate:e=>this._editTitleInput=e,label:e.basemapTitle,name:"basemaptitle",pattern:".*\\S+.*",placeholder:e.basemapTitle,required:!0,title:e.basemapTitle,type:"text",value:t??void 0})))}_renderCancelButton(){const{messagesCommon:{cancel:e}}=this;return(0,T.K)("calcite-button",{appearance:"outline",bind:this,label:e,onclick:this._toggleEditingTitle,slot:"footer",title:e,width:"full"},e)}_renderSubmitButton(){const{messagesCommon:e}=this;return(0,T.K)("calcite-button",{label:e.form.submit,slot:"footer",title:e.form.submit,type:"submit",width:"full"},e.form.ok)}_renderEditingForm(){return this.editingTitle?(0,T.K)("form",{bind:this,class:b.editingForm,onsubmit:this._formSubmit},(0,T.K)("calcite-flow-item",{afterCreate:this._focusEditingFlowItemNode,afterUpdate:this._focusEditingFlowItemNode,bind:this,heading:this.visibleElements.heading?this.messages.basemapTitle:void 0,headingLevel:this.headingLevel,selected:0===this.openedLayers.length&&0===this._openedPanelItems.length,onCalciteFlowItemBack:e=>{e.preventDefault(),this._toggleEditingTitle()}},this._renderEditingInput(),this._renderCancelButton(),this._renderSubmitButton())):null}_renderEditTitleButton(){const{editingTitle:e,visibleElements:t,messagesCommon:i}=this,s=i.edit;return t.editTitleButton&&!e?(0,T.K)("calcite-action",{bind:this,icon:"pencil",onclick:this._toggleEditingTitle,slot:"header-actions-end",text:s,title:s}):null}_renderNoLayersInfoMessage(e){return(0,T.K)("div",{slot:"message"},e)}_renderNoLayersInfo(e,t){return(0,T.K)("div",{class:b.itemMessage},(0,T.K)("calcite-notice",{icon:"information",key:t,kind:"info",open:!0,width:"full"},this._renderNoLayersInfoMessage(e)))}_renderItems(){const{collapsed:e,visible:t,visibleElements:{closeButton:i,collapseButton:s,heading:l,flow:a},messages:o,viewModel:n}=this,r=[(0,T.K)("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:i,closed:!t,collapsed:e,collapsible:s,heading:l?n.basemapTitle??o.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!this.editingTitle&&0===this.openedLayers.length&&0===this._openedPanelItems.length,onCalciteFlowItemClose:()=>this.visible=!1},this._renderEditTitleButton(),this._renderReferenceSection(),this._renderBaseSection()),this._renderEditingForm(),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return t?[a?(0,T.K)("calcite-flow",{key:"root-flow"},r):r,this._renderItemTooltips()]:null}_renderLayerFlowItem(e,t){const{messages:i,openedLayers:s}=this,l=e.title||this.messages.untitledLayer;return(0,T.K)("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":e.uid,description:l,heading:i["catalog"===e.type?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${e.uid}`,selected:t,onCalciteFlowItemBack:e=>{e.preventDefault(),s.pop();const t=s.at(-1);t?this._focusLayerFlowItem=t.uid:this._focusRootFlowItem=!0}},this._layerListMap.get(e)?.render())}_renderList(e,t,i){const{messages:s,dragEnabled:l,selectionMode:a,filterPlaceholder:o,baseFilterText:n,referenceFilterText:r,_baseFilterEnabled:d,_referenceFilterEnabled:c,_rootGroupUid:h}=this,m="reference"===t?s.noReferenceLayers:s.noBaseLayers,p="reference"===t?c:d;return(0,T.K)("calcite-block",{class:b.section,collapsible:!0,heading:"reference"===t?s.referenceHeading:s.baseHeading,headingLevel:(0,w.S)(this.headingLevel),key:`block-${t}`,open:!0},0===e?.length?this._renderNoLayersInfo(m,t):null,(0,T.K)("calcite-list",{afterCreate:e=>{"reference"===t?this._referenceListEl=e:this._baseListEl=e,e.addEventListener("focusin",this._setActiveItem),e.addEventListener("focusout",this._clearActiveItem)},afterRemoved:e=>{"reference"===t?this._referenceListEl=null:this._baseListEl=null,e.removeEventListener("focusin",this._setActiveItem),e.removeEventListener("focusout",this._clearActiveItem)},canPull:e=>this._canMove(e,"pull"),canPut:e=>this._canMove(e,"put"),displayMode:B,filterProps:M.o,[k]:t,"data-layer-type":h,dragEnabled:l,filterEnabled:p,filterPlaceholder:o,filterText:p?"reference"===t?r:n:"",group:h,key:`list-${t}`,label:s.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:a,onCalciteListChange:e=>this._handleCalciteListChange(e),onCalciteListDragEnd:e=>this._handleCalciteListDragEnd(e.detail),onCalciteListFilter:e=>this["reference"===t?"referenceFilterText":"baseFilterText"]=e.currentTarget?.filterText??"",onCalciteListOrderChange:e=>this._onCalciteListOrderChange(e.detail)},e?.toArray().map((e=>this._renderItem(e,i))),e?.length&&p?(0,T.K)("div",{class:b.filterNoResults,slot:"filter-no-results"},(0,T.K)("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoLayersInfoMessage(m))):null))}_renderBaseSection(){const{_visibleBaseItems:e}=this;return this.visibleElements.baseLayers?this._renderList(e,"base",1===e?.length):null}_renderReferenceSection(){return this.visibleElements.referenceLayers?this._renderList(this._visibleReferenceItems,"reference",!1):null}_toggleEditingTitle(){const{editingTitle:e}=this,t=!e;this.editingTitle=t,t?this._focusEditingFlowItem=!0:this._focusRootFlowItem=!0}_formSubmit(e){e.preventDefault();const t=this._editTitleInput?.value;t?.trim()&&(this.basemapTitle=t),this._toggleEditingTitle()}};function P(e){return e?.closest(`[${k}]`)?.getAttribute(k)}(0,s._)([(0,r.MZ)()],A.prototype,"_baseListEl",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"_referenceListEl",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"_activeItem",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"_tooltipReferenceMap",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"_focusRootFlowItem",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"_focusPanelFlowItem",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"_focusLayerFlowItem",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"_focusEditingFlowItem",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"_layerListMap",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"_visibleBaseItems",null),(0,s._)([(0,r.MZ)()],A.prototype,"_visibleReferenceItems",null),(0,s._)([(0,r.MZ)()],A.prototype,"_openedPanelItems",null),(0,s._)([(0,r.MZ)()],A.prototype,"_totalBaseItems",null),(0,s._)([(0,r.MZ)()],A.prototype,"_totalReferenceItems",null),(0,s._)([(0,r.MZ)()],A.prototype,"_baseFilterEnabled",null),(0,s._)([(0,r.MZ)()],A.prototype,"_referenceFilterEnabled",null),(0,s._)([(0,r.MZ)()],A.prototype,"_renderedOpenLayerFlowItems",null),(0,s._)([(0,r.MZ)()],A.prototype,"basemapTitle",null),(0,s._)([(0,r.MZ)({readOnly:!0})],A.prototype,"catalogLayerList",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"catalogOptions",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"collapsed",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"dragEnabled",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"editingTitle",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"filterPlaceholder",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"baseFilterPredicate",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"baseFilterText",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"referenceFilterPredicate",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"referenceFilterText",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"listItemCanGiveFunction",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"listItemCanReceiveFunction",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"baseListItemCreatedFunction",null),(0,s._)([(0,r.MZ)()],A.prototype,"headingLevel",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"icon",null),(0,s._)([(0,r.MZ)()],A.prototype,"knowledgeGraphOptions",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"label",null),(0,s._)([(0,r.MZ)()],A.prototype,"layerTablesEnabled",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"mapImageOptions",void 0),(0,s._)([(0,r.MZ)(),(0,E.G)("esri/widgets/BasemapLayerList/t9n/BasemapLayerList")],A.prototype,"messages",void 0),(0,s._)([(0,r.MZ)(),(0,E.G)("esri/t9n/common")],A.prototype,"messagesCommon",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"minFilterItems",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],A.prototype,"openedLayers",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],A.prototype,"openedLayerLists",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"referenceListItemCreatedFunction",null),(0,s._)([(0,r.MZ)({readOnly:!0})],A.prototype,"tableList",void 0),(0,s._)([(0,r.MZ)({readOnly:!0})],A.prototype,"baseItems",null),(0,s._)([(0,r.MZ)({readOnly:!0})],A.prototype,"referenceItems",null),(0,s._)([(0,r.MZ)({type:Z})],A.prototype,"selectedItems",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"selectionMode",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"tileOptions",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"view",null),(0,s._)([(0,C.U)("trigger-action"),(0,r.MZ)({type:h.default})],A.prototype,"viewModel",void 0),(0,s._)([(0,r.MZ)()],A.prototype,"visibilityAppearance",void 0),(0,s._)([(0,r.MZ)({type:_,nonNullable:!0})],A.prototype,"visibleElements",void 0),A=(0,s._)([(0,d.$)("esri.widgets.BasemapLayerList")],A);const R=A},84841:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var s=i(35143),l=i(19276),a=i(54099),o=i(68134),n=i(46053),r=(i(81806),i(76460),i(47249),i(85842)),d=i(30545),c=i(50912);const h="view",m="basemap",p="base-layers",_="reference-layers",u="reference-layers-list-mode",y="base-layers-list-mode",b="base-layer-views",f="reference-layer-views",g="children",v=l.default.ofType(d.default);let L=class extends a.A.EventedAccessor{constructor(e){super(e),this.baseItems=new v,this.baseListItemCreatedFunction=null,this.checkPublishStatusEnabled=!1,this.listModeDisabled=!1,this.referenceListItemCreatedFunction=null,this.referenceItems=new v,this.view=null,this._compileBaseList=this._compileBaseList.bind(this),this._compileReferenceList=this._compileReferenceList.bind(this)}initialize(){this.addHandles([(0,o.watch)((()=>[this.view?.map?.basemap,!0===this.view?.ready,this.view?.basemapView]),(()=>this._watchBasemapLayers()),o.initial),(0,o.watch)((()=>[this.baseListItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled]),(()=>this._baseListItemCreatedFunctionChanged())),(0,o.watch)((()=>[this.referenceListItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled]),(()=>this._referenceListItemCreatedFunctionChanged()))],h)}destroy(){this.view=null,this._removeAllBaseItems(),this._removeAllReferenceItems()}get basemapTitle(){return this.view?.map?.basemap?.title??null}set basemapTitle(e){this._override("basemapTitle",e)}get state(){return this.view?.ready?"ready":this.view?"loading":"disabled"}get totalBaseItems(){return this.baseItems.flatten((e=>e.children)).length}get totalReferenceItems(){return this.referenceItems.flatten((e=>e.children)).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e){let{targetItem:t,fromParentItem:i,toParentItem:s,from:l,to:a,newIndex:o}=e;const n=t?.layer;if(!n||"subtype-sublayer"===n.type||"sublayer"===n.type)return;const r=this.view?.map?.basemap,d=r?.baseLayers,h=r?.referenceLayers,m=i?(0,c.ES)(i):"base"===l?d:h,p=s?(0,c.ES)(s):"base"===a?d:h;if(!m||!p)return;const{baseItems:_,referenceItems:u}=this,y="base"===l?_:u,b="base"===a?_:u,f=i?.children||y,g=s?.children||b,v=p.length-o;t.parent=s||null,f.remove(t),m.remove(n),g.includes(t)||g.add(t,v),p.includes(n)||p.add(n,v),this._compileLists()}_createItemChangeHandles(e){let{items:t,key:i,callback:s}=e;this.removeHandles(i),s(),t&&this.addHandles(t.on("change",(()=>s())),i)}_createListItem(e){let{layer:t,type:i}=e;const{view:s,baseListItemCreatedFunction:l,referenceListItemCreatedFunction:a,checkPublishStatusEnabled:o,listModeDisabled:n}=this;return new d.default({layer:t,checkPublishStatusEnabled:o,listItemCreatedFunction:"base"===i?l:a,listModeDisabled:n,view:s})}_watchLayersListMode(e){let{layers:t,key:i,callback:s}=e;this.removeHandles(i),t&&!this.listModeDisabled&&this.addHandles((0,o.watch)((()=>t.filter((e=>"listMode"in e)).map((e=>e.listMode)).toArray()),(()=>s())),i)}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter((e=>"hide"!==(0,c.Qv)(e))):void 0}_compileListItems(e){let{layers:t,items:i,key:s,type:l,callback:a}=e;this._watchLayersListMode({layers:t,key:s,callback:a});const o=this._getViewableLayers(t);o?.length?(this._createNewItems({type:l,items:i,layers:o}),this._removeItems({items:i,layers:o}),this._sortItems(i,o)):"base"===l?this._removeAllBaseItems():this._removeAllReferenceItems()}_compileReferenceList(){const{referenceItems:e}=this,t=this.view?.map?.basemap?.referenceLayers;this._compileListItems({type:"reference",layers:t,items:e,key:y,callback:this._compileReferenceList})}_compileBaseList(){const{baseItems:e}=this,t=this.view?.map?.basemap?.baseLayers;this._compileListItems({type:"base",layers:t,items:e,key:u,callback:this._compileBaseList})}_compileLists(){this._compileReferenceList(),this._compileBaseList()}_createNewItems(e){let{items:t,layers:i,type:s}=e;i?.forEach((e=>{t.some((t=>t.layer===e))||t.add(this._createListItem({type:s,layer:e}))}))}_removeItems(e){let{items:t,layers:i}=e;t&&t.forEach((e=>{if(!e)return;const s=i?.some((t=>e.layer===t));s||(this.removeHandles(`${g}-${e.uid}`),t.remove(e),e.destroy())}))}_sortItems(e,t){e&&t&&e.sort(((e,i)=>{const s=t.indexOf(e.layer),l=t.indexOf(i.layer);return s>l?-1:s<l?1:0}))}_removeAllBaseItems(){this.baseItems.drain((e=>{this.removeHandles(`${g}-${e.uid}`),e.destroy()}))}_removeAllReferenceItems(){this.referenceItems.drain((e=>{this.removeHandles(`${g}-${e.uid}`),e.destroy()}))}_baseListItemCreatedFunctionChanged(){this._removeAllBaseItems(),this._compileLists()}_referenceListItemCreatedFunctionChanged(){this._removeAllReferenceItems(),this._compileLists()}_watchBasemapLayers(){const{view:e}=this;if(this.removeHandles([p,_,m,b,f]),!e?.ready)return this._removeAllBaseItems(),void this._removeAllReferenceItems();this._compileLists(),this.addHandles([(0,o.watch)((()=>this.view?.map?.basemap?.baseLayers),(e=>this._createItemChangeHandles({items:e,key:p,callback:this._compileBaseList})),o.initial),(0,o.watch)((()=>this.view?.map?.basemap?.referenceLayers),(e=>this._createItemChangeHandles({items:e,key:_,callback:this._compileReferenceList})),o.initial),(0,o.watch)((()=>this.view?.basemapView?.baseLayerViews),(e=>this._createItemChangeHandles({items:e,key:b,callback:this._compileBaseList})),o.initial),(0,o.watch)((()=>this.view?.basemapView?.referenceLayerViews),(e=>this._createItemChangeHandles({items:e,key:f,callback:this._compileReferenceList})),o.initial)],m)}};(0,s._)([(0,n.MZ)({type:v,readOnly:!0})],L.prototype,"baseItems",void 0),(0,s._)([(0,n.MZ)()],L.prototype,"basemapTitle",null),(0,s._)([(0,n.MZ)()],L.prototype,"baseListItemCreatedFunction",void 0),(0,s._)([(0,n.MZ)()],L.prototype,"checkPublishStatusEnabled",void 0),(0,s._)([(0,n.MZ)({nonNullable:!0})],L.prototype,"listModeDisabled",void 0),(0,s._)([(0,n.MZ)()],L.prototype,"referenceListItemCreatedFunction",void 0),(0,s._)([(0,n.MZ)({type:v,readOnly:!0})],L.prototype,"referenceItems",void 0),(0,s._)([(0,n.MZ)({readOnly:!0})],L.prototype,"state",null),(0,s._)([(0,n.MZ)()],L.prototype,"totalBaseItems",null),(0,s._)([(0,n.MZ)()],L.prototype,"totalReferenceItems",null),(0,s._)([(0,n.MZ)()],L.prototype,"view",void 0),L=(0,s._)([(0,r.$)("esri.widgets.BasemapLayerList.BasemapLayerListViewModel")],L);const I=L}}]);
//# sourceMappingURL=83941.9c6f0146.chunk.js.map