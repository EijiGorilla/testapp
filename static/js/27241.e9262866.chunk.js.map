{"version":3,"file":"static/js/27241.e9262866.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/StreamLayerView.js","../node_modules/@arcgis/core/layers/graphics/controllers/StreamController.js","../node_modules/@arcgis/core/views/3d/layers/graphics/StreamGraphics3DGraphicsPipeline.js","../node_modules/@arcgis/core/views/3d/layers/StreamLayerView3D.js","../node_modules/@arcgis/core/core/CircularArray.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{let i=class extends r{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:o})],i.prototype,\"filter\",void 0),i=s([t(\"esri.views.layers.StreamLayerView\")],i),i};export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import s from\"../../../core/Accessor.js\";import{destroyMaybe as r}from\"../../../core/maybe.js\";import o from\"../../../core/Promise.js\";import{watch as i}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import{featureGeometryTypeKebabDictionary as c}from\"../../../geometry/support/typeUtils.js\";import{StreamFeatureManager as h}from\"../data/StreamFeatureManager.js\";import{createConnection as d}from\"../sources/connections/createConnection.js\";import{EventedSet as l}from\"../../../views/3d/support/EventedSet.js\";const p=2500;let u=class extends t{constructor(e){super(e)}getObjectId(){return this.objectId}};e([a({type:Number,json:{read:!0}})],u.prototype,\"objectId\",void 0),u=e([n(\"esri.layers.graphics.controllers.StreamController.StreamGraphic\")],u);class m{constructor(e){this.onUpdate=e,this._idToGraphic=new Map}destroy(){this._idToGraphic.clear()}add(e){this._idToGraphic.set(e.objectId,e)}get(e){return this._idToGraphic.get(e)}forEach(e){this._idToGraphic.forEach(e)}removeById(e){const t=this._idToGraphic.get(e);return t?(t.sourceLayer=t.layer=null,this._idToGraphic.delete(e),t):null}update(e,t){this.onUpdate(e,t)}get size(){return this._idToGraphic.size}}let y=class extends(o.EsriPromiseMixin(s)){constructor(){super(...arguments),this.isPaused=!1,this.graphics=new l,this._updateInfo={websocket:0,client:0},this._updateIntervalId=null,this._outSpatialReference=null}initialize(){this.addResolvingPromise(this.layer.when((()=>this._startup())))}destroy(){this.clear()}_clearInterval(){null!==this._updateIntervalId&&(clearInterval(this._updateIntervalId),this._updateIntervalId=null)}clear(){this._shutdown(),this.graphics.clear()}get updating(){return!this.connection||\"connected\"===this.connection.connectionStatus}_shutdown(){this._clearInterval(),this.connection=r(this.connection),this.store=r(this.store),this.removeAllHandles()}_startup(){const{layer:e,layerView:t}=this,{spatialReference:s,definitionExpression:r,geometryDefinition:o,objectIdField:a,timeInfo:n,purgeOptions:l,maxReconnectionAttempts:p,maxReconnectionInterval:u,customParameters:y}=e,f=e.geometryType?c.toJSON(e.geometryType):null,g=s,_=t.view.spatialReference;this.clear(),this._set(\"connection\",d(e.parsedUrl,g,_,f,r,o,p,u,y??void 0)),this._outSpatialReference=_.toJSON(),this.store=new m(this._onUpdate.bind(this)),this.featuresManager=new h(this.store,a,n.toJSON(),l);const I=\"startup-watches\";this.removeHandles(I),this.addHandles([e.on(\"send-message-to-socket\",(e=>this.connection.sendMessageToSocket(e))),e.on(\"send-message-to-client\",(e=>this.connection.sendMessageToClient(e))),this.connection.on(\"data-received\",(e=>this._onFeature(e))),this.connection.on(\"message-received\",(e=>this._onWebSocketMessage(e))),i((()=>[e.definitionExpression,e.geometryDefinition,e.purgeOptions]),(()=>this._startup()))],I),this.isPaused||this._initUpdateInterval()}_onWebSocketMessage(e){if(this.layerView.emit(\"message-received\",e),\"type\"in e)switch(e.type){case\"delete\":if(e.objectIds)for(const t of e.objectIds)this.featuresManager.removeById(t);if(e.trackIds)for(const t of e.trackIds)this.featuresManager.removeByTrackId(t);break;case\"clear\":this.store.forEach((e=>this.featuresManager.removeById(e.objectId)))}}_onFeature(e){this._updateInfo.websocket++,this.layerView.hasEventListener(\"data-received\")&&this.layerView.emit(\"data-received\",{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry});try{null==e.geometry||e.geometry.spatialReference||(e.geometry.spatialReference=this._outSpatialReference);const t=u.fromJSON(e);t.sourceLayer=t.layer=this.layer,this.featuresManager.add(t)}catch{}}_onUpdate(e,t){null!=t&&this.graphics.removeMany(t),null!=e&&(this._updateInfo.client+=e.length,this.graphics.addMany(e))}_initUpdateInterval(){this._clearInterval();const{updateInterval:e}=this.layer;let t=performance.now();this._updateIntervalId=setInterval((()=>{const e=performance.now(),s=e-t;if(s>p){t=e;const r=Math.round(this._updateInfo.client/(s/1e3)),o=Math.round(this._updateInfo.websocket/(s/1e3));this._updateInfo.client=0,this._updateInfo.websocket=0,this.layerView.emit(\"update-rate\",{client:r,websocket:o})}this.featuresManager.checkForUpdates()}),e)}pauseStream(){this.isPaused=!0,this._clearInterval()}resumeStream(){this.isPaused=!1,this._initUpdateInterval()}disconnect(){this._shutdown()}connect(){null==this.connection&&this._startup()}clearGraphics(){this.graphics.clear()}};e([a()],y.prototype,\"isPaused\",void 0),e([a({constructOnly:!0})],y.prototype,\"layer\",void 0),e([a({constructOnly:!0})],y.prototype,\"layerView\",void 0),e([a()],y.prototype,\"connection\",void 0),e([a({readOnly:!0})],y.prototype,\"updating\",null),y=e([n(\"esri.layers.graphics.controllers.StreamController\")],y);export{y as StreamController,u as StreamGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{StreamController as t}from\"../../../../layers/graphics/controllers/StreamController.js\";import{Graphics3DGraphicsPipeline as s}from\"./Graphics3DGraphicsPipeline.js\";let c=class extends s{constructor(r){super(r),this.suspendResumeExtentMode=\"computed\"}get connection(){return this.controller?.connection}createController(){return new t({layer:this.layer,layerView:this.layerView})}beforeSetController(){}pause(){this.controller?.pauseStream()}resume(){this.controller?.resumeStream()}disconnect(){this.controller?.disconnect()}connect(){this.controller?.connect()}clear(){this.controller?.clearGraphics()}};r([e()],c.prototype,\"controller\",void 0),r([e()],c.prototype,\"connection\",null),r([e()],c.prototype,\"suspendResumeExtentMode\",void 0),c=r([o(\"esri.views.3d.layers.graphics.StreamGraphics3DGraphicsPipeline\")],c);export{c as StreamGraphics3DGraphicsPipeline};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{watch as t}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{StreamController as o}from\"../../../layers/graphics/controllers/StreamController.js\";import a from\"../../../rest/support/Query.js\";import{isNumber as n}from\"../../../support/guards.js\";import{FeatureLikeLayerView3D as p}from\"./FeatureLikeLayerView3D.js\";import{LayerView3D as c}from\"./LayerView3D.js\";import{StreamGraphics3DGraphicsPipeline as l}from\"./graphics/StreamGraphics3DGraphicsPipeline.js\";import{UpdatePolicy as u}from\"../webgl-engine/lib/UpdatePolicy.js\";import h from\"../../layers/LayerView.js\";import m from\"../../layers/StreamLayerView.js\";let y=class extends(m(p(c(h)))){constructor(){super(...arguments),this.type=\"stream-3d\",this.updatePolicy=u.ASYNC,this.hasZ=!0,this.hasM=!1,this.featureEffect=null}initialize(){this.addHandles(t((()=>this.suspended),(e=>{this.graphicsPipeline&&this._onSuspendedChange(e)})))}get connectionError(){const e=this.graphicsPipeline?.connection?.errorString;return e?new r(\"stream-controller\",e):null}createQuery(){return new a({outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})}queryLatestObservations(e,r){return this.graphicsPipeline.graphicsQuery.executeQueryForLatestObservations(this._ensureQuery(e),r?.signal)}async queryObjectIds(e,r){return(await super.queryObjectIds(e,r)).filter(n)}get _streamConnectionStatus(){return this.graphicsPipeline?.connection?.connectionStatus??\"disconnected\"}async createGraphicsPipeline(){return new l({layerView:this})}createController(){return new o({layer:this.layer,layerView:this})}beforeSetController(){}_doPause(){this.graphicsPipeline?.pause()}_doResume(){this.graphicsPipeline?.resume()}_doDisconnect(){this.graphicsPipeline?.disconnect(),this._doPause()}_doConnect(){this.graphicsPipeline?.connect(),this.resume()}_doClear(){this.graphicsPipeline?.clear()}};e([s({readOnly:!0})],y.prototype,\"updatePolicy\",void 0),e([s({readOnly:!0})],y.prototype,\"connectionError\",null),e([s()],y.prototype,\"graphicsPipeline\",void 0),e([s({readOnly:!0})],y.prototype,\"hasZ\",void 0),e([s({readOnly:!0})],y.prototype,\"hasM\",void 0),e([s()],y.prototype,\"featureEffect\",void 0),e([s({readOnly:!0})],y.prototype,\"_streamConnectionStatus\",null),y=e([i(\"esri.views.3d.layers.StreamLayerView3D\")],y);const d=y;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}peekLast(){return 0===this.size?null:this._buffer[(this._start+(this.size-1))%this.maxSize]}find(t){if(0===this.size)return null;for(const s of this._buffer)if(null!=s&&t(s))return s;return null}clear(t){let s=this.dequeue();for(;null!=s;)t&&t(s),s=this.dequeue()}}export{t as default};\n"],"names":["r","i","resume","this","_isUserPaused","suspended","_doResume","pause","_doPause","disconnect","_doDisconnect","connect","_doConnect","clear","_doClear","constructor","super","arguments","filter","connectionStatus","_streamConnectionStatus","_onSuspendedChange","s","e","prototype","readOnly","type","o","t","u","getObjectId","objectId","a","Number","json","read","n","m","onUpdate","_idToGraphic","Map","destroy","add","set","get","forEach","removeById","sourceLayer","layer","delete","update","size","y","EsriPromiseMixin","isPaused","graphics","l","_updateInfo","websocket","client","_updateIntervalId","_outSpatialReference","initialize","addResolvingPromise","when","_startup","_clearInterval","clearInterval","_shutdown","updating","connection","store","removeAllHandles","layerView","spatialReference","definitionExpression","geometryDefinition","objectIdField","timeInfo","purgeOptions","maxReconnectionAttempts","p","maxReconnectionInterval","customParameters","f","geometryType","c","toJSON","g","_","view","_set","d","parsedUrl","_onUpdate","bind","featuresManager","h","I","removeHandles","addHandles","on","sendMessageToSocket","sendMessageToClient","_onFeature","_onWebSocketMessage","_initUpdateInterval","emit","objectIds","trackIds","removeByTrackId","hasEventListener","attributes","centroid","geometry","fromJSON","removeMany","length","addMany","updateInterval","performance","now","setInterval","Math","round","checkForUpdates","pauseStream","resumeStream","clearGraphics","constructOnly","suspendResumeExtentMode","controller","createController","beforeSetController","updatePolicy","ASYNC","hasZ","hasM","featureEffect","graphicsPipeline","connectionError","errorString","createQuery","outFields","returnGeometry","outSpatialReference","queryLatestObservations","graphicsQuery","executeQueryForLatestObservations","_ensureQuery","signal","queryObjectIds","createGraphicsPipeline","_start","maxSize","_buffer","Array","entries","enqueue","dequeue","peek","peekLast","find"],"sourceRoot":""}