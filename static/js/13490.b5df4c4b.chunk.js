"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[13490,70961],{13490:(e,t,r)=>{r.d(t,{A:()=>j});var s=r(35143),o=r(98773),n=r(19276),i=r(54099),a=r(54901),l=r(50346),c=r(76931),d=r(46053),h=(r(81806),r(76460),r(47249),r(85842)),u=r(19247),p=r(65215),y=r(5262),f=r(30726),g=r(99809),m=r(35384),v=r(66812),w=r(14185),M=r(42151),x=r(56829),_=r(91967),b=r(2413),R=(r(76099),r(54761));let T=class extends _.default{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:b.qv};const t=(0,b.eV)((0,b.Jf)((0,b.vt)(b.qv),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(const r of this.coordinates)e.push([Math.floor(r[0]-t[0])+.5,Math.floor(r[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){const{coordinates:e,rect:t}=this._renderCoordinates,r=(0,b.VL)(t),s=(0,b.uJ)(t);return(0,R.K)("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:r+"px",height:s+"px",visibility:this.visible?"visible":"hidden"}},(0,R.K)("svg",{height:s,styles:{display:"block"},width:r},(0,R.K)("polygon",{fill:this._fillStyle,points:e.map((e=>{let[t,r]=e;return`${t},${r}`})).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),(0,R.K)("polygon",{fill:"transparent",points:e.map((e=>{let[t,r]=e;return`${t},${r}`})).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};(0,s._)([(0,d.MZ)()],T.prototype,"coordinates",void 0),(0,s._)([(0,d.MZ)()],T.prototype,"strokeDash",void 0),(0,s._)([(0,d.MZ)()],T.prototype,"strokeWidth",void 0),(0,s._)([(0,d.MZ)()],T.prototype,"strokeColor",void 0),(0,s._)([(0,d.MZ)()],T.prototype,"strokeDashColor",void 0),(0,s._)([(0,d.MZ)()],T.prototype,"fillColor",void 0),(0,s._)([(0,d.MZ)()],T.prototype,"visible",void 0),(0,s._)([(0,d.MZ)()],T.prototype,"isDecoration",void 0),(0,s._)([(0,d.MZ)({readOnly:!0})],T.prototype,"_strokeStyle",null),(0,s._)([(0,d.MZ)({readOnly:!0})],T.prototype,"_strokeBackgroundStyle",null),(0,s._)([(0,d.MZ)({readOnly:!0})],T.prototype,"_fillStyle",null),(0,s._)([(0,d.MZ)({readOnly:!0})],T.prototype,"_renderCoordinates",null),T=(0,s._)([(0,h.$)("esri.views.overlay.OutlineOverlayItem")],T);const k=T;let S=class extends(i.A.EventedMixin(x.g)){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=e=>this.drawOperation.on(e,(t=>{this._updateVisuals(),this.emit(e,t)}));this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=(0,f.pR)(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){return this.drawOperation?.updating??!1}get cursor(){return"point"===this.geometryType?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new m.O0({view:e,manipulators:this.manipulators,geometryType:Z(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new v.Sl,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){const{drawOperation:e}=this;if(!e?.geometryIncludingUncommittedVertices.length)return[];const{coordinateHelper:t}=e,r=e.committableVertex,s=e.committedVertices.slice();null!=r&&s.push(t.pointToArray(r));const o=s.length;switch(this.geometryType){case"circle":case"rectangle":{const t=new M.vz(g.zK,v.Sl.spatialReference),r="circle"===this.geometryType?w.zV:w.GF,n="circle"===this.geometryType?w.zd:w._T;if(1===o&&e.isCompleted){const e=s[0],o=t.makeMapPoint(e[0]+O,e[1]);return r([e,o],t,!0)?.geometry.rings[0]??[]}if(2===o){const e="rectangle"!==this.geometryType,o=this.centeredToggled!==e,i="rectangle"!==this.geometryType;return(this.uniformSizeToggled!==i?r(s,t,o)?.geometry.rings[0]:n(s,t,o)?.geometry.rings[0])??[]}return[]}}return s}_updateVisuals(){if(!this._overlayItem){const e=new k({strokeDash:[5],strokeDashColor:[255,255,255,255]});this.view.overlay?.addItem(e),this.addHandles((0,a.hA)((()=>{this.view.overlay?.removeItem(e),e?.destroy(),this._overlayItem=void 0}))),this._overlayItem=e}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function Z(e){switch(e){case"polygon":case"point":return e;case"circle":case"rectangle":return"segment"}}(0,s._)([(0,d.MZ)({value:!1})],S.prototype,"centeredToggled",null),(0,s._)([(0,d.MZ)()],S.prototype,"drawOperation",void 0),(0,s._)([(0,d.MZ)({value:!0})],S.prototype,"enabled",null),(0,s._)([(0,d.MZ)({value:!1})],S.prototype,"uniformSizeToggled",null),(0,s._)([(0,d.MZ)({constructOnly:!0})],S.prototype,"geometryType",void 0),(0,s._)([(0,d.MZ)({constructOnly:!0})],S.prototype,"mode",void 0),(0,s._)([(0,d.MZ)({readOnly:!0})],S.prototype,"type",void 0),(0,s._)([(0,d.MZ)({readOnly:!0})],S.prototype,"updating",null),(0,s._)([(0,d.MZ)({constructOnly:!0,nonNullable:!0})],S.prototype,"view",void 0),(0,s._)([(0,d.MZ)()],S.prototype,"cursor",null),S=(0,s._)([(0,h.$)("esri.views.draw.DrawScreenTool")],S);const O=48;var F=r(82307),E=r(53430),C=r(31933),I=r(4955),A=r(55754),W=r(90992);async function z(){return async function(){return r.e(1669).then(r.bind(r,1669))}().then((e=>{let{contains:t,intersects:r,overlaps:s,simplify:o}=e;return{contains:t,intersects:r,overlaps:s,simplify:o}}))}async function P(e){const{currentSelection:t,selector:r,signal:s,sources:o,view:n}=e;if(!o?.length)return{added:[],removed:[]};const{layers:i,layerViews:a,graphicsLayers:c}=function(e){const t=[],r=[],s=[];return e.forEach((e=>{(0,C.yZ)(e)?t.push(e):((0,C.cM)(e)||(0,C.Qz)(e))&&e.layers?.length?t.push(...e.layers.toArray()):(0,C.Rv)(e)&&e.sublayers?.length?s.push(...e.sublayers.toArray()):(0,C.V0)(e)?s.push(e):(0,W.lO)(e)&&r.push(e)})),{layers:t,layerViews:r,graphicsLayers:s}}(o),d=(await(0,l.whenOrAbort)(Promise.all([U(r,i,n,s),V(r,a,n,s),$(r,c,n)]),s)).flat();if(!t)return{added:d,removed:[]};const h=t.toArray(),u=d.filter((e=>!H(h,e))),p=h.filter((e=>!H(d,e)));return t.removeMany(p),t.addMany(u),{added:u,removed:p}}const $=async(e,t,r)=>async function(e){const{selector:t,candidates:r,view:s}=e;if(!r?.length||!t)return[];const{spatialReference:o}=s,n=t,i=await z();return r.filter((e=>e.geometry&&"mesh"!==e.geometry.type&&i.intersects(o,n,e.geometry)))}({candidates:t.flatMap((e=>e.graphics.toArray()))??[],selector:e,view:r}),U=async(e,t,r,s)=>{const o=await(0,l.ignoreAbortErrors)(async function(e){const{layers:t,selector:r,signal:s,view:o}=e;return(0,l.whenOrAbort)(Promise.allSettled(t.map((async e=>e.queryFeatures(function(e,t,r,s){const{outFields:o,geometry:n}=L(t,r,s);return e.outFields=o,e.geometry=n,e.returnGeometry=!0,e.outSpatialReference=s.spatialReference,e}(e.createQuery(),r,e,o),{signal:s}).then((e=>{let{features:t}=e;return t}))))),s)}({selector:e,signal:s,layers:t,view:r}));return o?D(o):[]},V=async(e,t,r,s)=>{const o=await(0,l.ignoreAbortErrors)(async function(e){const{layerViews:t,selector:r,signal:s,view:o}=e;return(0,l.whenOrAbort)(Promise.allSettled(t.map((async e=>{const t=e.createQuery(),{geometry:n}=L(r,e.layer,o);return t.outFields=["*"],t.geometry=n,t.returnGeometry=!0,t.outSpatialReference=o.spatialReference,e.queryFeatures(t,{signal:s}).then((e=>{let{features:t}=e;return t}))}))),s)}({selector:e,signal:s,layerViews:t,view:r}));return o?D(o):[]};function D(e){const t=[];for(let r=0;r<e.length;r++){const s=e[r];"fulfilled"===s.status&&t.push(...s.value)}return t}function H(e,t){if(e.includes(t))return!0;const r=t.getObjectId(),s=null!=r,{layer:o,uid:n}=t;return s?e.some((e=>{if(o===e.layer)return r===e.getObjectId()})):e.some((e=>{if(o===e.layer)return n===e.uid}))}function L(e,t,r){const s="renderer"in t?(0,I.o)({renderer:t.renderer}):0,o="point"===e.type?(0,A.V)(e,s,r):e,n="displayField"in t?t.displayField:null,i=(0,E.getDisplayFieldName)({displayField:n,fields:t.fields}),a=[t.objectIdField];if(null!=i&&t.fieldsIndex.has(i)&&a.push(i),"globalIdField"in t&&null!=t.globalIdField&&t.fieldsIndex.has(t.globalIdField)&&a.push(t.fieldsIndex.get(t.globalIdField).name),(0,C.F2)(t)&&null!=t.subtypeField&&t.fieldsIndex.has(t.subtypeField)&&a.push(t.fieldsIndex.get(t.subtypeField).name),"utilityNetworks"in r.map&&r.map.utilityNetworks?.length&&((0,C.F2)(t)||"feature"===t.type)){const e=t.fieldsIndex.get("assetgroup"),r=t.fieldsIndex.get("assettype");e?.name&&a.push(e.name),r?.name&&a.push(r.name)}return{geometry:o,outFields:a}}let G=class extends i.A.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new n.default,this.sources=null,this._process=(0,l.debounce)((async(e,t)=>{const{callback:r,selector:s,completed:n}=e,i=(0,o.UT)((async e=>{const{options:t,sources:o,selection:i,view:a}=this;if((o?.length||a?.selectionManager.sources.length)&&a){if(s&&null!=o){const r=await P({currentSelection:i,selector:s,signal:e,sources:o,view:a});n&&!1!==t?.persistSelection&&a.selectionManager?.updateSelection({current:i.toArray(),...r})}r&&r()}else i.removeAll()}));return(0,l.onAbort)(t,(()=>i.abort())),this._processTask=i,i.promise}),100)}initialize(){this._setup()}cancel(){this.removeAllHandles(),this._processTask?.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const t=this.options,r=t?.createTool??"rectangle",s=t?.mode??("polygon"===r?"click":"hybrid"),o=Symbol();this._tool=new S({view:e,mode:s,geometryType:r}),t?.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],(()=>(0,l.ignoreAbortErrors)(this._process({selector:this._selectionArea})))),o),this.addHandles([e.on("key-down",(e=>{if(!e.repeat)switch(e.key){case F.NE.constraint:this._tool.uniformSizeToggled=!0,e.stopPropagation();break;case F.NE.center:this._tool.centeredToggled=!0,e.stopPropagation()}})),e.on("key-up",(e=>{switch(e.key){case F.NE.constraint:this._tool.uniformSizeToggled=!1,e.stopPropagation();break;case F.NE.center:this._tool.centeredToggled=!1,e.stopPropagation()}})),this._tool.on("complete",(async e=>{this.removeHandles(o);const t=()=>{this.removeAllHandles(),this.emit("complete",{aborted:e.aborted,selection:this.selection.toArray()})};e.aborted?(this.cancel(),this.selection.removeAll(),t()):await this._process({selector:this._selectionArea,callback:t,completed:!0})}))],o),this.addHandles((0,a.hA)((()=>e.tools.remove(this._tool)))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=(0,c.tc)(),t=this._tool.coordinates,r=this.view.spatialReference,s=t=>{e.x=t[0],e.y=t[1];const{x:r,y:s}=this.view.toMap(e);return[r,s]};if(0===t.length)return;if(1===t.length||t.every((e=>{let[r,s]=e;return r===t[0][0]&&s===t[0][1]}))){const[e,o]=s(t[0]);return new u.default({x:e,y:o,spatialReference:r})}const o=t.map(s);return 0!==o.length?((0,y.$3)(o)||o.reverse(),new p.default({spatialReference:r,rings:[o]})):void 0}};(0,s._)([(0,d.MZ)()],G.prototype,"options",void 0),(0,s._)([(0,d.MZ)({readOnly:!0})],G.prototype,"selection",void 0),(0,s._)([(0,d.MZ)()],G.prototype,"sources",void 0),(0,s._)([(0,d.MZ)({constructOnly:!0})],G.prototype,"view",void 0),G=(0,s._)([(0,h.$)("esri.widgets.support.Selector2D.SelectionOperation")],G);const j=G},14185:(e,t,r)=>{r.d(t,{GF:()=>x,LZ:()=>w,N6:()=>M,_T:()=>_,eq:()=>v,zV:()=>Z,zd:()=>O});var s=r(18690),o=r(53084),n=r(31633),i=r(20664),a=r(9392),l=r(70961),c=r(63391),d=r(66388),h=r(19247),u=r(65215),p=r(23701),y=r(5262),f=r(80963),g=r(42151);function m(e,t){const r=new h.default({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(r.z=e[2]),r}function v(e,t){return new d.default({points:e,spatialReference:t})}function w(e,t,r){const s=new p.default({paths:e,spatialReference:t});return r&&(0,y._7)(s),s}function M(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=(0,o.clone)(e);i.forEach((e=>{const t=e[0],r=e[e.length-1];(0,s.aI)(t,r)&&1!==e.length||e.push(e[0])}));let a=new u.default({rings:i,spatialReference:t});return a.rings.forEach((e=>{(0,y.$3)(e)||e.reverse()})),r&&(0,y._7)(a),n&&a.isSelfIntersecting&&(0,f.fn)(t)&&(a=(0,c.simplify)(a)),a}function x(e,t,r){const o=t.mapToLocalMultiple(e),n=[],i={x:o[0].x,y:o[0].y},a=o[1].x,l=o[1].y,c=Math.round(a-i.x),d=Math.round(l-i.y),h=Math.max(Math.abs(c),Math.abs(d));if(r){const e={x:i.x+h,y:i.y+h},t={x:i.x-h,y:i.y-h};n.push((0,g.E5)(e.x,t.y),(0,g.E5)(t.x,t.y),(0,g.E5)(t.x,e.y),(0,g.E5)(e.x,e.y))}else{const e={x:c>0?i.x+h:i.x-h,y:d>0?i.y+h:i.y-h};n.push((0,g.E5)(i.x,i.y),(0,g.E5)(e.x,i.y),(0,g.E5)(e.x,e.y),(0,g.E5)(i.x,e.y))}return b(M([n.map((e=>t.localToMap(e))).filter(s.Ru)],t.spatialReference,t.doUnnormalization,!0),n,t)}function _(e,t,r){let o=t.mapToLocalMultiple(e);if(1===o.length){const e=48,t=o[0];o=[(0,g.E5)(t.x-e,t.y+e),(0,g.E5)(t.x+e,t.y-e),(0,g.E5)(t.x+e,t.y-e),(0,g.E5)(t.x-e,t.y+e)]}const n=[],i={x:o[0].x,y:o[0].y},a={x:o[1].x,y:o[1].y};if(r){const e=Math.round(a.x-i.x),t=Math.round(a.y-i.y);n.push((0,g.E5)(i.x-e,i.y-t),(0,g.E5)(a.x,i.y-t),(0,g.E5)(a.x,a.y),(0,g.E5)(i.x-e,a.y))}else n.push((0,g.E5)(i.x,i.y),(0,g.E5)(a.x,i.y),(0,g.E5)(a.x,a.y),(0,g.E5)(i.x,a.y));return b(M([n.map((e=>t.localToMap(e))).filter(s.Ru)],t.spatialReference,t.doUnnormalization,!0),n,t)}function b(e,t,r){const s=R(t[3],t[2],r),o=R(t[1],t[2],r),n=R(t[0],t[1],r),i=R(t[0],t[3],r);return{geometry:e,midpoints:null!=s&&null!=o&&null!=n&&null!=i?{top:s,right:o,bottom:n,left:i}:null}}function R(e,t,r){k[0]=e.x,k[1]=e.y,k[2]=0,S[0]=t.x,S[1]=t.y,S[2]=0,(0,i.m)(k,k,S,.5),T.x=k[0],T.y=S[1],T.z=S[2];const s=r.localToMap(T);return null!=s?m(s,r.spatialReference):null}const T=(0,g.E5)(0,0,0),k=(0,a.vt)(),S=(0,a.vt)();function Z(e,t,r,s){const o=t.mapToLocalMultiple(e);let i=null,a=null;if(r)i=o[0],a=o[1];else{const e=o[0],t=o[1],r=Math.round(t.x-e.x),s=Math.round(t.y-e.y),n=Math.max(Math.abs(r),Math.abs(s));i=(0,g.E5)(r>0?e.x+n/2:e.x-n/2,s>0?e.y+n/2:e.y-n/2),a=(0,g.E5)(Math.abs(r)>Math.abs(s)?i.x-n/2:i.x,Math.abs(r)>Math.abs(s)?i.y:i.y-n/2)}const d=t.localToMap(i),h=t.localToMap(a);if(null==d||null==h)return null;t.doUnnormalization&&(0,y.JM)([[d,h]],t.spatialReference);const u=m(d,t.spatialReference),p=m(h,t.spatialReference),v=(0,n.GA)(t.spatialReference);let w=0;if((0,f.fn)(t.spatialReference))w=v*(0,c.distance)(u,p,null);else{const e=i.x-a.x,t=i.y-a.y;w=v*Math.sqrt(e*e+t*t)*(s||1)}const x=new l.default({center:u,radius:w,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:M(x.rings,x.spatialReference,!1),center:u,edge:p}}function O(e,t,r){const o=t.mapToLocalMultiple(e),n=o[0],i=o[1],a=Math.round(i.x-n.x),l=Math.round(i.y-n.y),c=(0,g.E5)(r?n.x:n.x+a/2,r?n.y:n.y+l/2),d=r?a:a/2,h=r?l:l/2,u=[],p=2*Math.PI/60;function y(e){const t=Math.cos(e),r=Math.sin(e);return(0,g.E5)(d*t+c.x,h*r+c.y)}for(let s=0;s<60;s++)u.push(y(s*p));u.push(u[0]);const{spatialReference:f,doUnnormalization:v}=t,w=M([u.map((e=>t.localToMap(e))).filter(s.Ru)],f,v,!1),x=t.localToMap(y(Math.PI/2)),_=t.localToMap(y(0)),b=t.localToMap(y(-Math.PI/2)),R=t.localToMap(y(Math.PI));return{geometry:w,midpoints:null!=x&&null!=_&&null!=b&&null!=R?{top:m(x,f),right:m(_,f),bottom:m(b,f),left:m(R,f)}:null}}},42151:(e,t,r)=>{r.d(t,{E5:()=>p,ZP:()=>m,vz:()=>f});var s=r(18690),o=r(94967),n=r(99809),i=r(60008),a=r(4336),l=r(20664),c=r(9392),d=r(19247),h=r(5568);function u(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=r?[e,t,r]:[e,t]}function p(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=r?{x:e,y:t,z:r}:{x:e,y:t}}class y{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map((e=>this.mapToLocal(e))).filter(s.Ru)}get doUnnormalization(){return!1}}class f extends y{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(t),this._defaultZ=r,this.transform=(0,n.vt)(),this.transformInv=(0,n.vt)(),this.transform=(0,n.o8)(e),(0,o.B8)(this.transformInv,this.transform)}makeMapPoint(e,t){return u(e,t,this._defaultZ)}mapToLocal(e){return p(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return u(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class g extends y{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,c.vt)(),this.tangentFrameUpWS=(0,c.vt)(),this.tangentFrameRightWS=(0,c.vt)(),this.tangentFrameForwardWS=(0,c.vt)(),this.localFrameRightWS=(0,c.vt)(),this.localFrameUpWS=(0,c.vt)(),this.worldToLocalTransform=(0,a.vt)(),this.localToWorldTransform=(0,a.vt)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const r=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,h._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,h._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,h._.Z,this.tangentFrameForwardWS);const s=(0,c.vt)();(0,l.h)(s,this.tangentFrameForwardWS,(0,l.f)(r,this.tangentFrameForwardWS)),(0,l.d)(this.localFrameRightWS,r,s),(0,l.n)(this.localFrameRightWS,this.localFrameRightWS),(0,l.e)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,i.Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,i.B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return u(e,t,this.defaultZ)}mapToLocal(e){const t=(0,c.vt)();this.view.renderCoordsHelper.toRenderCoords(new d.default({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.worldToLocalTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(t,new d.default({spatialReference:this.view.spatialReference}));return null!=r?p(r.x/this.scale,r.y/this.scale):null}localToMap(e){const t=(0,c.vt)();this.view.renderCoordsHelper.toRenderCoords(new d.default({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,l.w)(t,t,this.localToWorldTransform);const r=this.view.renderCoordsHelper.fromRenderCoords(t,new d.default({spatialReference:this.view.spatialReference}));return null!=r?u(r.x,r.y,this.defaultZ):null}}function m(e,t){if("2d"===e.type)return new f(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const r=t.length>2?new d.default({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new d.default({x:t[0],y:t[1],spatialReference:e.spatialReference});return new g(e,r)}return null}},70961:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var s,o=r(35143),n=r(31633),i=r(46053),a=(r(81806),r(76460),r(47249),r(85842)),l=r(34111),c=r(19247),d=r(65215),h=r(13312),u=r(7137),p=r(45417),y=r(85996);let f=s=class extends d.default{constructor(e){super(e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const e=this.center,t=this.numberOfPoints;if(this.hasZ=e?.hasZ??!1,0!==this.rings.length||!e)return;const r=(0,n.oU)(this.radius,this.radiusUnit,"meters"),s=e.spatialReference;let o,i="geographic";if(s.isWebMercator?i="webMercator":(null!=(s.wkid&&y.A[s.wkid])||(s.wkt2||s.wkt)&&(0,n.x1)(s.wkt2||s.wkt))&&(i="projected"),this.geodesic){let s;switch(i){case"webMercator":s=(0,p.webMercatorToGeographic)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":s=e}o=this._createGeodesicCircle(s,r,t),"webMercator"===i&&(o=(0,p.geographicToWebMercator)(o))}else{let s;"webMercator"===i||"projected"===i?s=r/(0,n.Ao)(e.spatialReference):"geographic"===i&&(s=(0,n.vl)(r,"meters",(0,l.tO)(e.spatialReference).radius)),o=this._createPlanarCircle(e,s,t)}this.spatialReference=o.spatialReference,this.addRing(o.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:r,radiusUnit:o,geodesic:n}=this;return new s({center:e?.clone(),numberOfPoints:t,radius:r,radiusUnit:o,geodesic:n})}_createGeodesicCircle(e,t,r){const s=[],o=[e.x,e.y];for(let n=0;n<360;n+=360/r){const r=this.hasZ?[0,0,e.z??0]:[0,0];(0,u.directGeodeticSolver)(r,o,n,t,h.default.WGS84),s.push(r)}return s.push(s[0]),new d.default({rings:[s]})}_createPlanarCircle(e,t,r){const s=[],o=2*Math.PI/r;for(let n=0;n<r;++n){const r=o*n,i=[e.x+Math.cos(-r)*t,e.y+Math.sin(-r)*t];this.hasZ&&i.push(e.z??0),s.push(i)}return s.push(s[0]),new d.default({spatialReference:e.spatialReference,rings:[s]})}};(0,o._)([(0,i.MZ)({type:c.default})],f.prototype,"center",void 0),(0,o._)([(0,i.MZ)()],f.prototype,"geodesic",void 0),(0,o._)([(0,i.MZ)()],f.prototype,"numberOfPoints",void 0),(0,o._)([(0,i.MZ)()],f.prototype,"radius",void 0),(0,o._)([(0,i.MZ)()],f.prototype,"radiusUnit",void 0),f=s=(0,o._)([(0,a.$)("esri.geometry.Circle")],f);const g=f}}]);
//# sourceMappingURL=13490.b5df4c4b.chunk.js.map