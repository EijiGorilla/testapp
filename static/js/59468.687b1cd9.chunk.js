"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[14843,59468],{14843:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(35143),o=n(91967),i=n(76460),s=n(68134),l=n(46053),a=n(85842),d=n(81835),c=n(23695),h=n(20728),u=n(92521),p=n(68814),y=n(53203),v=n(60403);let g=class extends o.default{constructor(e){super(e),this.view=null,this._weatherByType={sunny:new p.default,cloudy:new d.default,rainy:new h.default,snowy:new u.default,foggy:new c.default},this._settingWeather=!1}initialize(){this.addHandles([(0,s.watch)((()=>this.current),(e=>{this._settingWeather||null==e||(this._weatherByType={...this._weatherByType,[e.type]:e})}),s.syncAndInitial)])}get state(){const e=this.view;return null!=e&&e.ready?null!=this.error?this.error===v.F.NotVisible?v.u.Ready:v.u.Error:v.u.Ready:v.u.Disabled}get weatherByType(){return this._weatherByType}get error(){const e=this.view;return null!=e&&e.ready?"3d"!==e.type?v.F.UnsupportedView:"local"===e.viewingMode?v.F.LocalScene:e.environment.atmosphereEnabled?e.environment.weatherAvailable?null:v.F.NotVisible:v.F.NoAtmosphere:null}get current(){return this._environment?.weather??this._weatherByType.sunny}set current(e){const t=this._environment;t&&(t.weather=e)}get _environment(){const e=this.view;return null!=e&&"3d"===e.type?e.environment:null}setWeatherByType(e){if(!(0,y.TJ)(e,i.A.getLogger(this)))return;const t=this._environment;null!=t&&(this._settingWeather=!0,t.weather=this._weatherByType[e],this._settingWeather=!1)}setSnowCoverEnabled(e){const t=this.current;"snowCover"in t&&(t.snowCover=e?"enabled":"disabled")}};(0,r._)([(0,l.MZ)()],g.prototype,"view",void 0),(0,r._)([(0,l.MZ)()],g.prototype,"state",null),(0,r._)([(0,l.MZ)()],g.prototype,"_weatherByType",void 0),(0,r._)([(0,l.MZ)()],g.prototype,"weatherByType",null),(0,r._)([(0,l.MZ)()],g.prototype,"error",null),(0,r._)([(0,l.MZ)()],g.prototype,"current",null),(0,r._)([(0,l.MZ)()],g.prototype,"_environment",null),g=(0,r._)([(0,a.$)("esri.widgets.Weather.WeatherViewModel")],g);const w=g},59468:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(35143),o=n(56002),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),l=n(53203),a=n(25329),d=n(94126),c=n(98108),h=n(87540),u=n(76099),p=n(63582),y=n(54761);const v="esri-weather",g={base:v,content:`${v}__content`,hasError:`${v}__content--has-error`,selector:`${v}__selector`,options:`${v}__options`,optionsHidden:`${v}__options--hidden`,error:`${v}__error`,warning:`${v}__warning`},w={base:`${v}__labeled-slider`};var b=n(60403);let _=class extends a.default{constructor(e){super(e),this._onChange=e=>{this.onChange(e.currentTarget.value)}}render(){const{label:e}=this;return(0,y.K)("div",{class:w.base},(0,y.K)("calcite-label",{scale:"s"},e,(0,y.K)("calcite-slider",{"aria-label":e,disabled:this.disabled,max:1,min:0,step:.01,value:this.value,onCalciteSliderChange:this._onChange,onCalciteSliderInput:this._onChange})))}loadDependencies(){return(0,d.W)({label:()=>Promise.resolve().then(n.bind(n,11839)),slider:()=>n.e(83566).then(n.bind(n,83566))})}};(0,r._)([(0,i.MZ)()],_.prototype,"value",void 0),(0,r._)([(0,i.MZ)()],_.prototype,"onChange",void 0),(0,r._)([(0,i.MZ)()],_.prototype,"disabled",void 0),_=(0,r._)([(0,s.$)("esri.widgets.Weather.LabeledSlider")],_);var C=n(91967);let m=class extends C.default{constructor(e){super(e),this.header=!0}};(0,r._)([(0,i.MZ)({type:Boolean,nonNullable:!0})],m.prototype,"header",void 0),m=(0,r._)([(0,s.$)("esri.widgets.Weather.VisibleElements")],m);const M=m;var f=n(14843);const k={sunny:"brightness",cloudy:"partly-cloudy",rainy:"rain",snowy:"snow",foggy:"fog"};let K=class extends a.default{constructor(e){super(e),this.viewModel=new f.default,this.headingLevel=4,this.visibleElements=new M,this._renderWeatherTypeButton=e=>{const t=this.viewModel,n=this.messages[e].label,r=t.state===b.u.Disabled,o=!r&&t.current.type===e;return(0,y.K)("calcite-button",{appearance:o?"solid":"outline","aria-checked":o?"true":"false",disabled:r,iconStart:k[e],key:`${e}-type-button`,kind:o?"brand":"neutral",label:n,onclick:()=>{o||t.setWeatherByType(e)},scale:"l",title:n})},this._memoizedCallbacks=(0,o.B)((e=>({onCloudCoverChange:t=>{"cloudCover"in e&&(e.cloudCover=t)},onPrecipitationChange:t=>{"precipitation"in e&&(e.precipitation=t)},onFogStrengthChange:t=>{"fogStrength"in e&&(e.fogStrength=t)},onSnowCoverChange:e=>{this.viewModel.setSnowCoverEnabled(e.currentTarget.checked)}})))}render(){const e=this.viewModel.state===b.u.Disabled;return(0,y.K)("div",{"aria-label":this.messages.widgetLabelAccessible,class:this.classes(g.base,c.D.widget,e&&c.D.widgetDisabled),role:"region"},this._renderContent())}loadDependencies(){return(0,d.W)({button:()=>Promise.resolve().then(n.bind(n,43285)),checkbox:()=>Promise.resolve().then(n.bind(n,64990)),icon:()=>Promise.resolve().then(n.bind(n,16702)),label:()=>Promise.resolve().then(n.bind(n,11839))})}get view(){return this.viewModel?.view}set view(e){this.viewModel&&(this.viewModel.view=e)}get icon(){return"partly-cloudy"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get _errorMessage(){const e=this.messages.error;switch(this.viewModel.error){case b.F.LocalScene:return e.localScene;case b.F.NoAtmosphere:return e.noAtmosphere;case b.F.UnsupportedView:return e.unsupported;default:return null}}get _warningMessage(){return this.viewModel.error===b.F.NotVisible&&null!=this.view&&"3d"===this.view?.type&&this.view.environment.atmosphereEnabled?this.messages.error.notVisible:null}_renderContent(){const{headingLevel:e,messages:t,viewModel:n,visibleElements:r}=this,o=this._warningMessage,i=n.current,s=n.state===b.u.Error;return(0,y.K)(y.w,null,r.header?(0,y.K)(h.D,{level:e},t.widgetLabel):null,s?(0,y.K)("div",{class:g.error,key:"error"},this._errorMessage):null,(0,y.K)("div",{class:(0,u.Ly)({[g.content]:!0,[g.hasError]:s}),key:"content"},(0,y.K)("div",{"aria-label":t.weatherType,class:g.selector,key:"type-selector",role:"radiogroup"},l.l2.map(this._renderWeatherTypeButton)),Object.values(n.weatherByType).map((e=>(0,y.K)("div",{class:(0,u.Ly)({[g.options]:!0,[g.optionsHidden]:e.type!==i?.type}),key:"options-container"},this._renderOptions(e)))),null!=o?this._renderWarning(o):null))}_renderOptions(e){const{viewModel:t,messages:n}=this,r=t.state===b.u.Disabled,o=this._memoizedCallbacks(e);switch(e.type){case"sunny":return(0,y.K)(_,{disabled:r,key:"sunny-cover",label:n.sunny.cloudCover,value:e.cloudCover,onChange:o.onCloudCoverChange});case"cloudy":return(0,y.K)(_,{disabled:r,key:"cloudy-cover",label:n.cloudy.cloudCover,value:e.cloudCover,onChange:o.onCloudCoverChange});case"rainy":return(0,y.K)(y.w,null,(0,y.K)(_,{disabled:r,key:"rainy-cover",label:n.rainy.cloudCover,value:e.cloudCover,onChange:o.onCloudCoverChange}),(0,y.K)(_,{disabled:r,key:"rainy-precipitation",label:n.rainy.precipitation,value:e.precipitation,onChange:o.onPrecipitationChange}));case"snowy":return(0,y.K)(y.w,null,(0,y.K)(_,{disabled:r,key:"snowy-cloud-cover",label:n.snowy.cloudCover,value:e.cloudCover,onChange:o.onCloudCoverChange}),(0,y.K)(_,{disabled:r,key:"snowy-precipitation",label:n.snowy.precipitation,value:e.precipitation,onChange:o.onPrecipitationChange}),(0,y.K)("calcite-label",{key:"snow-cover",layout:"inline",scale:"s",title:n.snowy.snowCoverTooltip},(0,y.K)("calcite-checkbox",{checked:"enabled"===e.snowCover,disabled:r,onCalciteCheckboxChange:o.onSnowCoverChange}),n.snowy.snowCover));case"foggy":return(0,y.K)(_,{disabled:r,key:"foggy-cover",label:n.foggy.fogStrength,value:e.fogStrength,onChange:o.onFogStrengthChange})}}_renderWarning(e){return(0,y.K)("div",{class:g.warning,key:"warning"},(0,y.K)("calcite-icon",{icon:"exclamation-mark-triangle",scale:"s"}),e)}};(0,r._)([(0,i.MZ)()],K.prototype,"viewModel",void 0),(0,r._)([(0,i.MZ)()],K.prototype,"view",null),(0,r._)([(0,i.MZ)()],K.prototype,"headingLevel",void 0),(0,r._)([(0,i.MZ)({type:M,nonNullable:!0})],K.prototype,"visibleElements",void 0),(0,r._)([(0,i.MZ)()],K.prototype,"icon",null),(0,r._)([(0,i.MZ)()],K.prototype,"label",null),(0,r._)([(0,i.MZ)(),(0,p.G)("esri/widgets/Weather/t9n/Weather")],K.prototype,"messages",void 0),(0,r._)([(0,i.MZ)()],K.prototype,"_errorMessage",null),(0,r._)([(0,i.MZ)()],K.prototype,"_warningMessage",null),K=(0,r._)([(0,s.$)("esri.widgets.Weather")],K);const S=K},60403:(e,t,n)=>{var r,o;n.d(t,{F:()=>o,u:()=>r}),function(e){e.Disabled="disabled",e.Ready="ready",e.Error="error"}(r||(r={})),function(e){e.NotVisible="not-visible",e.LocalScene="local-scene",e.NoAtmosphere="no-atmosphere",e.UnsupportedView="unsupported-view"}(o||(o={}))}}]);
//# sourceMappingURL=59468.687b1cd9.chunk.js.map