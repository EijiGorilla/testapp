{"version":3,"file":"static/js/27824.63793b44.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/widgets/ElevationProfile/ElevationProfileLineView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Color.js\";import{handlesGroup as r}from\"../../core/handleUtils.js\";import{memoize as i}from\"../../core/memoize.js\";import{watch as o,on as n}from\"../../core/reactiveUtils.js\";import{union as s}from\"../../core/SetUtils.js\";import{getMetersPerVerticalUnitForSR as l}from\"../../core/unitUtils.js\";import{property as c}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{i as u}from\"../../chunks/vec32.js\";import{create as p}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getReferenceEllipsoid as d}from\"../../geometry/ellipsoidUtils.js\";import{create as m,fromPoints as v}from\"../../geometry/support/ray.js\";import{GeometryDescriptor as y}from\"../../layers/support/ElevationQuery.js\";import{externalToInternalIntersectOptions as f}from\"../../views/3d/support/hitTest.js\";import{newIntersector as h}from\"../../views/3d/webgl-engine/lib/Intersector.js\";import{StoreResults as w}from\"../../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as _}from\"../../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";import g from\"./ElevationProfileLine.js\";const j=2e5;let b=class extends g{constructor(e){super(e),this.type=\"view\",this.color=new t(\"#cf4ccf\"),this.viewVisualizationEnabled=!0,this.include=null,this.exclude=null,this.numSamplesForPreview=50,this.numSamplesPerChunk=25,this._getQueryElevationDependencies=i(((e,t,r,i,o,n,s)=>({inputGraphicUid:null!=e?x(e):null,visibleLayers:t,maxIntersectionDistance:r,intersectOptions:i,view:o,stationary:n,spatialReference:s}))),this._vecA=p(),this._vecB=p(),this._ray=m()}get minDemResolution(){const e=this._viewModel?.view;if(null==e||\"3d\"!==e.type)return null;const t=e.pointsOfInterest?.focus?.worldUnitsPerContentPixel;return null==t?null:t*l(e.spatialReference)}get queryElevationDependencies(){const e=this._view;return e?this._getQueryElevationDependencies(this._viewModel?.input,this._visibleLayers,this._maxIntersectionDistance,this._intersectOptions,e,e.stationary,e.spatialReference):null}get _visibleLayers(){return this._view?.map?.allLayers?.filter((e=>e.visible)).toArray()??[]}get _intersectOptions(){const e=this._view;if(null==e||e.destroyed)return{};const t=f(e,{include:this.include,exclude:this.exclude}),r=f(e,{exclude:this._pointCloudLayers});return t.exclude=s(t.exclude,r.exclude),t}get _pointCloudLayers(){const e=this._view;return null==e?[]:e.allLayerViews.toArray().filter((e=>\"point-cloud\"===e.layer?.type)).map((e=>e.layer))}get _view(){const e=this._viewModel?.view;return null!=e&&\"3d\"===e.type?e:null}get _maxIntersectionDistance(){const e=this._view;return e?.renderCoordsHelper?d(e.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY}get _intersector(){const e=this._view;if(null==e)return null;const t=h(e.state.viewingMode),r=t.options;return r.hud=!1,r.invisibleTerrain=!1,r.backfacesTerrain=!1,r.selectionMode=!1,r.store=w.ALL,t}async queryElevation(e,{noDataValue:t,signal:r}){const i=this.queryElevationDependencies;if(null==i)throw new Error(\"ElevationProfileLineInput: no dependencies\");const o=this._intersector;if(null==o)throw new Error(\"ElevationProfileLineInput: no view\");const{intersectOptions:n,view:s,spatialReference:l}=i,c=s.renderCoordsHelper,a=s.sceneIntersectionHelper,p=this._vecA,d=this._vecA,m=this._vecB,f=this._ray;if(!l)return{geometry:e,noDataValue:t};const h=await y.fromGeometry(e).project(l,r);if(!h)return{geometry:e,noDataValue:t};const w=h.coordinates,_=w.length;for(let y=0;y<_;++y){const e=w[y];u(m,e.x,e.y,e.z??0),c.toRenderCoords(m,l,m),c.setAltitude(p,j,m);const r=v(p,m,f);a.computeIntersection(r,o,n,!0);const s=I(i,o.results.all);s?(s.getIntersectionPoint(d),c.fromRenderCoords(d,d,l),e.z=d[2]):e.z=t}return{geometry:h.export(),noDataValue:t}}attach(e){const t=()=>this._onChange();return r([super.attach(e),o((()=>this.queryElevationDependencies),t),n((()=>e.elevationProvider),\"elevation-change\",t,{onListenerAdd:t,onListenerRemove:t})])}};function I({view:e,inputGraphicUid:t,maxIntersectionDistance:r},i){for(const o of i){if(!o.withinDistance(r))continue;const i=_(o,e);if(null==i||x(i)!==t)return o}return null}function x(e){if(e.layer&&\"objectIdField\"in e.layer){const t=e.attributes[e.layer.objectIdField];if(t)return`o-${e.layer.id}-${t}`}return`u-${e.uid}`}e([c({type:t,nonNullable:!0})],b.prototype,\"color\",void 0),e([c()],b.prototype,\"viewVisualizationEnabled\",void 0),e([c()],b.prototype,\"include\",void 0),e([c()],b.prototype,\"exclude\",void 0),e([c({readOnly:!0})],b.prototype,\"minDemResolution\",null),e([c()],b.prototype,\"queryElevationDependencies\",null),e([c()],b.prototype,\"_visibleLayers\",null),e([c()],b.prototype,\"_intersectOptions\",null),e([c()],b.prototype,\"_pointCloudLayers\",null),e([c()],b.prototype,\"_view\",null),e([c()],b.prototype,\"_maxIntersectionDistance\",null),e([c()],b.prototype,\"_intersector\",null),b=e([a(\"esri.widgets.ElevationProfile.ElevationProfileLineView\")],b);const L=b;export{L as default};\n"],"names":["b","g","constructor","e","super","this","type","color","t","viewVisualizationEnabled","include","exclude","numSamplesForPreview","numSamplesPerChunk","_getQueryElevationDependencies","i","r","o","n","s","inputGraphicUid","x","visibleLayers","maxIntersectionDistance","intersectOptions","view","stationary","spatialReference","_vecA","p","_vecB","_ray","m","minDemResolution","_viewModel","pointsOfInterest","focus","worldUnitsPerContentPixel","l","queryElevationDependencies","_view","input","_visibleLayers","_maxIntersectionDistance","_intersectOptions","map","allLayers","filter","visible","toArray","destroyed","f","_pointCloudLayers","allLayerViews","layer","renderCoordsHelper","d","radius","unitInMeters","Number","POSITIVE_INFINITY","_intersector","h","state","viewingMode","options","hud","invisibleTerrain","backfacesTerrain","selectionMode","store","w","ALL","queryElevation","_ref","noDataValue","signal","Error","c","a","sceneIntersectionHelper","geometry","y","fromGeometry","project","coordinates","_","length","u","z","toRenderCoords","setAltitude","v","computeIntersection","I","results","all","getIntersectionPoint","fromRenderCoords","export","attach","_onChange","elevationProvider","onListenerAdd","onListenerRemove","_ref2","withinDistance","attributes","objectIdField","id","uid","nonNullable","prototype","readOnly","L"],"sourceRoot":""}