"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[27208,46481,84171],{27208:(e,t,i)=>{i.r(t),i.d(t,{getAgeExpressions:()=>d,supportedAgeUnits:()=>l,verifyDates:()=>o});var a=i(50076),s=i(42633),n=i(11563);const r=new Set(["date","number"]),l=["years","months","days","hours","minutes","seconds"];function o(e,t,i,n){const l=[];let o=null;return[t,i].every((t=>{const i=(0,s.Lk)(e,t);return i&&l.push(i),!!i}))?l[0]===l[1]?"field"===l[0]?t===i&&(o=new a.default(n,"'startTime' and 'endTime' parameters cannot be identical")):o=new a.default(n,"Invalid combination of 'startTime' and 'endTime' parameters"):r.has(l[0])&&r.has(l[1])&&(o=new a.default(n,"Invalid combination of 'startTime' and 'endTime' parameters")):o=new a.default(n,"'startTime' and 'endTime' parameters must be one of these values: a date object, unix epoch time, name of a valid date field or <now>"),o}function u(e,t,i){let a;return a="number"===t?e:"date"===t?e.getTime():'$feature["'+e+'"]',"var "+i+" = "+a+";"}function m(e,t,i,a){const n=(0,s.Lk)(e,t),r=(0,s.Lk)(e,i),l=[u(t,n,"startTime"),u(i,r,"endTime"),`var retVal = null;\n\n    if (startTime != null && endTime != null) {\n      startTime = Date(startTime);\n      endTime = Date(endTime);\n      retVal = DateDiff(endTime, startTime, "${a}");\n    }\n\n    return retVal;`],o=[];return"field"===n&&o.push(t),"field"===r&&o.push(i),function(e){const t=e.map((e=>`$feature["${e}"];`));return t.length?t.join("\n")+"\n":""}(o)+l.join("\n")}function d(e){const{layer:t,startTime:i,endTime:a}=e,r=(0,n.Jg)(t),l=e.unit||"days",o=(0,s.aM)(r,i,a,l);return{valueExpression:m(r,i,a,l),statisticsQuery:o,histogramQuery:o}}},46481:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var a=i(50076),s=i(53430),n=i(28383),r=i(90494),l=i(42633),o=i(11563);const u=[...s.numericTypes,...l.i3,"time-only","string"];async function m(e){const{layerAdapter:t,...i}=await async function(e){if(!e?.layer||!(e.field||e.valueExpression||e.sqlExpression))throw new a.default("summary-statistics:missing-parameters","'layer' and 'field', 'valueExpression' or 'sqlExpression' parameters are required");if(e.valueExpression&&!e.sqlExpression&&!e.view)throw new a.default("summary-statistics:missing-parameters","View is required when 'valueExpression' is specified");e.forBinning&&(0,r.p)(e,"summary-statistics");const{layer:t,...i}=e,m=e.forBinning?o.Mi:o.G3,d=(0,o.Jg)(t,m,e.forBinning);if(!d)throw new a.default("summary-statistics:invalid-parameters","'layer' must be one of these types: "+(0,o.Ho)(m).join(", "));const f={layerAdapter:d,...i};f.normalizationType=(0,l.Wy)(f);const p=null!=f.signal?{signal:f.signal}:null;await d.load(p);const c=f.field,w=f.normalizationType,y=f.valueExpression||f.sqlExpression,v=c?d.getField(c):null,g=await(0,l.EG)({field:f.field,normalizationField:f.normalizationField,valueExpression:f.valueExpression}),T=(0,n.MH)(d,g,"summary-statistics:invalid-parameters");if(T)throw T;if(v){const e=(0,n.a)(d,v,"summary-statistics:invalid-parameters",u);if(e)throw e;if(((0,l.fs)(v)||(0,s.isTimeOnlyField)(v))&&w)throw new a.default("summary-statistics:invalid-parameters","Normalization is not allowed for date fields")}else if(y&&w)throw new a.default("summary-statistics:invalid-parameters","Normalization is not allowed when 'valueExpression' or 'sqlExpression' is specified");f.filter&&!f.filter.spatialRelationship&&(f.filter.spatialRelationship="intersects");const h=(0,n.Wk)(f.filter,"summary-statistics:invalid-parameters");if(h)throw h;return f}(e);return t.summaryStatistics(i)}},84171:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var a=i(50076),s=i(46481),n=i(27208),r=i(11563);async function l(e){const{layerAdapter:t,...i}=await async function(e){if(!(e&&e.layer&&e.startTime&&e.endTime&&e.unit))throw new a.default("summary-statistics-for-age:missing-parameters","'layer', 'startTime', 'endTime' and 'unit' parameters are required");const{layer:t,...i}=e,s=(0,r.Jg)(t,r.J4);if(!s)throw new a.default("summary-statistics-for-age:invalid-parameters","'layer' must be one of these types: "+(0,r.Ho)(r.J4).join(", "));const l={layerAdapter:s,...i},o=l.view,u=null!=l.signal?{signal:l.signal}:null;await Promise.all([o?.when(),s.load(u)]);const m=(0,n.verifyDates)(s,l.startTime,l.endTime,"summary-statistics-for-age:invalid-parameters");if(m)throw m;if(!l.unit||!n.supportedAgeUnits.includes(l.unit))throw new a.default("summary-statistics-for-age:invalid-parameters",`Supported units are: ${n.supportedAgeUnits.join(", ")}`);return l}(e),{view:l,startTime:o,endTime:u,unit:m,minValue:d,maxValue:f,signal:p,filter:c,outStatisticTypes:w}=i,{valueExpression:y,statisticsQuery:v}=(0,n.getAgeExpressions)({layer:t,startTime:o,endTime:u,unit:m}),g={layer:t,valueExpression:y,...v,minValue:d,maxValue:f,outStatisticTypes:w,view:l,filter:c,signal:p};return(0,s.default)(g)}},90494:(e,t,i)=>{i.d(t,{p:()=>n,z:()=>s});var a=i(50076);const s="aggregateCount";function n(e,t){if(!e.view)throw new a.default(`${t}:missing-parameters`,"'view' parameter is required for binning");if(e.sqlExpression)throw new a.default(`${t}:invalid-parameters`,"'sqlExpression' parameter is not supported for binning");if("3d"===e.view.type)throw new a.default(`${t}:invalid-parameters`,"3d view is not supported for binning")}}}]);
//# sourceMappingURL=84171.f33d948c.chunk.js.map