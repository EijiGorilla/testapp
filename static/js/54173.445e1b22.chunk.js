"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[54173,64693,73651],{6528:(e,t,r)=>{r.d(t,{A:()=>p});var s=r(35143),o=r(42553),i=r(46053),n=(r(81806),r(76460),r(47249),r(6409)),a=r(85842),l=r(73103);let u=class extends o.A{constructor(e){super(e)}};(0,s._)([(0,i.MZ)({json:{read:{source:"string"}}})],u.prototype,"text",void 0),(0,s._)([(0,n.e)(l.Ec,{name:"stringType"})],u.prototype,"type",void 0),u=(0,s._)([(0,a.$)("esri.rest.support.DirectionsString")],u);const p=u},54173:(e,t,r)=>{r.r(t),r.d(t,{solve:()=>y});var s=r(3825),o=r(17879),i=r(73953),n=r(98815),a=r(54994),l=r(86236),u=r(96139),p=r(77725);function c(e){return e instanceof p.default}async function y(e,t,r){const p=[],y=[],f={},d={},m=(0,a.Dl)(e),{path:g}=m;c(t.incidents)&&(0,n.collectGeometries)(t.incidents.features,y,"incidents.features",f),c(t.facilities)&&(0,n.collectGeometries)(t.facilities.features,y,"facilities.features",f),c(t.pointBarriers)&&(0,n.collectGeometries)(t.pointBarriers.features,y,"pointBarriers.features",f),c(t.polylineBarriers)&&(0,n.collectGeometries)(t.polylineBarriers.features,y,"polylineBarriers.features",f),c(t.polygonBarriers)&&(0,n.collectGeometries)(t.polygonBarriers.features,y,"polygonBarriers.features",f);const v=await(0,i.normalizeCentralMeridian)(y);for(const s in f){const e=f[s];p.push(s),d[s]=v.slice(e[0],e[1])}if((0,n.isInputGeometryZAware)(d,p)){let e=null;try{e=await(0,n.fetchServiceDescription)(g,t.apiKey,r)}catch{}e&&!e.hasZ&&(0,n.dropZValuesOffInputGeometry)(d,p)}for(const s in d)d[s].forEach(((e,r)=>{(0,o.Jt)(t,s)[r].geometry=e}));const h={...r,query:{...m.query,...(0,l.o9)(t),f:"json"}},{data:M}=await(0,s.default)(`${g}/solveClosestFacility`,h);return u.default.fromJSON(M)}},62675:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var s=r(35143),o=r(18690),i=r(46053),n=(r(81806),r(76460),r(28379)),a=r(85842),l=r(76797),u=r(23701),p=r(13312),c=r(79219),y=r(77725);let f=class extends y.default{constructor(e){super(e),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){if(!e)return[];const r=t.summary.envelope.spatialReference??t.spatialReference,s=r&&p.default.fromJSON(r);return e.map((e=>{const t=c.default.fromJSON(e);if(null!=t.geometry&&(t.geometry.spatialReference=s),null!=t.events)for(const r of t.events)null!=r.geometry&&(r.geometry.spatialReference=s);return t}))}get mergedGeometry(){return this.features?function(e,t){if(0===e.length)return new u.default({spatialReference:t});const r=[];for(const n of e)for(const e of n.paths)r.push(...e);const s=[];r.forEach(((e,t)=>{0!==t&&e[0]===r[t-1][0]&&e[1]===r[t-1][1]||s.push(e)}));const{hasM:o,hasZ:i}=e[0];return new u.default({hasM:o,hasZ:i,paths:[s],spatialReference:t})}(this.features.map((e=>{let{geometry:t}=e;return t})),this.extent.spatialReference):null}get strings(){return this.features.flatMap((e=>{let{strings:t}=e;return t})).filter(o.Ru)}};(0,s._)([(0,i.MZ)({type:l.default,json:{read:{source:"summary.envelope"}}})],f.prototype,"extent",void 0),(0,s._)([(0,i.MZ)({nonNullable:!0})],f.prototype,"features",void 0),(0,s._)([(0,n.w)("features")],f.prototype,"readFeatures",null),(0,s._)([(0,i.MZ)()],f.prototype,"geometryType",void 0),(0,s._)([(0,i.MZ)({readOnly:!0})],f.prototype,"mergedGeometry",null),(0,s._)([(0,i.MZ)()],f.prototype,"routeId",void 0),(0,s._)([(0,i.MZ)()],f.prototype,"routeName",void 0),(0,s._)([(0,i.MZ)({value:null,readOnly:!0})],f.prototype,"strings",null),(0,s._)([(0,i.MZ)({json:{read:{source:"summary.totalDriveTime"}}})],f.prototype,"totalDriveTime",void 0),(0,s._)([(0,i.MZ)({json:{read:{source:"summary.totalLength"}}})],f.prototype,"totalLength",void 0),(0,s._)([(0,i.MZ)({json:{read:{source:"summary.totalTime"}}})],f.prototype,"totalTime",void 0),f=(0,s._)([(0,a.$)("esri.rest.support.DirectionsFeatureSet")],f);const d=f},64693:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var s=r(35143),o=r(45802),i=r(42553),n=r(46053),a=(r(81806),r(76460),r(47249),r(85842));const l=new o.J({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let u=class extends i.A{constructor(e){super(e),this.description=null,this.type=null}};(0,s._)([(0,n.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,s._)([(0,n.MZ)({type:String,json:{read:l.read,write:l.write}})],u.prototype,"type",void 0),u=(0,s._)([(0,a.$)("esri.rest.support.GPMessage")],u);const p=u},73651:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var s=r(35143),o=r(45802),i=r(46053),n=(r(81806),r(76460),r(47249),r(85842)),a=r(64693);const l=new o.J({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let u=class extends a.default{constructor(e){super(e),this.type=null}};(0,s._)([(0,i.MZ)({type:String,json:{read:l.read,write:l.write}})],u.prototype,"type",void 0),u=(0,s._)([(0,n.$)("esri.rest.support.NAMessage")],u);const p=u},75105:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var s=r(35143),o=r(42553),i=r(46053),n=(r(81806),r(76460),r(47249),r(28379)),a=r(85842),l=r(19247),u=r(86236),p=r(6528);let c=class extends o.A{constructor(e){super(e),this.arriveTime=null,this.arriveTimeOffset=null,this.geometry=null,this.strings=null}readArriveTimeOffset(e,t){return(0,u.Zn)(t.ETA,t.arriveTimeUTC)}readGeometry(e,t){return l.default.fromJSON(t.point)}};(0,s._)([(0,i.MZ)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],c.prototype,"arriveTime",void 0),(0,s._)([(0,i.MZ)()],c.prototype,"arriveTimeOffset",void 0),(0,s._)([(0,n.w)("arriveTimeOffset",["arriveTimeUTC","ETA"])],c.prototype,"readArriveTimeOffset",null),(0,s._)([(0,i.MZ)({type:l.default})],c.prototype,"geometry",void 0),(0,s._)([(0,n.w)("geometry",["point"])],c.prototype,"readGeometry",null),(0,s._)([(0,i.MZ)({type:[p.A]})],c.prototype,"strings",void 0),c=(0,s._)([(0,a.$)("esri.rest.support.DirectionsEvent")],c);const y=c},79219:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var s=r(35143),o=r(39356),i=r(46053),n=(r(81806),r(76460),r(47249),r(28379)),a=r(85842),l=r(23701),u=r(75105),p=r(6528);let c=class extends o.default{constructor(e){super(e),this.events=null,this.geometry=null,this.strings=null}readGeometry(e,t){const r=function(e){if(null==e||""===e)return null;let t=0,r=0,s=0,o=0;const i=[];let n,a,l,u,p,c,y,f,d=0,m=0,g=0;if(p=e.match(/((\+|-)[^+\-|]+|\|)/g),p||(p=[]),0===parseInt(p[d],32)){d=2;const e=parseInt(p[d],32);d++,c=parseInt(p[d],32),d++,1&e&&(m=p.indexOf("|")+1,y=parseInt(p[m],32),m++),2&e&&(g=p.indexOf("|",m)+1,f=parseInt(p[g],32),g++)}else c=parseInt(p[d],32),d++;for(;d<p.length&&"|"!==p[d];){n=parseInt(p[d],32)+t,d++,t=n,a=parseInt(p[d],32)+r,d++,r=a;const e=[n/c,a/c];m&&(u=parseInt(p[m],32)+s,m++,s=u,e.push(u/y)),g&&(l=parseInt(p[g],32)+o,g++,o=l,e.push(l/f)),i.push(e)}return{paths:[i],hasZ:m>0,hasM:g>0}}(t.compressedGeometry);return null!=r?l.default.fromJSON(r):null}};(0,s._)([(0,i.MZ)({type:[u.default]})],c.prototype,"events",void 0),(0,s._)([(0,i.MZ)({type:l.default})],c.prototype,"geometry",void 0),(0,s._)([(0,n.w)("geometry",["compressedGeometry"])],c.prototype,"readGeometry",null),(0,s._)([(0,i.MZ)({type:[p.A]})],c.prototype,"strings",void 0),c=(0,s._)([(0,a.$)("esri.rest.support.DirectionsFeature")],c);const y=c},86236:(e,t,r)=>{r.d(t,{Zn:()=>l,_s:()=>c,aZ:()=>n,lh:()=>o,nA:()=>a,o9:()=>p,p3:()=>i,r9:()=>u});var s=r(73103);function o(e,t){if(null==e)return null;const r={},o=new RegExp(`^${t}`,"i");for(const i of Object.keys(e))if(o.test(i)){const o=i.slice(t.length);r[s.et.fromJSON(o)]=e[i]}return r}function i(e,t,r){if(null!=e){t.attributes||(t.attributes={});for(const o in e){const i=s.et.toJSON(o);t.attributes[`${r}${i}`]=e[o]}}}function n(e){const t={};for(const r of Object.keys(e)){const o=r;t[s.et.fromJSON(o)]=e[r]}return t}function a(e){const t={};for(const r of Object.keys(e)){const o=r;t[s.et.toJSON(o)]=e[r]}return t}function l(e,t){return null==e||null==t?null:Math.round((e-t)/6e4)}function u(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.stops&&=JSON.stringify(t.stops),r.travelMode&&=JSON.stringify(t.travelMode),r}function p(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.facilities&&=JSON.stringify(t.facilities),r.incidents&&=JSON.stringify(t.incidents),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.travelMode&&=JSON.stringify(t.travelMode),r}function c(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.defaultBreaks&&=t.defaultBreaks?.join(),r.excludeSourcesFromPolygons&&=t.excludeSourcesFromPolygons?.join(),r.facilities&&=JSON.stringify(t.facilities),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.travelMode&&=JSON.stringify(t.travelMode),r}},96139:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var s=r(35143),o=r(42553),i=r(46053),n=(r(81806),r(76460),r(47249),r(85842)),a=r(62675),l=r(77725),u=r(73651);let p=class extends o.A{constructor(e){super(e),this.directionLines=null,this.directionPoints=null,this.directions=null,this.facilities=null,this.incidents=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routes=null,this.traversedEdges=null,this.traversedJunctions=null,this.traversedTurns=null}};(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"directionLines",void 0),(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"directionPoints",void 0),(0,s._)([(0,i.MZ)({type:[a.default]})],p.prototype,"directions",void 0),(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"facilities",void 0),(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"incidents",void 0),(0,s._)([(0,i.MZ)({type:[u.default]})],p.prototype,"messages",void 0),(0,s._)([(0,i.MZ)({type:l.default,json:{read:{source:"barriers"}}})],p.prototype,"pointBarriers",void 0),(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"polylineBarriers",void 0),(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"polygonBarriers",void 0),(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"routes",void 0),(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"traversedEdges",void 0),(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"traversedJunctions",void 0),(0,s._)([(0,i.MZ)({type:l.default})],p.prototype,"traversedTurns",void 0),p=(0,s._)([(0,n.$)("esri.rest.support.ClosestFacilitySolveResult")],p);const c=p}}]);
//# sourceMappingURL=54173.445e1b22.chunk.js.map