"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[59708],{3320:(e,t,n)=>{n.d(t,{Au:()=>O,CU:()=>H,Et:()=>g,Gq:()=>M,H1:()=>k,HG:()=>F,Iy:()=>_,Kl:()=>K,Kn:()=>z,LZ:()=>S,TN:()=>N,U3:()=>Q,Ve:()=>j,XI:()=>V,bx:()=>T,cU:()=>Z,k_:()=>x,lB:()=>G,l_:()=>q,n4:()=>P,nT:()=>b,oc:()=>C,qG:()=>R,rf:()=>v,s9:()=>D,t6:()=>U,tM:()=>$,vp:()=>w,wr:()=>E});n(11265);var i=n(18690),l=n(4212),r=n(53084),o=n(76460),u=n(88685),s=n(71764),a=n(15142),d=n(53430),m=n(31933),p=n(42633),c=n(20639),f=n(23301),y=n(26547),h=n(39348);const v=e=>"field"===e?.type,g=e=>"group"===e?.type,b=e=>"relationship"===e?.type,x=e=>"text"===e.type,O=e=>"utilityNetworkAssociations"===e.type,T=e=>!g(e)&&null!=e.group,E=e=>e.reduce(((e,t)=>g(t)?[...e,...t.inputs]:[...e,t]),[]),_=e=>E(e).filter(v),Z=e=>E(e).filter(b),N=e=>E(e).filter(O),V=e=>null!=e&&(F(e,"combo-box")||F(e,"radio-buttons")),F=(e,t)=>null!=e&&e.input?.type===t,M=e=>{let{domain:t,inputType:n="text-box",dataType:i}=e;return"number"===i&&"text-box"===n&&(!t||"coded-value"!==t.type)};function w(e,t){const{title:n,feature:i}=e??{};return n||(i?(0,y.R)(i):null)||t||""}function S(e){const{attributes:t,fieldsIndex:n,label:l,timeZone:r}=e;if(!t||"object"!=typeof t)return l;const o=Object.keys(t).filter((e=>(0,u.mk)(l,e))),s=o.map((e=>t[e])),a=o.map((e=>n.get(e))).filter(i.Ru);return function(e,t){return(0,u.HC)((0,u.HC)(e,(e=>`{${e.toLowerCase()}}`)),Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[t.toLowerCase(),n]}))))}(l,j({values:s,fields:a,timeZone:r}))}const A="expression/",I="expr/",L="field/";function C(e){const[t,n]=e.split(A);return""===t&&n?n:(o.A.getLogger("esri.widgets.FeatureForm/featureFormUtils").error("extractExpressionNameFromString:invalid-input",`The string ${e} is not a valid expression reference of the form '${A}/expressionName'`),"")}function U(e){return`${A}${e}`}function k(e){return`${L}${e}`}function D(e){return e.startsWith(A)}function R(e){return e.startsWith(I)}function j(e){const{fields:t,values:n}=e,i=e.timeZone??void 0,l=t.map(((e,t)=>{let l=n[t];if(e.domain&&"coded-value"===e.domain.type){const t=e.domain.codedValues.find((e=>e.code===l));t?.name&&(l=t.name)}return((0,p.fs)(e)||(0,d.isTimeOnlyField)(e))&&(l=(0,c.ZP)(e,l,{timeZone:i,...(0,c.ZT)(e)})),[e.name,l]}));return Object.fromEntries(l)}const H=e=>{const t={typeFieldName:null,types:[]};return e?((0,m.Sv)(e)?(t.typeFieldName=e.parent?.subtypeField,t.types=e.parent?.subtypes??[]):"subtype-group"===e.type||"feature"===e.type&&e.subtypes?.length?(t.typeFieldName=e.subtypeField,t.types=e.subtypes??[]):"types"in e&&e.types&&(t.typeFieldName=e.typeIdField,t.types=e.types.map((e=>{let{id:t,name:n,domains:i}=e;return{code:t,name:n,domains:i}}))),null!=t.typeFieldName&&(t.typeFieldName=e.getField(t.typeFieldName)?.name??t.typeFieldName),t):t},$=(e,t,n)=>{const{dataType:i,error:l,minLength:r}=e,o=t?.validationErrors;if(!o||!l)return null;if(l===f.gK.CANNOT_BE_EMPTY)return o.cannotBeNull;if(l===a.Mh.VALUE_OUT_OF_RANGE||l===d.NumericRangeValidationError.OUT_OF_RANGE){const{field:t,range:l}=e,r={type:"date",intlOptions:{timeZone:"date"===t.type&&n?n:void 0,...(0,c.ZT)(t)}},u=(0,f.hQ)(l,o);return(0,h.V)(u,l,{format:{max:"date"===i?r:null!=l.max&&(0,f.qn)(l.max)?f.Qv:f.PA,min:"date"===i?r:null!=l.min&&(0,f.qn)(l.min)?f.Qv:f.PA}})}return l===a.Mh.INVALID_CODED_VALUE?o.invalidCodedValue:l===d.TypeValidationError.INVALID_TYPE?o.invalidType:l===f.gK.TOO_SHORT?(0,h.V)(o.tooShort,{min:r}):(f.gK.TOO_LONG,null)},q=e=>{if(!e)return;const t=e.layer,n=t&&"geometryType"in t?t.geometryType:void 0,i=e.geometry?.type;return"polyline"===i||"polyline"===n?"line":"mesh"===i||"mesh"===n||"multipatch"===n?"cube":"multipoint"===i||"multipoint"===n?"point":i||n||"table"},P=e=>{const t=[];if(e.formTemplate){const{description:n,title:i}=e.formTemplate;e.fields?.forEach((e=>{const l=i&&(0,u.mk)(i,e.name),r=n&&(0,u.mk)(n,e.name);(l||r)&&t.push(e.name)}))}return t};function G(e,t){const n=t??("formTemplate"in e&&e.formTemplate);return!!n&&(n.elements?.filter(s.jt)??[]).some((t=>{let{fieldName:n}=t;return!e.fieldsIndex.get(n)}))}function z(e,t){return null==e||t.onValue!==e&&t.offValue!==e}function K(e,t){switch(t.objectType){case"any":return!0;case"null":return null==e;case"code":return e===t.codedValue?.code;case"range":return null!=e&&null!=t.minValue&&null!=t.maxValue&&+e>=t.minValue&&+e<=t.maxValue;default:return(0,l.Xb)(t.objectType),!1}}function Q(e,t,n){const i=(0,m.fV)(e),l=i?.find((e=>e.code===n));if(!l)return!1;const o=i?.find((e=>e.code===t));return!(0,r.equalsShallow)(l.defaultValues,o?.defaultValues)&&Object.values(l.defaultValues).some((e=>null!=e))}},20639:(e,t,n)=>{n.d(t,{Ng:()=>E,OM:()=>v,Q0:()=>x,T8:()=>b,ZP:()=>T,ZT:()=>O,eX:()=>N,fD:()=>M,fb:()=>f,fl:()=>c,iP:()=>F,oh:()=>_,rX:()=>w,sH:()=>y,yk:()=>S});n(11265),n(81806);var i=n(50076),l=n(15941),r=n(65256),o=n(96017),u=n(85632),s=n(36693),a=n(24241),d=n(38042);const m=s.n$,p={date:null,time:null,timeZoneOffset:null},c=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]),f="latn",y=new Set(["date-only","time-only","timestamp-offset"]),h=e=>"valueAsDate"in e;function v(e){return{locale:(0,d.JK)(),numberingSystem:f,zone:e??m}}function g(e,t){return null==e?null:a.c9.fromMillis(e,v(t))}function b(e,t){if(null==e||!(0,u.Kg)(e)||""===e){if(t){const e=a.c9.local({zone:t});return{date:null,time:null,timeZoneOffset:e.isValid?e.offset.toString():null}}return p}const n=a.c9.fromISO(e,{setZone:!0});return{date:n.toFormat(o.mo,v()),time:n.toFormat(o.Uq.HMS_MS,v()),timeZoneOffset:n.offset.toString()}}function x(e,t){if(null==e||!(0,u.Et)(e)||isNaN(e))return p;const n=g(e,t);return n?{date:n.toFormat(o.mo,v(t)),time:n.toFormat(o.Fj,v(t))}:p}function O(e){switch(e.type){case"date":default:return(0,r.J2)("short-date-short-time");case"date-only":return(0,r.J2)("short-date");case"time-only":return(0,r.J2)("short-time");case"timestamp-offset":return{...(0,r.J2)("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function T(e,t,n){if(!e||null==t)return null;switch(e.type){case"date":return(0,r.Yq)(t,n);case"date-only":return(0,r.iS)(t,n);case"time-only":return(0,r.F8)(t,n);case"timestamp-offset":return(0,r.Ey)(t,n);default:return null}}function E(e){const{dateComponent:t,defaultTimeZone:n,timeComponent:i,timeZoneComponent:l,oldValue:r}=e;if(!t?.value)return null;const{year:u,month:d,day:m}=a.c9.fromFormat(t.value,o.mo),{hour:p,minute:c,second:f,millisecond:y}=Z(i,s.n$)??a.c9.now(),h=b(r,n),v=l?.value?parseInt(l.value,10):null!=h.timeZoneOffset?parseInt(h.timeZoneOffset,10):(new Date).getTimezoneOffset(),g=a.mQ.instance(v),x=a.c9.fromObject({year:u,month:d,day:m,hour:p,minute:c,second:f,millisecond:y},{zone:g});return x.isValid?x.toISO({includeOffset:!0}):null}function _(e){const{dateComponent:t,timeComponent:n,timeZone:i,max:l,min:r,oldValue:o}=e,u=Z(t,i);let s=!!e.applyRange;if(!u)return null;let d=null;if(null!=n?.value){const e=Z(n,i),t=Date.now(),r=null!=l&&l<t?l:t,o=a.c9.fromMillis(r,v(i)),s=u||o,{year:m,month:p,day:c}=s,{hour:f,minute:y,second:h,millisecond:g}=e||o;d=s.set({year:m,month:p,day:c,hour:f,minute:y,second:h,millisecond:g})}else{const e=g(V({value:o??Date.now(),max:l,min:r}),i),{year:t,month:n,day:a}=u,{hour:m,minute:p,second:c,millisecond:f}=e;s=!0,d=u.set({year:t,month:n,day:a,hour:m,minute:p,second:c,millisecond:f})}if(!d.isValid)return null;const m=d.toMillis();return s?V({value:m,max:l,min:r}):m}function Z(e,t){if(null==e?.value||Array.isArray(e.value))return null;let n=null;return n=h(e)?a.c9.fromFormat(e.value,o.mo,v(t)):(0,o.UE)(e.value),n?.isValid?n:null}function N(e){const{max:t,min:n,value:i}=e;return!isNaN(i)&&!(null!=t&&i>t)&&!(null!=n&&i<n)}function V(e){const{max:t,min:n,value:i}=e;return null!=t&&null!=n?(0,l.qE)(i,n,t):null!=t&&i>t?t:null!=n&&i<n?n:i}function F(e){if(!e)return"";const t=e.split(".").at(0);if(!t||t.length<1)throw new i.default("invalid time-only field",`Cannot parse valid time-only field value from ${e}`);const n=t.split(":"),l=new Array(3);for(let i=0;i<3;i++){const e=n.at(i)??"";l[i]=e.padStart(2,"0")}return l.join(":")}function M(e,t){switch(t){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return F(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function w(e){return!!e&&"object"==typeof e&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function S(e){const{type:t,range:n,value:i}=e;if(null==i||!n||i===n.min||i===n.max)return!0;if("date"===t)return N({value:i,min:n.min,max:n.max});const{rawMax:l,rawMin:r}=n;let u=null,s=null,a=null;switch(t){case"date-only":u=(0,o.Xi)(l),s=(0,o.Xi)(r),a=(0,o.Xi)(i);break;case"time-only":u=(0,o.UE)(l),s=(0,o.UE)(r),a=(0,o.UE)(i);break;case"timestamp-offset":u=(0,o.gz)(l),s=(0,o.gz)(r),a=(0,o.gz)(i)}return!a||N({value:a.valueOf(),min:s?.valueOf(),max:u?.valueOf()})}},23301:(e,t,n)=>{n.d(t,{$$:()=>O,D_:()=>p,Gd:()=>m,Kx:()=>i,PA:()=>v,Po:()=>c,Qv:()=>g,gK:()=>l,hQ:()=>x,jl:()=>y,of:()=>d,qn:()=>b,zU:()=>f});var i,l,r,o=n(71764),u=n(15142),s=n(53430),a=n(20639);(r=i||(i={})).Text="text",r.Number="number",r.Date="date",r.Unsupported="unsupported",function(e){e.CANNOT_BE_EMPTY="input-validation-error::cannot-be-empty",e.TOO_SHORT="length-validation-error::too-short",e.TOO_LONG="length-validation-error::too-long"}(l||(l={}));const d=(e,t)=>{if(!e)return!0;const{operations:n}=e;switch(t){case"INSERT":return n.supportsAdd;case"UPDATE":case"DELETE":return n.supportsUpdate;default:return!0}};function m(e,t){const{dataType:n,domain:i,field:r,maxLength:o,minLength:d,range:m,required:p}=t;if(null==e)return p?l.CANNOT_BE_EMPTY:null;if("text"===n&&"string"==typeof e){if(d>-1&&e.length<d)return l.TOO_SHORT;if(o>-1&&e.length>o)return l.TOO_LONG}return"date"!==n||(0,a.yk)({type:r.type,range:m,value:e})?i?(0,u.wb)(r,e,i):(0,s.validateFieldValue)(r,e)??(0,u.wb)(r,e):s.NumericRangeValidationError.OUT_OF_RANGE}function p(e,t){return!(!c(e)||!c(t))||e===t}function c(e){return null==e||""===e}function f(e){let{dataType:t,field:n,input:l}=e;if(t===i.Date)return-1;const r=h(n.length);if(!l||!(0,o.AI)(l))return r;const u=h(l.maxLength);return-1===u?r:-1===r?u:Math.min(r,u)}function y(e){let{dataType:t,field:n,input:l}=e;if(t===i.Date)return-1;if(!l||!(0,o.AI)(l))return-1;const r=h(l.minLength);if(r<0)return-1;const u=h(n.length);return u>-1&&u<r?-1:r}function h(e){return"number"==typeof e&&e>-1?e:-1}const v={type:"number"},g={type:"number",intlOptions:{notation:"scientific"}};function b(e){return e>=1e7||e<=-1e7}function x(e,t){return null!=e.max&&null!=e.min?t.outsideRange:null!=e.max?t.outsideRangeMax:t.outsideRangeMin}const O=e=>e&&!Number.isNaN(e.valueOf())},26547:(e,t,n)=>{function i(e){const{attributes:t,sourceLayer:n}=e??{},i=n&&"displayField"in n?n.displayField:null,l=i?t?.[i]:null,r=null!=l?JSON.stringify(l):null,o=e?.getObjectId()?.toString();return r||o||""}n.d(t,{R:()=>i})},59708:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(35143),l=n(68134),r=n(90632),o=n(46053),u=(n(81806),n(76460),n(47249),n(85842)),s=n(3320),a=n(84668);let d=class extends a.A{constructor(e){super(e),this._expressionTrackingHandles=new Map,this.id=(0,r.c)().toString(),this.type="group"}initialize(){this.addHandles([(0,l.watch)((()=>[this.visible,this.inputs]),(e=>{let[t]=e;const{inputs:n}=this,i=!!t&&void 0;for(const l of n)(0,s.rf)(l)&&(l.required=i)}),{initial:!0,equals:(e,t)=>t[0]===e[0]&&t[1]===e[1]})])}destroy(){for(const e of this._expressionTrackingHandles.values())e.remove()}get initialState(){return this.element.initialState||"expanded"}get inputs(){return this._get("inputs")}set inputs(e){this.removeAllHandles(),e&&this.addHandles(e.map((e=>(0,l.watch)((()=>e.visible),(()=>this._dirtyEvaluatedVisibilityExpression()))))),this._set("inputs",e)}get open(){return"expanded"===this.initialState}set open(e){this._override("open",e)}get visible(){return!1!==this.evaluatedVisibilityExpression&&this.inputs&&this.inputs.some((e=>e.visible))}_dirtyEvaluatedVisibilityExpression(){const{element:e}=this;e.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};(0,i._)([(0,o.MZ)()],d.prototype,"id",void 0),(0,i._)([(0,o.MZ)()],d.prototype,"initialState",null),(0,i._)([(0,o.MZ)()],d.prototype,"inputs",null),(0,i._)([(0,o.MZ)()],d.prototype,"open",null),(0,i._)([(0,o.MZ)()],d.prototype,"type",void 0),(0,i._)([(0,o.MZ)()],d.prototype,"visible",null),d=(0,i._)([(0,u.$)("esri.widgets.FeatureForm.GroupInput")],d);const m=d},84668:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(35143),l=n(91967),r=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),u=n(3320);let s=class extends l.default{constructor(e){super(e),this.element=null,this.feature=null,this.layer=null,this.timeZone=null,this.type=null,this.visibilityExpressionExecutor=null}get description(){return this.getFormattedLabel(this.element?.description)}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return null!=e?!!e.lastEvaluatedValue:null}get label(){return this.getFormattedLabel(this.element?.label)}get updating(){return!1}get visible(){return null!=this.evaluatedVisibilityExpression?this.evaluatedVisibilityExpression:null!=this.element}getFormattedLabel(e){const{feature:t,layer:n,timeZone:i}=this;return null==n||null==e?e:(0,u.LZ)({label:e,attributes:t.attributes,fieldsIndex:n.fieldsIndex,timeZone:i})}};(0,i._)([(0,r.MZ)({readOnly:!0})],s.prototype,"description",null),(0,i._)([(0,r.MZ)({constructOnly:!0})],s.prototype,"element",void 0),(0,i._)([(0,r.MZ)()],s.prototype,"evaluatedVisibilityExpression",null),(0,i._)([(0,r.MZ)()],s.prototype,"feature",void 0),(0,i._)([(0,r.MZ)()],s.prototype,"label",null),(0,i._)([(0,r.MZ)()],s.prototype,"layer",void 0),(0,i._)([(0,r.MZ)()],s.prototype,"timeZone",void 0),(0,i._)([(0,r.MZ)()],s.prototype,"type",void 0),(0,i._)([(0,r.MZ)()],s.prototype,"updating",null),(0,i._)([(0,r.MZ)()],s.prototype,"visible",null),(0,i._)([(0,r.MZ)()],s.prototype,"visibilityExpressionExecutor",void 0),s=(0,i._)([(0,o.$)("esri.widgets.FeatureForm.InputBase")],s);const a=s}}]);
//# sourceMappingURL=59708.1f4ee242.chunk.js.map