"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[16563],{8445:(t,e,n)=>{n.d(e,{O:()=>a});var s=n(82103);class a extends s.d{getOperatorType(){return 4}execute(t,e,n,a){return!(0,s.r)(t,e,n,4,a)}}},16563:(t,e,n)=>{n.r(e),n.d(e,{execute:()=>h,isAsync:()=>f});var s=n(11217),a=n(49177),r=n(52847),i=n(81130),o=n(66388),l=n(98685),p=n(58067);function h(t){if(function(t){return null!=t.parentTemplate&&(0,i.Rg)(t.shape)}(t)&&"digitizing"!==t.mode)return async function(t){let{templatePart:e,parentTemplate:n,shape:o,edits:h,relationships:f,mode:g}=t;const{builderConfig:u}=e,m=(0,s.V2)(u),d=(0,s.YI)(u),y=(0,s.RT)(u),B=(0,s.Gr)(u,d),P=y||0===m?o:(0,a.cY)(o,m);if(null===P)return;const R=n.layer.createQuery();R.geometry=P,R.spatialRelationship="intersects",R.returnM=!0,R.returnZ=!0,R.outSpatialReference=P.spatialReference,R.cacheHint=!1,R.returnGeometry=!0,R.historicMoment=n.layer.historicMoment,R.gdbVersion=n.layer.gdbVersion;const S=2*((0,p.fromSpatialReference)(P.spatialReference)?.getTolerance()??.001);R.distance=S;const{features:A}=await n.layer.queryFeatures(R);if(0===A.length)return;const T=[];for(const s of A)T.push(c(s.geometry));const v=(0,s.TR)(P);let x=0,b=0;for(let a=0;a<P.paths.length&&!(h.length>i.Cg);a++){const t=P.paths[a].length;for(let n=0;n<t;n++){let i=P.getPoint(a,n);if(null!=i){for(const o of T)if((0,l.e)(i,o)){if(n>0&&0!==B&&(x+=P.hasZ?(0,r.Py)(P.paths[a][n-1],P.paths[a][n],v):(0,r.eS)(P.paths[a][n-1],P.paths[a][n])),0!==B){let e=1;if(d){const s=B<0?n-1:n+1;if(s>=t||s<0)return;e=P.hasZ?(0,r.Py)(P.paths[a][n],P.paths[a][s],v):(0,r.eS)(P.paths[a][n],P.paths[a][s])}const s=x+e*B;i=P.hasZ?(0,r.mw)(P,s,m,v):(0,r.a1)(P,s,m)}else 0!==m&&(i=(0,r.LB)(i,n===t-1?[P.paths[a][n-1],P.paths[a][n]]:[P.paths[a][n],P.paths[a][n+1]],m));i&&(0,s.fS)({templatePart:e,shape:i,edits:h,relationships:f,mode:g},`V${b.toString()}`);break}b++}}}}(t)}function c(t){const e=[];for(const n of t.paths)for(const t of n)e.push([...t]);return new o.default({spatialReference:t.spatialReference,points:e})}const f=!0},49177:(t,e,n)=>{n.d(e,{Ii:()=>s,LT:()=>u,cY:()=>f,nI:()=>a,tr:()=>c});var s,a,r,i=n(11217),o=n(52847),l=n(81130),p=n(70968),h=n(19902);function c(t){let{templatePart:e,edits:n,relationships:a,shape:r,distance:p,isProportional:c,offsetDistance:g,vertexBeforeOffset:u,vertexPlacement:m,mode:d}=t;const y=u||0===g?r:f(r,g);if(null===y||!(0,h.isPolyline)(y))return;const B=(0,i.TR)(y);g=u?g:0;let P=0,R=null,S=0;for(let h=0;h<y.paths.length;h++){if(n.length>l.Cg&&"digitizing"===d)return;const t=y.paths[h].length,r=h===y.paths.length-1;for(let f=0;f<t;f++){if(n.length>l.Cg&&"digitizing"===d)return;if(f>0&&0!==p&&(P+=y.hasZ?(0,o.Py)(y.paths[h][f-1],y.paths[h][f],B):(0,o.eS)(y.paths[h][f-1],y.paths[h][f])),(0!==f||m!==s.NotBeginning)&&!(f===t-1&&m===s.NotEnd&&r||(0===f||f===t-1&&r)&&m===s.Interior||0===f&&p<0&&c||f===t-1&&p>0&&c)){if(0!==p){let e=1;if(c){const n=p<0?f-1:f+1;if(n>=t||n<0)continue;e=y.hasZ?(0,o.Py)(y.paths[h][f],y.paths[h][n],B):(0,o.eS)(y.paths[h][f],y.paths[h][n])}const n=P+e*p;R=y.hasZ?(0,o.mw)(y,n,g,B):(0,o.a1)(y,n,0)}else R=(0,o.RT)(y,h,f),0!==g&&(R=(0,o.LB)(R,f===t-1?[y.paths[h][f-1],y.paths[h][f]]:[y.paths[h][f],y.paths[h][f+1]],g));R&&(0,i.fS)({templatePart:e,shape:R,edits:n,relationships:a,mode:d},`V${(S+f).toString()}`)}}S+=t}}function f(t,e){return(0,p.e)(t,e,{unit:"meters",joins:"miter",miterLimit:2})}function g(t){let e=0;for(const n of t.paths)e+=n.length;return e}function u(t){let{templatePart:e,edits:n,relationships:s,shape:r,distance:l,isProportional:p,offsetDistance:c,vertexBeforeOffset:u,vertexPlacement:m,mode:d}=t;const y=u||0===c?r:f(r,c);if(null===y||!(0,h.isPolyline)(y))return;const B=(0,i.TR)(y);c=u?c:0;let P=null,R="";if(0!==l){const t=m===a.AtBeginning?0:y.paths.length-1,e=m===a.AtBeginning?0:y.paths[y.paths.length-1].length-1,n=m===a.AtBeginning?0:(0,o.Ex)(y),s=m===a.AtBeginning?y.paths[0].length:y.paths[y.paths.length-1].length;let r=1;if(p){const n=l<0?e-1:e+1;if(n>=s||n<0)return;r=y.hasZ?(0,o.Py)(y.paths[t][e],y.paths[t][n],B):(0,o.eS)(y.paths[t][e],y.paths[t][n])}const i=n+r*l;P=y.hasZ?(0,o.mw)(y,i,c,B):(0,o.a1)(y,i,c),R=m===a.AtBeginning?"V0":`V${(g(y)-1).toString()}`}else{if(P=m===a.AtBeginning?(0,o.RT)(y,0,0):(0,o.RT)(y,y.paths.length-1,y.paths[y.paths.length-1].length-1),0!==c)if(m===a.AtBeginning)P=(0,o.LB)(P,[y.paths[0][0],y.paths[0][1]],c);else{const t=y.paths[y.paths.length-1];P=(0,o.LB)(P,[t[t.length-2],t[t.length-1]],c)}R=m===a.AtBeginning?"V0":`V${(g(y)-1).toString()}`}P&&(0,i.fS)({templatePart:e,shape:P,edits:n,relationships:s,mode:d},R)}(r=s||(s={}))[r.All=0]="All",r[r.NotBeginning=1]="NotBeginning",r[r.NotEnd=2]="NotEnd",r[r.Interior=3]="Interior",function(t){t[t.AtBeginning=4]="AtBeginning",t[t.AtEnd=5]="AtEnd"}(a||(a={}))},98685:(t,e,n)=>{n.d(e,{a:()=>i,e:()=>o,i:()=>p,s:()=>l});var s=n(8445),a=n(58067);const r=new s.O;function i(t){const e=(0,a.getSpatialReference)(t);return r.accelerateGeometry((0,a.fromGeometry)(t),(0,a.fromSpatialReference)(e),1)}function o(t,e){return r.execute((0,a.fromGeometry)(t),(0,a.fromGeometry)(e),(0,a.fromSpatialReference)(t.spatialReference),null)}const l=r.supportsCurves(),p=Object.freeze(Object.defineProperty({__proto__:null,accelerateGeometry:i,execute:o,supportsCurves:l},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=16563.3e866003.chunk.js.map