"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[27481],{27481:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var s=i(35143),o=i(76460),n=i(68134),l=i(46053),a=(i(81806),i(47249),i(85842)),r=i(25329);const d="esri-daylight",h=`${d}__container`,c="esri-slider",p={base:d,dayContainer:`${h} ${d}__day-container`,dateContainer:`${h} ${d}__date-container`,containerDisabled:`${h}--disabled`,slider:c,sliderShadowOff:`${c}--shadow-off`,sliderShadowOn:`${c}--shadow-on`,sliderAmPmOn:`${c}--ampm-on`,sliderDateOff:`${c}--date-off`,sliderDateOn:`${c}--date-on`,playPauseButton:`${d}__play-pause-button`,datePicker:`${d}__date-picker`,seasonPicker:`${d}__season-picker`,panelError:`${d}__panel--error`,sunLightingCheckbox:`${d}__sun-lighting-checkbox`,shadowsCheckbox:`${d}__shadows-checkbox`};var u=i(48645),g=i(91967);let _=class extends g.default{constructor(e){super(e),this.header=!0,this.playButtons=!0,this.datePicker=!0,this.timezone=!0,this.sunLightingToggle=!0,this.shadowsToggle=!0}};(0,s._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"header",void 0),(0,s._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"playButtons",void 0),(0,s._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"datePicker",void 0),(0,s._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"timezone",void 0),(0,s._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"sunLightingToggle",void 0),(0,s._)([(0,l.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"shadowsToggle",void 0),_=(0,s._)([(0,a.$)("esri.widgets.Daylight.VisibleElements")],_);const b=_;var y=i(33482),v=i(22785),m=i(40747),w=i(35529),k=i(76099),C=i(54761);const M="esri-slider-with-dropdown",f="esri-slider__label",S=`${M}__box`,P=`${M}__box--drop-down-on`,D=`${M}__box--drop-down-off`;let O=class extends v.default{constructor(e,t){super(e,t),this.viewModel=new m.h,this.showDropDown=!0,this._labelWidth=0,this._onLabelAfterCreate=e=>{const t="label-size-observer";this.removeHandles(t),this.addHandles((0,k.EV)(e,(e=>{let{contentRect:t}=e;this._labelWidth=t.width})),t)},this._getLabelStyles=()=>{if(!this.trackElement)return;const e=this._trackWidth,t=this._labelWidth/2,i=this.getCurrentPosition(),s=i-t,o=i+t;let n=-t;return s<0?n+=-s:o>e&&(n+=e-o),{left:`${n}px`}},this._onTimezoneChange=e=>{this.viewModel.utcOffset=e},this._onTimezonePickerOpen=()=>{this.viewModel.timezonePickerOpen=!0},this._onTimezonePickerClose=()=>{this.viewModel.timezonePickerOpen=!1}}renderThumbLabel(e){const{showDropDown:t,viewModel:i}=this;return(0,C.K)("div",{afterCreate:this._onLabelAfterCreate,class:this.classes({[S]:!0,[f]:!0,[P]:t,[D]:!t}),key:"thumb-label",styles:this._getLabelStyles()},super.renderThumbLabel(e),t?(0,C.K)(w.G,{disabled:this.disabled,open:i.timezonePickerOpen,value:i.utcOffset,onChange:this._onTimezoneChange,onClose:this._onTimezonePickerClose,onOpen:this._onTimezonePickerOpen}):null)}};(0,s._)([(0,l.MZ)()],O.prototype,"viewModel",void 0),(0,s._)([(0,l.MZ)()],O.prototype,"showDropDown",void 0),(0,s._)([(0,l.MZ)()],O.prototype,"_labelWidth",void 0),O=(0,s._)([(0,a.$)("esri.widgets.Daylight.support.SliderWithDropdown")],O);const T=O;var $=i(94126),Z=i(98108),E=i(87540),x=i(24992),L=i(63582);const K="date";let z=class extends r.default{constructor(e,t){super(e,t),this.headingLevel=3,this.viewModel=new u.default,this.visibleElements=new b,this.dateOrSeason=K,this._timeSlider=new T({viewModel:this.viewModel.timeSliderViewModel,steps:this.timeSliderSteps,labelInputsEnabled:!1,visibleElements:{labels:!0},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:(e,t,i)=>(0,x.T3)({tickElement:t,labelElement:i,tickClasses:I,onClick:this._makeGoToTime(e)})},{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:(e,t)=>(0,x.ty)({tickElement:t,tickClasses:I,onClick:this._makeGoToTime(e)})}]}),this._onPlayDayClick=()=>{this.viewModel.toggleDayPlaying()},this._onDateChange=e=>{const t=e.currentTarget.valueAsDate;this.viewModel.onDateChange(Array.isArray(t)?t[0]:t)},this._onYearPlayClick=()=>{this.viewModel.toggleYearPlaying()},this._onSeasonChange=e=>{this.viewModel.currentSeason=e.currentTarget.value},this._onSunLightingCheckboxChange=()=>{this.viewModel.toggleSunLightingEnabled()},this._onShadowCheckboxChange=()=>{this.viewModel.toggleDirectShadowsEnabled()}}get icon(){return"brightness"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.title??""}set label(e){this._overrideIfSome("label",e)}get playSpeedMultiplier(){return this.viewModel.playSpeedMultiplier}set playSpeedMultiplier(e){this.viewModel.playSpeedMultiplier=e}get timeSliderSteps(){return this._timeSlider?.steps??5}set timeSliderSteps(e){this._timeSlider.steps=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}postInitialize(){this.viewModel.isSupported&&this.addHandles([(0,n.watch)((()=>this.viewModel.timeSliderViewModel),(e=>this._timeSlider.viewModel=e),n.syncAndInitial),(0,n.watch)((()=>this.visibleElements?.timezone),(e=>this._timeSlider.showDropDown=e),n.syncAndInitial),(0,n.watch)((()=>!this.viewModel.sunLightingEnabled),(e=>{this._timeSlider.disabled=e}),n.syncAndInitial)])}destroy(){this._timeSlider.destroy()}render(){const{messages:e,viewModel:t,visibleElements:i}=this,s=t.isSupported;return(0,C.K)("div",{class:this.classes(p.base,Z.D.widget)},s?(0,C.K)(C.w,null,i.header?(0,C.K)(E.D,{level:this.headingLevel},e.title):null,this._renderTimeOptions(),i.datePicker?this._renderDateOrSeason():null,i.sunLightingToggle?this._renderSunLightingToggle():null,i.shadowsToggle?this._renderShadowsToggle():null):(0,C.K)("div",{class:p.panelError,key:"unsupported"},(0,C.K)("p",null,e.unsupported)))}loadDependencies(){return(0,$.W)({button:()=>Promise.resolve().then(i.bind(i,43285)),checkbox:()=>Promise.resolve().then(i.bind(i,64990)),label:()=>Promise.resolve().then(i.bind(i,11839)),"input-date-picker":()=>i.e(40240).then(i.bind(i,40240)),option:()=>i.e(46422).then(i.bind(i,46422)),select:()=>i.e(2253).then(i.bind(i,2253))})}_renderTimeOptions(){const{viewModel:e,visibleElements:t,messages:i}=this,{directShadowsEnabled:s,dayPlaying:o}=e,n=!e.sunLightingEnabled;return(0,C.K)("div",{class:this.classes(p.dayContainer,{[p.sliderShadowOn]:s,[p.sliderShadowOff]:!s,[p.sliderDateOn]:t.datePicker,[p.sliderDateOff]:!t.datePicker,[p.sliderAmPmOn]:(0,x.J_)(),[p.containerDisabled]:n}),key:"daylight-time-options"},this._timeSlider.render(),t.playButtons?this._renderPlayPauseButton({playing:o,disabled:n,label:i.playDay,onClick:this._onPlayDayClick}):null)}_renderDateOptions(){const{viewModel:e,visibleElements:t,messages:i}=this,{yearPlaying:s}=e,o=!e.sunLightingEnabled;return(0,C.K)("div",{class:this.classes(p.dateContainer,o&&p.containerDisabled),key:p.dateContainer},(0,C.K)("calcite-input-date-picker",{class:p.datePicker,"data-testid":"daylight-date-picker",disabled:o,key:p.datePicker,overlayPositioning:"fixed",placement:"bottom",valueAsDate:e.localDate,onCalciteInputDatePickerChange:this._onDateChange}),t.playButtons?this._renderPlayPauseButton({playing:s,disabled:o,label:i.playYear,onClick:this._onYearPlayClick}):null)}_renderPlayPauseButton(e){let{playing:t,disabled:i,label:s,onClick:o}=e;return(0,C.K)("calcite-button",{appearance:"solid",class:p.playPauseButton,disabled:i,iconStart:t?"pause-f":"play-f",label:s,onclick:o,round:!0,title:s,type:"button"})}_renderSeasonSelect(){const{messages:e,viewModel:t}=this,i=!t.sunLightingEnabled;return(0,C.K)("calcite-select",{class:this.classes(p.seasonPicker),disabled:i,label:e.season,onCalciteSelectChange:this._onSeasonChange},y.Cg.map((i=>(0,C.K)("calcite-option",{selected:t.currentSeason===i,value:i},e[i]))))}_renderDateOrSeason(){return"date"===this.dateOrSeason?this._renderDateOptions():this._renderSeasonSelect()}_renderSunLightingToggle(){const e=this.messages?.sunLightingToggle;return(0,C.K)("calcite-label",{key:"date-time-toggle",layout:"inline",scale:"s",title:e?.tooltip},(0,C.K)("calcite-checkbox",{checked:this.viewModel.sunLightingEnabled,class:p.sunLightingCheckbox,onCalciteCheckboxChange:this._onSunLightingCheckboxChange}),e?.label)}_renderShadowsToggle(){const e=this.messages.shadowsToggle;return(0,C.K)("calcite-label",{key:"shadow-toggle",layout:"inline",scale:"s",title:e?.tooltip},(0,C.K)("calcite-checkbox",{checked:this.viewModel.directShadowsEnabled,class:p.shadowsCheckbox,onCalciteCheckboxChange:this._onShadowCheckboxChange}),e.label)}_makeGoToTime(e){return()=>{this.viewModel.timeSliderPosition=e}}};(0,s._)([(0,l.MZ)(),(0,L.G)("esri/widgets/Daylight/t9n/Daylight")],z.prototype,"messages",void 0),(0,s._)([(0,l.MZ)(),(0,L.G)("esri/widgets/support/t9n/timezone")],z.prototype,"timezoneMessages",void 0),(0,s._)([(0,l.MZ)()],z.prototype,"headingLevel",void 0),(0,s._)([(0,l.MZ)()],z.prototype,"icon",null),(0,s._)([(0,l.MZ)()],z.prototype,"label",null),(0,s._)([(0,l.MZ)()],z.prototype,"playSpeedMultiplier",null),(0,s._)([(0,l.MZ)()],z.prototype,"timeSliderSteps",null),(0,s._)([(0,l.MZ)()],z.prototype,"view",null),(0,s._)([(0,l.MZ)({type:u.default})],z.prototype,"viewModel",void 0),(0,s._)([(0,l.MZ)({type:b,nonNullable:!0})],z.prototype,"visibleElements",void 0),(0,s._)([(0,l.MZ)({cast(e){return"season"===e||"date"===e?e:(o.A.getLogger(this).warn(`"${e}" is not a valid option. Acceptable values are only "date" or "season". Defaulting to "${K}".`),K)}})],z.prototype,"dateOrSeason",void 0),(0,s._)([(0,l.MZ)()],z.prototype,"_timeSlider",void 0),z=(0,s._)([(0,a.$)("esri.widgets.Daylight")],z);const I=[Z.D.interactive,Z.D.anchor],B=z},35529:(e,t,i)=>{i.d(t,{G:()=>u});var s=i(35143),o=i(46053),n=(i(81806),i(76460),i(47249),i(85842)),l=i(25329),a=i(94126),r=i(24992),d=(i(76099),i(63582)),h=i(54761);const c="esri-timezone-picker",p={base:c,trigger:`${c}__trigger`,itemTitle:`${c}__item-title`,itemDescription:`${c}__item_description`};let u=class extends l.default{constructor(e,t){super(e,t),this.disabled=!1,this.value=null,this.onChange=null,this.open=!1,this.onOpen=null,this.onClose=null,this._selectedId=null,this._onOpen=()=>{this.open=!0,this.onOpen?.()},this._onClose=()=>{this.open=!1,this.onClose?.()},this._killEvent=e=>(e.stopPropagation(),!0),this._onChange=e=>{const t=e.target.selectedItems?.[0].getAttribute("data-id"),i=g(this._gmtOffsets,t)?.utcOffset;null!=i&&(this._selectedId=t,this.onChange?.(i))}}loadDependencies(){return(0,a.W)({button:()=>Promise.resolve().then(i.bind(i,43285)),dropdown:()=>Promise.resolve().then(i.bind(i,24482)),"dropdown-group":()=>Promise.resolve().then(i.bind(i,5368)),"dropdown-item":()=>Promise.resolve().then(i.bind(i,84660))})}render(){const e=this._messages;if(!e)return(0,h.K)("div",{class:p.base,key:"empty"});const t=this._selectedItem,i=_(t);return(0,h.K)("div",{class:p.base,key:"container",onpointerdown:this._killEvent},(0,h.K)("calcite-dropdown",{disabled:this.disabled,open:this.open,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",onCalciteDropdownClose:this._onClose,onCalciteDropdownOpen:this._onOpen,onCalciteDropdownSelect:this._onChange},(0,h.K)("calcite-button",{appearance:"transparent",class:p.trigger,"data-testid":"timezone-picker-button",disabled:this.disabled,key:"trigger",kind:"neutral",scale:"s",slot:"trigger",tabIndex:0,title:e.chooseTimezone},t?.short??""),(0,h.K)("calcite-dropdown-group",{selectionMode:"single"},this._gmtOffsets.map((e=>{const t=_(e);return(0,h.K)("calcite-dropdown-item",{"data-id":t,"data-testid":t,key:t,selected:i===t},(0,h.K)("div",{class:p.itemTitle,key:"title"},e.shortWithUTC),(0,h.K)("div",{class:p.itemDescription,key:"description"},e.long))})))))}get _gmtOffsets(){const e=this._messages;return e?(0,r.jP)(e):[]}get _selectedItem(){const e=this._gmtOffsets,t=this.value,i=g(e,this._selectedId);return i?.utcOffset===t?i:function(e,t){return e.find((e=>e.utcOffset===t))}(e,t)}};function g(e,t){return e.find((e=>_(e)===t))}function _(e){return e?`${e.utcOffset}-${e.long}`:void 0}(0,s._)([(0,o.MZ)()],u.prototype,"disabled",void 0),(0,s._)([(0,o.MZ)()],u.prototype,"value",void 0),(0,s._)([(0,o.MZ)()],u.prototype,"onChange",void 0),(0,s._)([(0,o.MZ)()],u.prototype,"open",void 0),(0,s._)([(0,o.MZ)()],u.prototype,"onOpen",void 0),(0,s._)([(0,o.MZ)()],u.prototype,"onClose",void 0),(0,s._)([(0,o.MZ)(),(0,d.G)("esri/widgets/support/t9n/timezone")],u.prototype,"_messages",void 0),(0,s._)([(0,o.MZ)()],u.prototype,"_gmtOffsets",null),(0,s._)([(0,o.MZ)()],u.prototype,"_selectedItem",null),(0,s._)([(0,o.MZ)()],u.prototype,"_selectedId",void 0),u=(0,s._)([(0,n.$)("esri.widgets.support.TimezonePicker")],u)}}]);
//# sourceMappingURL=27481.f65209e3.chunk.js.map