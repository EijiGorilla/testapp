{"version":3,"file":"static/js/34209.4c86f005.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/views/layers/ImageryLayerView.js","../node_modules/@arcgis/core/views/3d/layers/ImageryLayerView3D.js","../node_modules/@arcgis/core/layers/support/timeSupport.js","../node_modules/@arcgis/core/support/timeUtils.js","../node_modules/@arcgis/core/webscene/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{getFeatureEditFields as e,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function n(n,p=n.popupTemplate){if(null==p)return[];const u=await p.getRequiredFields(n.fieldsIndex),{lastEditInfoEnabled:t}=p,{objectIdField:d,typeIdField:s,globalIdField:i,relationships:a}=n;if(u.includes(\"*\"))return[\"*\"];const o=t?e(n):[],f=l(n.fieldsIndex,[...u,...o]);return s&&f.push(s),f&&d&&n.fieldsIndex?.has(d)&&!f.includes(d)&&f.push(d),f&&i&&n.fieldsIndex?.has(i)&&!f.includes(i)&&f.push(i),a&&a.forEach((e=>{const{keyField:l}=e;f&&l&&n.fieldsIndex?.has(l)&&!f.includes(l)&&f.push(l)})),f}function p(e,l){return e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function u(e,l){return null!=p(e,{defaultPopupTemplateEnabled:l})}export{p as getFetchPopupTemplate,n as getRequiredFields,u as hasPopupTemplate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import{throwIfAborted as r}from\"../../core/promiseUtils.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Point.js\";import{combineTimeExtent as a}from\"../../layers/support/timeSupport.js\";import{load as p,getSourceScale as n}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import u from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as c}from\"./support/popupUtils.js\";const m=m=>{let l=class extends m{constructor(){super(...arguments),this.view=null}get timeExtent(){return a(this.layer,this.view?.timeExtent,this._get(\"timeExtent\"))}async fetchPopupFeaturesAtLocation(e,o){const{layer:s}=this;if(!e)throw new t(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s});const{popupEnabled:a}=s,p=c(s,o);if(!a||null==p)return[];const n=await p.getRequiredFields();r(o);const m=new u;m.timeExtent=this.timeExtent,m.geometry=e,m.outFields=n,m.outSpatialReference=e.spatialReference;const{resolution:l,spatialReference:y}=this.view,h=\"2d\"===this.view.type?new i(l,l,y):new i(.5*l,.5*l,y),{returnTopmostRaster:f,showNoDataRecords:w}=p.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},d={returnDomainValues:!0,returnTopmostRaster:f,pixelSize:h,showNoDataRecords:w,signal:o?.signal};return s.queryVisibleRasters(m,d).then((e=>e))}async getSourceScale(){return await p(),await this.layer.load(),n(this.layer.serviceRasterInfo,this.view.spatialReference)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([o()],l.prototype,\"layer\",void 0),e([o()],l.prototype,\"suspended\",void 0),e([o({readOnly:!0})],l.prototype,\"timeExtent\",null),e([o()],l.prototype,\"view\",void 0),l=e([s(\"esri.views.layers.ImageryLayerView\")],l),l};export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{debounce as t}from\"../../../core/promiseUtils.js\";import{when as a}from\"../../../core/reactiveUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./DynamicLayerView3D.js\";import o from\"../../layers/ImageryLayerView.js\";let n=class extends(o(s)){constructor(){super(...arguments),this.type=\"imagery-3d\",this.redrawDebounced=t((async e=>{this.redraw(((e,t)=>this._redrawImage(e,t)),e)}),2e3)}get highlightOptions(){return null}get pixelData(){return null}initialize(){this.addHandles([a((()=>this.view.basemapTerrain.ready),(()=>this._initializeMaximumDataResolution()),{once:!0,initial:!0}),this.layer.on(\"redraw\",(()=>this._updatingHandles.addPromise(this.redrawDebounced())))]),this._updatingHandles.add((()=>this.layer?.exportImageServiceParameters?.version),(()=>{this._updatingHandles.addPromise(this.refreshDebounced())})),this._updatingHandles.add((()=>this.layer?.renderer),(()=>{this._updatingHandles.addPromise(this.refreshDebounced())})),this._updatingHandles.add((()=>this.timeExtent),(()=>this._updatingHandles.addPromise(this.refreshDebounced())))}_initializeMaximumDataResolution(){this.maximumDataResolution=this.layer.loaded?this.layer.serviceRasterInfo.pixelSize:null}getFetchOptions(){return{timeExtent:this.timeExtent}}async processResult(e,t,a){t.imageOrCanvasElement?e.image=t.imageOrCanvasElement:(e.image=document.createElement(\"canvas\"),e.pixelData=t.pixelData,await this._redrawImage(e,a))}async _redrawImage(e,t){if(!(e.image instanceof HTMLCanvasElement)||null==e.pixelData)throw new Error;const a=e.image,i=a.getContext(\"2d\"),r=await this.layer.applyRenderer(e.pixelData,{signal:t}),s=this.layer.applyFilter(r).pixelBlock;if(null==s)throw new Error;a.width=s.width,a.height=s.height;const o=i.createImageData(s.width,s.height);o.data.set(s.getAsRGBA()),i.putImageData(o,0,0)}highlight(e){throw new Error(\"Not implemented\")}};e([i()],n.prototype,\"highlightOptions\",null),e([i()],n.prototype,\"pixelData\",null),n=e([r(\"esri.views.3d.layers.ImageryLayerView3D\")],n);const l=n;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{toLocalTimeExtent as e,toUTCTimeExtent as t}from\"../../support/timeUtils.js\";function i(i,n,s){if(null==i?.timeInfo)return null;const{datesInUnknownTimezone:l=!1,timeOffset:o,useViewTime:m}=i;let u=i.timeExtent;l&&(u=e(u));let r=m?n&&u?n.intersection(u):n||u:u;return!r||r.isEmpty||r.isAllTime?r:(o&&(r=r.offset(-o.value,o.unit)),l&&(r=t(r)),r.equals(s)?s:r)}export{i as combineTimeExtent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../core/arrayUtils.js\";import{clone as e}from\"../core/lang.js\";import{offsetDate as n}from\"../core/timeUtils.js\";import i from\"../time/TimeExtent.js\";import{isWebMap as r}from\"../webmap/utils.js\";import{isWebScene as l}from\"../webscene/utils.js\";function s(t){return void 0!==t.timeInfo}async function u(t,e){return t.widgets?.timeSlider?.fullTimeExtent??a(t.allLayers,e)}function o(t){const e=t.numThumbs??2,n=t.currentTimeExtent;if(n){const{start:t,end:i}=n;return null!=t&&null!=i&&t.getTime()===i.getTime()?\"instant\":2===e?\"time-window\":null==t||0===t.getTime()?\"cumulative-from-start\":\"cumulative-from-end\"}return 2===e?\"time-window\":\"cumulative-from-start\"}function m(t){const{numStops:n,stopInterval:i,stops:r}=t;return r?{dates:e(r)}:i?{interval:i.clone()}:{count:n??5}}async function a(e,n){if(0===e.length)return i.allTime;await Promise.all(e.map((t=>t.load({signal:n}))));const r=e.filter(s),l=e.filter((t=>!s(t)&&null!=t.visibilityTimeExtent));if(0===r.length&&0===l.length)return i.allTime;const u=[],o=[];for(const t of r)\"feature\"!==t?.type&&\"map-image\"!==t?.type||!t.timeInfo?.hasLiveData?o.push(t):u.push(t);const m=t=>null==t||t.isAllTime,a=[...o.map((t=>{const e=t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:n}=t;return e?.intersection(n)??n})),...l.map((t=>t.visibilityTimeExtent))];if(a.some(m))return i.allTime;const f=u.map((async t=>{const e=(await t.fetchRecomputedExtents({signal:n}))?.timeExtent??t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:i}=t;return e?.intersection(i)??i})),c=(await Promise.allSettled(f)).map((t=>\"fulfilled\"===t.status?t.value:null));if(c.some(m))return i.allTime;const d=[...c,...a].filter(t);if(0===d.length)return i.allTime;return d.reduce(((t,e)=>t.union(e)))}function f(t,e){const n=t.currentTimeExtent;if(!n)return null;const{start:r,end:l}=n,s=r??l??null;switch(e){case\"time-window\":return new i({start:r,end:l});case\"cumulative-from-start\":return new i({start:null,end:s});case\"cumulative-from-end\":return new i({start:s,end:null});case\"instant\":return new i({start:s,end:s})}}async function c(t,e){if(!r(t)&&!l(t))return null;await t.load({signal:e});const n=t?.widgets?.timeSlider;if(!n)return null;const i=await u(t,e),s=n.loop,a=o(n);return{fullTimeExtent:i,loop:s,mode:a,playRate:n.stopDelay??2e3,stops:m(n),timeExtent:f(n,a)}}function d(t){if(!t)return t;const{start:e,end:r}=t;return new i({start:null!=e?n(e,-e.getTimezoneOffset(),\"minutes\"):e,end:null!=r?n(r,-r.getTimezoneOffset(),\"minutes\"):r})}function p(t){if(!t)return t;const{start:e,end:r}=t;return new i({start:null!=e?n(e,e.getTimezoneOffset(),\"minutes\"):e,end:null!=r?n(r,r.getTimezoneOffset(),\"minutes\"):r})}export{a as getTimeExtentFromLayers,c as getTimeSliderSettingsFromWebDocument,p as toLocalTimeExtent,d as toUTCTimeExtent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{WebSceneTag as o}from\"../support/tagSymbols.js\";function t(t){return null!=t&&\"object\"==typeof t&&o in t}export{t as isWebScene};\n"],"names":["async","n","p","arguments","length","undefined","popupTemplate","u","getRequiredFields","fieldsIndex","lastEditInfoEnabled","t","objectIdField","d","typeIdField","s","globalIdField","i","relationships","a","includes","o","e","f","l","push","has","forEach","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","m","constructor","super","this","view","timeExtent","layer","_get","fetchPopupFeaturesAtLocation","popupEnabled","c","r","geometry","outFields","outSpatialReference","spatialReference","resolution","y","h","type","returnTopmostRaster","showNoDataRecords","w","layerOptions","returnDomainValues","pixelSize","signal","queryVisibleRasters","then","getSourceScale","load","serviceRasterInfo","canResume","isEmpty","prototype","readOnly","redrawDebounced","redraw","_redrawImage","highlightOptions","pixelData","initialize","addHandles","basemapTerrain","ready","_initializeMaximumDataResolution","once","initial","on","_updatingHandles","addPromise","add","exportImageServiceParameters","version","refreshDebounced","renderer","maximumDataResolution","loaded","getFetchOptions","processResult","imageOrCanvasElement","image","document","createElement","HTMLCanvasElement","Error","getContext","applyRenderer","applyFilter","pixelBlock","width","height","createImageData","data","set","getAsRGBA","putImageData","highlight","timeInfo","datesInUnknownTimezone","timeOffset","useViewTime","intersection","isAllTime","offset","value","unit","equals","widgets","timeSlider","fullTimeExtent","allLayers","numStops","stopInterval","stops","dates","interval","clone","count","allTime","Promise","all","map","filter","visibilityTimeExtent","hasLiveData","some","fetchRecomputedExtents","allSettled","status","reduce","union","currentTimeExtent","start","end","loop","numThumbs","getTime","mode","playRate","stopDelay","getTimezoneOffset"],"sourceRoot":""}