{"version":3,"file":"static/js/82745.158dd669.chunk.js","mappings":"iVAI8zB,IAAIA,EAAE,cAAcC,EAAAA,GAAEC,WAAAA,CAAYC,GAAGC,MAAMD,GAAGE,KAAKC,aAAa,KAAKD,KAAKE,UAAU,IAAIC,IAAIH,KAAKI,kBAAkB,IAAID,IAAIH,KAAKK,UAAU,KAAKL,KAAKM,gBAAgB,IAAIC,EAAAA,EAAEP,KAAKQ,cAAc,IAAI,CAAC,YAAIC,GAAW,OAAOT,KAAKE,SAAS,CAAC,eAAIQ,GAAwB,IAAIC,EAAE,EAAE,OAAOX,KAAKI,kBAAkBQ,SAASC,GAAGF,GAAGE,EAAEC,YAAzD,IAAyEH,CAAC,CAAC,cAAII,GAAa,IAAIjB,EAAE,EAAE,OAAOE,KAAKI,kBAAkBQ,SAASD,IAAIb,GAAGa,EAAEK,IAAID,UAAU,IAAIjB,CAAC,CAACmB,UAAAA,GAAajB,KAAKQ,cAAcR,KAAKkB,SAASC,qBAAqBnB,KAAKkB,SAAST,SAASG,SAAS,CAACd,EAAEa,KAAKX,KAAKE,UAAUkB,IAAIT,GAAGA,GAAGA,IAAIU,EAAAA,EAAEC,WAAWX,IAAIU,EAAAA,EAAEE,iBAAiBzB,EAAEa,IAAI,GAAG,CAACa,OAAAA,GAAUxB,KAAKC,aAAawB,UAAU,MAAM3B,EAAEE,KAAKI,kBAAkBsB,OAAO,IAAI,MAAMf,KAAKb,EAAEE,KAAK2B,qBAAqBhB,EAAE,CAACiB,iBAAAA,CAAkB9B,GAAG,MAAMa,EAAEX,KAAKkB,SAAS,IAAIP,EAAEkB,aAAa/B,GAAG,OAAO,KAAK,MAAMgC,OAAOjB,EAAEkB,KAAKC,GAAGlC,EAAEF,EAAEe,EAAEF,SAASwB,IAAID,EAAEE,MAAM,IAAItC,IAAIiB,GAAG,OAAO,KAAK,GAAGA,IAAIQ,EAAAA,EAAEC,WAAWT,IAAIQ,EAAAA,EAAEE,gBAAgB,OAAO,KAAK,MAAMY,EAAEnC,KAAKC,aAAamC,KAAKtC,EAAEuC,KAAKL,EAAEE,KAAKrB,GAAG,OAAOsB,GAAGG,UAAUN,EAAE,CAACO,MAAAA,CAAOzC,EAAEa,GAAG,MAAME,EAAEb,KAAKI,kBAAkB,GAAG,IAAIS,EAAE2B,KAAK,OAAO,MAAMT,KAAKC,GAAGlC,EAAEuB,EAAEW,EAAEE,OAAOO,EAAAA,EAAEC,mBAAmBV,EAAEE,OAAOO,EAAAA,EAAEE,8BAA8BX,EAAEE,KAAK,KAAKtC,EAAEE,EAAEuC,KAAKzC,EAAEgD,0BAA0BhD,EAAEiD,cAAclC,EAAEqB,EAAEhC,KAAKkB,SAAS4B,YAAY,MAAMX,EAAExB,EAAEoC,QAAQ,IAAI,MAAMN,EAAElC,KAAKM,EAAEb,KAAKM,gBAAgB0C,OAAOzC,EAAE0C,YAAYd,EAAEe,SAASlB,EAAEhC,KAAKkB,SAAS4B,WAAW9C,KAAKM,iBAAiBK,EAAEwC,yBAAyB5C,EAAES,KAAKpB,EAAEwD,QAAQ7C,EAAES,KAAKpB,EAAEyD,iBAAiB1C,EAAE2C,aAAY,EAAGjC,IAAIzB,EAAE2D,WAAW5C,EAAE6C,cAAc,EAAEjD,EAAEO,YAAY,CAAC2C,uBAAAA,CAAwB3D,EAAEa,GAAGX,KAAKC,aAAa,IAAIkC,EAAAA,EAAEnC,KAAKkB,SAASpB,EAAE4D,WAAW1D,KAAKK,UAAUP,EAAE6D,cAActB,KAAKuB,YAAY5D,KAAKkB,SAAS2C,0BAAyB7B,EAAAA,EAAAA,GAAEhC,KAAKQ,cAAcsD,oBAAoB,CAACC,yBAAAA,GAA4B,CAACC,iBAAAA,CAAkBlE,EAAEa,EAAEE,GAAGb,KAAK2B,qBAAqB7B,GAAG,MAAMkC,EAAEhC,KAAKK,UAAU4D,OAAOtD,EAAEuD,KAAKC,YAAYnC,EAAEoC,cAAcnC,IAAI,YAAYoC,WAAW,IAAIC,WAAW3D,EAAEuD,MAAM,EAAE,EAAEvD,EAAEuD,KAAKC,YAAY,MAAM9C,EAAE,CAAC4B,YAAYpC,EAAEG,IAAIgB,EAAElB,YAAYH,EAAE4D,cAAc,OAAOvE,KAAKI,kBAAkBgB,IAAItB,EAAEuB,GAAGA,CAAC,CAACM,oBAAAA,CAAqB7B,GAAG,MAAMa,EAAEX,KAAKI,kBAAkB6B,IAAInC,GAAG,MAAMa,IAAIX,KAAKK,UAAUmE,UAAU7D,EAAEK,KAAKhB,KAAKI,kBAAkBqE,OAAO3E,GAAG,CAAC4E,mBAAAA,CAAoB5E,GAAG,OAAM,CAAE,IAAGA,EAAAA,EAAAA,GAAE,EAACa,EAAAA,EAAAA,IAAE,CAACgE,eAAc,KAAMhF,EAAEiF,UAAU,gBAAW,GAAQjF,GAAEG,EAAAA,EAAAA,GAAE,EAACe,EAAAA,EAAAA,GAAE,oEAAoElB,G,0DCA35E,IAAIY,EAAE,MAAMV,WAAAA,CAAYC,GAAGE,KAAK6E,gBAAgB,IAAIC,MAAM9E,KAAK+E,0BAA0B,IAAI5E,IAAIH,KAAKgF,wBAAwB,IAAIF,MAAM9E,KAAKiF,sBAAsB,KAAKjF,KAAKkF,SAASpF,EAAEoF,SAASlF,KAAKmF,KAAKrF,EAAEqF,KAAKnF,KAAKoF,gBAAgBpF,KAAKmF,KAAKE,sBAAsBrF,KAAKsF,UAAUtF,KAAKmF,KAAKI,mBAAmBD,SAAS,CAAC,eAAI5E,GAAc,OAAOV,KAAK+E,0BAA0BvC,IAAI,CAAC,cAAIzB,GAAa,MAAMjB,EAAEE,KAAKiF,uBAAuBO,YAAY7E,EAAEb,GAAG2F,OAAO,OAAO9E,GAAG+E,qBAAqB,GAAG,GAAG1F,KAAK+E,0BAA0BvC,IAAI,CAAChB,OAAAA,GAAUxB,KAAKgF,wBAAwBpE,SAASd,GAAGA,KAAK,CAAC,YAAM6F,CAAO7F,EAAEuB,EAAEc,IAAGyD,EAAAA,EAAAA,GAAI,8CAA8C5F,KAAK6E,gBAAgBgB,KAAKjG,EAAAA,EAAEkG,uBAAuB,MAAMjF,EAA4jD,SAAWf,EAAEa,GAAG,MAAMU,EAAEV,EAAEoF,OAAOC,KAAKrF,IAAI,MAAMU,EAAEV,EAAEsF,WAAWD,KAAKrF,IAAI,MAAMU,EAAEvB,EAAEa,EAAEuF,YAAY,IAAmP,SAAWpG,GAAG,OAAO,MAAMA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEqG,YAAY,CAA3TC,CAAE/E,GAAG,MAAM,IAAIgF,MAAM,6CAA6C,MAAMzG,EAAE,IAAIiB,EAAAA,GAAEQ,EAAEV,EAAE2F,qBAAqBpC,KAAKvD,EAAE2F,qBAAqB/B,aAAa5D,EAAE4F,cAAc,OAAO,IAAIvE,EAAAA,GAAEpC,EAAE,IAAI,OAAO,IAAI6C,EAAAA,GAAEpB,EAAEV,EAAE6F,qBAAqB,IAAI,OAAO,IAAIC,EAAAA,GAAEpF,EAAE,CAA54DqF,EAAG5G,GAAGuB,EAAEvB,IAAIA,GAAGkC,EAAEhC,KAAKmF,KAAKwB,OAAOlE,EAAE5B,EAAE+F,eAAe5E,EAAE6E,QAAQpE,GAAGzC,KAAK8G,qBAAqB,IAAI9E,EAAE+E,WAAWtE,KAAK,MAAMgE,EAAE5F,EAAEmG,cAAchF,EAAE6E,QAAQJ,GAAGzG,KAAK8G,qBAAqB,KAAKL,EAAE7F,SAASd,GAAGA,EAAEmH,WAAWjF,EAAE+E,WAAWN,EAAE,UAAUS,QAAQC,IAAIV,EAAET,KAAKlG,GAAGE,KAAKmF,KAAKwB,OAAOS,UAAU,IAAItH,EAAEsC,KAAKJ,EAAEqF,WAAWC,mBAAmBnF,OAAMxB,EAAAA,EAAAA,gBAAEwB,GAAG,MAAM5B,QAAQP,KAAKuH,mBAAmB1G,EAAEsB,GAAGnC,KAAKiF,sBAAsB,CAACO,YAAYjF,EAAEmD,UAAUjB,EAAE+E,SAASf,EAAE,CAACgB,YAAAA,CAAa3H,GAAG,MAAMa,EAAEX,KAAKiF,sBAAsB,GAAG,MAAMtE,EAAE,OAAO,MAAM+G,WAAWrG,EAAEsG,gBAAgB/H,EAAEgI,iBAAiBzF,GAAGrC,EAAEe,EAAEF,EAAE6E,YAAY,GAAG,MAAM3E,EAAE,OAAO,MAAMmB,EAAEnB,EAAEgH,aAAapF,EAAEpB,EAAEyG,OAAO,IAAI,IAAIrB,EAAE,EAAEA,EAAEhE,IAAIgE,EAAE,CAAC,MAAM3G,EAAEuB,EAAEoF,GAAG9F,EAAEqB,EAAE+F,cAAclH,EAAEmB,EAAEmD,KAAK1C,EAAE,GAAGgE,EAAE5F,EAAEmH,eAAeC,oBAAoBtH,EAAEf,EAAE6C,GAAG5B,EAAEqH,gBAAgBD,oBAAoBtH,EAAEwB,EAAEM,GAAGT,EAAEmG,qBAAqBxH,GAAGqB,EAAEoG,WAAWzH,GAAE,GAAIX,KAAK+E,0BAA0B3D,IAAItB,EAAEa,EAAE,CAAC,CAAC0H,eAAAA,CAAgBvI,GAAG,MAAMa,EAAEX,KAAKiF,sBAAsB,GAAG,MAAMtE,EAAE,OAAO,MAAMU,EAAEV,EAAE6E,YAAYqC,aAAajI,EAAEI,KAAK+E,0BAA0B5C,EAAErC,EAAEgI,OAAO,IAAI,IAAIjH,EAAE,EAAEA,EAAEsB,IAAItB,EAAE,CAAC,MAAMF,EAAEb,EAAEe,GAAGsB,EAAEvC,EAAEqC,IAAItB,GAAG,MAAMwB,IAAId,EAAEiH,eAAenG,GAAGvC,EAAE6E,OAAO9D,GAAG,CAAC,CAACmG,mBAAAA,CAAoBhH,GAAGE,KAAKgF,wBAAwBa,KAAK/F,EAAE,CAAC,wBAAMyH,CAAmBzH,EAAEa,GAAG,MAAMU,EAAErB,KAAKmF,KAAKwB,OAAO/G,EAAE,CAACsF,SAASlF,KAAKkF,SAASqD,WAAWzI,GAAG,EAAE0I,6BAA6B1I,GAAG,EAAE2I,+BAA+B3I,GAAG,GAAGe,EAAE,IAAIsB,EAAAA,EAAE,CAACsD,OAAO3F,EAAE4I,eAAe1I,KAAK6E,gBAAgB8D,SAAS/I,EAAEgJ,qBAAqB,MAAM5I,KAAKsF,WAAW,OAAOzE,EAAEgI,mBAAkB,EAAG7I,KAAK8G,qBAAqB,KAAKzF,EAAEyH,mBAAmBjI,GAAGA,EAAEW,SAAS,UAAUH,EAAE0H,gBAAgBlI,EAAEF,GAAGE,CAAC,GAAmaN,GAAET,EAAAA,EAAAA,GAAE,EAACuB,EAAAA,EAAAA,GAAE,iEAAiEd,G,2DCAjkE,IAAIyI,EAAE,cAAcrI,EAAAA,QAAEd,WAAAA,CAAYC,GAAGC,QAAQC,KAAKmF,KAAK,KAAKnF,KAAKkF,SAAS,KAAKlF,KAAKI,kBAAkB,IAAID,IAAIH,KAAKiJ,WAAW,IAAI9I,IAAIH,KAAKkJ,iBAAiB,IAAI/I,IAAIH,KAAKmJ,cAAc,IAAIhJ,IAAIH,KAAKoJ,cAAc,EAAEpJ,KAAKmF,KAAKrF,EAAEqF,KAAKnF,KAAKkF,SAASpF,EAAEoF,QAAQ,CAACjE,UAAAA,GAAa,CAACO,OAAAA,GAAUxB,KAAKqJ,mBAAmBrJ,KAAKmJ,cAAcvI,SAASd,GAAGA,EAAE0B,WAAW,CAAC,2BAAM8H,CAAsBxJ,GAAG,IAAI,MAAMa,KAAKb,EAAE,OAAOa,EAAE4I,IAAI,IAAI,wBAAwBvJ,KAAKwJ,gBAAgB7I,GAAG,MAAM,IAAI,+BAA+BX,KAAKyJ,sBAAsB9I,GAAG,MAAM,IAAI,qCAAqCX,KAAK0J,2BAA2B/I,GAAGX,KAAK2J,sBAAsB,MAAM,IAAI,wCAAwC3J,KAAK4J,8BAA8BjJ,GAAGX,KAAK2J,sBAAsB,MAAM,IAAI,4BAA4B3J,KAAKuH,mBAAmB5G,GAAG,MAAM,IAAI,0BAA0BX,KAAK6J,iBAAiBlJ,GAAGX,KAAK2J,sBAAsB,MAAM,IAAI,6BAA6B3J,KAAK8J,oBAAoBnJ,GAAGX,KAAK2J,sBAAsB,CAACA,mBAAAA,GAAsB,IAAI7J,EAAE,EAAE,IAAI,MAAMa,KAAKX,KAAKkJ,iBAAiBa,SAASjK,GAAGa,EAAED,YAAY,IAAI,MAAMC,KAAKX,KAAKmJ,cAAcY,SAASjK,GAAGa,EAAED,YAAYV,KAAKgK,KAAK,gBAAgBlK,EAAE,CAAC,cAAIiB,GAAa,IAAIjB,EAAE,EAAE,IAAI,MAAMa,KAAKX,KAAKkJ,iBAAiBa,SAASjK,GAAGa,EAAEI,WAAW,IAAI,MAAMJ,KAAKX,KAAKmJ,cAAcY,SAASjK,GAAGa,EAAEI,WAAW,OAAOjB,CAAC,CAAC,qBAAM0J,CAAgB1J,GAAG,MAAMqF,KAAKxE,GAAGX,MAAMqF,sBAAsBrD,GAAGrB,EAAE,GAAG,MAAMqB,EAAE,MAAM,IAAIqE,MAAM,qCAAqC,MAAMmB,SAAS5H,GAAGoC,EAAES,EAAE9B,EAAEsJ,MAAMC,cAAczD,EAAAA,GAAE0D,OAAO,IAAIhI,EAAE,KAAK,OAAOrC,EAAEsK,MAAM,IAAI,UAAUjI,EAAm4E,SAAWrC,EAAEa,EAAEE,GAAG,MAAMQ,EAAE,CAACgJ,OAAO1J,EAAE2J,8BAA8BC,aAAY,EAAGC,WAAWC,EAAAA,GAAEC,QAAQjI,EAAAA,GAAEkI,QAAQlI,EAAAA,GAAEmI,cAAcjK,EAAEkI,kBAAkBgC,YAAYlK,EAAEkK,YAAYC,4BAA4BnK,EAAEoK,aAAa,OAAsM,SAAWjL,GAAG,MAAMa,EAAEb,EAAEkL,SAAS,EAAEnK,EAAEF,EAAE,EAASb,EAAEmL,YAAYpK,EAAEf,EAAEkL,QAAQrK,EAAEb,EAAEoL,SAASrK,EAAEsK,EAAAA,GAAEC,KAAKD,EAAAA,GAAEE,IAAM,CAAvSC,CAAEjK,GAAGV,EAAE4K,+BAA+BlK,EAAEmK,sBAAsB1L,EAAE2L,+BAA+BpK,EAAEqK,cAAcvJ,EAAAA,GAAEd,EAAEsK,aAAY,EAAG,IAAIC,EAAAA,GAAEvK,EAAE,CAACwK,UAAUhL,EAAEiL,oCAAmC,GAAI,CAA/xFC,CAAE/J,EAAE,CAACsI,+BAA8B,EAAGzB,mBAAkB,EAAGgC,aAAY,EAAGE,aAAY,EAAGQ,8BAA6B,EAAGO,mCAAmCnL,EAAEgG,OAAOU,WAAWC,iBAAiB0E,WAAWF,mCAAmCG,QAAQxJ,GAAG,MAAM,IAAI,MAAM,CAAC,MAAM3C,EAAEa,GAAGuL,EAAEtM,EAAE6C,GAAGzC,KAAKmM,WAAW,EAACtL,EAAAA,EAAAA,KAAG,KAAIQ,EAAAA,EAAAA,IAAEV,OAAOwB,EAAErC,CAAC,CAAC,MAAM,QAAQ,MAAM,IAAIuG,MAAM,0CAA0CvG,EAAEsK,QAAQpK,KAAKiJ,WAAW7H,IAAItB,EAAEoG,WAAW/D,EAAE,CAACiK,YAAAA,CAAatM,GAAG,OAAOE,KAAKiJ,WAAWhH,IAAInC,EAAE,CAAC,2BAAM2J,CAAsB3J,GAAG,MAAMa,EAAEb,EAAEoG,WAAWrF,EAAEb,KAAKoM,aAAazL,GAAG,GAAG,MAAME,EAAE,MAAM,IAAIwF,MAAM,sBAAsB1F,KAAK,MAAMwE,KAAK9D,GAAGrB,KAAKgC,EAAE,IAAIzB,EAAE,CAACW,SAASL,IAAIb,KAAKkJ,iBAAiB9H,IAAIT,EAAEqB,GAAGX,EAAEsF,OAAOoC,gBAAgB/G,GAAGX,EAAEsF,OAAOU,WAAWgF,SAASC,gBAAgB,CAAC,gCAAM5C,CAA2B5J,GAAG,MAAMa,EAAEb,EAAEyM,iBAAiB1L,EAAEf,EAAEoG,iBAAiBlG,KAAK4J,8BAA8B,CAAC2C,iBAAiB5L,IAAI,MAAMU,EAAErB,KAAKkJ,iBAAiBjH,IAAIpB,GAAG,GAAG,MAAMQ,EAAE,YAAYmL,QAAQC,MAAM,6CAA6C,MAAMzK,EAAEX,EAAE2C,kBAAkBrD,EAAEb,EAAEwG,qBAAqBxG,EAAEmD,aAAajD,KAAKI,kBAAkBgB,IAAIT,EAAE,CAAC+L,eAAe1K,EAAEkE,WAAWrF,IAAIb,KAAKmF,KAAKwB,OAAOU,WAAWsF,eAAe,CAAC,mCAAM/C,CAA8B9J,GAAG,MAAMa,EAAEb,EAAEyM,iBAAiB1L,EAAEb,KAAKI,kBAAkB6B,IAAItB,GAAG,GAAG,MAAME,EAAE,OAAO,MAAMQ,EAAER,EAAEqF,WAAWlE,EAAEhC,KAAKkJ,iBAAiBjH,IAAIZ,GAAG,MAAMW,EAAEA,EAAEL,qBAAqB7B,EAAEyM,kBAAkBC,QAAQC,MAAM,4CAA4C,CAAC,wBAAMlF,CAAmBzH,GAAG,MAAMa,EAAE,IAAIhB,EAAE,CAACwF,KAAKnF,KAAKmF,KAAKD,SAASlF,KAAKkF,WAAWrE,EAAE,IAAI+L,sBAAgDjM,EAAEgF,OAAO7F,EAAE+M,mBAAzC/M,GAAGE,KAAKoM,aAAatM,IAAwCe,EAAEiM,QAAQ9M,KAAKmJ,cAAc/H,IAAItB,EAAEiN,cAAcpM,EAAE,CAAC,sBAAMkJ,CAAiB/J,GAAG,MAAMa,EAAEX,KAAKmJ,cAAclH,IAAInC,EAAEiN,eAAe,GAAG,MAAMpM,EAAE,MAAM,IAAI0F,MAAM,wDAAwD1F,EAAE8G,aAAa3H,EAAEoE,KAAK,CAAC,yBAAM4F,CAAoBhK,GAAG,MAAMa,EAAEX,KAAKmJ,cAAclH,IAAInC,EAAEiN,eAAe,GAAG,MAAMpM,EAAE,MAAM,IAAI0F,MAAM,wDAAwD1F,EAAE0H,gBAAgBvI,EAAE4H,WAAW,GAAG,SAASwE,EAAEpM,EAAEa,GAAG,MAAME,EAAE,CAACmM,eAAetG,EAAAA,GAAEuG,OAAOC,eAAc,EAAGtC,eAAc,EAAGuC,MAAM,CAAC,EAAE,EAAE,EAAE,GAAGC,aAAa,CAAC,EAAE,EAAE,EAAE,GAAGC,YAAY,EAAEC,yBAAyBlH,EAAAA,IAAU,GAAG,MAAMtG,EAAE,CAAC,MAAMa,EAAEb,EAAEyN,SAAS,eAAe,KAAIC,EAAAA,EAAAA,IAAE,YAAY3M,EAAE4M,UAAU9M,EAAE+M,QAAQnE,GAAG1I,EAAE8M,8BAA6B,EAAG9M,EAAE+M,sCAAqCC,EAAAA,EAAAA,IAAE,SAAS,CAAC,MAAM,CAAC,IAAIC,EAAAA,EAAEjN,EAAEF,GAAlM,KAAuM,EAAygBb,EAAAA,EAAAA,GAAE,EAACkC,EAAAA,EAAAA,IAAE,CAAC+L,UAAS,KAAM/E,EAAEpE,UAAU,qBAAgB,GAAQoE,GAAElJ,EAAAA,EAAAA,GAAE,EAACF,EAAAA,EAAAA,GAAE,kFAAkFoJ,E,wNCA54K,IAAIvG,EAAE,cAAc5B,EAAAA,EAAEhB,WAAAA,CAAYC,GAAGC,MAAMD,GAAGE,KAAKoH,SAAS,KAAKpH,KAAKgO,iBAAgB,CAAE,CAAC,YAAIC,GAAW,OAAOjO,KAAKgO,eAAe,CAAC/M,UAAAA,GAAajB,KAAKkO,cAAc,IAAIzH,EAAEzG,KAAKoH,SAASpH,MAAM,MAAMmO,MAAMrO,EAAEsO,qBAAqBvN,EAAEwN,uBAAuB1N,GAAGX,KAAKA,KAAKsO,oBAAoB,iBAAiBxO,EAAEsC,OAAO,MAAMmM,WAAW3O,GAAGE,QAAQE,KAAKkO,cAAcM,aAAa,QAAQ,CAACC,IAAI3O,EAAE4O,WAAWC,MAAM,GAAGC,UAAU9O,EAAE+O,cAAcC,SAASV,qBAAqBvN,EAAEiO,SAAST,uBAAuB1N,EAAEmO,SAAS5E,YAAYlK,KAAKkK,YAAY6E,cAAcjP,EAAEiP,cAAcC,aAAalP,EAAEkP,aAAaC,SAASnP,EAAEmP,UAAUH,SAASI,YAAYpP,EAAEoP,YAAYJ,SAASP,WAAW3O,GAAGkP,UAAW,EAA/Y,IAAoZ9O,KAAKmM,WAAWnM,KAAKkO,cAAciB,GAAG,mBAAmBC,IAAgB,IAAdnB,SAASnO,GAAEsP,EAAIpP,KAAKgO,gBAAgBlO,CAAC,IAAI,CAACuP,gBAAAA,CAAgBC,GAAqB,IAAnBC,MAAMzP,EAAE0P,QAAQ3O,GAAEyO,EAAE,GAAG,IAAIxP,EAAEgI,QAAQ,IAAIjH,EAAEiH,OAAO,OAAO,MAAMnH,EAAEb,EAAEkG,IAAIU,GAAG9G,EAAEiB,EAAEmF,IAAIU,GAAG1G,KAAKkO,cAAcM,aAAa,mBAAmB,CAACe,MAAM5O,EAAE6O,QAAQ5P,GAAG,CAAC,kBAAM6P,CAAa3P,EAAEe,GAAG,MAAMF,QAAQX,KAAKkO,cAAcM,aAAa,eAAe1O,GAAGgP,SAASjO,GAAGjB,EAAEyB,EAAAA,QAAEqO,SAAS/O,GAAG,OAAOX,KAAK2P,uBAAuB/P,GAAGA,CAAC,CAAC,wBAAMgQ,CAAmB9P,EAAEe,GAAG,aAAab,KAAKkO,cAAcM,aAAa,qBAAqB1O,GAAGgP,SAASjO,EAAE,CAAC,0BAAMgP,CAAqB/P,EAAEe,GAAG,aAAab,KAAKkO,cAAcM,aAAa,uBAAuB1O,GAAGgP,SAASjO,EAAE,CAAC,2BAAMiP,CAAsBhQ,EAAEe,GAAG,MAAMkP,MAAMpP,EAAEqP,OAAOpQ,SAASI,KAAKkO,cAAcM,aAAa,wBAAwB1O,GAAGgP,SAASjO,GAAG,MAAM,CAACkP,MAAMpP,EAAEqP,OAAOhO,EAAAA,QAAE0N,SAAS9P,GAAG,CAAC,uCAAMqQ,CAAkCnQ,EAAEe,GAAG,MAAMF,QAAQX,KAAKkO,cAAcM,aAAa,oCAAoC1O,GAAGgP,SAASjO,GAAGjB,EAAEyB,EAAAA,QAAEqO,SAAS/O,GAAG,OAAOX,KAAK2P,uBAAuB/P,GAAGA,CAAC,CAAC+P,sBAAAA,CAAuB7P,GAAG,MAAMqO,MAAMtN,GAAGb,KAAK,IAAI,MAAMW,KAAKb,EAAEoQ,SAASvP,EAAEwN,MAAMtN,EAAEF,EAAEwP,YAAYtP,CAAC,IAAGf,EAAAA,EAAAA,GAAE,EAACa,EAAAA,EAAAA,OAAK8B,EAAEmC,UAAU,WAAW,OAAM9E,EAAAA,EAAAA,GAAE,EAACa,EAAAA,EAAAA,IAAE,CAACgE,eAAc,KAAMlC,EAAEmC,UAAU,gBAAW,IAAQ9E,EAAAA,EAAAA,GAAE,EAACa,EAAAA,EAAAA,IAAE,CAACgE,eAAc,KAAMlC,EAAEmC,UAAU,aAAQ,IAAQ9E,EAAAA,EAAAA,GAAE,EAACa,EAAAA,EAAAA,IAAE,CAACgE,eAAc,KAAMlC,EAAEmC,UAAU,4BAAuB,IAAQ9E,EAAAA,EAAAA,GAAE,EAACa,EAAAA,EAAAA,IAAE,CAACgE,eAAc,KAAMlC,EAAEmC,UAAU,8BAAyB,IAAQ9E,EAAAA,EAAAA,GAAE,EAACa,EAAAA,EAAAA,IAAE,CAACgE,eAAc,KAAMlC,EAAEmC,UAAU,mBAAc,IAAQ9E,EAAAA,EAAAA,GAAE,EAACa,EAAAA,EAAAA,IAAE,CAACgE,eAAc,KAAMlC,EAAEmC,UAAU,8BAAyB,IAAQ9E,EAAAA,EAAAA,GAAE,EAACa,EAAAA,EAAAA,OAAK8B,EAAEmC,UAAU,uBAAkB,GAAQnC,GAAE3C,EAAAA,EAAAA,GAAE,EAACF,EAAAA,EAAAA,GAAE,yEAAyE6C,GAAG,MAAMgE,UAAUtE,EAAAA,EAAEtC,WAAAA,CAAYC,EAAEe,GAAGd,MAAM,0BAA0B,QAAQ,CAAC,EAAED,EAAE,CAACsQ,SAAS,YAAYC,OAAOxP,GAAG,EAAE,SAAS6F,EAAC4J,GAAuB,IAArB/G,GAAGzJ,EAAEyQ,IAAI1P,EAAEmP,OAAOrP,GAAE2P,EAAE,MAAM,CAAC/G,GAAGzJ,EAAEyQ,IAAI1P,EAAEmP,OAAOrP,EAAE,C,gDCA98D,IAAI8J,EAAE,cAAczI,EAAAA,EAAEnC,WAAAA,CAAYC,GAAGC,MAAMD,GAAGE,KAAKwQ,UAAU,KAAKxQ,KAAKyQ,cAAc,CAACC,0BAA0BA,CAAC5Q,EAAEe,KAAK,MAAM,IAAIF,EAAAA,QAAE,iCAAiC,EAAE8O,aAAakB,MAAM7Q,EAAEa,UAAUX,KAAKkO,cAAcuB,aAAa3P,EAAEa,GAAGiP,mBAAmBe,MAAM7Q,EAAEa,UAAUX,KAAKkO,cAAc0B,mBAAmB9P,EAAEa,GAAGkP,qBAAqBc,MAAM7Q,EAAEa,UAAUX,KAAKkO,cAAc2B,qBAAqB/P,EAAEa,GAAGmP,sBAAsBa,MAAM7Q,EAAEa,UAAUX,KAAKkO,cAAc4B,sBAAsBhQ,EAAEa,GAAGsP,kCAAkCU,MAAM7Q,EAAEa,UAAUX,KAAKkO,cAAc+B,kCAAkCnQ,EAAEa,IAAIX,KAAK4Q,wBAAwB,GAAG,CAAC3P,UAAAA,GAAa,GAAG,UAAUjB,KAAK6Q,UAAU1C,MAAM2C,aAAa,MAAM,IAAInQ,EAAAA,QAAE,4BAA4B,GAAGX,KAAK6Q,UAAU1C,MAAM2C,iCAAiC9Q,KAAKsO,oBAAoBtO,KAAK+Q,QAAQ,CAACvP,OAAAA,GAAUxB,KAAKqJ,mBAAmBrJ,KAAKkO,cAAc1M,WAAU5B,EAAAA,EAAAA,IAAEI,KAAKwQ,UAAU,CAAC,WAAMO,GAAQ,MAAM5C,MAAMrO,EAAEqF,KAAKxE,GAAGX,KAAK6Q,WAAWG,iBAAiBnQ,EAAEwN,uBAAuBzO,EAAE2F,mBAAmBvD,GAAGrB,EAAEU,EAAEV,EAAEsJ,MAAMC,YAAY,GAAGlK,KAAKwQ,UAAU,IAAI/J,EAAAA,GAAE,CAACtB,KAAKxE,EAAEuE,SAASpF,EAAEmR,MAAM,YAAYnR,EAAEsK,KAAK,MAAM,IAAI/D,MAAM,kCAAkC,MAAM5D,EAAE,IAAIlC,EAAE,CAAC6G,SAAStH,GAAGkC,EAAEkP,UAAU9J,SAAStH,GAAGqO,MAAMrO,EAAEsO,qBAAqBvN,EAAEwN,uBAAuBzO,EAAEsK,YAAY7I,EAAE8P,uBAAuBrR,GAAGE,KAAKwQ,UAAUlH,sBAAsBxJ,KAAKE,KAAKkO,oBAAoBzL,EAAE2O,OAAOpR,KAAKmM,WAAW,CAACnM,KAAK6Q,UAAU1L,KAAKkM,aAAaC,aAAYnP,EAAAA,EAAAA,KAAG,IAAInC,KAAK6Q,UAAU1L,KAAKkM,aAAaE,OAAO,UAAUzR,IAAIE,KAAKkO,cAAcmB,iBAAiBvP,EAAE,GAAG,CAAC0R,cAAc1R,GAAGE,KAAKkO,cAAcmB,iBAAiB,CAACE,MAAMzP,EAAE2R,UAAUjC,QAAQ,KAAKkC,iBAAiB5R,GAAGE,KAAKkO,cAAcmB,iBAAiB,CAACE,MAAM,GAAGC,QAAQ1P,EAAE2R,eAAe,CAAC,iBAAIE,GAAgB,OAAM,CAAE,CAAC,kBAAIC,GAAiB,OAAM,CAAE,CAAC,wBAAIC,GAAuB,OAAM,CAAE,CAAC,qBAAIC,GAAoB,OAAM,CAAE,CAAC,8BAAIC,GAA6B,OAAM,CAAE,CAAC,4BAAIC,GAA2B,OAAM,CAAE,CAAC,eAAIC,GAAc,MAAM,CAAC,CAAC,CAAC,YAAIhE,GAAW,OAAOjO,KAAKkO,cAAcD,QAAQ,CAAC,gBAAIiE,GAAe,OAAM,CAAE,CAAC,gBAAIC,GAAe,OAAOzL,EAAAA,EAAE0L,KAAK,CAAC,mCAAIC,GAAkC,OAAM,CAAE,CAAC,yBAAIC,GAAwB,OAAO,CAAC,CAAC,cAAIvR,GAAa,OAAOf,KAAKwQ,WAAWzP,YAAY,CAAC,CAAC,kBAAIwR,GAAiB,OAAO,CAAC,CAAC,uBAAIC,GAAsB,OAAM,CAAE,CAAC,iBAAIpJ,GAAgB,OAAOpJ,KAAKwQ,WAAWpH,eAAe,CAAC,CAAC,mBAAIqJ,GAAkB,MAAM3S,EAAEE,KAAKoJ,cAAc,OAAO,IAAIhD,EAAAA,EAAE,IAAIzG,EAAAA,EAAEK,KAAKe,WAAWjB,EAAEA,EAAEE,KAAK4Q,wBAAwB,EAAE,MAAM9Q,EAAEA,EAAEE,KAAKqS,gCAAgC,QAAQ,MAAM,CAAC,2BAAIK,GAA0B,MAAM,UAAU,CAACC,cAAAA,CAAe7S,GAAG,CAAC8S,WAAAA,CAAY9S,GAAG,OAAO,IAAI,CAAC+S,SAAAA,CAAU/S,GAAG,OAAO+N,EAAAA,EAAC,CAACiF,YAAAA,CAAahT,GAAG,OAAOe,EAAAA,EAAAA,KAAG,CAAC,uBAAMkS,CAAkBjT,EAAEa,GAAG,OAAO,IAAI,CAACqS,uBAAAA,CAAwBlT,EAAEa,GAAG,OAAO,IAAI,CAACsS,8BAAAA,CAA+BnT,EAAEe,GAAG,MAAM,IAAIF,EAAAA,QAAE,kCAAkC,CAAC,eAAMuS,CAAUpT,GAAG,CAACqT,aAAAA,CAAcrT,EAAEa,GAAG,CAACyS,8BAAAA,CAA+BtT,GAAG,OAAO,IAAI,CAACuT,mBAAAA,CAAoBvT,GAAG,OAAO,IAAI,IAAGA,EAAAA,EAAAA,GAAE,EAACuB,EAAAA,EAAAA,OAAKoJ,EAAE7F,UAAU,iBAAY,IAAQ9E,EAAAA,EAAAA,GAAE,EAACuB,EAAAA,EAAAA,OAAKoJ,EAAE7F,UAAU,WAAW,OAAM9E,EAAAA,EAAAA,GAAE,EAACuB,EAAAA,EAAAA,OAAKoJ,EAAE7F,UAAU,gBAAgB,MAAM6F,GAAE3K,EAAAA,EAAAA,GAAE,EAAC2C,EAAAA,EAAAA,GAAE,6DAA6DgI,E","sources":["../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/DirectRenderer.js","../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/LodRenderer.js","../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/FeaturePipelineRenderManager.js","../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/Feature3DPipelineWorkerHandle.js","../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/Feature3DPipeline.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{property as r}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{glLayout as i}from\"../../../../support/buffer/glUtil.js\";import{ShaderOutput as s}from\"../../../../webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SyncRenderPlugin as o}from\"../../../../webgl-engine/effects/RenderPlugin.js\";import{GLMaterials as n}from\"../../../../webgl-engine/lib/GLMaterials.js\";import{RenderSlot as a}from\"../../../../webgl-engine/lib/RenderSlot.js\";import{DrawParameters as l}from\"../../../../webgl-engine/materials/DrawParameters.js\";let m=class extends o{constructor(e){super(e),this._glMaterials=null,this._produces=new Map,this._renderGeometries=new Map,this._vaoCache=null,this._drawParameters=new l,this._bufferWriter=null}get produces(){return this._produces}get numFeatures(){const e=6;let r=0;return this._renderGeometries.forEach((t=>r+=t.numElements/e)),r}get usedMemory(){let e=0;return this._renderGeometries.forEach((r=>{e+=r.vao.usedMemory})),e}initialize(){this._bufferWriter=this.material.createBufferWriter(),this.material.produces.forEach(((e,r)=>{this._produces.set(r,(r=>r!==s.Highlight&&r!==s.ShadowHighlight&&e(r)))}))}destroy(){this._glMaterials.dispose();const e=this._renderGeometries.keys();for(const r of e)this.removeRenderGeometry(r)}acquireTechniques(e){const r=this.material;if(!r.shouldRender(e))return null;const{output:t,bind:i}=e,o=r.produces.get(i.slot);if(!o?.(t))return null;if(t===s.Highlight||t===s.ShadowHighlight)return null;const n=this._glMaterials.load(e.rctx,i.slot,t);return n?.beginSlot(i)}render(e,r){const t=this._renderGeometries;if(0===t.size)return;const{bind:i}=e,s=i.slot===a.OCCLUDER_MATERIAL||i.slot===a.TRANSPARENT_OCCLUDER_MATERIAL?i.slot:null,o=e.rctx;o.runAppleAmdDriverHelper(),o.bindTechnique(r,i,this.material.parameters);const n=r.program;for(const[a,l]of t)this._drawParameters.origin=l.localOrigin,n.bindDraw(i,this.material.parameters,this._drawParameters),r.ensureAttributeLocations(l.vao),o.bindVAO(l.vao),o.setPipelineState(r.getPipeline(!1,s)),o.drawArrays(r.primitiveType,0,l.numElements)}initializeRenderContext(e,r){this._glMaterials=new n(this.material,e.materials),this._vaoCache=e.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations,i(this._bufferWriter.vertexBufferLayout))}uninitializeRenderContext(){}addRenderGeometry(e,r,t){this.removeRenderGeometry(e);const i=this._vaoCache.newVao(r.data.byteLength);i.vertexBuffers.get(\"geometry\").setSubData(new Uint8Array(r.data),0,0,r.data.byteLength);const s={localOrigin:t,vao:i,numElements:r.elementCount};return this._renderGeometries.set(e,s),s}removeRenderGeometry(e){const r=this._renderGeometries.get(e);null!=r&&(this._vaoCache.deleteVao(r.vao),this._renderGeometries.delete(e))}hasHighlightOptions(e){return!1}};e([r({constructOnly:!0})],m.prototype,\"material\",void 0),m=e([t(\"esri.views.3d.layers.graphics.pipeline.rendering.DirectRenderer\")],m);export{m as DirectRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import has from\"../../../../../../core/has.js\";import{throwIfAborted as r}from\"../../../../../../core/promiseUtils.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as s}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{VertexAttribute as o}from\"../../../../webgl-engine/lib/VertexAttribute.js\";import{LodRenderer as n}from\"../../../../webgl-engine/lib/lodRendering/LodRenderer.js\";import{LodComponentRenderGeometry as t,LodComponentResources as i,LodLevelResources as a,LodResources as d}from\"../../../../webgl-engine/lib/lodRendering/LodResources.js\";let l=class{constructor(e){this._optionalFields=new Array,this._featureIdToInstanceIndex=new Map,this._disposeResourceHandles=new Array,this._lodRendererResources=null,this.layerUid=e.layerUid,this.view=e.view,this.sharedResources=this.view.sharedSymbolResources,this.scheduler=this.view.resourceController.scheduler}get numFeatures(){return this._featureIdToInstanceIndex.size}get usedMemory(){const e=this._lodRendererResources?.lodRenderer,r=e?.symbol;return(r?.computeUsedMemory()??0)+16*this._featureIdToInstanceIndex.size}destroy(){this._disposeResourceHandles.forEach((e=>e()))}async doLoad(e,s,n){has(\"enable-feature:objectAndLayerId-rendering\")&&this._optionalFields.push(o.OBJECTANDLAYERIDCOLOR);const t=c((e=>s(e)),e),i=this.view._stage,a=t.getMaterials();i.addMany(a),this._addDisposeResource((()=>i.removeMany(a)));const d=t.getTextures();i.addMany(d),this._addDisposeResource((()=>{d.forEach((e=>e.unload())),i.removeMany(d)})),await Promise.all(d.map((e=>this.view._stage.schedule((()=>e.load(i.renderView.renderingContext)),n)))),r(n);const l=await this._createLodRenderer(t,n);this._lodRendererResources={lodRenderer:l,materials:a,textures:d}}addInstances(e){const r=this._lodRendererResources;if(null==r)return;const{featureIds:s,localTransforms:o,globalTransforms:n}=e,t=r.lodRenderer;if(null==t)return;const i=t.instanceData,a=s.length;for(let d=0;d<a;++d){const e=s[d],r=i.addInstance(),t=i.view,a=16*d;t.localTransform.copyFromTypedBuffer(r,o,a),t.globalTransform.copyFromTypedBuffer(r,n,a),i.updateModelTransform(r),i.setVisible(r,!0),this._featureIdToInstanceIndex.set(e,r)}}removeInstances(e){const r=this._lodRendererResources;if(null==r)return;const s=r.lodRenderer.instanceData,o=this._featureIdToInstanceIndex,n=e.length;for(let t=0;t<n;++t){const r=e[t],n=o.get(r);null!=n&&(s.removeInstance(n),o.delete(r))}}_addDisposeResource(e){this._disposeResourceHandles.push(e)}async _createLodRenderer(e,r){const s=this.view._stage,o={layerUid:this.layerUid,graphicUid:e=>1,notifyGraphicGeometryChanged:e=>1,notifyGraphicVisibilityChanged:e=>1},t=new n({symbol:e,optionalFields:this._optionalFields,metadata:o,shaderTransformation:null},this.scheduler);return t.slicePlaneEnabled=!1,this._addDisposeResource((()=>{s.removeRenderPlugin(t),t.destroy()})),await s.addRenderPlugin(t,r),t}};function c(e,r){const s=r.levels.map((r=>{const s=r.components.map((r=>{const s=e(r.materialId);if(!u(s))throw new Error(\"LodRenderer only supports DefaultMaterial\");const o=new t(s,r.renderGeometryBuffer.data,r.renderGeometryBuffer.elementCount,r.boundingInfo);return new i(o)}));return new a(s,r.minScreenSpaceRadius)}));return new d(s)}function u(e){return null!=e&&\"materialType\"in e&&\"default\"===e.materialType}l=e([s(\"esri.views.3d.layers.graphics.pipeline.rendering.LodRenderer\")],l);export{l as LodRenderer,u as isDefaultMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import r from\"../../../../../../core/Accessor.js\";import{makeHandle as t}from\"../../../../../../core/handleUtils.js\";import{releaseMaybe as s}from\"../../../../../../core/maybe.js\";import{property as i}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{ONES as a}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ONES as n}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ViewingMode as d}from\"../../../../../ViewingMode.js\";import{namedAnchorToHUDMaterialAnchorPos as c}from\"../../placementUtils.js\";import{DirectRenderer as l}from\"./DirectRenderer.js\";import{LodRenderer as m}from\"./LodRenderer.js\";import{defaultBoundingBox as u,createTexture as h,requiresHalfTexelOffset as p}from\"../../../../support/engineContent/sdfPrimitives.js\";import{CullFaceOptions as f}from\"../../../../webgl-engine/lib/basicInterfaces.js\";import{DefaultMaterial as w}from\"../../../../webgl-engine/materials/DefaultMaterial.js\";import{HUDMaterial as g}from\"../../../../webgl-engine/materials/HUDMaterial.js\";import{schematicMRRFactors as y}from\"../../../../webgl-engine/materials/pbrUtils.js\";let _=class extends r{constructor(e){super(),this.view=null,this.layerUid=null,this._renderGeometries=new Map,this._materials=new Map,this._directRenderers=new Map,this._lodRenderers=new Map,this.totalFeatures=0,this.view=e.view,this.layerUid=e.layerUid}initialize(){}destroy(){this.removeAllHandles(),this._lodRenderers.forEach((e=>e.destroy()))}async executeRenderCommands(e){for(const r of e)switch(r.id){case\"create-material\":await this._createMaterial(r);break;case\"create-direct-renderer\":await this._createDirectRenderer(r);break;case\"add-direct-renderer-geometry\":await this._addDirectRendererGeometry(r),this._updateFeatureCount();break;case\"remove-direct-renderer-geometry\":await this._removeDirectRendererGeometry(r),this._updateFeatureCount();break;case\"create-lod-renderer\":await this._createLodRenderer(r);break;case\"add-lod-instances\":await this._addLodInstances(r),this._updateFeatureCount();break;case\"remove-lod-instances\":await this._removeLodInstances(r),this._updateFeatureCount()}}_updateFeatureCount(){let e=0;for(const r of this._directRenderers.values())e+=r.numFeatures;for(const r of this._lodRenderers.values())e+=r.numFeatures;this._set(\"totalFeatures\",e)}get usedMemory(){let e=0;for(const r of this._directRenderers.values())e+=r.usedMemory;for(const r of this._lodRenderers.values())e+=r.usedMemory;return e}async _createMaterial(e){const{view:r}=this,{sharedSymbolResources:i}=r;if(null==i)throw new Error(\"No shared symbol resources found!\");const{textures:o}=i,a=r.state.viewingMode===d.Global;let n=null;switch(e.type){case\"default\":n=v(i,{physicalBasedRenderingEnabled:!0,slicePlaneEnabled:!1,castShadows:!0,isPrimitive:!0,screenSizePerspectiveEnabled:!0,doublePrecisionRequiresObfuscation:r._stage.renderView.renderingContext.driverTest.doublePrecisionRequiresObfuscation.result},a);break;case\"hud\":{const[e,r]=R(o,a);this.addHandles([t((()=>s(r)))]),n=e}break;default:throw new Error(`unable to create unknown material type ${e.type}`)}this._materials.set(e.materialId,n)}_getMaterial(e){return this._materials.get(e)}async _createDirectRenderer(e){const r=e.materialId,t=this._getMaterial(r);if(null==t)throw new Error(`material not found ${r}`);const{view:s}=this,i=new l({material:t});this._directRenderers.set(r,i),s._stage.addRenderPlugin(i),s._stage.renderView.renderer.updateHasFlags()}async _addDirectRendererGeometry(e){const r=e.renderGeometryId,t=e.materialId;await this._removeDirectRendererGeometry({renderGeometryId:r});const s=this._directRenderers.get(t);if(null==s)return void console.error(\"no renderer assigned to provided material\");const i=s.addRenderGeometry(r,e.renderGeometryBuffer,e.localOrigin);this._renderGeometries.set(r,{renderGeometry:i,materialId:t}),this.view._stage.renderView.requestRender()}async _removeDirectRendererGeometry(e){const r=e.renderGeometryId,t=this._renderGeometries.get(r);if(null==t)return;const s=t.materialId,i=this._directRenderers.get(s);null!=i?i.removeRenderGeometry(e.renderGeometryId):console.error(\"no renderer assigned to provided material\")}async _createLodRenderer(e){const r=new m({view:this.view,layerUid:this.layerUid}),t=new AbortController,s=e=>this._getMaterial(e);await r.doLoad(e.lodRenderGeometry,s,t.signal),this._lodRenderers.set(e.lodRendererId,r)}async _addLodInstances(e){const r=this._lodRenderers.get(e.lodRendererId);if(null==r)throw new Error(\"no lod renderer assigned to provided lod renderer Id\");r.addInstances(e.data)}async _removeLodInstances(e){const r=this._lodRenderers.get(e.lodRendererId);if(null==r)throw new Error(\"no lod renderer assigned to provided lod renderer Id\");r.removeInstances(e.featureIds)}};function R(e,r){const t={anchorPosition:c.center,occlusionTest:!0,hasSlicePlane:!1,color:[1,0,0,1],outlineColor:[0,0,0,1],outlineSize:1,distanceFieldBoundingBox:u},s=null;if(null!=e){const r=e.fromData(\"circle-icon\",(()=>h(\"circle\")));t.textureId=r.texture.id,t.textureIsSignedDistanceField=!0,t.sampleSignedDistanceFieldTexelCenter=p(\"circle\")}return[new g(t,r),s]}function v(e,r,t){const s={usePBR:r.physicalBasedRenderingEnabled,isSchematic:!0,mrrFactors:y,ambient:a,diffuse:a,hasSlicePlane:r.slicePlaneEnabled,castShadows:r.castShadows,offsetTransparentBackfaces:!r.isPrimitive};return b(s),r.screenSizePerspectiveEnabled&&(s.screenSizePerspective=e.screenSizePerspectiveSettings),s.externalColor=n,s.isInstanced=!0,new w(s,{spherical:t,doublePrecisionRequiresObfuscation:!0})}function b(e){const r=e.opacity??1,t=r<1;return e.transparent=t,e.opacity=r,e.cullFace=t?f.None:f.Back,e}e([i({readOnly:!0})],_.prototype,\"totalFeatures\",void 0),_=e([o(\"esri.views.3d.layers.graphics.pipeline.rendering.FeaturePipelineRenderManager\")],_);export{_ as FeaturePipelineRenderManager,v as createDefaultMaterial,R as createHudMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Promise.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{WorkerHandle as n}from\"../../../../../core/workers/WorkerHandle.js\";import i from\"../../../../../geometry/Extent.js\";import s from\"../../../../../rest/support/FeatureSet.js\";let a=class extends t{constructor(e){super(e),this.schedule=null,this._workerUpdating=!0}get updating(){return this._workerUpdating}initialize(){this._workerHandle=new d(this.schedule,this);const{layer:e,viewSpatialReference:t,renderSpatialReference:r}=this;this.addResolvingPromise((async()=>{await e.load();const{fullExtent:o}=e;await this._workerHandle.invokeMethod(\"setup\",{url:e.parsedUrl?.path??\"\",baseQuery:e.createQuery().toJSON(),viewSpatialReference:t.toJSON(),renderSpatialReference:r.toJSON(),viewingMode:this.viewingMode,objectIdField:e.objectIdField,capabilities:e.capabilities,timeInfo:e.timeInfo?.toJSON(),fieldsIndex:e.fieldsIndex.toJSON(),fullExtent:o?.toJSON()})})()),this.addHandles(this._workerHandle.on(\"notify-updating\",(({updating:e})=>{this._workerUpdating=e})))}onTileTreeChange({added:e,removed:t}){if(0===e.length&&0===t.length)return;const r=e.map(c),o=t.map(c);this._workerHandle.invokeMethod(\"onTileTreeChange\",{added:r,removed:o})}async executeQuery(e,t){const r=await this._workerHandle.invokeMethod(\"executeQuery\",e?.toJSON(),t),o=s.fromJSON(r);return this._ensureLayerOnFeatures(o),o}async executeQueryForIds(e,t){return await this._workerHandle.invokeMethod(\"executeQueryForIds\",e?.toJSON(),t)}async executeQueryForCount(e,t){return await this._workerHandle.invokeMethod(\"executeQueryForCount\",e?.toJSON(),t)}async executeQueryForExtent(e,t){const{count:r,extent:o}=await this._workerHandle.invokeMethod(\"executeQueryForExtent\",e?.toJSON(),t);return{count:r,extent:i.fromJSON(o)}}async executeQueryForLatestObservations(e,t){const r=await this._workerHandle.invokeMethod(\"executeQueryForLatestObservations\",e?.toJSON(),t),o=s.fromJSON(r);return this._ensureLayerOnFeatures(o),o}_ensureLayerOnFeatures(e){const{layer:t}=this;for(const r of e.features)r.layer=t,r.sourceLayer=t}};e([r()],a.prototype,\"updating\",null),e([r({constructOnly:!0})],a.prototype,\"schedule\",void 0),e([r({constructOnly:!0})],a.prototype,\"layer\",void 0),e([r({constructOnly:!0})],a.prototype,\"viewSpatialReference\",void 0),e([r({constructOnly:!0})],a.prototype,\"renderSpatialReference\",void 0),e([r({constructOnly:!0})],a.prototype,\"viewingMode\",void 0),e([r({constructOnly:!0})],a.prototype,\"dispatchRenderCommands\",void 0),e([r()],a.prototype,\"_workerUpdating\",void 0),a=e([o(\"esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorkerHandle\")],a);class d extends n{constructor(e,t){super(\"Feature3DPipelineWorker\",\"setup\",{},e,{strategy:\"dedicated\",client:t})}}function c({id:e,lij:t,extent:r}){return{id:e,lij:t,extent:r}}export{a as Feature3DPipelineWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import r from\"../../../../../core/Error.js\";import{makeHandle as t}from\"../../../../../core/handleUtils.js\";import{destroyMaybe as o}from\"../../../../../core/maybe.js\";import i from\"../../../../../core/Promise.js\";import{on as n}from\"../../../../../core/reactiveUtils.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{FeatureLayerViewPerformanceInfo as u}from\"../../FeatureLayerViewPerformanceInfo.js\";import{Feature3DPipelineWorkerHandle as l}from\"./Feature3DPipelineWorkerHandle.js\";import{FeaturePipelineRenderManager as d}from\"./rendering/FeaturePipelineRenderManager.js\";import{emptyHighlightHandle as p}from\"../../support/highlightUtils.js\";import{LayerViewPerformanceInfo as m}from\"../../support/LayerViewPerformanceInfo.js\";import{UpdatePolicy as c}from\"../../../webgl-engine/lib/UpdatePolicy.js\";let y=class extends i{constructor(e){super(e),this._renderer=null,this.graphicsQuery={queryForSymbologySnapping:(e,t)=>{throw new r(\"unsupported-symbology-snapping\")},executeQuery:async(e,r)=>await this._workerHandle.executeQuery(e,r),executeQueryForIds:async(e,r)=>await this._workerHandle.executeQueryForIds(e,r),executeQueryForCount:async(e,r)=>await this._workerHandle.executeQueryForCount(e,r),executeQueryForExtent:async(e,r)=>await this._workerHandle.executeQueryForExtent(e,r),executeQueryForLatestObservations:async(e,r)=>await this._workerHandle.executeQueryForLatestObservations(e,r)},this.maximumNumberOfFeatures=1e3}initialize(){if(\"point\"!==this.layerView.layer.geometryType)throw new r(\"unsupported-geometry-type\",`${this.layerView.layer.geometryType} is not supported`);this.addResolvingPromise(this.setup())}destroy(){this.removeAllHandles(),this._workerHandle.destroy(),o(this._renderer)}async setup(){const{layer:e,view:r}=this.layerView,{spatialReference:t,renderSpatialReference:o,resourceController:i}=r,s=r.state.viewingMode;if(this._renderer=new d({view:r,layerUid:e.uid}),\"feature\"!==e.type)throw new Error(\"Only FeatureLayer is supported\");const a=new l({schedule:e=>i.immediate.schedule(e),layer:e,viewSpatialReference:t,renderSpatialReference:o,viewingMode:s,dispatchRenderCommands:e=>this._renderer.executeRenderCommands(e)});this._workerHandle=await a.when(),this.addHandles([this.layerView.view.featureTiles.addClient(),n((()=>this.layerView.view.featureTiles.tiles),\"change\",(e=>{this._workerHandle.onTileTreeChange(e)}),{onListenerAdd:e=>this._workerHandle.onTileTreeChange({added:e.toArray(),removed:[]}),onListenerRemove:e=>this._workerHandle.onTileTreeChange({added:[],removed:e.toArray()})})])}get legendEnabled(){return!1}get hasAllFeatures(){return!1}get hasAllFeaturesInView(){return!1}get hasFullGeometries(){return!1}get symbologySnappingSupported(){return!1}get scaleVisibilitySuspended(){return!1}get suspendInfo(){return{}}get updating(){return this._workerHandle.updating}get dataUpdating(){return!1}get updatePolicy(){return c.ASYNC}get maximumNumberOfFeaturesExceeded(){return!1}get updatingProgressValue(){return 1}get usedMemory(){return this._renderer?.usedMemory??0}get unloadedMemory(){return 0}get ignoresMemoryFactor(){return!0}get totalFeatures(){return this._renderer?.totalFeatures??0}get performanceInfo(){const e=this.totalFeatures;return new u(new m(this.usedMemory,e,e,this.maximumNumberOfFeatures,0,null),e,e,this.maximumNumberOfFeaturesExceeded,\"tiles\",\"n/a\")}get suspendResumeExtentMode(){return\"computed\"}forEachGraphic(e){}findGraphic(e){return null}highlight(e){return p}maskOccludee(e){return t()}async whenGraphicBounds(e,r){return null}computeAttachmentOrigin(e,r){return null}elevationAlignPointsInFeatures(e,t){throw new r(\"unsupported-elevation-alignment\")}async doRefresh(e){}setVisibility(e,r){}getMissingAttributesForFeature(e){return null}getHydratedGeometry(e){return null}};e([s()],y.prototype,\"layerView\",void 0),e([s()],y.prototype,\"updating\",null),e([s()],y.prototype,\"totalFeatures\",null),y=e([a(\"esri.views.3d.layers.graphics.pipeline.Feature3DPipeline\")],y);export{y as Feature3DPipeline};\n"],"names":["m","o","constructor","e","super","this","_glMaterials","_produces","Map","_renderGeometries","_vaoCache","_drawParameters","l","_bufferWriter","produces","numFeatures","r","forEach","t","numElements","usedMemory","vao","initialize","material","createBufferWriter","set","s","Highlight","ShadowHighlight","destroy","dispose","keys","removeRenderGeometry","acquireTechniques","shouldRender","output","bind","i","get","slot","n","load","rctx","beginSlot","render","size","a","OCCLUDER_MATERIAL","TRANSPARENT_OCCLUDER_MATERIAL","runAppleAmdDriverHelper","bindTechnique","parameters","program","origin","localOrigin","bindDraw","ensureAttributeLocations","bindVAO","setPipelineState","getPipeline","drawArrays","primitiveType","initializeRenderContext","materials","renderContext","getVaoCache","vertexAttributeLocations","vertexBufferLayout","uninitializeRenderContext","addRenderGeometry","newVao","data","byteLength","vertexBuffers","setSubData","Uint8Array","elementCount","deleteVao","delete","hasHighlightOptions","constructOnly","prototype","_optionalFields","Array","_featureIdToInstanceIndex","_disposeResourceHandles","_lodRendererResources","layerUid","view","sharedResources","sharedSymbolResources","scheduler","resourceController","lodRenderer","symbol","computeUsedMemory","doLoad","has","push","OBJECTANDLAYERIDCOLOR","levels","map","components","materialId","materialType","u","Error","renderGeometryBuffer","boundingInfo","minScreenSpaceRadius","d","c","_stage","getMaterials","addMany","_addDisposeResource","removeMany","getTextures","unload","Promise","all","schedule","renderView","renderingContext","_createLodRenderer","textures","addInstances","featureIds","localTransforms","globalTransforms","instanceData","length","addInstance","localTransform","copyFromTypedBuffer","globalTransform","updateModelTransform","setVisible","removeInstances","removeInstance","graphicUid","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","optionalFields","metadata","shaderTransformation","slicePlaneEnabled","removeRenderPlugin","addRenderPlugin","_","_materials","_directRenderers","_lodRenderers","totalFeatures","removeAllHandles","executeRenderCommands","id","_createMaterial","_createDirectRenderer","_addDirectRendererGeometry","_updateFeatureCount","_removeDirectRendererGeometry","_addLodInstances","_removeLodInstances","values","_set","state","viewingMode","Global","type","usePBR","physicalBasedRenderingEnabled","isSchematic","mrrFactors","y","ambient","diffuse","hasSlicePlane","castShadows","offsetTransparentBackfaces","isPrimitive","opacity","transparent","cullFace","f","None","Back","b","screenSizePerspectiveEnabled","screenSizePerspective","screenSizePerspectiveSettings","externalColor","isInstanced","w","spherical","doublePrecisionRequiresObfuscation","v","driverTest","result","R","addHandles","_getMaterial","renderer","updateHasFlags","renderGeometryId","console","error","renderGeometry","requestRender","AbortController","lodRenderGeometry","signal","lodRendererId","anchorPosition","center","occlusionTest","color","outlineColor","outlineSize","distanceFieldBoundingBox","fromData","h","textureId","texture","textureIsSignedDistanceField","sampleSignedDistanceFieldTexelCenter","p","g","readOnly","_workerUpdating","updating","_workerHandle","layer","viewSpatialReference","renderSpatialReference","addResolvingPromise","fullExtent","invokeMethod","url","parsedUrl","path","baseQuery","createQuery","toJSON","objectIdField","capabilities","timeInfo","fieldsIndex","on","_ref","onTileTreeChange","_ref2","added","removed","executeQuery","fromJSON","_ensureLayerOnFeatures","executeQueryForIds","executeQueryForCount","executeQueryForExtent","count","extent","executeQueryForLatestObservations","features","sourceLayer","strategy","client","_ref3","lij","_renderer","graphicsQuery","queryForSymbologySnapping","async","maximumNumberOfFeatures","layerView","geometryType","setup","spatialReference","uid","immediate","dispatchRenderCommands","when","featureTiles","addClient","tiles","onListenerAdd","toArray","onListenerRemove","legendEnabled","hasAllFeatures","hasAllFeaturesInView","hasFullGeometries","symbologySnappingSupported","scaleVisibilitySuspended","suspendInfo","dataUpdating","updatePolicy","ASYNC","maximumNumberOfFeaturesExceeded","updatingProgressValue","unloadedMemory","ignoresMemoryFactor","performanceInfo","suspendResumeExtentMode","forEachGraphic","findGraphic","highlight","maskOccludee","whenGraphicBounds","computeAttachmentOrigin","elevationAlignPointsInFeatures","doRefresh","setVisibility","getMissingAttributesForFeature","getHydratedGeometry"],"sourceRoot":""}