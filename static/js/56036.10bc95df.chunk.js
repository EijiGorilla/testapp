"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[39935,56036],{39935:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(35143),i=t(91967),l=t(68134),n=t(46053),o=t(21403),r=(t(81806),t(47249),t(85842)),p=t(9624),c=t(80963),d=t(97579),m=t(86300);let g=class extends i.default{constructor(e){super(e),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=(0,d.es)("hybrid",this._basemapCache),this.view=null}initialize(){(0,l.watch)((()=>this.nextBasemap),(e=>{e&&!e.loaded&&e.load().catch((()=>{}))}),l.initial)}destroy(){this.view=null,(0,d.jj)(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return(0,m.n8)(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:e}=this;return!e||!("spatialReferenceLocked"in e)||e.spatialReferenceLocked}get activeBasemap(){return(0,d.es)(this.view?.map?.basemap??"topo-vector",this._basemapCache)}castNextBasemap(e){return(0,d.es)(e,this._basemapCache)}get state(){const{view:e}=this;if(!e?.ready)return"disabled";if(this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:a}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&null!=a&&!e.spatialReference.equals(a)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:e,nextBasemap:a,state:t,view:s}=this;if(!s||"disabled"===t||"incompatible-next-basemap"===t)return;const i=this._viewSpatialReferenceLocked;if(!i){if(await(0,l.whenOnce)((()=>!this._nextBasemapSpatialReferenceTask.updating)),a!==this.nextBasemap||e!==this.activeBasemap)return;const{spatialReference:t}=this._nextBasemapSpatialReferenceTask;if(null==t||(0,c.aI)(s.spatialReference,t)||(0,p.isLoaded)()||(0,p.canProjectWithoutEngine)(s.spatialReference,t)||(this._loadingProjectionEngine=!0,await(0,p.load)(),this._loadingProjectionEngine=!1),a!==this.nextBasemap||e!==this.activeBasemap)return}s.map.basemap=a,i||null==this._nextBasemapSpatialReferenceTask.spatialReference||(0,c.aI)(s.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(s.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=e}static getThumbnailUrl(e){return(0,m.hA)(e)}};(0,s._)([(0,n.MZ)()],g.prototype,"_loadingProjectionEngine",void 0),(0,s._)([(0,n.MZ)({readOnly:!0})],g.prototype,"_nextBasemapSpatialReferenceTask",null),(0,s._)([(0,n.MZ)({readOnly:!0})],g.prototype,"_viewSpatialReferenceLocked",null),(0,s._)([(0,n.MZ)({readOnly:!0})],g.prototype,"activeBasemap",null),(0,s._)([(0,n.MZ)()],g.prototype,"nextBasemap",void 0),(0,s._)([(0,o.w)("nextBasemap")],g.prototype,"castNextBasemap",null),(0,s._)([(0,n.MZ)({readOnly:!0})],g.prototype,"state",null),(0,s._)([(0,n.MZ)()],g.prototype,"view",void 0),(0,s._)([(0,n.MZ)()],g.prototype,"toggle",null),g=(0,s._)([(0,r.$)("esri.widgets.BasemapToggle.BasemapToggleViewModel")],g);const h=g},56036:(e,a,t)=>{t.r(a),t.d(a,{default:()=>w});var s=t(35143),i=t(63241),l=t(76460),n=t(46053),o=t(21403),r=(t(81806),t(47249),t(85842)),p=t(86300),c=t(25329),d=t(39935);const m="esri-basemap-toggle",g="esri-basemap-thumbnail",h={base:m,secondaryBasemapImage:`${m}__image--secondary`,container:`${g} ${m}__container`,image:`${g}__image ${m}__image`,imageLoading:`${m}__image--loading`,overlay:`${g}__overlay ${m}__image-overlay`,title:`${g}__title ${m}__title`,overlayScrim:`${g}__overlay-scrim`};var u=t(94126),v=t(98108),_=(t(76099),t(63582)),b=t(54761);function y(e){const a=(0,p.hA)(e);return a?{backgroundImage:"url("+a+")"}:{backgroundImage:""}}const f={title:!1};let B=class extends c.default{constructor(e,a){super(e,a),this.messages=null,this.viewModel=new d.default,this.visibleElements={...f},this.toggle=()=>this.viewModel.toggle(),(0,i.ED)(l.A.getLogger(this),"Basemap Toggle","arcgis-basemap-toggle",{version:"4.32"})}loadDependencies(){return(0,u.W)({button:()=>Promise.resolve().then(t.bind(t,43285)),icon:()=>Promise.resolve().then(t.bind(t,16702)),scrim:()=>Promise.resolve().then(t.bind(t,32263))})}get activeBasemap(){return this.viewModel.activeBasemap}get icon(){return"layer-basemap"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get nextBasemap(){return this.viewModel.nextBasemap}set nextBasemap(e){this.viewModel.nextBasemap=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...f,...e}}render(){const e=this.viewModel,a="disabled"===e.state?null:e.activeBasemap,t="disabled"===e.state?null:e.nextBasemap,s="loading"===e.state,i="incompatible-next-basemap"===e.state,l=t?.title??"",n=t&&"loaded"!==t.loadStatus;let o;const r=this.visibleElements.title&&l,p=i;return(r||p)&&(o=(0,b.K)("div",{class:h.overlay,key:"overlay"},r?(0,b.K)("span",{class:h.title,title:l},l):null,p?(0,b.K)("calcite-scrim",{class:h.overlayScrim,title:this.messages.incompatibleSpatialReference},(0,b.K)("calcite-icon",{icon:"exclamation-mark-triangle"})):null)),(0,b.K)("div",{class:this.classes(h.base,v.D.widget)},(0,b.K)("calcite-button",{appearance:"transparent","data-basemap-id":t?t.id:"",disabled:i,kind:"neutral",label:this.label,onclick:()=>{this.toggle()},title:this.label},(0,b.K)("div",{class:this.classes(h.container,h.secondaryBasemapImage)},(0,b.K)("div",{class:h.image,styles:y(a)})),(0,b.K)("div",{class:h.container},(0,b.K)("div",{class:this.classes(h.image,n?h.imageLoading:null),styles:y(t)},n||s?(0,b.K)("calcite-scrim",null,(0,b.K)("span",{"aria-hidden":"true",class:v.D.loaderAnimation,role:"presentation"})):null),o)))}};(0,s._)([(0,n.MZ)({readOnly:!0})],B.prototype,"activeBasemap",null),(0,s._)([(0,n.MZ)()],B.prototype,"icon",null),(0,s._)([(0,n.MZ)()],B.prototype,"label",null),(0,s._)([(0,n.MZ)(),(0,_.G)("esri/widgets/BasemapToggle/t9n/BasemapToggle")],B.prototype,"messages",void 0),(0,s._)([(0,n.MZ)()],B.prototype,"nextBasemap",null),(0,s._)([(0,n.MZ)()],B.prototype,"view",null),(0,s._)([(0,n.MZ)({type:d.default})],B.prototype,"viewModel",void 0),(0,s._)([(0,n.MZ)()],B.prototype,"visibleElements",void 0),(0,s._)([(0,o.w)("visibleElements")],B.prototype,"castVisibleElements",null),B=(0,s._)([(0,r.$)("esri.widgets.BasemapToggle")],B);const w=B}}]);
//# sourceMappingURL=56036.10bc95df.chunk.js.map