{"version":3,"file":"static/js/57383.a6e6542b.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/CatalogDynamicGroupLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Collection.js\";import{handlesGroup as t,makeHandle as s}from\"../../core/handleUtils.js\";import i from\"../../core/Logger.js\";import{debounce as a,ignoreAbortErrors as o}from\"../../core/promiseUtils.js\";import{sqlAnd as n}from\"../../core/sql.js\";import{property as d}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";const l=Symbol(),u=u=>{let y=class extends u{constructor(){super(...arguments),this.layerViews=new r,this._debouncedUpdate=a((async()=>{const{layer:e,parent:r}=this,t=r?.footprintLayerView;let s=[];const i=this._createQuery();if(i&&t){const{features:r}=await t.queryFeatures(i);this.suspended||(s=r.map((r=>e.acquireLayer(r))))}this.removeHandles(l),this.addHandles(s,l)}))}get creatingLayerViews(){return this.view?.layerViewManager.isCreatingLayerViewsForLayer(this.layer)??!1}isUpdating(){return this.creatingLayerViews||this.layer.updating||this.layerViews.some((e=>e.updating))}enableLayerUpdates(){return t([this._updatingHandles.addWhen((()=>!1===this.parent?.footprintLayerView?.dataUpdating),(()=>this.updateLayers())),this._updatingHandles.add((()=>[this.layer.maximumVisibleSublayers,this.layer.parent?.orderBy,this.parent?.footprintLayerView?.filter,this.parent?.footprintLayerView?.timeExtent,this.suspended]),(()=>this.updateLayers())),s((()=>this.removeHandles(l)))])}updateLayers(){this.suspended?this.removeHandles(l):this._updatingHandles.addPromise(o(this._debouncedUpdate()).catch((e=>{i.getLogger(this).error(e)})))}_createQuery(){const e=this.parent?.footprintLayerView,r=this.layer?.parent;if(!e||!r||r.destroyed)return null;const{layer:{maximumVisibleSublayers:t},view:{scale:s}}=this;if(!t)return null;const{itemTypeField:i,itemSourceField:a,itemNameField:o,minScaleField:d,maxScaleField:p,objectIdField:l,orderBy:u}=r,y=n(`${d} IS NULL OR ${s} <= ${d} OR ${d} = 0`,`${p} IS NULL OR ${s} >= ${p}`),c=u?.find((e=>e.field&&!e.valueExpression)),m=e.createQuery();if(m.returnGeometry=!1,m.num=t,m.outFields=[l,a,o],m.where=n(m.where,y),null!=this.unsupportedItemTypes){const e=`${i} NOT IN (${this.unsupportedItemTypes.map((e=>`'${e}'`))})`;m.where=n(m.where,e)}return c?.field&&(m.orderByFields=[`${c.field} ${\"descending\"===c.order?\"DESC\":\"ASC\"}`],m.outFields.push(c.field)),m}};return e([d({readOnly:!0})],y.prototype,\"creatingLayerViews\",null),e([d()],y.prototype,\"layer\",void 0),e([d()],y.prototype,\"layerViews\",void 0),e([d({readOnly:!0})],y.prototype,\"unsupportedItemTypes\",void 0),e([d()],y.prototype,\"parent\",void 0),e([d({readOnly:!0})],y.prototype,\"isUpdating\",null),y=e([p(\"esri.views.layers.CatalogDynamicGroupLayerView\")],y),y};export{u as default};\n"],"names":["l","Symbol","u","y","constructor","super","arguments","this","layerViews","r","_debouncedUpdate","a","async","layer","e","parent","t","footprintLayerView","s","i","_createQuery","features","queryFeatures","suspended","map","acquireLayer","removeHandles","addHandles","creatingLayerViews","view","layerViewManager","isCreatingLayerViewsForLayer","isUpdating","updating","some","enableLayerUpdates","_updatingHandles","addWhen","dataUpdating","updateLayers","add","maximumVisibleSublayers","orderBy","filter","timeExtent","addPromise","o","catch","getLogger","error","destroyed","scale","itemTypeField","itemSourceField","itemNameField","minScaleField","d","maxScaleField","p","objectIdField","n","c","find","field","valueExpression","m","createQuery","returnGeometry","num","outFields","where","unsupportedItemTypes","orderByFields","order","push","readOnly","prototype"],"sourceRoot":""}