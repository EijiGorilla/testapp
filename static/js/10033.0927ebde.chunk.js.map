{"version":3,"file":"static/js/10033.0927ebde.chunk.js","mappings":"4QAIgYA,eAAeC,EAAEC,EAAEC,GAAG,IAAIC,EAAE,GAAG,WAAWF,EAAE,CAAC,MAAMG,GAAEC,EAAAA,EAAAA,uBAAEJ,EAAEK,UAAUC,OAAON,EAAEO,WAAWC,QAAQL,GAAG,UAAUA,EAAEM,OAAOC,WAAWV,EAAEW,iBAAiBX,EAAEW,gBAAgBC,SAASZ,IAAI,MAAMC,GAAEG,EAAAA,EAAAA,uBAAE,CAACJ,IAAIG,EAAEU,QAAQZ,EAAE,IAAIC,EAAEC,CAAC,MAAMD,EAAE,IAAIC,EAAAA,QAAEH,GAAG,MAAMD,EAAE,IAAIe,IAAI,IAAI,MAAMC,KAAKb,EAAE,CAAC,MAAMF,EAAED,EAAEiB,IAAID,EAAEE,mBAAmBjB,EAAEA,EAAEa,KAAKE,GAAGhB,EAAEmB,IAAIH,EAAEE,kBAAkB,IAAId,EAAAA,QAAE,CAACY,IAAI,CAAC,MAAMI,EAAE,IAAIhB,EAAAA,QAAE,IAAI,MAAMA,EAAEC,KAAKL,EAAE,CAAC,MAAMC,EAAE,IAAIe,EAAAA,QAAE,CAACK,IAAIjB,IAAI,SAASH,EAAEqB,QAAQrB,EAAEsB,4BAA4B,SAAS,MAAMpB,EAAE,IAAIqB,EAAAA,QAAE,CAACH,IAAIpB,EAAEsB,8BAA8BH,EAAEN,KAAK,IAAIW,EAAAA,QAAE,CAACC,yBAAyBvB,EAAEwB,iBAAiBtB,EAAEuB,0BAA0B1B,IAAI,CAAC,OAAOkB,CAAC,CAAC,MAAMA,EAAE,IAAIL,IAAIhB,eAAe8B,EAAEzB,GAAO,IAALY,EAACc,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAAK,MAAML,QAAQzB,EAAEI,EAAE6B,IAAIjB,GAAG,OAAOb,EAAAA,EAAAA,IAAEiB,EAAEhB,GAAG,KAAKA,EAAE8B,YAAWjC,EAAAA,EAAAA,KAAG,KAAKmB,EAAEe,OAAO/B,GAAGqB,EAAEZ,SAAST,GAAGA,EAAEgC,WAAW,KAAKX,EAAEZ,SAAST,GAAGA,EAAEkB,OAAOe,OAAOjC,IAAIF,EAAAA,EAAEoC,UAAU,0CAA0CC,MAAM,kCAAkCnC,EAAE,MAAMqB,IAAI,C,gKCAt2B,IAAIzB,EAAE,cAAcyB,EAAAA,EAAEe,iBAAiBhB,EAAAA,IAAIiB,WAAAA,CAAYrC,GAAGsC,MAAMtC,GAAGuC,KAAKjB,yBAAyB,KAAKiB,KAAKzB,kBAAkB,KAAKyB,KAAKtB,IAAI,KAAKsB,KAAKC,eAAe,KAAKD,KAAKE,mBAAmB,KAAKF,KAAKG,aAAa,GAAGH,KAAKhB,iBAAiB,IAAIzB,EAAAA,QAAEyC,KAAKf,2BAA0B,EAAGe,KAAKI,MAAM,WAAW,CAACC,UAAAA,GAAaL,KAAKtB,IAAIsB,KAAKjB,yBAAyBL,IAAIsB,KAAKzB,kBAAkByB,KAAKtB,IAAI4B,QAAQ,6BAA6B,kBAAkBN,KAAKT,WAAW,CAACS,KAAKhB,iBAAiBuB,GAAG,cAAc9C,IAAI,GAAGA,EAAE+C,KAAKjC,kBAAkBkC,gBAAgBT,KAAKzB,kBAAkBkC,cAAc,OAAOhD,EAAEiD,sBAAsBrC,EAAAA,EAAEsB,UAAUK,MAAMJ,MAAM,SAAS,gEAAgE,IAAII,KAAKhB,iBAAiBuB,GAAG,iBAAiB9C,IAAI,GAAG,IAAIuC,KAAKhB,iBAAiB2B,MAAMvB,QAAQY,KAAKC,gBAAgB,SAASD,KAAKC,gBAAgB,SAASD,KAAKjB,yBAAyB6B,YAAYZ,KAAKC,gBAAgB,OAAOxC,EAAEiD,sBAAsBrC,EAAAA,EAAEsB,UAAUK,MAAMJ,MAAM,YAAY,qCAAqC,KAAK,CAACjB,IAAAA,CAAKlB,GAAG,OAAOuC,KAAKa,oBAAoBb,KAAKc,YAAYrD,IAAIsD,QAAQC,QAAQhB,KAAK,CAAC,4BAAIiB,GAA2B,OAAOjB,KAAKjB,yBAAyBkC,wBAAwB,CAAC,aAAIC,GAAY,OAAOlB,KAAKC,kBAAkBD,KAAKC,gBAAgB,SAASD,KAAKC,gBAAgBD,KAAKC,eAAekB,OAAOnB,KAAKiB,yBAAyBE,IAAI,CAAC,qBAAMC,GAAsB,OAALjC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,KAAgBa,KAAKG,mBAAmBH,KAAKjB,yBAAyBqC,mBAAmBpB,KAAKG,YAAY,CAAC,kBAAMkB,CAAa5D,EAAEF,GAAG,GAAGyC,KAAKC,gBAAgB,SAASD,KAAKC,gBAAgBxC,EAAE6D,OAAOtB,KAAKC,eAAeqB,KAAK,OAAM,EAAG,MAAMhE,QAAQ0C,KAAKjB,yBAAyBsC,aAAa5D,EAAEF,GAAG,OAAOD,SAAS0C,KAAKoB,iBAAgB,GAAI9D,CAAC,CAAC,mBAAMiE,CAAc9D,GAAG,GAAGuC,KAAKC,gBAAgB,SAASD,KAAKC,gBAAgBxC,EAAE6D,OAAOtB,KAAKC,eAAeqB,KAAK,OAAM,EAAG,MAAM/D,QAAQyC,KAAKjB,yBAAyBwC,cAAc9D,GAAG,OAAOF,SAASyC,KAAKoB,iBAAgB,GAAI7D,CAAC,CAAC,4BAAMiE,GAAyB,OAAOxB,KAAKC,gBAAgB,SAASD,KAAKC,eAAeD,KAAKjB,yBAAyByC,uBAAuBxB,KAAKC,gBAAgBD,KAAKjB,yBAAyByC,uBAAuBxB,KAAKiB,yBAAyB,CAAC,kBAAMQ,GAAe,GAAGzB,KAAK0B,8BAA8B,MAAM,CAACC,SAAQ,GAAI,IAAI3B,KAAKf,0BAA0B,CAAC,MAAMxB,QAAQuC,KAAKjB,yBAAyB6C,uBAAuB5B,KAAKC,gBAAgB,IAAIxC,EAAEkE,QAAQ,OAAOlE,EAAEuC,KAAKI,MAAM,WAAW,CAAC,MAAM3C,QAAQuC,KAAKjB,yBAAyB8C,uBAAuB7B,KAAKC,gBAAgB,OAAOxC,EAAEkE,UAAU3B,KAAKI,MAAM,cAAc3C,CAAC,CAAC,iBAAMqE,CAAYrE,GAAG,GAAGuC,KAAK0B,8BAA8B,MAAM,CAACC,SAAQ,GAAI,MAAMpE,QAAQyC,KAAKjB,yBAAyBgD,sBAAsB/B,KAAKC,eAAexC,GAAG,IAAIF,EAAEoE,QAAQ,OAAOpE,EAAE,GAAGyC,KAAKI,MAAM,aAAaJ,KAAKf,0BAA0B,CAAC,MAAMxB,QAAQuC,KAAKjB,yBAAyBiD,sBAAsBhC,KAAKC,gBAAgB,OAAOxC,EAAEkE,UAAU3B,KAAKI,MAAM,aAAa3C,CAAC,CAAC,OAAOF,CAAC,CAAC,mBAAM0E,CAAcxE,GAAG,IAAIF,EAAE,KAAK,GAAGyC,KAAKf,0BAA0B,CAAC,GAAGe,KAAK0B,4BAA4BjE,GAAGA,GAAG,SAASA,GAAGF,QAAQyC,KAAKjB,yBAAyByC,uBAAuB/D,GAAGuC,KAAKI,MAAM,WAAW7C,GAAG2E,OAAO,YAAY,aAAalC,KAAKI,MAAM,iBAAiB,UAAUJ,KAAKjB,yBAAyBoD,aAAa1E,GAAG,MAAM,IAAIH,EAAAA,QAAE,4CAA4CG,GAAGuC,KAAK0B,4BAA4B1B,KAAKC,uBAAuBD,KAAKjB,yBAAyBqD,YAAYpC,KAAKC,eAAe,CAAC,MAAMnB,QAAQkB,KAAKjB,yBAAyBsD,wBAAwBrC,KAAKhB,iBAAiBgB,KAAKC,eAAexC,GAAG,IAAIoB,GAAE,EAAG,OAAOC,EAAEZ,SAAS,CAACT,EAAEF,KAAKsB,EAAEA,GAAGpB,EAAEkE,OAAO,IAAI9C,IAAImB,KAAKC,eAAexC,EAAEuC,KAAKE,mBAAmB3C,SAASyC,KAAKwB,yBAAyBxB,KAAK0B,8BAA8B1B,KAAKC,gBAAgB,SAASD,KAAKC,eAAeD,KAAKI,MAAM,WAAWJ,KAAKE,oBAAoBgC,OAAO,YAAY,YAAYlC,KAAKI,MAAM,YAAYJ,KAAKI,MAAM,SAASJ,KAAKjB,yBAAyB6B,YAAYZ,KAAKC,gBAAgB,YAAY,aAAanB,CAAC,CAAC,UAAMwD,GAAO,OAAOtC,KAAK0B,8BAA8B,CAACC,SAAQ,IAAK3B,KAAKjB,yBAAyBuD,KAAKtC,KAAKC,gBAAgB,CAAC0B,SAAQ,GAAI,CAAC,UAAMY,GAAO,OAAOvC,KAAK0B,8BAA8B,CAACC,SAAQ,IAAK3B,KAAKjB,yBAAyBwD,KAAKvC,KAAKC,gBAAgB,CAAC0B,SAAQ,GAAI,CAAC,iBAAMb,CAAYrD,SAASuC,KAAKjB,yBAAyBJ,KAAKlB,GAAGuC,KAAKI,MAAM,YAAYJ,KAAKE,yBAAyBF,KAAKwB,yBAAyBxB,KAAKhB,iBAAiBd,SAAST,IAAIuC,KAAKC,eAAe,SAASD,KAAKC,gBAAgBxC,EAAE+E,WAAWxC,KAAKC,eAAekB,KAAK1D,EAAEgF,eAAe,OAAOhF,EAAEgF,eAAezC,KAAKC,eAAexC,EAAE+E,WAAW,OAAO/E,EAAE+E,WAAW,KAAK/E,EAAEgF,eAAe,KAAK,IAAIzC,KAAKf,4BAA4Be,KAAK0B,8BAA8B1B,KAAKC,gBAAgB,SAASD,KAAKC,eAAeD,KAAKI,MAAM,WAAWJ,KAAKE,oBAAoBgC,OAAO,YAAY,YAAYlC,KAAKI,MAAM,kBAAkBJ,KAAKjB,yBAAyBoD,aAAanC,KAAKC,kBAAkBD,KAAKI,MAAM,aAAa,CAACsB,2BAAAA,GAAkD,IAAtBjE,EAAC0B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAACa,KAAKC,eAAgB,QAAQxC,GAAG,SAASA,IAAIA,EAAE0D,OAAOnB,KAAKjB,yBAAyBkC,yBAAyBE,IAAI,IAAG1D,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,OAAKH,EAAEqF,UAAU,gCAA2B,IAAQjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,OAAKH,EAAEqF,UAAU,yBAAoB,IAAQjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,OAAKH,EAAEqF,UAAU,WAAM,IAAQjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,OAAKH,EAAEqF,UAAU,sBAAiB,IAAQjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,OAAKH,EAAEqF,UAAU,0BAAqB,IAAQjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,OAAKH,EAAEqF,UAAU,oBAAe,IAAQjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,OAAKH,EAAEqF,UAAU,wBAAmB,IAAQjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,OAAKH,EAAEqF,UAAU,iCAA4B,IAAQjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,OAAKH,EAAEqF,UAAU,aAAQ,IAAQjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,IAAE,CAACmF,UAAS,KAAMtF,EAAEqF,UAAU,2BAA2B,OAAMjF,EAAAA,EAAAA,GAAE,EAACD,EAAAA,EAAAA,IAAE,CAACmF,UAAS,KAAMtF,EAAEqF,UAAU,YAAY,MAAMrF,GAAEI,EAAAA,EAAAA,GAAE,EAACC,EAAAA,EAAAA,GAAE,2CAA2CL,GAAG,MAAMuF,EAAEvF,C","sources":["../node_modules/@arcgis/core/versionManagement/utils.js","../node_modules/@arcgis/core/versionManagement/VersioningState.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../core/Collection.js\";import{makeHandle as r}from\"../core/handleUtils.js\";import t from\"../core/Logger.js\";import{getOrCreateMapValue as o}from\"../core/MapUtils.js\";import n from\"../rest/featureService/FeatureService.js\";import s from\"./VersioningState.js\";import i from\"./VersionManagementService.js\";import{createVersionAdapters as a}from\"./versionAdapters/utils.js\";async function c(r,t){let o;if(\"layers\"in r){const e=a(r.allTables.concat(r.allLayers).filter((e=>\"group\"!==e.type)).toArray());r.utilityNetworks&&r.utilityNetworks.forEach((r=>{const t=a([r]);e.push(...t)})),o=e}else o=new e(r);const c=new Map;for(const n of o){const r=c.get(n.featureServiceUrl);r?r.push(n):c.set(n.featureServiceUrl,new e([n]))}const l=new e;for(const[e,a]of c){const r=new n({url:e});if(await r.load(),!r.versionManagementServiceUrl)continue;const o=new i({url:r.versionManagementServiceUrl});l.push(new s({versionManagementService:o,versionableItems:a,usePersistentReadSessions:t}))}return l}const l=new Map;async function f(e,n=!1){const s=await c(e.map,n);return o(l,e,(()=>(e.addHandles(r((()=>{l.delete(e),s.forEach((e=>e.destroy()))}))),s.forEach((e=>e.load().catch((e=>{t.getLogger(\"esri.versionManagement.VersioningState\").error(\"Failed to load Versioning State\",e)})))),s)))}export{c as createVersioningStates,f as getVersioningStates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/Collection.js\";import r from\"../core/Error.js\";import s from\"../core/JSONSupport.js\";import i from\"../core/Loadable.js\";import n from\"../core/Logger.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";let c=class extends(s.JSONSupportMixin(i)){constructor(e){super(e),this.versionManagementService=null,this.featureServiceUrl=null,this.url=null,this.currentVersion=null,this.currentVersionInfo=null,this.versionInfos=[],this.versionableItems=new t,this.usePersistentReadSessions=!1,this.state=\"lock-none\"}initialize(){this.url=this.versionManagementService.url,this.featureServiceUrl=this.url.replace(/\\/VersionManagementServer/i,\"/FeatureServer\"),this.addHandles([this.versionableItems.on(\"before-add\",(e=>{if(e.item.featureServiceUrl.toLowerCase()!==this.featureServiceUrl.toLowerCase())return e.preventDefault(),void n.getLogger(this).error(\"#add()\",\"Cannot add versionAdapter, feature service urls do not match.\")})),this.versionableItems.on(\"before-remove\",(e=>{if(0===this.versionableItems.items.length&&this.currentVersion&&\"name\"in this.currentVersion&&\"none\"!==this.versionManagementService.getLockType(this.currentVersion))return e.preventDefault(),void n.getLogger(this).error(\"#remove()\",\"Cannot remove last versionAdapter.\")}))])}load(e){return this.addResolvingPromise(this._setUpState(e)),Promise.resolve(this)}get defaultVersionIdentifier(){return this.versionManagementService.defaultVersionIdentifier}get isDefault(){return!this.currentVersion||!!this.currentVersion&&\"name\"in this.currentVersion&&this.currentVersion.name===this.defaultVersionIdentifier.name}async getVersionInfos(e=!1){return e&&(this.versionInfos=await this.versionManagementService.getVersionInfos()),this.versionInfos}async alterVersion(e,t){if(this.currentVersion&&\"guid\"in this.currentVersion&&e.guid===this.currentVersion.guid)return!1;const r=await this.versionManagementService.alterVersion(e,t);return r&&await this.getVersionInfos(!0),r}async deleteVersion(e){if(this.currentVersion&&\"guid\"in this.currentVersion&&e.guid===this.currentVersion.guid)return!1;const t=await this.versionManagementService.deleteVersion(e);return t&&await this.getVersionInfos(!0),t}async getVersionInfoExtended(){return this.currentVersion&&\"name\"in this.currentVersion?this.versionManagementService.getVersionInfoExtended(this.currentVersion):this.versionManagementService.getVersionInfoExtended(this.defaultVersionIdentifier)}async startEditing(){if(this._isDefaultOrHistoricVersion())return{success:!1};if(!this.usePersistentReadSessions){const e=await this.versionManagementService.startReadingWithResult(this.currentVersion);if(!e.success)return e;this.state=\"lock-read\"}const e=await this.versionManagementService.startEditingWithResult(this.currentVersion);return e.success&&(this.state=\"lock-write\"),e}async stopEditing(e){if(this._isDefaultOrHistoricVersion())return{success:!1};const t=await this.versionManagementService.stopEditingWithResult(this.currentVersion,e);if(!t.success)return t;if(this.state=\"lock-read\",!this.usePersistentReadSessions){const e=await this.versionManagementService.stopReadingWithResult(this.currentVersion);return e.success&&(this.state=\"lock-none\"),e}return t}async changeVersion(e){let t=null;if(this.usePersistentReadSessions){if(this._isDefaultOrHistoricVersion(e))e&&\"name\"in e?(t=await this.versionManagementService.getVersionInfoExtended(e),this.state=\"public\"===t?.access?\"lock-none\":\"lock-read\"):this.state=\"lock-read\";else if(!await this.versionManagementService.startReading(e))throw new r(\"Failed to acquire read lock for version: \"+e);this._isDefaultOrHistoricVersion(this.currentVersion)||await this.versionManagementService.stopReading(this.currentVersion)}const s=await this.versionManagementService.changeVersionWithResult(this.versionableItems,this.currentVersion,e);let i=!1;return s.forEach(((e,t)=>{i=i||e.success})),i&&(this.currentVersion=e,this.currentVersionInfo=t||await this.getVersionInfoExtended(),this._isDefaultOrHistoricVersion()?this.currentVersion&&\"name\"in this.currentVersion?this.state=\"public\"===this.currentVersionInfo?.access?\"lock-none\":\"lock-read\":this.state=\"lock-read\":this.state=\"read\"!==this.versionManagementService.getLockType(this.currentVersion)?\"lock-none\":\"lock-read\"),s}async undo(){return this._isDefaultOrHistoricVersion()?{success:!1}:(this.versionManagementService.undo(this.currentVersion),{success:!0})}async redo(){return this._isDefaultOrHistoricVersion()?{success:!1}:(this.versionManagementService.redo(this.currentVersion),{success:!0})}async _setUpState(e){await this.versionManagementService.load(e),this.state=\"lock-none\",this.currentVersionInfo=await this.getVersionInfoExtended(),this.versionableItems.forEach((e=>{this.currentVersion?\"name\"in this.currentVersion?(e.gdbVersion=this.currentVersion.name,e.historicMoment=null):(e.historicMoment=this.currentVersion,e.gdbVersion=null):(e.gdbVersion=null,e.historicMoment=null)})),this.usePersistentReadSessions&&(this._isDefaultOrHistoricVersion()?this.currentVersion&&\"name\"in this.currentVersion?this.state=\"public\"===this.currentVersionInfo?.access?\"lock-none\":\"lock-read\":this.state=\"lock-read\":await this.versionManagementService.startReading(this.currentVersion)&&(this.state=\"lock-read\"))}_isDefaultOrHistoricVersion(e=this.currentVersion){return!(e&&\"name\"in e)||e.name===this.versionManagementService.defaultVersionIdentifier.name}};e([o()],c.prototype,\"versionManagementService\",void 0),e([o()],c.prototype,\"featureServiceUrl\",void 0),e([o()],c.prototype,\"url\",void 0),e([o()],c.prototype,\"currentVersion\",void 0),e([o()],c.prototype,\"currentVersionInfo\",void 0),e([o()],c.prototype,\"versionInfos\",void 0),e([o()],c.prototype,\"versionableItems\",void 0),e([o()],c.prototype,\"usePersistentReadSessions\",void 0),e([o()],c.prototype,\"state\",void 0),e([o({readOnly:!0})],c.prototype,\"defaultVersionIdentifier\",null),e([o({readOnly:!0})],c.prototype,\"isDefault\",null),c=e([a(\"esri.versionManagement.VersioningState\")],c);const u=c;export{u as default};\n"],"names":["async","c","r","t","o","e","a","allTables","concat","allLayers","filter","type","toArray","utilityNetworks","forEach","push","Map","n","get","featureServiceUrl","set","l","url","load","versionManagementServiceUrl","i","s","versionManagementService","versionableItems","usePersistentReadSessions","f","arguments","length","undefined","map","addHandles","delete","destroy","catch","getLogger","error","JSONSupportMixin","constructor","super","this","currentVersion","currentVersionInfo","versionInfos","state","initialize","replace","on","item","toLowerCase","preventDefault","items","getLockType","addResolvingPromise","_setUpState","Promise","resolve","defaultVersionIdentifier","isDefault","name","getVersionInfos","alterVersion","guid","deleteVersion","getVersionInfoExtended","startEditing","_isDefaultOrHistoricVersion","success","startReadingWithResult","startEditingWithResult","stopEditing","stopEditingWithResult","stopReadingWithResult","changeVersion","access","startReading","stopReading","changeVersionWithResult","undo","redo","gdbVersion","historicMoment","prototype","readOnly","u"],"sourceRoot":""}